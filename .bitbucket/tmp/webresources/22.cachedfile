;
/* module-key = 'se.bjurr.prnfs.pull-request-notifier-for-stash:pr-triggerbutton', location = '3rdparty.js' */
define("plugin/prnfb/3rdparty",["jquery"],function(a){!function(d,b){if("function"==typeof define&&define.amd){define(["exports","jquery"],function(g,f){return b(g,f)})}else{if("undefined"!=typeof exports){var c=require("jquery");b(exports,c)}else{b(d,d.jQuery||d.Zepto||d.ender||d.$)}}}(this,function(f,c){function d(q,g){function j(n,h,l){return n[h]=l,n}function w(s,n){for(var o,h=s.match(b.key);void 0!==(o=h.pop());){if(b.push.test(o)){var l=y(s.replace(/\[\]$/,""));n=j([],l,n)}else{b.fixed.test(o)?n=j([],o,n):b.named.test(o)&&(n=j({},o,n))}}return n}function y(h){return void 0===m[h]&&(m[h]=0),m[h]++}function x(h){switch(c('[name="'+h.name+'"]',g).attr("type")){case"checkbox":return"on"===h.value?!0:h.value;default:return h.value}}function p(e){if(!b.validate.test(e.name)){return this}var h=w(e.name,x(e));return k=q.extend(!0,k,h),this}function t(h){if(!q.isArray(h)){throw new Error("formSerializer.addPairs expects an Array")}for(var l=0,e=h.length;e>l;l++){this.addPair(h[l])}return this}function i(){return k}function v(){return JSON.stringify(i())}var k={},m={};this.addPair=p,this.addPairs=t,this.serialize=i,this.serializeJSON=v}var b={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return d.patterns=b,d.serializeObject=function(){return new d(c,this).addPairs(this.serializeArray()).serialize()},d.serializeJSON=function(){return new d(c,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof c.fn&&(c.fn.serializeObject=d.serializeObject,c.fn.serializeJSON=d.serializeJSON),f.FormSerializer=d,d});a.fn.populate=function(i,f){function h(n,m){m=m||"";if(n==undefined){}else{if(n.constructor==Object){for(var o in n){var k=m+(m==""?o:"["+o+"]");h(n[o],k)}}else{if(n.constructor==Array){for(var l=0;l<n.length;l++){var j=f.useIndices?l:"";j=f.phpNaming?"["+j+"]":j;var k=m+j;h(n[l],k)}}else{if(b[m]==undefined){b[m]=n}else{if(b[m].constructor!=Array){b[m]=[b[m],n]}else{b[m].push(n)}}}}}}function d(j){if(window.console&&console.log){console.log(j)}}function c(j){if(!f.phpNaming){j=j.replace(/\[\]$/,"")}return j}function e(k,l,n){var j=f.identifier=="id"?"#"+l:"["+f.identifier+'="'+l+'"]';var m=jQuery(j,k);n=n.toString();n=n=="null"?"":n;m.html(n)}function g(l,k,r){var k=c(k);var p=l[k];if(p==undefined){p=jQuery("#"+k,l);if(p){p.html(r);return true}if(f.debug){d("No such element as "+k)}return false}if(f.debug){_populate.elements.push(p)}elements=p.type==undefined&&p.length?p:[p];for(var q=0;q<elements.length;q++){var p=elements[q];if(!p||typeof p=="undefined"||typeof p=="function"){continue}switch(p.type||p.tagName){case"radio":p.checked=(p.value!=""&&r.toString()==p.value);case"checkbox":var s=r.constructor==Array?r:[r];for(var n=0;n<s.length;n++){var m=s[n];if(m==true){m="true"}p.checked|=p.value==m}break;case"select-multiple":var s=r.constructor==Array?r:[r];for(var o=0;o<p.options.length;o++){for(var n=0;n<s.length;n++){p.options[o].selected|=p.options[o].value==s[n]}}break;case"select":case"select-one":p.value=r.toString()||r;break;case"text":case"button":case"textarea":case"submit":default:r=r==null?"":r;p.value=r}}}if(i===undefined){return this}var f=jQuery.extend({phpNaming:true,phpIndices:false,resetForm:true,identifier:"id",debug:false},f);if(f.phpIndices){f.phpNaming=true}var b=[];h(i);if(f.debug){_populate={arr:b,obj:i,elements:[]}}this.each(function(){var k=this.tagName.toLowerCase();var l=k=="form"?g:e;if(k=="form"&&f.resetForm){this.reset()}for(var j in b){l(this,j,b[j])}});return this}});;
;
/* module-key = 'se.bjurr.prnfs.pull-request-notifier-for-stash:pr-triggerbutton', location = 'utils.js' */
define("plugin/prnfb/utils",["jquery","plugin/prnfb/3rdparty"],function(f,l){function m(p,s,r){f(".statusresponse").empty();var q=f(s).serializeJSON();f.ajax({url:p,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:q,success:function(t){r(function(){if(t&&t.uuid){j(s,p+"/"+t.uuid)}AJS.flag({close:"auto",type:"success",title:"Saved",body:"<p>=)</p>"})})},error:function(v,t,u){AJS.messages.error(".statusresponse",{title:"Error",body:"<p>Sent POST "+p+":<br/><code>"+q.replace(/<script>/g,"script")+"</code><br/><br/>Got:<br/><code>"+v.responseText.replace(/<script>/g,"script")+"</code><br/><br/></p>"});f("html, body").animate({scrollTop:0},"slow")}})}function i(q,t,s){f("[name=projectKey]",q).empty();if(!s){f("[name=projectKey]",q).append('<option value="" selected>Any</option>')}else{f("[name=projectKey]",q).append('<option value="">Any</option>')}for(var r=0;r<t.values.length;r++){var p=t.values[r].key;if(p===s){f("[name=projectKey]",q).append('<option value="'+p+'" selected>'+p+"</option>")}else{f("[name=projectKey]",q).append('<option value="'+p+'">'+p+"</option>")}}}function n(p){var q=AJS.contextPath()+"/rest/api/1.0/projects?limit=999999";f.getJSON(q,function(r){p(r)})}function c(p,t,s){f("[name=repositorySlug]",p).empty();if(!s){f("[name=repositorySlug]",p).append('<option value="" selected>Any</option>')}else{f("[name=repositorySlug]",p).append('<option value="">Any</option>')}if(t){for(var q=0;q<t.values.length;q++){var r=t.values[q].slug;if(r===s){f("[name=repositorySlug]",p).append('<option value="'+r+'" selected>'+r+"</option>")}else{f("[name=repositorySlug]",p).append('<option value="'+r+'">'+r+"</option>")}}}}function a(q,r){if(!q){r();return}var p=AJS.contextPath()+"/rest/api/1.0/projects/"+q+"/repos?limit=999999";f.getJSON(p,function(s){r(s)})}function e(p,q){n(function(r){if(q&&q.projectKey){i(p,r,q.projectKey)}else{i(p,r,undefined)}a(f("[name=projectKey]",p).val(),function(s){if(q&&q.repositorySlug){c(p,s,q.repositorySlug)}else{c(p,s,undefined)}})})}function g(t){var q=t.find("input");for(var s=0;s<q.length;s++){if(f(q[s]).val()){return false}}var p=t.find("textarea");for(var r=0;r<p.length;r++){if(f(p[r]).val()){return false}}return true}function o(t){var q=t.closest(".listfields");var u=t.closest(".listfield");var p=q.find(".listfield");var s=[];p.each(function(v,w){if(g(f(w))){s.push(f(w))}});if(s.length>1){for(var r=1;r<s.length;r++){s[r].remove()}}if(s.length===0){$empty=u.clone();$empty.find("input, textarea").val("");q.append($empty)}}function d(p,q){if(q.buttonFormList){q.buttonFormList=undefined}f(p).populate(q);f(p).find(".template").each(function(w,r){var z=f(r).data("template");var y=f(r).data("field");var x=f(r).data("target");var t=f(r).data("empty").replace(/\'/g,'"');var v=JSON.parse(t);var s="";if(q[y]){for(var u=0;u<q[y].length;u++){s+=AJS.template.load(z).fill(q[y][u])}}s+=AJS.template.load(z).fill(v);f(x).html(s)})}function h(p){f(p).find("input[type=text], textarea, select").val("");f(p).find("input[type=checkbox]").removeAttr("checked");f(p).find("input[type=radio]").prop("checked",false)}function b(q,p,r){f(q).submit(function(s){s.preventDefault();m(r,q,function(t){t()})});j(q,p)}function j(q,p){f.getJSON(p,function(r){e(f(q),r);d(q,r)})}function k(r,q,s){e(f(r));f(r+" [name=projectKey]").change(function(){var t=f(this).closest("form");a(this.value,function(u){c(t,u,undefined)})});function p(t){h(r);f.getJSON(q,function(w){f(r+" [name=uuid]").empty();f(r+" [name=uuid]").append('<option value="">New</option>');for(var v=0;v<w.length;v++){var u=w[v].name;u=u.replace(/<script>/g,"script");f(r+" [name=uuid]").append('<option value="'+w[v].uuid+'">'+(w[v].projectKey||"")+" "+(w[v].repositorySlug||"")+" "+u+"</option>")}if(t){t()}})}p();f(r+" [name=uuid]").change(function(){var t=f(this).val();if(t){j(r,s+"/"+t)}else{p()}});d(r,{});f(r).submit(function(t){t.preventDefault();m(s,r,p)});f(r+" button[name=delete]").click(function(u){u.preventDefault();var t=f(r).find("[name=uuid]").val();if(t){f.ajax({url:s+"/"+t,type:"DELETE",success:function(v){p()}})}})}f(document).ready(function(){o(f(this));f(".listfield").find("input, textarea").live("keyup",function(){o(f(this))})});return{setupForm:b,setupForms:k}});;
;
/* module-key = 'se.bjurr.prnfs.pull-request-notifier-for-stash:pr-triggerbutton', location = '/pr-triggerbutton.js' */
define("plugin/prnfb/pr-triggerbutton",["jquery","aui","bitbucket/util/state","underscore","plugin/prnfb/3rdparty"],function(g,i,j,r,d){var c=i.contextPath()+"/rest/prnfb-admin/1.0/settings/buttons";var a='<span class="aui-icon aui-icon-wait aui-icon-small">Wait</span>';var p=g("#pull-request-header-more").find(".aui-button").first().closest("ul");p.find(".aui-button").each(function(t,s){var u=g(s).text().trim();if(u===""||u==="pr-triggerbutton"){s.remove()}});var m=function(s){return g('<li><button class="aui-button aui-button-link prnfb-button" role="menuitem">'+s+"</button></li>")};var l=function(t,u){var s=r.escape(t);return'<section role="dialog" id="confirm-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" data-aui-remove-on-hide="true" aria-hidden="true">    <!-- Dialog header -->    <header class="aui-dialog2-header">        <h2 class="aui-dialog2-header-main">'+s+'</h2>        <!-- Close icon -->        <a class="aui-dialog2-header-close">            <span class="aui-icon aui-icon-small aui-iconfont-close-dialog">Close</span>        </a>    </header>    <!-- Main dialog content -->    <div class="aui-dialog2-content">'+u+'    </div>    <!-- Dialog footer -->    <footer class="aui-dialog2-footer">        <!-- Actions to render on the right of the footer -->        <div class="aui-dialog2-footer-actions">            <button id="dialog-submit-button" class="aui-button aui-button-primary">'+t+'</button>            <button id="dialog-close-button" class="aui-button aui-button-link">Close</button>        </div>    </footer></section>'};var e=function(u,w){var t=r.escape(u);var s=r.escape(w.label);var v=r.escape(w.defaultValue);var x=r.escape(w.description);return g('<div class="field-group"><label for="'+u+'">'+s+(!w.required?"":'<span class="aui-icon icon-required">(required)</span>')+'</label><input class="text medium-field" type="text" id="prnfb-form-'+u+'" name="'+u+'" placeholder="'+v+'" value="'+v+'"><div class="description">'+x+"</div></div>")};var f=function(u,w){var t=r.escape(u);var s=r.escape(w.label);var v=r.escape(w.defaultValue);var x=r.escape(w.description);return g('<div class="field-group"><label for="'+t+'">'+s+(!w.required?"":'<span class="aui-icon icon-required">(required)</span>')+'</label><textarea class="textarea" id="prnfb-form-'+u+'" name="'+u+'" placeholder="'+v+'">'+v+'</textarea><div class="description">'+x+"</div></div>")};var k=function(u,w){var x=function(C,A){var E=C.defaultValue;var z=r.escape(u);var D=r.escape(C.name);var B=r.escape(C.label);return g('<div class="checkbox"><input class="checkbox" value="'+D+'" type="checkbox" '+(E?'checked="checked"':"")+' name="'+z+'[]" id="prnfb-form-'+z+"-"+A+'"><label for="prnfb-form-'+z+"-"+A+'">'+B+"</label></div>")};var t=r.escape(w.label);var y=r.escape(w.description);var s=[g("<legend><span>"+t+"</span></legend>")];for(var v=0;v<w.buttonFormElementOptionList.length;v++){s.push(x(w.buttonFormElementOptionList[v],v))}s.push(g('<div class="description">'+y+"</div>"));return g("<fieldset class='group'/>").append(s)};var b=function(u,w){var t=function(C,A){var E=C.name===w.defaultValue;var z=r.escape(u);var D=r.escape(C.name);var B=r.escape(C.label);return g('<div class="radio"><input class="radio" value="'+D+'" type="radio" '+(E?'checked="checked"':"")+'name="'+z+'" id="prnfb-form-'+z+"-"+A+'"><label for="prnfb-form-'+z+"-"+A+'">'+B+"</label></div>")};var s=r.escape(w.label);var y=r.escape(w.description);var x=[g("<legend><span>"+s+"</span></legend>")];for(var v=0;v<w.buttonFormElementOptionList.length;v++){x.push(t(w.buttonFormElementOptionList[v],v))}x.push(g('<div class="description">'+y+"</div>"));return g("<fieldset class='group'/>").append(x)};var q=function(t){if(!t){return""}var s='<div class="description">'+t+"</div>";return s};var n=function(t){if(!t||t.length===0){return""}var s=[];for(var u=0;u<t.length;u++){var w=t[u];switch(w.type){case"input":s.push(e(w.name,w));break;case"textarea":s.push(f(w.name,w));break;case"checkbox":s.push(k(w.name,w));break;case"radio":s.push(b(w.name,w));break}}var v=g("<form style='display:block;' class='aui'></form>");v.append(s);return v};var o=function(t){var w=[];var u=[];if(t){for(var v=0;v<t.length;v++){var s=t[v];if(s.status>=200&&s.status<=299){i.flag({close:"auto",type:"success",title:s.notificationName.replace(/<script>/g,"script"),body:"<p>You may check network tab in web browser for exact URL and response.</p>"})}else{i.flag({close:"auto",type:"error",title:s.notificationName.replace(/<script>/g,"script"),body:"<p>"+s.status+" "+s.uri+"</p><p>You may check network tab in web browser for exact URL and response.</p>"})}}}if(!t||t.length===0){i.flag({close:"auto",type:"warning",title:"No triggers were invoked",body:"<p>No triggers were invoked when buttons was pressed.</p>"})}};function h(){g.get(c+"/repository/"+j.getRepository().id+"/pullrequest/"+j.getPullRequest().id,function(s){p.find(".prnfb-button").remove();s.forEach(function(t){var u=m(t.name.replace(/<script>/g,"script"));u.click(function(){var B=g(this);var C=function(){B.removeAttr("disabled");B.removeAttr("aria-disabled");B.find("span").remove()};var z=function(){B.attr("disabled","disabled");B.attr("aria-disabled","true");B.prepend(a)};var y=function(E){z();g.ajax({type:"POST",url:c+"/"+t.uuid+"/press/repository/"+j.getRepository().id+"/pullrequest/"+j.getPullRequest().id,data:{form:E},success:function(F){setTimeout(function(){C();if(F.confirmation=="on"){o(F.notificationResponses)}},500)},error:function(F){C();i.flag({close:"auto",type:"error",title:"Unknown error",body:"<p>"+F.status+"</p><p>Check the Bitbucket Server log for more details.</p>"})}})};if(t.confirmationText||t.buttonFormList&&t.buttonFormList.length>0){var A=q(t.confirmationText);var v=n(t.buttonFormList);var x=g("<div/>").append(A).append(v).html();var w=g(l(t.name,x));w.appendTo(g("body"));var D=i.dialog2(w);i.$("#dialog-submit-button").click(function(F){var E=w.find("form").serializeJSON();F.preventDefault();D.hide();y(E)});i.$("#dialog-close-button").click(function(E){E.preventDefault();D.hide()});D.show()}else{y(null)}});p.append(u)})})}h();g(".aui-button.approve").click(function(){setTimeout(function(){h()},1000)})});AJS.$(document).ready(function(){require("plugin/prnfb/pr-triggerbutton")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:person-model', location = '/static/bitbucket/internal/model/person.js' */
define("bitbucket/internal/model/person",["module","exports","backbone-brace"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);a.default=b.default.Model.extend({namedAttributes:{emailAddress:"string",name:"string"},idAttribute:"name",initialize:function(){null==this.namedAttributes.id&&this.setId(this.attributes[this.idAttribute])}});c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-user-model', location = '/static/bitbucket/internal/model/stash-user.js' */
define("bitbucket/internal/model/stash-user",["module","exports","bitbucket/internal/model/person"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b).default.extend({namedAttributes:{active:"boolean",avatarUrl:"string",displayName:"string",id:"number",isAdmin:"boolean",link:Object,links:Object,type:"string",slug:"string"}});a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:project-model', location = '/static/bitbucket/internal/model/project.js' */
define("bitbucket/internal/model/project",["module","exports","backbone-brace","bitbucket/internal/model/stash-user"],function(e,a,b,c){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);c=babelHelpers.interopRequireDefault(c);var d=b.default.Model.extend({namedAttributes:{id:"number",name:"string",key:"string",description:"string",type:"string",owner:c.default,avatarUrl:"string",link:Object,links:Object,"public":"boolean"},isEqual:function(a){return!!(a&&a instanceof
d&&this.id===a.id)}},{projectType:{NORMAL:"NORMAL",PERSONAL:"PERSONAL"}});a.default=d;e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-model', location = '/static/bitbucket/internal/model/repository.js' */
define("bitbucket/internal/model/repository",["module","exports","backbone-brace","bitbucket/internal/model/project"],function(e,c,a,d){Object.defineProperty(c,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);d=babelHelpers.interopRequireDefault(d);var b=a.default.Model.extend({namedAttributes:{id:"number",name:"string",slug:"string",project:d.default,"public":"boolean",scmId:"string",state:"string",statusMessage:"string",forkable:"boolean",cloneUrl:"string",link:Object,links:Object,
origin:null},isEqual:function(a){return!!(a&&a instanceof b&&this.id===a.id)}});a.default.Mixins.applyMixin(b,{namedAttributes:{origin:b}});c.default=b;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision-reference', location = '/static/bitbucket/internal/model/revision-reference.js' */
define("bitbucket/internal/model/revision-reference","module exports aui backbone-brace lodash bitbucket/internal/model/page-state bitbucket/internal/model/repository".split(" "),function(k,e,c,f,h,l,m){Object.defineProperty(e,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);f=babelHelpers.interopRequireDefault(f);var n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(l);h=babelHelpers.interopRequireDefault(m);var b={TAG:{id:"tag",name:"Tag"},
BRANCH:{id:"branch",name:"Branch"},COMMIT:{id:"commit",name:"Commit"},isTag:function(a){return a&&(a===b.TAG.id||a.id===b.TAG.id||"TAG"===a)},isBranch:function(a){return a&&(a===b.BRANCH.id||a.id===b.BRANCH.id||"BRANCH"===a)},isCommit:function(a){return a&&(a===b.COMMIT.id||a.id===b.COMMIT.id)},from:function(a){if(b.isTag(a))return b.TAG;if(b.isBranch(a))return b.BRANCH;if(b.isCommit(a))return b.COMMIT;
window.console&&console.error("Unknown RevisionReference type "+a);return null}},d=f.default.Model.extend({namedAttributes:{id:"string",displayId:"string",type:b.from,isDefault:"boolean",latestCommit:"string",hash:"string",repository:h.default},initialize:function(){this.getDisplayId()||this.setDisplayId(this.getId());this.getIsDefault()||this.setIsDefault(!1);this.getRepository()||this.setRepository(p.default.getRepository())},getTypeName:function(){return this.getType().name},isDefault:function(){return this.get("isDefault")||
!1},isTag:function(){return b.isTag(this.getType())},isBranch:function(){return b.isBranch(this.getType())},isCommit:function(){return b.isCommit(this.getType())},isEqual:function(a){return a instanceof d&&this.getId()===a.getId()&&this.getType().id===a.getType().id&&(this.getRepository()&&a.getRepository()?this.getRepository().isEqual(a.getRepository()):!0)}},{fromCommit:function(a){return new d({id:a.id,displayId:a.displayId,type:b.COMMIT,isDefault:!1})},hydrateRefFromId:function(a,b,c,e){if(!n.default.isString(a))return null;
var g=/^refs\/(heads|tags)\/(.+)/,f=a.replace(g,"$2");c||(c=d.type.BRANCH,(g=a.match(g))&&"tags"===g[1]&&(c=d.type.TAG));return new d({id:a,displayId:f,type:c,isDefault:b,latestCommit:e})},hydrateDeprecated:function(a){return a.__json?new d(a.__json):new d(a.toJSON())}});d.type=b;e.default=d;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision', location = '/static/bitbucket/internal/model/revision.js' */
define("bitbucket/internal/model/revision",["module","exports","backbone-brace","bitbucket/internal/model/repository","bitbucket/internal/model/revision-reference"],function(f,c,b,d,a){Object.defineProperty(c,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);d=babelHelpers.interopRequireDefault(d);var e=babelHelpers.interopRequireDefault(a);a=b.default.Model.extend({namedAttributes:{id:null,displayId:null,repository:d.default,message:null,author:null,authorTimestamp:null,committer:null,
committerTimestamp:null,parents:null,properties:null},hasParents:function(){return this.getParents()&&this.getParents().length},getRevisionReference:function(){return new e.default({id:this.getId(),displayId:this.getDisplayId(),type:e.default.type.COMMIT,repository:this.getRepository(),latestCommit:this.getId()})}});b.default.Mixins.applyMixin(a,{namedAttributes:{parents:[a]}});c.default=a;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:participant-model', location = '/static/bitbucket/internal/model/participant.js' */
define("bitbucket/internal/model/participant",["module","exports","backbone-brace","bitbucket/internal/model/stash-user"],function(d,a,b,c){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);c=babelHelpers.interopRequireDefault(c);a.default=b.default.Model.extend({namedAttributes:{approved:"boolean",lastReviewedCommit:"string",role:"string",user:c.default,status:"string"}});d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:participant-model', location = '/static/bitbucket/internal/model/participant-collection.js' */
define("bitbucket/internal/model/participant-collection",["module","exports","backbone-brace","lodash","bitbucket/internal/model/participant"],function(g,c,d,e,h){Object.defineProperty(c,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var k=babelHelpers.interopRequireDefault(e);e=babelHelpers.interopRequireDefault(h);var f={APPROVED:1,NEEDS_WORK:2,UNAPPROVED:3};c.default=d.default.Collection.extend({model:e.default,comparator:function(a,b){return f[a.getStatus()]-f[b.getStatus()]||
a.getUser().getDisplayName().localeCompare(b.getUser().getDisplayName())},findByUser:function(a){return k.default.find(this.models,function(b){return b.getUser().getName()===a.getName()})}});g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-model', location = '/static/bitbucket/internal/model/pull-request.js' */
define("bitbucket/internal/model/pull-request","module exports backbone-brace bitbucket/internal/model/participant bitbucket/internal/model/participant-collection bitbucket/internal/model/revision-reference".split(" "),function(f,c,d,e,a,b){Object.defineProperty(c,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);e=babelHelpers.interopRequireDefault(e);a=babelHelpers.interopRequireDefault(a);b=babelHelpers.interopRequireDefault(b);c.default=d.default.Model.extend({namedAttributes:{id:null,
link:null,links:Object,fromRef:b.default,toRef:b.default,author:e.default,reviewers:a.default,participants:a.default,state:null,open:"boolean",closed:"boolean",locked:"boolean",title:null,createdDate:Date,updatedDate:Date,closedDate:Date,version:null,description:null,descriptionAsHtml:null,attributes:null,properties:null},addParticipant:function(a){this.getParticipants().findByUser(a.getUser())||this.getParticipants().add(a)}},{state:{OPEN:"OPEN",MERGED:"MERGED",DECLINED:"DECLINED"}});f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-range', location = '/static/bitbucket/internal/model/commit-range.js' */
define("bitbucket/internal/model/commit-range","module exports backbone-brace bitbucket/internal/model/diff-type bitbucket/internal/model/pull-request bitbucket/internal/model/revision".split(" "),function(g,d,e,b,f,h){function k(a){var b=a.getSinceRevision()?a.getSinceRevision().getId():"ROOT";if(a.getPullRequest()&&b===a.getPullRequest().getToRef().getLatestCommit())return l;a=a.getUntilRevision().hasParents()&&a.getUntilRevision().getParents()[0];return(a?a.getId():"ROOT")===b?m:n}Object.defineProperty(d,
"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);b=babelHelpers.interopRequireDefault(b);f=babelHelpers.interopRequireDefault(f);var c=babelHelpers.interopRequireDefault(h),l=b.default.EFFECTIVE,m=b.default.COMMIT,n=b.default.RANGE;d.default=e.default.Model.extend({namedAttributes:{diffType:"string",pullRequest:f.default,untilRevision:c.default,sinceRevision:c.default},initialize:function(){if(!this.getUntilRevision())if(this.getPullRequest()){var a=this.getPullRequest().getFromRef();
this.setUntilRevision(a&&new c.default({id:a.getLatestCommit()}));a=this.getPullRequest().getToRef();this.setSinceRevision(a&&new c.default({id:a.getLatestCommit()}))}else throw Error("Commits range requires either a pull request or revision(s)");this.getSinceRevision()&&"ROOT"===this.getSinceRevision().getId()&&this.setSinceRevision(void 0);this.setId(this.getPullRequest()?this.getPullRequest().getId():this.getUntilRevision().getId()+"_"+(this.getSinceRevision()?this.getSinceRevision().getId():"ROOT"));
this.getDiffType()||this.setDiffType(k(this))}});g.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:breadcrumbs', location = '/static/bitbucket/internal/widget/breadcrumbs/breadcrumbs.js' */
define("bitbucket/internal/widget/breadcrumbs/breadcrumbs","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/dom-event bitbucket/internal/util/events".split(" "),function(l,c,e,m,n,p,q,r){function f(a){this.$container=(0,g.default)(a);var b=this;this.$container.on("click","a",function(a){t.default.openInSameTab(a)&&(u.default.trigger("bitbucket.internal.widget.breadcrumbs.urlChanged",b,(0,g.default)(this).attr("href")),a.preventDefault())})}
function v(a,b){var d=[],c=w.default.map(b,function(b){d=d.slice(0);d.push(b);return{text:b,url:h(d,a)}});c.unshift({text:x.default.getRepository().getName(),url:h([],a)});return c}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(e),w=babelHelpers.interopRequireDefault(m);e=babelHelpers.interopRequireDefault(n);var x=babelHelpers.interopRequireDefault(p),t=babelHelpers.interopRequireDefault(q),u=babelHelpers.interopRequireDefault(r),k=e.default.currentRepo().browse(),
h=function(a,b){return b.isDefault()?k.path(a).build():k.path(a).at(b.getId()).build()};f.prototype.update=function(a,b,c){this.$container.empty().append(bitbucket.internal.widget.breadcrumbs.crumbs({pathComponents:v(a,b.getComponents()),trailingSlash:c}))};c.default=f;l.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:breadcrumbs', location = '/static/bitbucket/internal/widget/breadcrumbs/breadcrumbs.soy' */
// This file was automatically generated from breadcrumbs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.breadcrumbs.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.breadcrumbs == 'undefined') { bitbucket.internal.widget.breadcrumbs = {}; }


bitbucket.internal.widget.breadcrumbs.back = function(opt_data, opt_ignored) {
  return '<li><a id="' + soy.$$escapeHtml(opt_data.id) + '" class="breadcrumbs" href="' + soy.$$escapeHtml(opt_data.href) + '">' + aui.icons.icon({icon: 'back-page', useIconFont: true}) + soy.$$escapeHtml(opt_data.text) + '</a></li>' + ((opt_data.crumb) ? '<li>' + soy.$$escapeHtml(opt_data.crumb) + ((opt_data.state) ? bitbucket.internal.widget.lozenge.pullRequestState(opt_data) : '') + '</li>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.back.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.back';
}


bitbucket.internal.widget.breadcrumbs.crumbs = function(opt_data, opt_ignored) {
  var output = '';
  var pathLength__soy23 = opt_data.pathComponents.length;
  var collapsibleSection__soy24 = pathLength__soy23 > 1;
  var pathComponentList25 = opt_data.pathComponents;
  var pathComponentListLen25 = pathComponentList25.length;
  for (var pathComponentIndex25 = 0; pathComponentIndex25 < pathComponentListLen25; pathComponentIndex25++) {
    var pathComponentData25 = pathComponentList25[pathComponentIndex25];
    output += ((collapsibleSection__soy24 && pathComponentIndex25 == 0) ? '<span class="file-path">' : '') + bitbucket.internal.widget.breadcrumbs.breadcrumbFragment({isLast: pathComponentIndex25 == pathComponentListLen25 - 1, url: pathComponentIndex25 == pathComponentListLen25 - 1 ? opt_data.primaryLink : pathComponentData25.url, text: pathComponentData25.text}) + ((collapsibleSection__soy24 && pathLength__soy23 - pathComponentIndex25 == 2) ? '</span>' : '') + ((! (pathComponentIndex25 == pathComponentListLen25 - 1) || opt_data.trailingSlash) ? bitbucket.internal.widget.breadcrumbs.sep(null) : '');
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.crumbs.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.crumbs';
}


bitbucket.internal.widget.breadcrumbs.breadcrumbs = function(opt_data, opt_ignored) {
  var output = '';
  var fullPath__soy41 = '';
  var pathComponentList42 = opt_data.pathComponents;
  var pathComponentListLen42 = pathComponentList42.length;
  for (var pathComponentIndex42 = 0; pathComponentIndex42 < pathComponentListLen42; pathComponentIndex42++) {
    var pathComponentData42 = pathComponentList42[pathComponentIndex42];
    fullPath__soy41 += (! (pathComponentIndex42 == pathComponentListLen42 - 1) || opt_data.trailingSlash) ? soy.$$escapeHtml(pathComponentData42.text + ' / ') : soy.$$escapeHtml(pathComponentData42.text);
  }
  output += '<div class="breadcrumbs" ' + ((opt_data.showTooltip) ? 'title="' + soy.$$escapeHtml(fullPath__soy41) + '"' : '') + '>' + bitbucket.internal.widget.breadcrumbs.crumbs(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.breadcrumbs.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.breadcrumbs';
}


bitbucket.internal.widget.breadcrumbs.breadcrumbFragment = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url) ? '<a' + ((opt_data.isLast) ? ' class="stub"' : '') + ' href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a>' : '<span' + ((opt_data.isLast) ? ' class="stub"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.breadcrumbFragment.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.breadcrumbFragment';
}


bitbucket.internal.widget.breadcrumbs.sep = function(opt_data, opt_ignored) {
  return '<span class="sep">/</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.breadcrumbs.sep.soyTemplateName = 'bitbucket.internal.widget.breadcrumbs.sep';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/lib/codemirror.js' */
(function(q){if("object"==typeof exports&&"object"==typeof module)module.exports=q();else{if("function"==typeof define&&define.amd)return define([],q);(this||window).CodeMirror=q()}})(function(){function q(a,b){if(!(this instanceof q))return new q(a,b);this.options=b=b?Y(b):{};Y(yf,b,!1);yc(b);var c=b.value;"string"==typeof c&&(c=new R(c,b.mode,null,b.lineSeparator));this.doc=c;var d=new q.inputStyles[b.inputStyle](this),d=this.display=new zf(a,c,d);d.wrapper.CodeMirror=this;Bd(this);Cd(this);b.lineWrapping&&
(this.display.wrapper.className+=" CodeMirror-wrap");b.autofocus&&!cb&&d.input.focus();Dd(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new wa,keySeq:null,specialChars:null};var e=this;B&&11>C&&setTimeout(function(){e.display.input.reset(!0)},20);Af(this);Ed||(Bf(),Ed=!0);La(this);this.curOp.forceUpdate=!0;Fd(this,c);b.autofocus&&!cb||e.hasFocus()?setTimeout(zc(Ac,
this),20):db(this);for(var f in Ma)if(Ma.hasOwnProperty(f))Ma[f](this,b[f],Gd);Hd(this);b.finishInit&&b.finishInit(this);for(c=0;c<Bc.length;++c)Bc[c](this);Na(this);L&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(d.lineDiv).textRendering&&(d.lineDiv.style.textRendering="auto")}function zf(a,b,c){this.input=c;this.scrollbarFiller=t("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=t("div",null,"CodeMirror-gutter-filler");
this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=t("div",null,"CodeMirror-code");this.selectionDiv=t("div",null,null,"position: relative; z-index: 1");this.cursorDiv=t("div",null,"CodeMirror-cursors");this.measure=t("div",null,"CodeMirror-measure");this.lineMeasure=t("div",null,"CodeMirror-measure");this.lineSpace=t("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=t("div",[t("div",[this.lineSpace],
"CodeMirror-lines")],null,"position: relative");this.sizer=t("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=t("div",null,null,"position: absolute; height: "+Id+"px; width: 1px;");this.gutters=t("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=t("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=t("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");B&&
8>C&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);L||qa&&cb||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=
this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function Cc(a){a.doc.mode=q.getMode(a.options,a.doc.modeOption);eb(a)}function eb(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;
fb(a,100);a.state.modeGen++;a.curOp&&N(a)}function Jd(a){var b=xa(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/gb(a.display)-3);return function(e){if(ya(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function Dc(a){var b=a.doc,c=Jd(a);b.iter(function(a){var b=c(a);b!=a.height&&ea(a,b)})}function Cd(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,
"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");hb(a)}function ib(a){Bd(a);N(a);setTimeout(function(){Ec(a)},20)}function Bd(a){var b=a.display.gutters,c=a.options.gutters;ra(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(t("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";Fc(a)}function Fc(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function Kb(a){if(0==
a.height)return 0;for(var b=a.text.length,c,d=a;c=za(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=za(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function Gc(a){var b=a.display;a=a.doc;b.maxLine=u(a,a.first);b.maxLineLength=Kb(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var d=Kb(a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function yc(a){var b=E(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=
a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function jb(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Hc(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+fa(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,
gutterWidth:c}}function Ic(a,b,c){this.cm=c;var d=this.vert=t("div",[t("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=t("div",[t("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);w(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});w(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;B&&8>C&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function Jc(){}function Dd(a){a.display.scrollbars&&
(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&kb(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new q.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);w(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Oa(a,b):lb(a,b)},a);a.display.scrollbars.addClass&&mb(a.display.wrapper,a.display.scrollbars.addClass)}
function Pa(a,b){b||(b=jb(a));var c=a.display.barWidth,d=a.display.barHeight;Kd(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Lb(a),Kd(a,jb(a)),c=a.display.barWidth,d=a.display.barHeight}function Kd(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";c.heightForcer.style.borderBottom=d.bottom+"px solid transparent";d.right&&
d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Kc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),
e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=Aa(b,d),e=Aa(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=Aa(b,ga(u(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=Aa(b,ga(u(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Ec(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=Lc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&
(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var h=c[g].alignable;if(h)for(var k=0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Hd(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=Mc(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(t("div",[t("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-
e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";Fc(a);return!0}return!1}function Mc(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function Lc(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Mb(a,b,c){var d=a.display;this.viewport=b;this.visible=Kc(d,a.doc,b);this.editorIsHidden=
!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=Ba(a);this.force=c;this.dims=Nc(a);this.events=[]}function Oc(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return sa(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Ld(a))return!1;Hd(a)&&(sa(a),b.dims=Nc(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,
d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));ta&&(f=Pc(a.doc,f),g=Md(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Nb(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Nb(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(Ca(a,f))),e.viewFrom=
f,e.viewTo<g?e.view=e.view.concat(Nb(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,Ca(a,g))));e.viewTo=g;c.viewOffset=ga(u(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Ld(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=ha();4<g&&(c.lineDiv.style.display="none");Cf(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&ha()!=f&&f.offsetHeight&&f.focus();ra(c.cursorDiv);
ra(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,fb(a,400));c.updateLineNumbers=null;return!0}function Nd(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==Ba(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Hc(a.display)-Qc(a),c.top)}),b.visible=Kc(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Oc(a,b))break;Lb(a);d=jb(a);
nb(a);Pa(a,d);Rc(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Sc(a,b){var c=new Mb(a,b);if(Oc(a,c)){Lb(a);Nd(a,c);var d=jb(a);nb(a);Pa(a,d);Rc(a,d);c.finish()}}function Rc(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";a.display.heightForcer.style.top=b.docHeight+
"px";a.display.gutters.style.height=b.docHeight+a.display.barHeight+fa(a)+"px"}function Lb(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(B&&8>C){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=xa(a));if(.001<f||-.001>f)if(ea(d.line,e),Od(d.line),d.rest)for(e=0;e<d.rest.length;e++)Od(d.rest[e])}}}function Od(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=
a.widgets[b].node.parentNode.offsetHeight}function Nc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:Lc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function Cf(a,b,c){function d(b){var c=b.nextSibling;L&&Z&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);
return c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,k=e.view,e=e.viewFrom,l=0;l<k.length;l++){var m=k[l];if(!m.hidden)if(m.node&&m.node.parentNode==g){for(;h!=m.node;)h=d(h);h=f&&null!=b&&b<=e&&m.lineNumber;m.changes&&(-1<E(m.changes,"gutter")&&(h=!1),Pd(a,m,e,c));h&&(ra(m.lineNumber),m.lineNumber.appendChild(document.createTextNode(Mc(a.options,e))));h=m.node.nextSibling}else{var p=Df(a,m,e,c);g.insertBefore(p,h)}e+=m.size}for(;h;)h=d(h)}function Pd(a,b,c,d){for(var e=
0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=b,g=f.text.className,h=Qd(a,f);f.text==f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,Tc(f)):g&&(f.text.className=g)}else if("gutter"==f)Rd(a,b,c,d);else if("class"==f)Tc(b);else if("widget"==f){f=a;g=b;h=d;g.alignable&&(g.alignable=null);for(var k=g.node.firstChild,l=void 0;k;k=l)l=k.nextSibling,"CodeMirror-linewidget"==
k.className&&g.node.removeChild(k);Sd(f,g,h)}}b.changes=null}function ob(a){a.node==a.text&&(a.node=t("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),B&&8>C&&(a.node.style.zIndex=2));return a.node}function Qd(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Td(a,b)}function Tc(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;
b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=ob(a);a.background=c.insertBefore(t("div",null,b),c.firstChild)}a.line.wrapClass?ob(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function Rd(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&
(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var e=ob(b);b.gutterBackground=t("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var e=ob(b),g=b.gutter=t("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+
"px");a.display.input.setUneditable(g);e.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(t("div",Mc(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(e=f.hasOwnProperty(c)&&f[c])&&g.appendChild(t("div",[e],"CodeMirror-gutter-elt",
"left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function Df(a,b,c,d){var e=Qd(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);Tc(b);Rd(a,b,c,d);Sd(a,b,d);return b.node}function Sd(a,b,c){Ud(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)Ud(a,b.rest[d],b,c,!1)}function Ud(a,b,c,d,e){if(b.widgets){var f=ob(c),g=0;for(b=b.widgets;g<b.length;++g){var h=b[g],k=t("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||k.setAttribute("cm-ignore-events",
"true");var l=h,m=k,p=d;if(l.noHScroll){(c.alignable||(c.alignable=[])).push(m);var n=p.wrapperWidth;m.style.left=p.fixedPos+"px";l.coverGutter||(n-=p.gutterTotalWidth,m.style.paddingLeft=p.gutterTotalWidth+"px");m.style.width=n+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=-p.gutterTotalWidth+"px"));a.display.input.setUneditable(k);e&&h.above?f.insertBefore(k,c.gutter||c.text):f.appendChild(k);S(h,"redraw")}}}function Uc(a){return r(a.line,a.ch)}
function Ob(a,b){return 0>x(a,b)?b:a}function Pb(a,b){return 0>x(a,b)?a:b}function Vd(a){a.state.focused||(a.display.input.focus(),Ac(a))}function Qb(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=f.splitLines(b),k=null;if(g&&1<d.ranges.length)if(Q&&Q.text.join("\n")==b){if(0==d.ranges.length%Q.text.length)for(var k=[],l=0;l<Q.text.length;l++)k.push(f.splitLines(Q.text[l]))}else h.length==d.ranges.length&&(k=Rb(h,function(a){return[a]}));for(l=d.ranges.length-
1;0<=l;l--){var m=d.ranges[l],p=m.from(),n=m.to();m.empty()&&(c&&0<c?p=r(p.line,p.ch-c):a.state.overwrite&&!g?n=r(n.line,Math.min(u(f,n.line).text.length,n.ch+A(h).length)):Q&&Q.lineWise&&Q.text.join("\n")==b&&(p=n=r(p.line,0)));m=a.curOp.updateInput;p={from:p,to:n,text:k?k[l%k.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};Qa(a.doc,p);S(a,"inputRead",a,p)}b&&!g&&Wd(a,b);Ra(a);a.curOp.updateInput=m;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Xd(a,b){var c=
a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||U(b,function(){Qb(b,c,0,null,"paste")}),!0}function Wd(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=pb(a,
e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(u(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=pb(a,e.head.line,"smart"));g&&S(a,"electricInput",a,e.head.line)}}}function Yd(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:r(e,0),head:r(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Zd(a,b){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck",
!!b)}function Vc(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new wa;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function $d(){var a=t("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=t("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");L?a.style.width="1000px":a.setAttribute("wrap","off");qb&&(a.style.border="1px solid black");Zd(a);return b}function Wc(a){this.cm=
a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new wa;this.gracePeriod=!1}function ae(a,b){var c=Xc(a,b.line);if(!c||c.hidden)return null;var d=u(a.doc,b.line),c=be(c,d,b.line),d=aa(d),e="left";d&&(e=Sb(d,b.ch)%2?"right":"left");c=ce(c.map,b.ch,e);c.offset="right"==c.collapse?c.end:c.start;return c}function Sa(a,b){b&&(a.bad=!0);return a}function Tb(a,b,c){var d;if(b==a.display.lineDiv){d=a.display.lineDiv.childNodes[c];if(!d)return Sa(a.clipPos(r(a.display.viewTo-
1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return Ef(f,b,c)}}function Ef(a,b,c){function d(b,c,d){for(var e=-1;e<(l?l.length:0);e++)for(var f=0>e?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){c=G(0>e?a.line:a.rest[e]);e=f[g]+d;if(0>d||h!=b)e=f[g+(d?1:0)];return r(c,e)}}}var e=a.text.firstChild,f=!1;if(!b||!Yc(e,
b))return Sa(r(G(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?A(a.rest):a.line,Sa(r(G(c),c.text.length),f);var g=3==b.nodeType?b:null,h=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;h.parentNode!=e;)h=h.parentNode;var k=a.measure,l=k.maps;if(b=d(g,h,c))return Sa(b,f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return Sa(r(b.line,b.ch-g),f);g+=e.textContent.length}h=h.previousSibling;
for(g=c;h;h=h.previousSibling){if(b=d(h,h.firstChild,-1))return Sa(r(b.line,b.ch+g),f);g+=h.textContent.length}}function Ff(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)""==c&&(c=b.textContent.replace(/\u200b/g,"")),h+=c;else{var c=b.getAttribute("cm-marker"),n;if(c)b=a.findMarks(r(d,0),r(e+1,0),f(+c)),b.length&&(n=b[0].find())&&(h+=Da(a.doc,n.from,n.to).join(l));else if("false"!=b.getAttribute("contenteditable")){for(n=
0;n<b.childNodes.length;n++)g(b.childNodes[n]);/^(pre|div|p)$/i.test(b.nodeName)&&(k=!0)}}}else 3==b.nodeType&&(b=b.nodeValue)&&(k&&(h+=l,k=!1),h+=b)}for(var h="",k=!1,l=a.doc.lineSeparator();;){g(b);if(b==c)break;b=b.nextSibling}return h}function ma(a,b){this.ranges=a;this.primIndex=b}function z(a,b){this.anchor=a;this.head=b}function ba(a,b){var c=a[b];a.sort(function(a,b){return x(a.from(),b.from())});b=E(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=x(e.to(),d.from())){var f=Pb(e.from(),
d.from()),g=Ob(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new z(d?g:f,d?f:g))}}return new ma(a,b)}function ia(a,b){return new ma([new z(a,b||a)],0)}function y(a,b){if(b.line<a.first)return r(a.first,0);var c=a.first+a.size-1;if(b.line>c)return r(c,u(a,c).text.length);var c=u(a,b.line).text.length,d=b.ch,c=null==d||d>c?r(b.line,c):0>d?r(b.line,0):b;return c}function rb(a,b){return b>=a.first&&b<a.first+a.size}function de(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=
y(a,b[d]);return c}function sb(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>x(c,a),b!=0>x(d,a)?(a=c,c=d):b!=0>x(c,d)&&(c=d)),new z(a,c)):new z(d||c,c)}function Ub(a,b,c,d){D(a,new ma([sb(a,a.sel.primary(),b,c)],0),d)}function ee(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=sb(a,a.sel.ranges[e],b[e],null);b=ba(d,a.sel.primIndex);D(a,b,c)}function Zc(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;D(a,ba(e,a.sel.primIndex),d)}function Gf(a,b,c){c={ranges:b.ranges,update:function(b){this.ranges=
[];for(var c=0;c<b.length;c++)this.ranges[c]=new z(y(a,b[c].anchor),y(a,b[c].head))},origin:c&&c.origin};K(a,"beforeSelectionChange",a,c);a.cm&&K(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?ba(c.ranges,c.ranges.length-1):b}function fe(a,b,c){var d=a.history.done,e=A(d);e&&e.ranges?(d[d.length-1]=b,Vb(a,b,c)):D(a,b,c)}function D(a,b,c){Vb(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==
e.lastSelTime&&e.lastOrigin==f)){g=A(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Wb(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&ge(e.undone)}function Vb(a,b,c){if(X(a,"beforeSelectionChange")||a.cm&&X(a.cm,"beforeSelectionChange"))b=Gf(a,b,c);var d=c&&c.bias||(0>x(b.primary().head,
a.sel.primary().head)?-1:1);he(a,ie(a,b,d,!0));c&&!1===c.scroll||!a.cm||Ra(a.cm)}function he(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,je(a.cm)),S(a,"cursorActivity",a))}function ke(a){he(a,ie(a,a.sel,null,!1),ja)}function ie(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],k=$c(a,g.anchor,h&&h.anchor,c,d),h=$c(a,g.head,h&&h.head,c,d);if(e||k!=g.anchor||h!=g.head)e||(e=b.ranges.slice(0,
f)),e[f]=new z(k,h)}return e?ba(e,b.primIndex):b}function Ta(a,b,c,d,e){var f=u(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],k=h.marker;if((null==h.from||(k.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(k.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(K(k,"beforeCursorEnter"),k.explicitlyCleared))if(f.markedSpans){--g;continue}else break;if(k.atomic){if(c){var g=k.find(0>d?1:-1),l;if(0>d?k.inclusiveRight:k.inclusiveLeft)g=le(a,g,-d,g&&g.line==
b.line?f:null);if(g&&g.line==b.line&&(l=x(g,c))&&(0>d?0>l:0<l))return Ta(a,g,b,d,e)}c=k.find(0>d?-1:1);if(0>d?k.inclusiveLeft:k.inclusiveRight)c=le(a,c,d,c.line==b.line?f:null);return c?Ta(a,c,b,d,e):null}}}return b}function $c(a,b,c,d,e){d=d||1;b=Ta(a,b,c,d,e)||!e&&Ta(a,b,c,d,!0)||Ta(a,b,c,-d,e)||!e&&Ta(a,b,c,-d,!0);return b?b:(a.cantEdit=!0,r(a.first,0))}function le(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?y(a,r(b.line-1)):null:0<c&&b.ch==(d||u(a,b.line)).text.length?b.line<a.first+a.size-1?
r(b.line+1,0):null:new r(b.line,b.ch+c)}function nb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function me(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==b||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var k=h.empty();(k||a.options.showCursorWhenSelecting)&&ne(a,h.head,e);k||Hf(a,h,f)}}return d}
function ne(a,b,c){b=na(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var d=c.appendChild(t("div","\u00a0","CodeMirror-cursor"));d.style.left=b.left+"px";d.style.top=b.top+"px";d.style.height=Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(t("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=.85*(b.other.bottom-b.other.top)+"px")}function Hf(a,b,c){function d(a,
b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);h.appendChild(t("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?m-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){var f=u(g,b),h=f.text.length,k,p;If(aa(f),c||0,null==e?h:e,function(g,q,t){var u=Xb(a,r(b,g),"div",f,"left"),w,v;g==q?(w=u,t=v=u.left):(w=Xb(a,r(b,q-1),"div",f,"right"),"rtl"==t&&(t=u,u=w,w=t),t=u.left,v=w.right);null==c&&0==g&&(t=l);3<w.top-u.top&&(d(t,u.top,null,u.bottom),t=l,u.bottom<
w.top&&d(t,u.bottom,null,w.top));null==e&&q==h&&(v=m);if(!k||u.top<k.top||u.top==k.top&&u.left<k.left)k=u;if(!p||w.bottom>p.bottom||w.bottom==p.bottom&&w.right>p.right)p=w;t<l+1&&(t=l);d(t,w.top,v-t,w.bottom)});return{start:k,end:p}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),k=oe(a.display),l=k.left,m=Math.max(f.sizerWidth,Ba(a)-f.sizer.offsetLeft)-k.right,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var p=u(g,f.line),k=u(g,b.line),k=ka(p)==ka(k),f=e(f.line,f.ch,
k?p.text.length+1:null).end;b=e(b.line,k?0:null,b.ch).start;k&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(l,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(l,f.bottom,null,b.top)}c.appendChild(h)}function ad(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&
(b.cursorDiv.style.visibility="hidden")}}function fb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,zc(Jf,a))}function Jf(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=ua(b.mode,tb(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength,k=pe(a,f,
h?ua(b.mode,d):d,!0);f.styles=k.styles;var l=f.styleClasses;(k=k.classes)?f.styleClasses=k:l&&(f.styleClasses=null);l=!g||g.length!=f.styles.length||l!=k&&(!l||!k||l.bgClass!=k.bgClass||l.textClass!=k.textClass);for(k=0;!l&&k<g.length;++k)l=g[k]!=f.styles[k];l&&e.push(b.frontier);f.stateAfter=h?d:ua(b.mode,d)}else f.text.length<=a.options.maxHighlightLength&&bd(a,f.text,d),f.stateAfter=0==b.frontier%5?ua(b.mode,d):null;++b.frontier;if(+new Date>c)return fb(a,a.options.workDelay),!0});e.length&&U(a,
function(){for(var b=0;b<e.length;b++)oa(a,e[b],"text")})}}function Kf(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=u(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=ca(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function tb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Kf(a,b,c),g=f>d.first&&u(d,f-1).stateAfter,g=g?ua(d.mode,g):Lf(d.mode);d.iter(f,b,function(c){bd(a,c.text,g);c.stateAfter=
f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?ua(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Hc(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function oe(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=V(a.measure,t("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function fa(a){return Id-a.display.nativeBarWidth}function Ba(a){return a.display.scroller.clientWidth-
fa(a)-a.display.barWidth}function Qc(a){return a.display.scroller.clientHeight-fa(a)-a.display.barHeight}function be(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(G(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Xc(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Ca(a,b)];var c=a.display.externalMeasured;
if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Yb(a,b){var c=G(b),d=Xc(a,c);d&&!d.text?d=null:d&&d.changes&&(Pd(a,d,c,Nc(a)),a.curOp.forceUpdate=!0);if(!d){var e;e=ka(b);d=G(e);e=a.display.externalMeasured=new qe(a.doc,e,d);e.lineN=d;d=e.built=Td(a,e);e.text=d.pre;V(a.display.lineMeasure,d.pre);d=e}c=be(d,b,c);return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Zb(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];
else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,k=a.options.lineWrapping,l=k&&Ba(a);if(!g.measure.heights||k&&g.measure.width!=l){var m=g.measure.heights=[];if(k)for(g.measure.width=l,g=g.text.firstChild.getClientRects(),k=0;k<g.length-1;k++){var l=g[k],p=g[k+1];2<Math.abs(l.bottom-p.bottom)&&m.push((l.bottom+p.top)/2-h.top)}m.push(h.bottom-h.top)}b.hasHeights=!0}m=d;g=ce(b.map,c,m);d=g.node;h=g.start;k=g.end;c=g.collapse;var n;if(3==d.nodeType){for(var F=
0;4>F;F++){for(;h&&ub(b.line.text.charAt(g.coverStart+h));)--h;for(;g.coverStart+k<g.coverEnd&&ub(b.line.text.charAt(g.coverStart+k));)++k;if(B&&9>C&&0==h&&k==g.coverEnd-g.coverStart)n=d.parentNode.getBoundingClientRect();else{n=Ua(d,h,k).getClientRects();k=re;if("left"==m)for(l=0;l<n.length&&(k=n[l]).left==k.right;l++);else for(l=n.length-1;0<=l&&(k=n[l]).left==k.right;l--);n=k}if(n.left||n.right||0==h)break;k=h;--h;c="right"}B&&11>C&&((F=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==
screen.deviceXDPI)||(null!=cd?F=cd:(m=V(a.display.measure,t("span","x")),F=m.getBoundingClientRect(),m=Ua(m,0,1).getBoundingClientRect(),F=cd=1<Math.abs(F.left-m.left)),F=!F),F||(F=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI,n={left:n.left*F,right:n.right*F,top:n.top*m,bottom:n.bottom*m}))}else 0<h&&(c=m="right"),n=a.options.lineWrapping&&1<(F=d.getClientRects()).length?F["right"==m?F.length-1:0]:d.getBoundingClientRect();!(B&&9>C)||h||n&&(n.left||n.right)||(n=(n=d.parentNode.getClientRects()[0])?
{left:n.left,right:n.left+gb(a.display),top:n.top,bottom:n.bottom}:re);d=n.top-b.rect.top;h=n.bottom-b.rect.top;m=(d+h)/2;g=b.view.measure.heights;for(F=0;F<g.length-1&&!(m<g[F]);F++);c={left:("right"==c?n.right:n.left)-b.rect.left,right:("left"==c?n.left:n.right)-b.rect.left,top:F?g[F-1]:0,bottom:g[F]};n.left||n.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=d,c.rbottom=h);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}
function ce(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var k=a[h],l=a[h+1];if(b<k)e=0,f=1,g="left";else if(b<l)e=b-k,f=e+1;else if(h==a.length-3||b==l&&a[h+3]>b)f=l-k,e=f-1,b>=l&&(g="right");if(null!=e){d=a[h+2];k==l&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==l-k)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:k,
coverEnd:l}}function se(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function te(a){a.display.externalMeasure=null;ra(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)se(a.display.view[b])}function hb(a){te(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function dd(a,b,c,d){if(b.widgets)for(var e=
0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=vb(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=ga(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;
c.bottom+=b;return c}function ue(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Xb(a,b,c,d,e){d||(d=u(a.doc,b.line));var f=d;b=b.ch;d=Zb(a,Yb(a,d),b,e);return dd(a,f,d,c)}
function na(a,b,c,d,e,f){function g(b,g){var h=Zb(a,e,b,g?"right":"left",f);g?h.left=h.right:h.right=h.left;return dd(a,d,h,c)}function h(a,b){var c=k[b],d=c.level%2;a==ed(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=fd(c)-(c.level%2?0:1),d=!0):a==fd(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=ed(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||u(a.doc,b.line);e||(e=Yb(a,d));var k=aa(d);b=b.ch;if(!k)return g(b);var l=Sb(k,b),l=h(b,l);null!=wb&&(l.other=h(b,wb));return l}function ve(a,
b){var c=0;b=y(a.doc,b);a.options.lineWrapping||(c=gb(a.display)*b.ch);var d=u(a.doc,b.line),e=ga(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function $b(a,b,c,d){a=r(a,b);a.xRel=d;c&&(a.outside=!0);return a}function gd(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return $b(d.first,0,!0,-1);var e=Aa(d,c),f=d.first+d.size-1;if(e>f)return $b(d.first+d.size-1,u(d,f).text.length,!0,1);0>b&&(b=0);for(d=u(d,e);;)if(e=Mf(a,d,e,b,c),f=(d=za(d,!1))&&d.find(0,!0),d&&
(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=G(d=f.to.line);else return e}function Mf(a,b,c,d,e){function f(d){d=na(a,r(c,d),"line",b,l);h=!0;if(g>d.bottom)return d.left-k;if(g<d.top)return d.left+k;h=!1;return d.left}var g=e-ga(b),h=!1,k=2*a.display.wrapper.clientWidth,l=Yb(a,b);e=aa(b);var m=b.text.length,p=ac(b),n=bc(b),F=f(p),q=h,t=f(n),u=h;if(d>t)return $b(c,n,u,1);for(;;){if(e?n==p||n==hd(b,p,1):1>=n-p){m=d<F||d-F<=t-d?p:n;q=m==p?q:u;p=d-(m==p?F:t);u&&!e&&!/\s/.test(b.text.charAt(m))&&0<p&&
m<b.text.length&&1<l.view.measure.heights.length&&(e=Zb(a,l,m,"right"),g<=e.bottom&&g>=e.top&&Math.abs(d-e.right)<p&&(q=!1,m++,p=d-e.right));for(;ub(b.text.charAt(m));)++m;return $b(c,m,q,-1>p?-1:1<p?1:0)}var w=Math.ceil(m/2),v=p+w;if(e)for(var v=p,x=0;x<w;++x)v=hd(b,v,1);x=f(v);if(x>d){n=v;t=x;if(u=h)t+=1E3;m=w}else p=v,F=x,q=h,m-=w}}function xa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Ea){Ea=t("pre");for(var b=0;49>b;++b)Ea.appendChild(document.createTextNode("x")),Ea.appendChild(t("br"));
Ea.appendChild(document.createTextNode("x"))}V(a.measure,Ea);b=Ea.offsetHeight/50;3<b&&(a.cachedTextHeight=b);ra(a.measure);return b||1}function gb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=t("span","xxxxxxxxxx"),c=t("pre",[b]);V(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function La(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,
cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Nf};Va?Va.ops.push(a.curOp):a.curOp.ownsGroup=Va={ops:[a.curOp],delayedCallbacks:[]}}function Na(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,
e.cm)}}while(c<b.length)}finally{Va=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var e=a[b],c=e.cm,f=d=c.display;!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=fa(c)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=fa(c)+"px",f.scrollbarsClipped=!0);e.updateMaxLine&&Gc(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||
e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new Mb(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&Oc(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],c=e.cm,d=c.display,e.updatedDisplay&&Lb(c),e.barMeasure=jb(c),d.maxLineChanged&&!c.options.lineWrapping&&(f=void 0,f=d.maxLine.text.length,f=Zb(c,Yb(c,d.maxLine),
f,void 0),e.adjustWidthTo=f.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+fa(c)+c.display.barWidth),e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-Ba(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection(e.focus);for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Oa(c,
Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),d=e.focus&&e.focus==ha()&&(!document.hasFocus||document.hasFocus()),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection,d),(e.updatedDisplay||e.startHeight!=c.doc.height)&&Pa(c,e.barMeasure),e.updatedDisplay&&Rc(c,e.barMeasure),e.selectionChanged&&ad(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),d&&Vd(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;e.updatedDisplay&&
Nd(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,
e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=f.scrollLeft,Ec(c));if(e.scrollToPos){var g=void 0,h=y(f,e.scrollToPos.from),g=y(f,e.scrollToPos.to),k=e.scrollToPos.margin;null==k&&(k=0);for(var l=0;5>l;l++){var m=!1,p=na(c,h),n=g&&g!=h?na(c,g):p,n=cc(c,Math.min(p.left,n.left),Math.min(p.top,n.top)-k,Math.max(p.left,n.left),Math.max(p.bottom,n.bottom)+k),q=c.doc.scrollTop,r=c.doc.scrollLeft;null!=n.scrollTop&&(lb(c,n.scrollTop),1<Math.abs(c.doc.scrollTop-q)&&(m=!0));
null!=n.scrollLeft&&(Oa(c,n.scrollLeft),1<Math.abs(c.doc.scrollLeft-r)&&(m=!0));if(!m)break}g=p;e.scrollToPos.isCursor&&c.state.focused&&(I(c,"scrollCursorIntoView")||(k=c.display,l=k.sizer.getBoundingClientRect(),h=null,0>g.top+l.top?h=!0:g.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||Of||(g=t("div","\u200b",null,"position: absolute; top: "+(g.top-k.viewOffset-c.display.lineSpace.offsetTop)+"px; height: "+(g.bottom-g.top+fa(c)+k.barHeight)+"px; left: "+
g.left+"px; width: 2px;"),c.display.lineSpace.appendChild(g),g.scrollIntoView(h),c.display.lineSpace.removeChild(g))))}h=e.maybeHiddenMarkers;g=e.maybeUnhiddenMarkers;if(h)for(k=0;k<h.length;++k)h[k].lines.length||K(h[k],"hide");if(g)for(k=0;k<g.length;++k)g[k].lines.length&&K(g[k],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&K(c,"changes",c,e.changeObjs);e.update&&e.update.finish()}}}function U(a,b){if(a.curOp)return b();La(a);try{return b()}finally{Na(a)}}
function H(a,b){return function(){if(a.curOp)return b.apply(a,arguments);La(a);try{return b.apply(a,arguments)}finally{Na(a)}}}function M(a){return function(){if(this.curOp)return a.apply(this,arguments);La(this);try{return a.apply(this,arguments)}finally{Na(this)}}}function O(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);La(b);try{return a.apply(this,arguments)}finally{Na(b)}}}function qe(a,b,c){for(var d=this.line=b,e;d=za(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);
this.size=(this.rest=e)?G(A(this.rest))-c+1:1;this.node=this.text=null;this.hidden=ya(a,b)}function Nb(a,b,c){var d=[],e;for(e=b;e<c;)b=new qe(a.doc,u(a.doc,e),e),e+=b.size,d.push(b);return d}function N(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)ta&&Pc(a.doc,b)<e.viewTo&&sa(a);else if(c<=e.viewFrom)ta&&Md(a.doc,c+d)>e.viewFrom?
sa(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)sa(a);else if(b<=e.viewFrom){var f=dc(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):sa(a)}else if(c>=e.viewTo)(f=dc(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):sa(a);else{var f=dc(a,b,b,-1),g=dc(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Nb(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):sa(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=
null)}function oa(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Ca(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==E(a,c)&&a.push(c)))}function sa(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Ca(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=
c[d].size,0>b)return d}function dc(a,b,c,d){var e=Ca(a,b),f=a.display.view;if(!ta||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;Pc(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Ld(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function Af(a){function b(){d.activeTouch&&
(e=setTimeout(function(){d.activeTouch=null},1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return 400<c*c+d*d}var d=a.display;w(d.scroller,"mousedown",H(a,Pf));B&&11>C?w(d.scroller,"dblclick",H(a,function(b){if(!I(a,b)){var c=Fa(a,b);!c||id(a,b,"gutterClick",!0)||pa(a.display,b)||(P(b),b=a.findWordAt(c),Ub(a.doc,b.anchor,b.head))}})):w(d.scroller,"dblclick",function(b){I(a,b)||P(b)});jd||w(d.scroller,"contextmenu",function(b){we(a,
b)});var e,f={end:0};w(d.scroller,"touchstart",function(b){var c;if(c=!I(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),c=!c;c&&(clearTimeout(e),c=+new Date,d.activeTouch={start:c,moved:!1,prev:300>=c-f.end?f:null},1==b.touches.length&&(d.activeTouch.left=b.touches[0].pageX,d.activeTouch.top=b.touches[0].pageY))});w(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});w(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!pa(d,e)&&null!=
f.left&&!f.moved&&300>new Date-f.start){var g=a.coordsChar(d.activeTouch,"page"),f=!f.prev||c(f,f.prev)?new z(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new z(r(g.line,0),y(a.doc,r(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();P(e)}b()});w(d.scroller,"touchcancel",b);w(d.scroller,"scroll",function(){d.scroller.clientHeight&&(lb(a,d.scroller.scrollTop),Oa(a,d.scroller.scrollLeft,!0),K(a,"scroll",a))});w(d.scroller,"mousewheel",function(b){xe(a,b)});w(d.scroller,"DOMMouseScroll",
function(b){xe(a,b)});w(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(b){I(a,b)||ec(b)},over:function(b){if(!I(a,b)){var c=Fa(a,b);if(c){var d=document.createDocumentFragment();ne(a,c,d);a.display.dragCursor||(a.display.dragCursor=t("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv));V(a.display.dragCursor,d)}ec(b)}},start:function(b){if(B&&(!a.state.draggingText||
100>+new Date-ye))ec(b);else if(!I(a,b)&&!pa(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!ze)){var c=t("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";da&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);da&&c.parentNode.removeChild(c)}},drop:H(a,Qf),leave:function(b){I(a,
b)||Ae(a)}};var g=d.input.getField();w(g,"keyup",function(b){Be.call(a,b)});w(g,"keydown",H(a,Ce));w(g,"keypress",H(a,De));w(g,"focus",function(b){Ac(a,b)});w(g,"blur",function(b){db(a,b)})}function Rf(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function pa(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==
c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Fa(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var f,g;c=e.lineSpace.getBoundingClientRect();try{f=b.clientX-c.left,g=b.clientY-c.top}catch(h){return null}b=gd(a,f,g);var k;d&&1==b.xRel&&(k=u(a.doc,b.line).text).length==b.ch&&(d=ca(k,k.length,a.options.tabSize)-k.length,b=r(b.line,Math.max(0,Math.round((f-oe(a.display).left)/gb(a.display))-d)));return b}
function Pf(a){var b=this.display;if(!(I(this,a)||b.activeTouch&&b.input.supportsTouch()))if(b.shift=a.shiftKey,pa(b,a))L||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!id(this,a,"gutterClick",!0)){var c=Fa(this,a);window.focus();switch(Ee(a)){case 1:this.state.selectingText?this.state.selectingText(a):c?Sf(this,a,c):(a.target||a.srcElement)==b.scroller&&P(a);break;case 2:L&&(this.state.lastMiddleDown=+new Date);c&&Ub(this.doc,c);setTimeout(function(){b.input.focus()},
20);P(a);break;case 3:jd?we(this,a):Tf(this)}}}function Sf(a,b,c){B?setTimeout(zc(Vd,a),0):a.curOp.focus=ha();var d=+new Date,e;fc&&fc.time>d-400&&0==x(fc.pos,c)?e="triple":gc&&gc.time>d-400&&0==x(gc.pos,c)?(e="double",fc={time:d,pos:c}):(e="single",gc={time:d,pos:c});var d=a.doc.sel,f=Z?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&Uf&&!a.isReadOnly()&&"single"==e&&-1<(g=d.contains(c))&&(0>x((g=d.ranges[g]).from(),c)||0<c.xRel)&&(0<x(g.to(),c)||0>c.xRel)?Vf(a,b,c,f):Wf(a,b,c,e,f)}function Vf(a,b,c,d){var e=
a.display,f=+new Date,g=H(a,function(h){L&&(e.scroller.draggable=!1);a.state.draggingText=!1;la(document,"mouseup",g);la(e.scroller,"drop",g);10>Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)&&(P(h),!d&&+new Date-200<f&&Ub(a.doc,c),L||B&&9==C?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});L&&(e.scroller.draggable=!0);a.state.draggingText=g;g.copy=Z?b.altKey:b.ctrlKey;e.scroller.dragDrop&&e.scroller.dragDrop();w(document,"mouseup",g);w(e.scroller,"drop",
g)}function Wf(a,b,c,d,e){function f(b){if(0!=x(v,b))if(v=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=ca(u(l,c.line).text,c.ch,f),h=ca(u(l,b.line).text,b.ch,f),k=Math.min(g,h),g=Math.max(g,h),h=Math.min(c.line,b.line),q=Math.min(a.lastLine(),Math.max(c.line,b.line));h<=q;h++){var t=u(l,h).text,F=Fe(t,k,f);k==g?e.push(new z(r(h,F),r(h,F))):t.length>F&&e.push(new z(r(h,F),r(h,Fe(t,g,f))))}e.length||e.push(new z(c,c));D(l,ba(n.ranges.slice(0,p).concat(e),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=
m,f=e.anchor,k=b,"single"!=d&&(b="double"==d?a.findWordAt(b):new z(r(b.line,0),y(l,r(b.line+1,0))),0<x(b.anchor,f)?(k=b.head,f=Pb(e.from(),b.anchor)):(k=b.anchor,f=Ob(e.to(),b.head))),e=n.ranges.slice(0),e[p]=new z(y(l,f),k),D(l,ba(e,p),kd)}function g(b){var c=++A,e=Fa(a,b,!0,"rect"==d);if(e)if(0!=x(e,v)){a.curOp.focus=ha();f(e);var h=Kc(k,l);(e.line>=h.to||e.line<h.from)&&setTimeout(H(a,function(){A==c&&g(b)}),150)}else{var m=b.clientY<B.top?-20:b.clientY>B.bottom?20:0;m&&setTimeout(H(a,function(){A==
c&&(k.scroller.scrollTop+=m,g(b))}),50)}}function h(b){a.state.selectingText=!1;A=Infinity;P(b);k.input.focus();la(document,"mousemove",G);la(document,"mouseup",C);l.history.lastSelOrigin=null}var k=a.display,l=a.doc;P(b);var m,p,n=l.sel,q=n.ranges;e&&!b.shiftKey?(p=l.sel.contains(c),m=-1<p?q[p]:new z(c,c)):(m=l.sel.primary(),p=l.sel.primIndex);if(Xf?b.shiftKey&&b.metaKey:b.altKey)d="rect",e||(m=new z(c,c)),c=Fa(a,b,!0,!0),p=-1;else if("double"==d){var t=a.findWordAt(c);m=a.display.shift||l.extend?
sb(l,m,t.anchor,t.head):t}else"triple"==d?(t=new z(r(c.line,0),y(l,r(c.line+1,0))),m=a.display.shift||l.extend?sb(l,m,t.anchor,t.head):t):m=sb(l,m,c);e?-1==p?(p=q.length,D(l,ba(q.concat([m]),p),{scroll:!1,origin:"*mouse"})):1<q.length&&q[p].empty()&&"single"==d&&!b.shiftKey?(D(l,ba(q.slice(0,p).concat(q.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),n=l.sel):Zc(l,p,m,kd):(p=0,D(l,new ma([m],0),kd),n=l.sel);var v=c,B=k.wrapper.getBoundingClientRect(),A=0,G=H(a,function(a){Ee(a)?g(a):h(a)}),C=H(a,h);a.state.selectingText=
C;w(document,"mousemove",G);w(document,"mouseup",C)}function id(a,b,c,d){try{var e=b.clientX,f=b.clientY}catch(g){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&P(b);d=a.display;var h=d.lineDiv.getBoundingClientRect();if(f>h.bottom||!X(a,c))return ld(b);f-=h.top-d.viewOffset;for(h=0;h<a.options.gutters.length;++h){var k=d.gutters.childNodes[h];if(k&&k.getBoundingClientRect().right>=e)return e=Aa(a.doc,f),K(a,c,a,e,a.options.gutters[h],b),ld(b)}}function Qf(a){var b=
this;Ae(b);if(!I(b,a)&&!pa(b.display,a)){P(a);B&&(ye=+new Date);var c=Fa(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){if(!b.options.allowDropFileTypes||-1!=E(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=H(b,function(){var a=h.result;/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a="");f[d]=a;++g==e&&(c=y(b.doc,c),a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"},
Qa(b.doc,a),fe(b.doc,ia(c,Ga(a))))});h.readAsText(a)}};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&!b.state.draggingText.copy)var k=b.listSelections();Vb(b.doc,ia(c,c));if(k)for(h=0;h<k.length;++h)Wa(b.doc,"",k[h].anchor,k[h].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(l){}}}
function Ae(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function lb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,qa||Sc(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),qa&&Sc(a),fb(a,100))}function Oa(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,Ec(a),
a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function xe(a,b){var c=Ge(b),d=c.x,c=c.y,e=a.display,f=e.scroller,g=f.scrollWidth>f.clientWidth,h=f.scrollHeight>f.clientHeight;if(d&&g||c&&h){if(c&&Z&&L){var g=b.target,k=e.view;a:for(;g!=f;g=g.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==g){a.display.currentWheelTarget=g;break a}}!d||qa||da||null==W?(c&&null!=W&&(h=c*W,g=a.doc.scrollTop,k=g+e.wrapper.clientHeight,0>h?g=Math.max(0,g+
h-50):k=Math.min(a.doc.height,k+h+50),Sc(a,{top:g,bottom:k})),20>hc&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(W=(W*hc+a)/(hc+1),++hc)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&h&&lb(a,Math.max(0,Math.min(f.scrollTop+c*W,f.scrollHeight-f.clientHeight))),
Oa(a,Math.max(0,Math.min(f.scrollLeft+d*W,f.scrollWidth-f.clientWidth))),(!c||c&&h)&&P(b),e.wheelStartX=null)}}function ic(a,b,c){if("string"==typeof b&&(b=jc[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=He}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Yf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=xb(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&
xb(b,a.options.extraKeys,c,a)||xb(b,a.options.keyMap,c,a)}function kc(a,b,c,d){var e=a.state.keySeq;if(e){if(Zf(b))return"handled";$f.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=Yf(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&S(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)P(c),ad(a);return e&&!d&&/\'$/.test(b)?(P(c),!0):!!d}function Ie(a,b){var c=ag(b,!0);return c?b.shiftKey&&!a.state.keySeq?kc(a,"Shift-"+c,b,function(b){return ic(a,
b,!0)})||kc(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return ic(a,b)}):kc(a,c,b,function(b){return ic(a,b)}):!1}function bg(a,b,c){return kc(a,"'"+c+"'",b,function(b){return ic(a,b,!0)})}function Ce(a){this.curOp.focus=ha();if(!I(this,a)){B&&11>C&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Ie(this,a);da&&(md=c?b:null,!c&&88==b&&!Je&&(Z?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||
cg(this)}}function cg(a){function b(a){18!=a.keyCode&&a.altKey||(kb(c,"CodeMirror-crosshair"),la(document,"keyup",b),la(document,"mouseover",b))}var c=a.display.lineDiv;mb(c,"CodeMirror-crosshair");w(document,"keyup",b);w(document,"mouseover",b)}function Be(a){16==a.keyCode&&(this.doc.sel.shift=!1);I(this,a)}function De(a){if(!(pa(this.display,a)||I(this,a)||a.ctrlKey&&!a.altKey||Z&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(da&&b==md)md=null,P(a);else if(!da||a.which&&!(10>a.which)||!Ie(this,a))if(b=
String.fromCharCode(null==c?b:c),!bg(this,a,b))this.display.input.onKeyPress(a)}}function Tf(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,db(a))},100)}function Ac(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(K(a,"focus",a,b),a.state.focused=!0,mb(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),L&&setTimeout(function(){a.display.input.reset(!0)},
20)),a.display.input.receivedFocus()),ad(a))}function db(a,b){a.state.delayingBlurEvent||(a.state.focused&&(K(a,"blur",a,b),a.state.focused=!1,kb(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function we(a,b){var c;(c=pa(a.display,b))||(c=X(a,"gutterContextMenu")?id(a,b,"gutterContextMenu",!1):!1);if(!c&&!I(a,b,"contextmenu"))a.display.input.onContextMenu(b)}function Ke(a,b){if(0>x(a,b.from))return a;if(0>=
x(a,b.to))return Ga(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Ga(b).ch-b.to.ch);return r(c,d)}function nd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new z(Ke(e.anchor,b),Ke(e.head,b)))}return ba(c,a.sel.primIndex)}function Le(a,b,c){return a.line==b.line?r(c.line,a.ch-b.ch+c.ch):r(c.line+(a.line-b.line),a.ch)}function Me(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=
!0}};c&&(b.update=function(b,c,f,g){b&&(this.from=y(a,b));c&&(this.to=y(a,c));f&&(this.text=f);void 0!==g&&(this.origin=g)});K(a,"beforeChange",a,b);a.cm&&K(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Qa(a,b,c){if(a.cm){if(!a.cm.curOp)return H(a.cm,Qa)(a,b,c);if(a.cm.state.suppressEdits)return}if(X(a,"beforeChange")||a.cm&&X(a.cm,"beforeChange"))if(b=Me(a,b,!0),!b)return;if(c=Ne&&!c&&dg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)Oe(a,
{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else Oe(a,b)}function Oe(a,b){if(1!=b.text.length||""!=b.text[0]||0!=x(b.from,b.to)){var c=nd(a,b);Pe(a,b,c,a.cm?a.cm.curOp.id:NaN);yb(a,b,c,od(a,b));var d=[];Ha(a,function(a,c){c||-1!=E(d,a.history)||(Qe(a.history,b),d.push(a.history));yb(a,b,null,od(a,b))})}}function lc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits||c){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,k=0;k<g.length&&(e=g[k],c?!e.ranges||e.equals(a.sel):
e.ranges);k++);if(k!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Wb(e,h);if(c&&!e.equals(a.sel)){D(a,e,{clearRedo:!1});return}f=e}else break;c=[];Wb(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=X(a,"beforeChange")||a.cm&&X(a.cm,"beforeChange");for(k=e.changes.length-1;0<=k;--k){var l=e.changes[k];l.origin=b;if(d&&!Me(a,l,!1)){g.length=0;break}c.push(pd(a,l));f=k?nd(a,l):A(g);yb(a,l,f,Re(a,l));!k&&a.cm&&a.cm.scrollIntoView({from:l.from,
to:Ga(l)});var m=[];Ha(a,function(a,b){b||-1!=E(m,a.history)||(Qe(a.history,l),m.push(a.history));yb(a,l,null,Re(a,l))})}}}}function Se(a,b){if(0!=b&&(a.first+=b,a.sel=new ma(Rb(a.sel.ranges,function(a){return new z(r(a.anchor.line+b,a.anchor.ch),r(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){N(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)oa(a.cm,d,"gutter")}}function yb(a,b,c,d){if(a.cm&&!a.cm.curOp)return H(a.cm,yb)(a,b,c,d);if(b.to.line<a.first)Se(a,b.text.length-
1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Se(a,e);b={from:r(a.first,0),to:r(b.to.line+e,b.to.ch),text:[A(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:r(e,u(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Da(a,b.from,b.to);c||(c=nd(a,b));a.cm?eg(a.cm,b,d):qd(a,b,d);Vb(a,c,ja)}}function eg(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,k=f.line;a.options.lineWrapping||
(k=G(ka(u(d,f.line))),d.iter(k,g.line+1,function(a){if(a==e.maxLine)return h=!0}));-1<d.sel.contains(b.from,b.to)&&je(a);qd(d,b,c,Jd(a));a.options.lineWrapping||(d.iter(k,f.line+b.text.length,function(a){var b=Kb(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,f.line);fb(a,400);c=b.text.length-(g.line-f.line)-1;b.full?N(a):f.line!=g.line||1!=b.text.length||Te(a.doc,b)?N(a,f.line,g.line+1,c):oa(a,f.line,
"text");c=X(a,"changes");if((d=X(a,"change"))||c)b={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&S(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Wa(a,b,c,d,e){d||(d=c);if(0>x(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));Qa(a,{from:c,to:d,text:b,origin:e})}function cc(a,b,c,d,e){var f=a.display,g=xa(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,
k=Qc(a),l={};e-c>k&&(e=c+k);var m=a.doc.height+Hc(f),p=c<g,g=e>m-g;c<h?l.scrollTop=p?0:c:e>h+k&&(c=Math.min(c,(g?m:e)-k),c!=h&&(l.scrollTop=c));h=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=Ba(a)-(a.options.fixedGutter?f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?l.scrollLeft=0:b<h?l.scrollLeft=Math.max(0,b-(f?0:10)):d>a+h-3&&(l.scrollLeft=d+(f?0:10)-a);return l}function mc(a,b,c){null==b&&null==c||nc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:
a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Ra(a){nc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?r(b.line,b.ch-1):b,d=r(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function nc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=ve(a,b.from),d=ve(a,b.to),b=cc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),
Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function pb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=tb(a,b):c="prev");var g=a.options.tabSize,h=u(e,b),k=ca(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var l=h.text.match(/^\s*/)[0],m;if(!d&&!/\S/.test(h.text))m=0,c="not";else if("smart"==c&&(m=e.mode.indent(f,h.text.slice(l.length),h.text),m==He||150<m)){if(!d)return;c="prev"}"prev"==c?m=b>e.first?ca(u(e,b-1).text,null,g):0:"add"==c?m=
k+a.options.indentUnit:"subtract"==c?m=k-a.options.indentUnit:"number"==typeof c&&(m=k+c);m=Math.max(0,m);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(m/g);a;--a)d+=g,c+="\t";d<m&&(c+=rd(m-d));if(c!=l)return Wa(e,c,r(b,0),r(b,l.length),"+input"),h.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<l.length){d=r(b,l.length);Zc(e,a,new z(d,d));break}}function oc(a,b,c,d){var e=b,f=b;"number"==typeof b?f=u(a,Math.max(a.first,Math.min(b,a.first+
a.size-1))):e=G(b);if(null==e)return null;d(f,e)&&a.cm&&oa(a.cm,e,c);return f}function Xa(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=x(f.from,A(d).to);){var g=d.pop();if(0>x(g.from,f.from)){f.from=g.from;break}}d.push(f)}U(a,function(){for(var b=d.length-1;0<=b;b--)Wa(a.doc,"",d[b].from,d[b].to,"+delete");Ra(a)})}function sd(a,b,c,d,e){function f(b){var d=(e?hd:Ue)(l,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=!1:(g=b,b=l=u(a,b));if(b)h=
e?(0>c?bc:ac)(l):0>c?l.text.length:0;else return!1}else h=d;return!0}var g=b.line,h=b.ch,k=c,l=u(a,g);if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var m=null;d="group"==d;for(var p=a.cm&&a.cm.getHelper(b,"wordChars"),n=!0;!(0>c)||f(!n);n=!1){var q=l.text.charAt(h)||"\n",q=pc(q,p)?"w":d&&"\n"==q?"n":!d||/\s/.test(q)?null:"p";!d||n||q||(q="s");if(m&&m!=q){0>c&&(c=1,f());break}q&&(m=q);if(0<c&&!f(!n))break}}k=$c(a,r(g,h),b,k,!0);x(b,k)||(k.hitSide=!0);return k}function Ve(a,
b,c,d){var e=a.doc,f=b.left,g;"page"==d?(g=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=Math.max(g-.5*xa(a.display),3),g=(0<c?b.bottom:b.top)+c*g):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){b=gd(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function v(a,b,c,d){q.defaults[a]=b;c&&(Ma[a]=d?function(a,b,d){d!=Gd&&c(a,b,d)}:c)}function fg(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<
b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function qc(a){return"string"==typeof a?va[a]:a}function Ya(a,b,c,d,e){if(d&&d.shared)return gg(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return H(a.cm,Ya)(a,b,c,d,e);var f=new Ia(a,e);e=x(b,c);d&&Y(d,f,!1);if(0<
e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=t("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(We(a,b.line,b,c,f)||b.line!=c.line&&We(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");ta=!0}f.addToHistory&&Pe(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,
c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&ka(a)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&ea(a,0);var d=new rc(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){ya(a,b)&&ea(b,0)});f.clearOnEnter&&w(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Ne=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=
++td,f.atomic=!0);if(h){k&&(h.curOp.updateMaxLine=!0);if(f.collapsed)N(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)oa(h,d,"text");f.atomic&&ke(h.doc);S(h,"markerAdded",h,f)}return f}function gg(a,b,c,d,e){d=Y(d);d.shared=!1;var f=[Ya(a,b,c,d,e)],g=f[0],h=d.widgetNode;Ha(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(Ya(a,y(a,b),y(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;g=A(f)});return new sc(f,
g)}function Xe(a){return a.findMarks(r(a.first,0),a.clipPos(r(a.lastLine())),function(a){return a.parent})}function hg(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Ha(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==E(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function rc(a,b,c){this.marker=a;this.from=b;this.to=c}function zb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function od(a,b){if(b.full)return null;
var c=rb(a,b.from.line)&&u(a,b.from.line).markedSpans,d=rb(a,b.to.line)&&u(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==x(b.from,b.to);if(c)for(var h=0,k;h<c.length;++h){var l=c[h],m=l.marker;if(null==l.from||(m.inclusiveLeft?l.from<=e:l.from<e)||!(l.from!=e||"bookmark"!=m.type||g&&l.marker.insertLeft)){var p=null==l.to||(m.inclusiveRight?l.to>=e:l.to>e);(k||(k=[])).push(new rc(m,l.from,p?null:l.to))}}c=k;if(d)for(var h=0,n;h<d.length;++h)if(k=d[h],l=k.marker,null==
k.to||(l.inclusiveRight?k.to>=f:k.to>f)||k.from==f&&"bookmark"==l.type&&(!g||k.marker.insertLeft))m=null==k.from||(l.inclusiveLeft?k.from<=f:k.from<f),(n||(n=[])).push(new rc(l,m?null:k.from-f,null==k.to?null:k.to-f));d=n;g=1==b.text.length;n=A(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(k=zb(d,h.marker),k)?g&&(h.to=null==k.to?null:k.to+n):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],null!=h.to&&(h.to+=n),null==h.from?(k=zb(c,h.marker),k||(h.from=n,g&&(c||(c=[])).push(h))):
(h.from+=n,g&&(c||(c=[])).push(h));c&&(c=Ye(c));d&&d!=c&&(d=Ye(d));e=[c];if(!g){var g=b.text.length-2,q;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(q||(q=[])).push(new rc(c[f].marker,null,null));for(f=0;f<g;++f)e.push(q);e.push(d)}return e}function Ye(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Re(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(ig(c[d]));c=e}else c=
null;d=od(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var k=g[h],l=0;l<f.length;++l)if(f[l].marker==k.marker)continue a;f.push(k)}}else g&&(c[e]=g)}return c}function dg(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=E(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];
for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>x(g.to,e.from)||0<x(g.from,e.to))){var h=[f,1],k=x(g.from,e.from),l=x(g.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<l||!c.inclusiveRight&&!l)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-1}}}return a}function Ze(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function $e(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=
b}}function af(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=x(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=x(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function za(a,b){var c=ta&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>af(d,e.marker))&&(d=e.marker);return d}function We(a,b,c,d,e){a=u(a,b);if(a=ta&&a.markedSpans)for(b=0;b<a.length;++b){var f=
a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=x(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=x(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(f.marker.inclusiveRight&&e.inclusiveLeft?0<=x(g.to,c):0<x(g.to,c))||0<=h&&(f.marker.inclusiveRight&&e.inclusiveLeft?0>=x(g.from,d):0>x(g.from,d))))return!0}}}function ka(a){for(var b;b=za(a,!0);)a=b.find(-1,!0).line;return a}function Pc(a,b){var c=u(a,b),d=ka(c);return c==d?b:G(d)}
function Md(a,b){if(b>a.lastLine())return b;var c=u(a,b),d;if(!ya(a,c))return b;for(;d=za(c,!1);)c=d.find(1,!0).line;return G(c)+1}function ya(a,b){var c=ta&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&ud(a,b,d)))return!0}function ud(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),ud(a,b.line,zb(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,
e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&ud(a,b,d))return!0}function vb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!Yc(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");V(b.display.measure,
t("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function jg(a,b,c,d){var e=new tc(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);oc(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;f&&!ya(a,b)&&(c=ga(b)<a.scrollTop,ea(b,b.height+vb(e)),c&&mc(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function bf(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);
if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function cf(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=q.innerMode(a,b);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function vd(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=q.innerMode(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");
}function df(a,b,c,d){function e(a){return{start:m.start,end:m.pos,string:m.current(),type:h||null,state:a?ua(f.mode,l):l}}var f=a.doc,g=f.mode,h;b=y(f,b);var k=u(f,b.line),l=tb(a,b.line,c),m=new uc(k.text,a.options.tabSize),p;for(d&&(p=[]);(d||m.pos<b.ch)&&!m.eol();)m.start=m.pos,h=vd(g,m,l),d&&p.push(e(!0));return d?p:e()}function ef(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,l=null,m=new uc(b,a.options.tabSize),p,n=a.options.addModeClass&&[null];for(""==b&&
bf(cf(c,d),f);!m.eol();){m.pos>a.options.maxHighlightLength?(h=!1,g&&bd(a,b,d,m.pos),m.pos=b.length,p=null):p=bf(vd(c,m,d,n),f);if(n){var q=n[0].name;q&&(p="m-"+(p?q+" "+p:q))}if(!h||l!=p){for(;k<m.start;)k=Math.min(m.start,k+5E3),e(k,l);l=p}m.start=m.pos}for(;k<m.pos;)a=Math.min(m.pos,k+5E3),e(a,l),k=a}function pe(a,b,c,d){var e=[a.state.modeGen],f={};ef(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,k=0;ef(a,b.text,g.mode,
!0,function(a,b){for(var c=h;k<a;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;k=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function ff(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=tb(a,G(b)),e=pe(a,b,b.text.length>a.options.maxHighlightLength?ua(a.doc.mode,d):d);b.stateAfter=d;b.styles=e.styles;e.classes?b.styleClasses=e.classes:b.styleClasses&&
(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function bd(a,b,c,d){var e=a.doc.mode;a=new uc(b,a.options.tabSize);a.start=a.pos=d||0;for(""==b&&cf(e,c);!a.eol();)vd(e,a,c),a.start=a.pos}function gf(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?kg:lg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$\x26"))}function Td(a,b){var c=t("span",null,null,L?"padding-right: .1px":null),c={pre:t("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:(B||
L)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=mg;var g;g=a.display.measure;if(null!=wd)g=wd;else{var h=V(g,document.createTextNode("A\u062eA")),k=Ua(h,0,1).getBoundingClientRect(),h=Ua(h,1,2).getBoundingClientRect();ra(g);g=k&&k.left!=k.right?wd=3>h.right-k.right:!1}g&&(f=aa(e))&&(c.addToken=ng(c.addToken,f));c.map=[];k=b!=a.display.externalMeasured&&G(e);a:{g=c;var k=ff(a,e,k),h=e.markedSpans,l=e.text,m=
0;if(h)for(var p=l.length,n=0,q=1,r="",u=void 0,w=void 0,v=0,x=void 0,y=void 0,A=void 0,C=void 0,z=void 0;;){if(v==n){for(var x=y=A=C=w="",z=null,v=Infinity,H=[],I,D=0;D<h.length;++D){var J=h[D],E=J.marker;"bookmark"==E.type&&J.from==n&&E.widgetNode?H.push(E):J.from<=n&&(null==J.to||J.to>n||E.collapsed&&J.to==n&&J.from==n)?(null!=J.to&&J.to!=n&&v>J.to&&(v=J.to,y=""),E.className&&(x+=" "+E.className),E.css&&(w=(w?w+";":"")+E.css),E.startStyle&&J.from==n&&(A+=" "+E.startStyle),E.endStyle&&J.to==v&&
(I||(I=[])).push(E.endStyle,J.to),E.title&&!C&&(C=E.title),E.collapsed&&(!z||0>af(z.marker,E))&&(z=J)):J.from>n&&v>J.from&&(v=J.from)}if(I)for(D=0;D<I.length;D+=2)I[D+1]==v&&(y+=" "+I[D]);if(!z||z.from==n)for(D=0;D<H.length;++D)hf(g,0,H[D]);if(z&&(z.from||0)==n){hf(g,(null==z.to?p+1:z.to)-n,z.marker,null==z.from);if(null==z.to)break a;z.to==n&&(z=!1)}}if(n>=p)break;for(H=Math.min(p,v);;){if(r){D=n+r.length;z||(J=D>H?r.slice(0,H-n):r,g.addToken(g,J,u?u+x:x,A,n+J.length==v?y:"",C,w));if(D>=H){r=r.slice(H-
n);n=H;break}n=D;A=""}r=l.slice(m,m=k[q++]);u=gf(k[q++],g.cm.options)}}else for(var q=1;q<k.length;q+=2)g.addToken(g,l.slice(m,m=k[q]),gf(k[q+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=xd(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=xd(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(og(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),
(b.measure.caches||(b.measure.caches=[])).push({}))}L&&(f=c.content.lastChild,/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack");K(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=xd(c.pre.className,c.textClass||""));return c}function mg(a,b,c,d,e,f,g){if(b){var h;if(a.splitSpaces)if(h=a.trailingSpace,1<b.length&&!/  /.test(b))h=b;else{for(var k="",l=0;l<b.length;l++){var m=b.charAt(l);" "!=m||!h||l!=b.length-1&&32!=b.charCodeAt(l+
1)||(m="\u00a0");k+=m;h=" "==m}h=k}else h=b;k=h;l=a.cm.state.specialChars;m=!1;if(l.test(b)){h=document.createDocumentFragment();for(var p=0;;){l.lastIndex=p;var n=l.exec(b),q=n?n.index-p:b.length-p;if(q){var r=document.createTextNode(k.slice(p,p+q));B&&9>C?h.appendChild(t("span",[r])):h.appendChild(r);a.map.push(a.pos,a.pos+q,r);a.col+=q;a.pos+=q}if(!n)break;p+=q+1;"\t"==n[0]?(r=a.cm.options.tabSize,n=r-a.col%r,r=h.appendChild(t("span",rd(n),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text",
"\t"),a.col+=n):("\r"==n[0]||"\n"==n[0]?(r=h.appendChild(t("span","\r"==n[0]?"\u240d":"\u2424","cm-invalidchar")),r.setAttribute("cm-text",n[0])):(r=a.cm.options.specialCharPlaceholder(n[0]),r.setAttribute("cm-text",n[0]),B&&9>C?h.appendChild(t("span",[r])):h.appendChild(r)),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}}else a.col+=b.length,h=document.createTextNode(k),a.map.push(a.pos,a.pos+b.length,h),B&&9>C&&(m=!0),a.pos+=b.length;a.trailingSpace=32==k.charCodeAt(b.length-1);if(c||d||e||m||g)return b=
c||"",d&&(b+=d),e&&(b+=e),d=t("span",[h],b,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(h)}}function ng(a,b){return function(c,d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var p=0;p<b.length;p++){var n=b[p];if(n.to>l&&n.from<=l)break}if(n.to>=m)return a(c,d,e,f,g,h,k);a(c,d.slice(0,n.to-l),e,f,null,h,k);f=null;d=d.slice(n.to-l);l=n.to}}}function hf(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&
(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b;a.trailingSpace=!1}function Te(a,b){return 0==b.from.ch&&0==b.to.ch&&""==A(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function qd(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Ze(a);$e(a,e);c=d?d(a):1;c!=a.height&&ea(a,c);S(a,"change",a,b)}
function f(a,b){for(var e=a,f=[];e<b;++e)f.push(new Ab(k[e],c?c[e]:null,d));return f}var g=b.from,h=b.to,k=b.text,l=u(a,g.line),m=u(a,h.line),p=A(k),n=c?c[k.length-1]:null,q=h.line-g.line;if(b.full)a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length);else if(Te(a,b)){var r=f(0,k.length-1);e(m,m.text,n);q&&a.remove(g.line,q);r.length&&a.insert(g.line,r)}else l==m?1==k.length?e(l,l.text.slice(0,g.ch)+p+l.text.slice(h.ch),n):(r=f(1,k.length-1),r.push(new Ab(p+l.text.slice(h.ch),n,d)),e(l,l.text.slice(0,
g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,r)):1==k.length?(e(l,l.text.slice(0,g.ch)+k[0]+m.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,q)):(e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),e(m,p+m.text.slice(h.ch),n),r=f(1,k.length-1),1<q&&a.remove(g.line+1,q-1),a.insert(g.line+1,r));S(a,"change",a,b)}function Bb(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Cb(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],
b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Ha(a,b,c){function d(a,f,g){if(a.linked)for(var h=0;h<a.linked.length;++h){var k=a.linked[h];if(k.doc!=f){var l=g&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function Fd(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;Dc(a);Cc(a);a.options.lineWrapping||Gc(a);a.options.mode=b.modeOption;N(a)}function u(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+
(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function Da(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function yd(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function ea(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function G(a){if(null==a.parent)return null;
var b=a.parent;a=E(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Aa(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function ga(a){a=ka(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;
else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function aa(a){var b=a.order;null==b&&(b=a.order=pg(a.text));return b}function vc(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function pd(a,b){var c={from:Uc(b.from),to:Ga(b),text:Da(a,b.from,b.to)};jf(a,c,b.from.line,b.to.line+
1);Ha(a,function(a){jf(a,c,b.from.line,b.to.line+1)},!0);return c}function ge(a){for(;a.length;)if(A(a).ranges)a.pop();else break}function Pe(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,h;if(h=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(ge(e.done),g=A(e.done)):e.done.length&&!A(e.done).ranges?g=A(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),
g=A(e.done)):g=void 0,h=g;if(h){var k=A(g.changes);0==x(b.from,b.to)&&0==x(b.from,k.to)?k.to=Ga(b):g.changes.push(pd(a,b))}else for((g=A(e.done))&&g.ranges||Wb(a.sel,e.done),g={changes:[pd(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||K(a,"historyAdded")}function Wb(a,b){var c=A(b);c&&
c.ranges&&c.equals(a)||b.push(a)}function jf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function ig(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Za(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?ma.prototype.deepCopy.call(f):f);else{var f=f.changes,
g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<E(b,Number(l[1]))&&(A(g)[m]=k[m],delete k[m])}}}return e}function kf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function lf(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)kf(f.ranges[h].anchor,b,c,d),kf(f.ranges[h].head,b,c,d)}else{for(h=
0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=r(k.from.line+d,k.from.ch),k.to=r(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Qe(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;lf(a.done,c,d,e);lf(a.undone,c,d,e)}function ld(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Ee(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Z&&a.ctrlKey&&1==b&&(b=3);return b}function wc(a,
b,c){a=a._handlers&&a._handlers[b];return c?a&&0<a.length?a.slice():mf:a||mf}function S(a,b){function c(a){return function(){a.apply(null,e)}}var d=wc(a,b,!1);if(d.length){var e=Array.prototype.slice.call(arguments,2),f;Va?f=Va.delayedCallbacks:Db?f=Db:(f=Db=[],setTimeout(qg,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function qg(){var a=Db;Db=null;for(var b=0;b<a.length;++b)a[b]()}function I(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});K(a,c||b.type,
a,b);return ld(b)||b.codemirrorIgnore}function je(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==E(a,b[c])&&a.push(b[c])}}function X(a,b){return 0<wc(a,b).length}function $a(a){a.prototype.on=function(a,c){w(this,a,c)};a.prototype.off=function(a,c){la(this,a,c)}}function wa(){this.id=null}function rd(a){for(;xc.length<=a;)xc.push(A(xc)+" ");return xc[a]}function A(a){return a[a.length-1]}function E(a,
b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function Rb(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function rg(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=e;)d++;a.splice(d,0,b)}function Eb(){}function nf(a,b){var c;Object.create?c=Object.create(a):(Eb.prototype=a,c=new Eb);b&&Y(b,c);return c}function Y(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function zc(a){var b=Array.prototype.slice.call(arguments,
1);return function(){return a.apply(null,b)}}function pc(a,b){return b?-1<b.source.indexOf("\\w")&&of(a)?!0:b.test(a):of(a)}function pf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function ub(a){return 768<=a.charCodeAt(0)&&sg.test(a)}function t(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function ra(a){for(var b=a.childNodes.length;0<
b;--b)a.removeChild(a.firstChild);return a}function V(a,b){return ra(a).appendChild(b)}function ha(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function Fb(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function xd(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Fb(c[d]).test(b)&&(b+=" "+c[d]);return b}function qf(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=
b[c].CodeMirror;d&&a(d)}}function Bf(){var a;w(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;qf(Rf)},100))});w(window,"blur",function(){qf(db)})}function og(a){if(null==zd){var b=t("span","\u200b");V(a,t("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(zd=1>=b.offsetWidth&&2<b.offsetHeight&&!(B&&8>C))}a=zd?t("span","\u200b"):t("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function If(a,
b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function ed(a){return a.level%2?a.to:a.from}function fd(a){return a.level%2?a.from:a.to}function ac(a){return(a=aa(a))?ed(a[0]):0}function bc(a){var b=aa(a);return b?fd(A(b)):a.text.length}function rf(a,b){var c=u(a.doc,b),d=ka(c);d!=c&&(b=G(d));d=(c=aa(d))?c[0].level%2?bc(d):ac(d):0;return r(b,d)}function sf(a,
b){var c=rf(a,b.line),d=u(a.doc,c.line),e=aa(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),r(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function Sb(a,b){wb=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,h=a[0].level;f=f==h?!0:g==h?!1:f<g;if(f)return e.from!=e.to&&(wb=d),c;e.from!=e.to&&(wb=c);break}}return d}function Ad(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&ub(a.text.charAt(b)));
return b}function hd(a,b,c,d){var e=aa(a);if(!e)return Ue(a,b,c,d);var f=Sb(e,b),g=e[f];for(b=Ad(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Sb(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Ad(a,g.to,-1,d):Ad(a,g.from,1,d)}}function Ue(a,b,c,d){b+=c;if(d)for(;0<b&&ub(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var T=navigator.userAgent,tf=navigator.platform,qa=/gecko\/\d/i.test(T),uf=/MSIE \d/.test(T),
vf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(T),B=uf||vf,C=B&&(uf?document.documentMode||6:vf[1]),L=/WebKit\//.test(T),tg=L&&/Qt\/\d+\.\d+/.test(T),ug=/Chrome\//.test(T),da=/Opera\//.test(T),ze=/Apple Computer/.test(navigator.vendor),vg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(T),Of=/PhantomJS/.test(T),qb=/AppleWebKit/.test(T)&&/Mobile\/\w+/.test(T),cb=qb||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(T),Z=qb||/Mac/.test(tf),Xf=/\bCrOS\b/.test(T),wg=/win/i.test(tf),Ja=da&&T.match(/Version\/(\d*\.\d*)/);
Ja&&(Ja=Number(Ja[1]));Ja&&15<=Ja&&(da=!1,L=!0);var wf=Z&&(tg||da&&(null==Ja||12.11>Ja)),jd=qa||B&&9<=C,Ne=!1,ta=!1;Ic.prototype=Y({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display=
"block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<a.clientHeight&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,
this.disableHoriz)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){this.horiz.style.height=this.vert.style.width=Z&&!vg?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new wa;this.disableVert=new wa},enableZeroWidthBar:function(a,b){function c(){var d=a.getBoundingClientRect();document.elementFromPoint(d.left+1,d.bottom-1)!=a?
a.style.pointerEvents="none":b.set(1E3,c)}a.style.pointerEvents="auto";b.set(1E3,c)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},Ic.prototype);Jc.prototype=Y({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},Jc.prototype);q.scrollbarModel={"native":Ic,"null":Jc};Mb.prototype.signal=function(a,b){X(a,b)&&this.events.push(arguments)};Mb.prototype.finish=function(){for(var a=0;a<
this.events.length;a++)K.apply(null,this.events[a])};var r=q.Pos=function(a,b){if(!(this instanceof r))return new r(a,b);this.line=a;this.ch=b},x=q.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},Q=null;Vc.prototype=Y({init:function(a){function b(a){if(!I(d,a)){if(d.somethingSelected())Q={lineWise:!1,text:d.getSelections()},c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=Q.text.join("\n"),ab(f));else if(d.options.lineWiseCopyCut){var b=Yd(d);Q={lineWise:!0,text:b.text};
"cut"==a.type?d.setSelections(b.ranges,null,ja):(c.prevInput="",f.value=b.text.join("\n"),ab(f))}else return;"cut"==a.type&&(d.state.cutIncoming=!0)}}var c=this,d=this.cm,e=this.wrapper=$d(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild);qb&&(f.style.width="0px");w(f,"input",function(){B&&9<=C&&c.hasSelection&&(c.hasSelection=null);c.poll()});w(f,"paste",function(a){I(d,a)||Xd(a,d)||(d.state.pasteIncoming=!0,c.fastPoll())});w(f,"cut",b);w(f,"copy",b);w(a.scroller,"paste",
function(b){pa(a,b)||I(d,b)||(d.state.pasteIncoming=!0,c.focus())});w(a.lineSpace,"selectstart",function(b){pa(a,b)||P(b)});w(f,"compositionstart",function(){var a=d.getCursor("from");c.composing&&c.composing.range.clear();c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}});w(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=me(a);if(a.options.moveInputWithCursor){var a=
na(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},showSelection:function(a){var b=this.cm.display;V(b.cursorDiv,a.cursors);V(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b,
c,d=this.cm,e=d.doc;d.somethingSelected()?(this.prevInput="",b=e.sel.primary(),c=(b=Je&&(100<b.to().line-b.from().line||1E3<(c=d.getSelection()).length))?"-":c||d.getSelection(),this.textarea.value=c,d.state.focused&&ab(this.textarea),B&&9<=C&&(this.hasSelection=c)):a||(this.prevInput=this.textarea.value="",B&&9<=C&&(this.hasSelection=null));this.inaccurateSelection=b}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&
(!cb||ha()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;
c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||xg(b)&&!c&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(B&&9<=C&&this.hasSelection===d||Z&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}for(var f=
0,e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;U(a,function(){Qb(a,d.slice(f),c.length-f,null,g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){B&&9<=C&&(this.hasSelection=
null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=b.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.cssText=m;g.style.cssText=l;B&&9>C&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!B||B&&9>C)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&
0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?H(e,jc.selectAll)(e):10>a++?f.detectingSelectAll=setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=Fa(e,a),k=f.scroller.scrollTop;if(h&&!da){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&H(e,D)(e.doc,ia(h),ja);var l=g.style.cssText,m=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";h=d.wrapper.getBoundingClientRect();g.style.cssText=
"position: absolute; width: 30px; height: 30px; top: "+(a.clientY-h.top-5)+"px; left: "+(a.clientX-h.left-5)+"px; z-index: 1000; background: "+(B?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";if(L)var p=window.scrollY;f.input.focus();L&&window.scrollTo(null,p);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);
B&&9<=C&&b();if(jd){ec(a);var n=function(){la(window,"mouseup",n);setTimeout(c,20)};w(window,"mouseup",n)}else setTimeout(c,50)}},readOnlyChanged:function(a){a||this.reset()},setUneditable:Eb,needsContentAttribute:!1},Vc.prototype);Wc.prototype=Y({init:function(a){function b(a){if(!I(d,a)){if(d.somethingSelected())Q={lineWise:!1,text:d.getSelections()},"cut"==a.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var b=Yd(d);Q={lineWise:!0,text:b.text};"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,
0,ja);d.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var h=Q.text.join("\n");a.clipboardData.setData("Text",h);if(a.clipboardData.getData("Text")==h){a.preventDefault();return}}var k=$d();a=k.firstChild;d.display.lineSpace.insertBefore(k,d.display.lineSpace.firstChild);a.value=Q.text.join("\n");var l=document.activeElement;ab(a);setTimeout(function(){d.display.lineSpace.removeChild(k);l.focus();l==e&&c.showPrimarySelection()},50)}}var c=this,d=c.cm,
e=c.div=a.lineDiv;Zd(e,d.options.spellcheck);w(e,"paste",function(a){I(d,a)||Xd(a,d)||11>=C&&setTimeout(H(d,function(){c.pollContent()||N(d)}),20)});w(e,"compositionstart",function(a){a=a.data;c.composing={sel:d.doc.sel,data:a,startData:a};if(a){var b=d.doc.sel.primary(),e=d.getLine(b.head.line).indexOf(a,Math.max(0,b.head.ch-a.length));-1<e&&e<=b.head.ch&&(c.composing.sel=ia(r(b.head.line,e),r(b.head.line,e+a.length)))}});w(e,"compositionupdate",function(a){c.composing.data=a.data});w(e,"compositionend",
function(a){var b=c.composing;b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b);c.composing==b&&(c.composing=null)},50))});w(e,"touchstart",function(){c.forceCompositionEnd()});w(e,"input",function(){c.composing||!d.isReadOnly()&&c.pollContent()||U(c.cm,function(){N(d)})});w(e,"copy",b);w(e,"cut",b)},prepareSelection:function(){var a=me(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a,b){a&&this.cm.display.view.length&&
((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=Tb(this.cm,a.anchorNode,a.anchorOffset),d=Tb(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=x(Pb(c,d),b.from())||0!=x(Ob(c,d),b.to()))if(c=ae(this.cm,b.from()),d=ae(this.cm,b.to()),c||d){var e=this.cm.display.view,b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-
1],offset:d[d.length-2]-d[d.length-3]}):c={node:e[0].measure.map[2],offset:0};try{var f=Ua(c.node,c.offset,d.offset,d.node)}catch(g){}f&&(!qa&&this.cm.state.focused?(a.collapse(c.node,c.offset),f.collapsed||a.addRange(f)):(a.removeAllRanges(),a.addRange(f)),b&&null==a.anchorNode?a.addRange(b):qa&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=
!0})},20)},showMultipleSelections:function(a){V(this.cm.display.cursorDiv,a.cursors);V(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return Yc(this.div,a)},focus:function(){"nocursor"!=
this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():U(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=
this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=Tb(b,a.anchorNode,a.anchorOffset),d=Tb(b,a.focusNode,a.focusOffset);c&&d&&U(b,function(){D(b.doc,ia(c,d),ja);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),
d=c.from(),c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-1)return!1;var e;d.line==b.viewFrom||0==(e=Ca(a,d.line))?(d=G(b.view[0].line),e=b.view[0].node):(d=G(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=Ca(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.lineDiv.lastChild):(c=G(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=a.doc.splitLines(Ff(a,e,b,d,c));for(e=Da(a.doc,r(d,0),r(c,u(a.doc,c).text.length));1<b.length&&1<e.length;)if(A(b)==A(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),
e.shift(),d++;else break;for(var g=0,f=0,h=b[0],k=e[0],l=Math.min(h.length,k.length);g<l&&h.charCodeAt(g)==k.charCodeAt(g);)++g;h=A(b);k=A(e);for(l=Math.min(h.length-(1==b.length?g:0),k.length-(1==e.length?g:0));f<l&&h.charCodeAt(h.length-f-1)==k.charCodeAt(k.length-f-1);)++f;b[b.length-1]=h.slice(0,h.length-f);b[0]=b[0].slice(g);d=r(d,g);c=r(c,e.length?A(e).length-f:0);if(1<b.length||b[0]||x(d,c))return Wa(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},
forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){this.cm.isReadOnly()?H(this.cm,N)(this.cm):a.data&&a.data!=a.startData&&H(this.cm,Qb)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.contentEditable="false"},onKeyPress:function(a){a.preventDefault();this.cm.isReadOnly()||H(this.cm,Qb)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),
0)},readOnlyChanged:function(a){this.div.contentEditable=String("nocursor"!=a)},onContextMenu:Eb,resetPosition:Eb,needsContentAttribute:!0},Wc.prototype);q.inputStyles={textarea:Vc,contenteditable:Wc};ma.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=x(c.anchor,d.anchor)||0!=x(c.head,d.head))return!1}return!0},
deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new z(Uc(this.ranges[b].anchor),Uc(this.ranges[b].head));return new ma(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=x(b,d.from())&&0>=x(a,d.to()))return c}return-1}};z.prototype={from:function(){return Pb(this.anchor,this.head)},to:function(){return Ob(this.anchor,
this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var re={left:0,right:0,top:0,bottom:0},Ea,Va=null,Nf=0,gc,fc,ye=0,hc=0,W=null;B?W=-.53:qa?W=15:ug?W=-.7:ze&&(W=-1/3);var Ge=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};q.wheelEventPixels=function(a){a=Ge(a);a.x*=W;a.y*=W;return a};var $f=new wa,
md=null,Ga=q.changeEnd=function(a){return a.text?r(a.from.line+a.text.length-1,A(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};q.prototype={constructor:q,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ma.hasOwnProperty(a)&&H(this,Ma[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](qc(a))},removeKeyMap:function(a){for(var b=
this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:M(function(a,b){var c=a.token?a:q.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");rg(this.state.overlays,{mode:c,modeSpec:a,opaque:b&&b.opaque,priority:b&&b.priority||0},function(a){return a.priority});this.state.modeGen++;N(this)}),removeOverlay:M(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==
a){b.splice(c,1);this.state.modeGen++;N(this);break}}}),indentLine:M(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");rb(this.doc,a)&&pb(this,a,b,c)}),indentSelection:M(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(pb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Ra(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),
e.line-(e.ch?0:1))+1,e=g;e<c;++e)pb(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&Zc(this.doc,d,new z(f,e[d].to()),ja)}}}),getTokenAt:function(a,b){return df(this,a,b)},getLineTokens:function(a,b){return df(this,r(a),b,!0)},getTokenTypeAt:function(a){a=y(this.doc,a);var b=ff(this,u(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):
-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?q.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!bb.hasOwnProperty(b))return c;var d=bb[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&
c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==E(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return tb(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?y(this.doc,a):a?c.from():c.to();return na(this,c,b||"page")},charCoords:function(a,b){return Xb(this,y(this.doc,a),b||"page")},coordsChar:function(a,
b){a=ue(this,a,b||"page");return gd(this,a.left,a.top)},lineAtHeight:function(a,b){a=ue(this,{top:a,left:0},b||"page").top;return Aa(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d;"number"==typeof a?(d=this.doc.first+this.doc.size-1,a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0),d=u(this.doc,a)):d=a;return dd(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-ga(d):0)},defaultTextHeight:function(){return xa(this.display)},defaultCharWidth:function(){return gb(this.display)},
setGutterMarker:M(function(a,b,c){return oc(this.doc,a,"gutter",function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&pf(e)&&(a.gutterMarkers=null);return!0})}),clearGutter:M(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,oa(b,d,"gutter"),pf(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!rb(this.doc,a))return null;var b=a;a=u(this.doc,a);if(!a)return null}else if(b=
G(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=na(this,y(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;
else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=
h+"px");c&&(a=cc(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&lb(this,a.scrollTop),null!=a.scrollLeft&&Oa(this,a.scrollLeft))},triggerOnKeyDown:M(Ce),triggerOnKeyPress:M(De),triggerOnKeyUp:Be,execCommand:function(a){if(jc.hasOwnProperty(a))return jc[a].call(null,this)},triggerElectric:M(function(a){Wd(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=y(this.doc,a);f<b&&(a=sd(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:M(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||
c.doc.extend||d.empty()?sd(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Gb)}),deleteH:M(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):Xa(this,function(d){var e=sd(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=y(this.doc,a);f<b&&(a=na(this,a,"div"),null==d?d=a.left:a.left=d,a=Ve(this,a,e,c),!a.hitSide);++f);return a},moveV:M(function(a,
b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var k=na(c,g.head,"div");null!=g.goalColumn&&(k.left=g.goalColumn);e.push(k.left);var l=Ve(c,k,a,b);"page"==b&&g==d.sel.primary()&&mc(c,null,Xb(c,l,"div").top-k.top);return l},Gb);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=u(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,
"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;for(var f=b.charAt(c),f=pc(f,e)?function(a){return pc(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!pc(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new z(r(a.line,c),r(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?mb(this.display.cursorDiv,"CodeMirror-overwrite"):kb(this.display.cursorDiv,"CodeMirror-overwrite"),
K(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==ha()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:M(function(a,b){null==a&&null==b||nc(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-fa(this)-this.display.barHeight,width:a.scrollWidth-fa(this)-this.display.barWidth,
clientHeight:Qc(this),clientWidth:Ba(this)}},scrollIntoView:M(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:r(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)nc(this),this.curOp.scrollToPos=a;else{var c=cc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+
a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:M(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&te(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){oa(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;K(d,"refresh",this)}),
operation:function(a){return U(this,a)},refresh:M(function(){var a=this.display.cachedTextHeight;N(this);this.curOp.forceUpdate=!0;hb(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);Fc(this);(null==a||.5<Math.abs(a-xa(this.display)))&&Dc(this);K(this,"refresh",this)}),swapDoc:M(function(a){var b=this.doc;b.cm=null;Fd(this,a);hb(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;S(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},
getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};$a(q);var yf=q.defaults={},Ma=q.optionHandlers={},Gd=q.Init={toString:function(){return"CodeMirror.Init"}};v("value","",function(a,b){a.setValue(b)},!0);v("mode",null,function(a,b){a.doc.modeOption=b;Cc(a)},!0);v("indentUnit",2,Cc,!0);v("indentWithTabs",!1);v("smartIndent",!0);v("tabSize",4,function(a){eb(a);hb(a);N(a)},!0);
v("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var h=a.text.indexOf(b,e);if(-1==h)break;e=h+b.length;c.push(r(d,h))}d++});for(var e=c.length-1;0<=e;e--)Wa(a.doc,b,c[e],r(c[e].line,c[e].ch+b.length))}});v("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=q.Init&&a.refresh()});v("specialCharPlaceholder",function(a){var b=
t("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);v("electricChars",!0);v("inputStyle",cb?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);v("spellcheck",!1,function(a,b){a.getInputField().spellcheck=b},!0);v("rtlMoveVisually",!wg);v("wholeLineUpdateBefore",!0);v("theme","default",function(a){Cd(a);ib(a)},!0);v("keyMap","default",
function(a,b,c){b=qc(b);(c=c!=q.Init&&qc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});v("extraKeys",null);v("lineWrapping",!1,function(a){a.options.lineWrapping?(mb(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(kb(a.display.wrapper,"CodeMirror-wrap"),Gc(a));Dc(a);N(a);hb(a);setTimeout(function(){Pa(a)},100)},!0);v("gutters",[],function(a){yc(a.options);ib(a)},!0);v("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?Lc(a.display)+
"px":"0";a.refresh()},!0);v("coverGutterNextToScrollbar",!1,function(a){Pa(a)},!0);v("scrollbarStyle","native",function(a){Dd(a);Pa(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);v("lineNumbers",!1,function(a){yc(a.options);ib(a)},!0);v("firstLineNumber",1,ib,!0);v("lineNumberFormatter",function(a){return a},ib,!0);v("showCursorWhenSelecting",!1,nb,!0);v("resetSelectionOnContextMenu",!0);v("lineWiseCopyCut",!0);v("readOnly",!1,function(a,
b){"nocursor"==b?(db(a),a.display.input.blur(),a.display.disabled=!0):a.display.disabled=!1;a.display.input.readOnlyChanged(b)});v("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);v("dragDrop",!0,function(a,b,c){!b!=!(c&&c!=q.Init)&&(c=a.display.dragFunctions,b=b?w:la,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.enter),b(a.display.scroller,"dragover",c.over),b(a.display.scroller,"dragleave",c.leave),b(a.display.scroller,"drop",c.drop))});v("allowDropFileTypes",
null);v("cursorBlinkRate",530);v("cursorScrollMargin",0);v("cursorHeight",1,nb,!0);v("singleCursorHeightPerLine",!0,nb,!0);v("workTime",100);v("workDelay",100);v("flattenSpans",!0,eb,!0);v("addModeClass",!1,eb,!0);v("pollInterval",100);v("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});v("historyEventDelay",1250);v("viewportMargin",10,function(a){a.refresh()},!0);v("maxHighlightLength",1E4,eb,!0);v("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});v("tabindex",null,
function(a,b){a.display.input.getField().tabIndex=b||""});v("autofocus",null);var xf=q.modes={},Hb=q.mimeModes={};q.defineMode=function(a,b){q.defaults.mode||"null"==a||(q.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));xf[a]=b};q.defineMIME=function(a,b){Hb[a]=b};q.resolveMode=function(a){if("string"==typeof a&&Hb.hasOwnProperty(a))a=Hb[a];else if(a&&"string"==typeof a.name&&Hb.hasOwnProperty(a.name)){var b=Hb[a.name];"string"==typeof b&&(b={name:b});
a=nf(b,a);a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return q.resolveMode("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return q.resolveMode("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}};q.getMode=function(a,b){b=q.resolveMode(b);var c=xf[b.name];if(!c)return q.getMode(a,"text/plain");c=c(a,b);if(Ib.hasOwnProperty(b.name)){var d=Ib[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),
c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(e in b.modeProps)c[e]=b.modeProps[e];return c};q.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});q.defineMIME("text/plain","null");var Ib=q.modeExtensions={};q.extendMode=function(a,b){var c=Ib.hasOwnProperty(a)?Ib[a]:Ib[a]={};Y(b,c)};q.defineExtension=function(a,b){q.prototype[a]=b};q.defineDocExtension=function(a,b){R.prototype[a]=b};q.defineOption=v;var Bc=[];q.defineInitHook=function(a){Bc.push(a)};
var bb=q.helpers={};q.registerHelper=function(a,b,c){bb.hasOwnProperty(a)||(bb[a]=q[a]={_global:[]});bb[a][b]=c};q.registerGlobalHelper=function(a,b,c,d){q.registerHelper(a,b,d);bb[a]._global.push({pred:c,val:d})};var ua=q.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},Lf=q.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};q.innerMode=function(a,b){for(;a.innerMode;){var c=
a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var jc=q.commands={selectAll:function(a){a.setSelection(r(a.firstLine(),0),r(a.lastLine()),ja)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),ja)},killLine:function(a){Xa(a,function(b){if(b.empty()){var c=u(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:r(b.head.line+1,0)}:{from:b.head,to:r(b.head.line,c)}}return{from:b.from(),to:b.to()}})},
deleteLine:function(a){Xa(a,function(b){return{from:r(b.from().line,0),to:y(a.doc,r(b.to().line+1,0))}})},delLineLeft:function(a){Xa(a,function(a){return{from:r(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){Xa(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){Xa(a,function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");
return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(r(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(r(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return rf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return sf(a,b.head)},{origin:"+move",
bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=u(a.doc,b);c=za(d,!1);)d=c.find(1,!0).line,b=null;c=(c=aa(d))?c[0].level%2?ac(d):bc(d):d.text.length;return r(null==b?G(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},Gb)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+
5;return a.coordsChar({left:0,top:b},"div")},Gb)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?sf(a,b.head):c},Gb)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},
goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},
delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=ca(a.getLine(f.line),f.ch,d);b.push(rd(d-f%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):
a.execCommand("insertTab")},transposeChars:function(a){U(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=u(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new r(e.line,e.ch-1)),0<e.ch)e=new r(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),r(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=u(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),r(e.line-1,g.length-1),r(e.line,1),"+transpose")}c.push(new z(e,
e))}a.setSelections(c)})},newlineAndIndent:function(a){U(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0)}Ra(a)})},openLine:function(a){a.replaceSelection("\n","start")},toggleOverwrite:function(a){a.toggleOverwrite()}},va=q.keyMap={};va.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",
PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};va.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart",
"Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};va.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft",
"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};va.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight",
"Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic",
"emacsy"]};va["default"]=Z?va.macDefault:va.pcDefault;q.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=Rb(c.split(" "),fg),f=0;f<e.length;f++){var g,h;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var k=b[h];if(!k)b[h]=g;else if(k!=g)throw Error("Inconsistent bindings for "+h);}delete a[c]}}for(var l in b)a[l]=b[l];return a};var xb=q.lookupKey=function(a,b,c,d){b=qc(b);
var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return xb(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=xb(a,b.fallthrough[e],c,d);if(f)return f}}},Zf=q.isModifierKey=function(a){a="string"==typeof a?a:Ka[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},ag=q.keyName=function(a,b){if(da&&34==a.keyCode&&a["char"])return!1;
var c=Ka[a.keyCode],d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(wf?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(wf?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d);return d};q.fromTextArea=function(a,b){function c(){a.value=k.getValue()}b=b?Y(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=ha();b.autofocus=d==a||null!=
a.getAttribute("autofocus")&&d==document.body}if(a.form&&(w(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form,f=e.submit;try{var g=e.submit=function(){c();e.submit=f;e.submit();e.submit=g}}catch(h){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(la(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display="none";
var k=q(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);return k};var uc=q.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};uc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=
this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&
(this.lastColumnValue=ca(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?ca(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ca(this.string,null,this.tabSize)-(this.lineStart?ca(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==
b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var td=0,Ia=q.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++td};$a(Ia);Ia.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&La(a);if(X(this,
"clear")){var c=this.find();c&&S(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=zb(f.markedSpans,this);a&&!this.collapsed?oa(a,G(f),"text"):a&&(null!=g.to&&(d=G(f)),null!=g.from&&(c=G(f)));for(var h=f,k=f.markedSpans,l=g,m=void 0,p=0;p<k.length;++p)k[p]!=l&&(m||(m=[])).push(k[p]);h.markedSpans=m;null==g.from&&this.collapsed&&!ya(this.doc,f)&&a&&ea(f,xa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=ka(this.lines[e]),
g=Kb(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&N(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&ke(a.doc));a&&S(a,"markerCleared",a,this);b&&Na(a);this.parent&&this.parent.clear()}};Ia.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=zb(f.markedSpans,this);if(null!=
g.from&&(c=r(b?f:G(f),g.from),-1==a))return c;if(null!=g.to&&(d=r(b?f:G(f),g.to),1==a))return d}return c&&{from:c,to:d}};Ia.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&U(c,function(){var d=a.line,e=G(a.line);if(e=Xc(c,e))se(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;ya(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=vb(b)-e)&&ea(d,d.height+e))})};Ia.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=
this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=E(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Ia.prototype.detachLine=function(a){this.lines.splice(E(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var td=0,sc=q.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};$a(sc);sc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();S(this,"clear")}};sc.prototype.find=function(a,b){return this.primary.find(a,b)};var tc=q.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};$a(tc);tc.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=G(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=vb(this);ea(c,Math.max(0,c.height-f));a&&U(a,
function(){var b=-f;ga(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&mc(a,null,b);oa(a,d,"widget")})}};tc.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=vb(this)-a;d&&(ea(c,c.height+d),b&&U(b,function(){b.curOp.forceUpdate=!0;ga(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&mc(b,null,d)}))};var Ab=q.Line=function(a,b,c){this.text=a;$e(this,b);this.height=c?c(this):1};$a(Ab);Ab.prototype.lineNo=function(){return G(this)};var lg={},kg={};Bb.prototype=
{chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Ze(f);S(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Cb.prototype={chunkSize:function(){return this.size},
removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Bb))&&(c=[],this.collapse(c),this.children=[new Bb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},
insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(b=a=e.lines.length%25+25;b<e.lines.length;)c=new Bb(e.lines.slice(b,b+=25)),e.height-=c.height,this.children.splice(++d,0,c),c.parent=this;e.lines=e.lines.slice(0,a);this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-
5,5),b=new Cb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=E(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Cb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var yg=0,R=q.Doc=function(a,b,c,d){if(!(this instanceof R))return new R(a,
b,c,d);null==c&&(c=0);Cb.call(this,[new Bb([new Ab("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=r(c,0);this.sel=ia(c);this.history=new vc(null);this.id=++yg;this.modeOption=b;this.lineSep=d;this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));qd(this,{from:c,to:c,text:a});D(this,ia(c),ja)};R.prototype=nf(Cb.prototype,{constructor:R,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,
a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=yd(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:O(function(a){var b=r(this.first,0),c=this.first+this.size-1;Qa(this,{from:b,to:r(c,u(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);D(this,ia(b))}),replaceRange:function(a,b,c,d){b=y(this,
b);c=c?y(this,c):b;Wa(this,a,b,c,d)},getRange:function(a,b,c){a=Da(this,y(this,a),y(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(rb(this,a))return u(this,a)},getLineNumber:function(a){return G(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=u(this,a));return ka(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+
this.size-1},clipPos:function(a){return y(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:O(function(a,b,c){a=y(this,"number"==typeof a?r(a,b||0):a);D(this,ia(a,null),c)}),setSelection:O(function(a,b,c){var d=y(this,a);a=y(this,b||a);D(this,ia(d,a),c)}),extendSelection:O(function(a,
b,c){Ub(this,y(this,a),b&&y(this,b),c)}),extendSelections:O(function(a,b){ee(this,de(this,a),b)}),extendSelectionsBy:O(function(a,b){var c=Rb(this.sel.ranges,a);ee(this,de(this,c),b)}),setSelections:O(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new z(y(this,a[d].anchor),y(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));D(this,ba(e,b),c)}}),addSelection:O(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new z(y(this,a),y(this,b||a)));D(this,ba(d,d.length-
1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=Da(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Da(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:O(function(a,
b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=r(this.first,0);for(e=0;e<d.length;e++){var h=d[e],g=Le(h.from,a,c),k=Le(Ga(h),a,c);a=h.to;c=k;"around"==b?(h=this.sel.ranges[e],h=0>x(h.head,h.anchor),f[e]=new z(h?k:g,h?g:k)):f[e]=new z(g,g)}f=new ma(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)Qa(this,d[f]);b?fe(this,b):this.cm&&Ra(this.cm)}),undo:O(function(){lc(this,"undo")}),
redo:O(function(){lc(this,"redo")}),undoSelection:O(function(){lc(this,"undo",!0)}),redoSelection:O(function(){lc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new vc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=
this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Za(this.history.done),undone:Za(this.history.undone)}},setHistory:function(a){var b=this.history=new vc(this.history.maxGeneration);b.done=Za(a.done.slice(0),null,!0);b.undone=Za(a.undone.slice(0),null,!0)},addLineClass:O(function(a,
b,c){return oc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[e]){if(Fb(c).test(a[e]))return!1;a[e]+=" "+c}else a[e]=c;return!0})}),removeLineClass:O(function(a,b,c){return oc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",f=a[e];if(f)if(null==c)a[e]=null;else{var g=f.match(Fb(c));if(!g)return!1;var h=g.index+
g[0].length;a[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:O(function(a,b,c){return jg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Ya(this,y(this,a),y(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=y(this,a);return Ya(this,
a,a,c,"bookmark")},findMarksAt:function(a){a=y(this,a);var b=[],c=u(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=y(this,a);b=y(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];null!=h.to&&e==a.line&&a.ch>=h.to||null==h.from&&e!=a.line||null!=h.from&&e==b.line&&h.from>=b.ch||c&&
!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;this.iter(function(e){e=e.text.length+d;if(e>a)return b=a,!0;a-=e;++c});return y(this,r(c,b))},indexFromPos:function(a){a=y(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;
this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(a){var b=new R(yd(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new R(yd(this,
b,c),a.mode||this.modeOption,b,this.lineSep);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Xe(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);x(f,e)&&(f=Ya(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof q&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==
a){this.linked.splice(b,1);a.unlinkDoc(this);hg(Xe(this));break}if(a.history==this.history){var c=[a.id];Ha(a,function(a){c.push(a.id)},!0);a.history=new vc(null);a.history.done=Za(this.history.done,c);a.history.undone=Za(this.history.undone,c)}},iterLinkedDocs:function(a){Ha(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):zg(a)},lineSeparator:function(){return this.lineSep||"\n"}});R.prototype.eachLine=
R.prototype.iter;var Ag="iter insert remove copy getEditor constructor".split(" "),Jb;for(Jb in R.prototype)R.prototype.hasOwnProperty(Jb)&&0>E(Ag,Jb)&&(q.prototype[Jb]=function(a){return function(){return a.apply(this.doc,arguments)}}(R.prototype[Jb]));$a(R);var P=q.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Bg=q.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},ec=q.e_stop=function(a){P(a);Bg(a)},w=q.on=function(a,b,c){a.addEventListener?
a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},mf=[],la=q.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else for(a=wc(a,b,!1),b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},K=q.signal=function(a,b){var c=wc(a,b,!0);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},Db=null,Id=30,He=q.Pass={toString:function(){return"CodeMirror.Pass"}},
ja={scroll:!1},kd={origin:"*mouse"},Gb={origin:"+move"};wa.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var ca=q.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},Fe=q.findColumn=function(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+
1;if(e>=b)return d}},xc=[""],ab=function(a){a.select()};qb?ab=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:B&&(ab=function(a){try{a.select()}catch(b){}});var Cg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,of=q.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||Cg.test(a))},sg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Ua;Ua=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var Yc=q.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};B&&11>C&&(ha=function(){try{return document.activeElement}catch(a){return document.body}});
var kb=q.rmClass=function(a,b){var c=a.className,d=Fb(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},mb=q.addClass=function(a,b){var c=a.className;Fb(b).test(c)||(a.className+=(c?" ":"")+b)},Ed=!1,Uf=function(){if(B&&9>C)return!1;var a=t("div");return"draggable"in a||"dragDrop"in a}(),zd,wd,zg=q.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},xg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Je=function(){var a=t("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
cd=null,Ka=q.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"\x3d",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",
63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var a=0;10>a;a++)Ka[a+48]=Ka[a+96]=String(a);for(a=65;90>=a;a++)Ka[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Ka[a+111]=Ka[a+63235]="F"+a})();var wb,pg=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):
1424<=a&&1524>=a?"R":1536<=a&&1773>=a?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(a-1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var k=h.length,l=[],m=0,p;m<k;++m)l.push(a(h.charCodeAt(m)));for(var m=0,n="L";m<k;++m)p=l[m],"m"==p?l[m]=n:n=p;m=0;for(n="L";m<k;++m)p=l[m],"1"==p&&"r"==n?l[m]="n":e.test(p)&&(n=p,"r"==p&&(l[m]="R"));m=1;for(n=l[0];m<k-1;++m)p=l[m],"+"==p&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=p||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=p;for(m=0;m<k;++m)if(p=l[m],","==p)l[m]="N";else if("%"==p){for(n=m+1;n<k&&"%"==l[n];++n);var q=m&&"!"==l[m-1]||n<k&&"1"==l[n]?"1":"N";for(p=m;p<n;++p)l[p]=q;m=n-1}m=0;for(n="L";m<k;++m)p=
l[m],"L"==n&&"1"==p?l[m]="L":e.test(p)&&(n=p);for(m=0;m<k;++m)if(d.test(l[m])){for(n=m+1;n<k&&d.test(l[n]);++n);p="L"==(n<k?l[n]:"L");q="L"==(m?l[m-1]:"L")||p?"L":"R";for(p=m;p<n;++p)l[p]=q;m=n-1}for(var n=[],r,m=0;m<k;)if(f.test(l[m])){p=m;for(++m;m<k&&f.test(l[m]);++m);n.push(new b(0,p,m))}else{var t=m,q=n.length;for(++m;m<k&&"L"!=l[m];++m);for(p=t;p<m;)if(g.test(l[p])){t<p&&n.splice(q,0,new b(1,t,p));t=p;for(++p;p<m&&g.test(l[p]);++p);n.splice(q,0,new b(2,t,p));t=p}else++p;t<m&&n.splice(q,0,new b(1,
t,m))}1==n[0].level&&(r=h.match(/^\s+/))&&(n[0].from=r[0].length,n.unshift(new b(0,0,r[0].length)));1==A(n).level&&(r=h.match(/\s+$/))&&(A(n).to-=r[0].length,n.push(new b(0,k-r[0].length,k)));2==n[0].level&&n.unshift(new b(1,n[0].to,n[0].to));n[0].level!=A(n).level&&n.push(new b(n[0].level,k,k));return n}}();q.version="5.19.0";return q});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/selection/selection-pointer.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function e(b){b.state.selectionPointer.rects=null;f(b)}function f(b){b.state.selectionPointer.willUpdate||(b.state.selectionPointer.willUpdate=!0,setTimeout(function(){var a=b.state.selectionPointer;if(a){if(null==a.rects&&null!=a.mouseX&&(a.rects=[],b.somethingSelected()))for(var d=b.display.selectionDiv.firstChild;d;d=
d.nextSibling)a.rects.push(d.getBoundingClientRect());d=!1;if(null!=a.mouseX)for(var g=0;g<a.rects.length;g++){var c=a.rects[g];c.left<=a.mouseX&&c.right>=a.mouseX&&c.top<=a.mouseY&&c.bottom>=a.mouseY&&(d=!0)}a=d?a.value:"";b.display.lineDiv.style.cursor!=a&&(b.display.lineDiv.style.cursor=a)}b.state.selectionPointer.willUpdate=!1},50))}c.defineOption("selectionPointer",!1,function(b,a){var d=b.state.selectionPointer;d&&(c.off(b.getWrapperElement(),"mousemove",d.mousemove),c.off(b.getWrapperElement(),
"mouseout",d.mouseout),c.off(window,"scroll",d.windowScroll),b.off("cursorActivity",e),b.off("scroll",e),b.state.selectionPointer=null,b.display.lineDiv.style.cursor="");a&&(d=b.state.selectionPointer={value:"string"==typeof a?a:"default",mousemove:function(a){var c=b.state.selectionPointer;(null==a.buttons?a.which:a.buttons)?c.mouseX=c.mouseY=null:(c.mouseX=a.clientX,c.mouseY=a.clientY);f(b)},mouseout:function(a){b.getWrapperElement().contains(a.relatedTarget)||(a=b.state.selectionPointer,a.mouseX=
a.mouseY=null,f(b))},windowScroll:function(){e(b)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},c.on(b.getWrapperElement(),"mousemove",d.mousemove),c.on(b.getWrapperElement(),"mouseout",d.mouseout),c.on(window,"scroll",d.windowScroll),b.on("cursorActivity",e),b.on("scroll",e))})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/selection/mark-selection.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(a){a.operation(function(){t(a)})}function p(a){a.state.markedSelection.length&&a.operation(function(){h(a)})}function e(a,c,d,q){if(0!=k(c,d))for(var f=a.state.markedSelection,g=a.state.markedSelectionStyle,b=c.line;;){var e=b==c.line?c:r(b,0),b=b+m,h=b>=d.line,l=h?d:r(b,0),e=a.markText(e,l,
{className:g});null==q?f.push(e):f.splice(q++,0,e);if(h)break}}function h(a){a=a.state.markedSelection;for(var c=0;c<a.length;++c)a[c].clear();a.length=0}function l(a){h(a);for(var c=a.listSelections(),d=0;d<c.length;d++)e(a,c[d].from(),c[d].to())}function t(a){if(!a.somethingSelected())return h(a);if(1<a.listSelections().length)return l(a);var c=a.getCursor("start"),d=a.getCursor("end"),b=a.state.markedSelection;if(!b.length)return e(a,c,d);var f=b[0].find(),g=b[b.length-1].find();if(!f||!g||d.line-
c.line<m||0<=k(c,g.to)||0>=k(d,f.from))return l(a);for(;0<k(c,f.from);)b.shift().clear(),f=b[0].find();0>k(c,f.from)&&(f.to.line-c.line<m?(b.shift().clear(),e(a,c,f.to,0)):e(a,c,f.from,0));for(;0>k(d,g.to);)b.pop().clear(),g=b[b.length-1].find();0<k(d,g.to)&&(d.line-g.from.line<m?(b.pop().clear(),e(a,g.from,d)):e(a,g.to,d))}b.defineOption("styleSelectedText",!1,function(a,c,d){d=d&&d!=b.Init;c&&!d?(a.state.markedSelection=[],a.state.markedSelectionStyle="string"==typeof c?c:"CodeMirror-selectedtext",
l(a),a.on("cursorActivity",n),a.on("change",p)):!c&&d&&(a.off("cursorActivity",n),a.off("change",p),h(a),a.state.markedSelection=a.state.markedSelectionStyle=null)});var m=8,r=b.Pos,k=b.cmpPos});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/selection/active-line.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){function f(a){for(var b=0;b<a.state.activeLines.length;b++)a.removeLineClass(a.state.activeLines[b],"wrap","CodeMirror-activeline"),a.removeLineClass(a.state.activeLines[b],"background","CodeMirror-activeline-background"),a.removeLineClass(a.state.activeLines[b],"gutter","CodeMirror-activeline-gutter")}
function k(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}function g(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.empty()&&(e=a.getLineHandleVisualStart(e.head.line),c[c.length-1]!=e&&c.push(e))}k(a.state.activeLines,c)||a.operation(function(){f(a);for(var b=0;b<c.length;b++)a.addLineClass(c[b],"wrap","CodeMirror-activeline"),a.addLineClass(c[b],"background","CodeMirror-activeline-background"),a.addLineClass(c[b],"gutter","CodeMirror-activeline-gutter");
a.state.activeLines=c})}function h(a,b){g(a,b.ranges)}d.defineOption("styleActiveLine",!1,function(a,b,c){c=c&&c!=d.Init;b&&!c?(a.state.activeLines=[],g(a,a.listSelections()),a.on("beforeSelectionChange",h)):!b&&c&&(a.off("beforeSelectionChange",h),f(a),delete a.state.activeLines)})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/matchesonscrollbar.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],d):d(CodeMirror)})(function(d){function g(a,c,b,e){this.cm=a;this.options=e;var f={listenForChanges:!1},d;for(d in e)f[d]=e[d];f.className||(f.className="CodeMirror-search-match");this.annotation=a.annotateScrollbar(f);this.query=
c;this.caseFold=b;this.gap={from:a.firstLine(),to:a.lastLine()+1};this.matches=[];this.update=null;this.findMatches();this.annotation.update(this.matches);var g=this;a.on("change",this.changeHandler=function(a,b){g.onChange(b)})}function h(a,c,b){return a<=c?a:Math.max(c,a+b)}d.defineExtension("showMatchesOnScrollbar",function(a,c,b){"string"==typeof b&&(b={className:b});b||(b={});return new g(this,a,c,b)});g.prototype.findMatches=function(){if(this.gap){for(var a=0;a<this.matches.length;a++){var c=
this.matches[a];if(c.from.line>=this.gap.to)break;c.to.line>=this.gap.from&&this.matches.splice(a--,1)}for(var b=this.cm.getSearchCursor(this.query,d.Pos(this.gap.from,0),this.caseFold),e=this.options&&this.options.maxMatches||1E3;b.findNext();){c={from:b.from(),to:b.to()};if(c.from.line>=this.gap.to)break;this.matches.splice(a++,0,c);if(this.matches.length>e)break}this.gap=null}};g.prototype.onChange=function(a){var c=a.from.line,b=d.changeEnd(a).line,e=b-a.to.line;this.gap?(this.gap.from=Math.min(h(this.gap.from,
c,e),a.from.line),this.gap.to=Math.max(h(this.gap.to,c,e),a.from.line)):this.gap={from:a.from.line,to:b+1};if(e)for(a=0;a<this.matches.length;a++){var b=this.matches[a],f=h(b.from.line,c,e);f!=b.from.line&&(b.from=d.Pos(f,b.from.ch));f=h(b.to.line,c,e);f!=b.to.line&&(b.to=d.Pos(f,b.to.ch))}clearTimeout(this.update);var g=this;this.update=setTimeout(function(){g.updateAfterChange()},250)};g.prototype.updateAfterChange=function(){this.findMatches();this.annotation.update(this.matches)};g.prototype.clear=
function(){this.cm.off("change",this.changeHandler);this.annotation.clear()}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/jump-to-line.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],e):e(CodeMirror)})(function(e){function g(a,d,b,c,e){a.openDialog?a.openDialog(d,e,{value:c,selectValueOnOpen:!0}):e(prompt(b,c))}function f(a,d){var b=Number(d);return/^[-+]/.test(d)?a.getCursor().line+b:b-1}e.commands.jumpToLine=function(a){var d=a.getCursor();g(a,'Jump to line: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use line:column or scroll% syntax)\x3c/span\x3e',
"Jump to line:",d.line+1+":"+d.ch,function(b){if(b){var c;(c=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(b))?a.setCursor(f(a,c[1]),Number(c[2])):(c=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(b))?(b=Math.round(a.lineCount()*Number(c[1])/100),/^[-+]/.test(c[1])&&(b=d.line+b+1),a.setCursor(b-1,d.ch)):(c=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(b))&&a.setCursor(f(a,c[1]),d.ch)}})};e.keyMap["default"]["Alt-G"]="jumpToLine"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/search.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],f):f(CodeMirror)})(function(f){function y(a,b){"string"==typeof a?a=new RegExp(a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),b?"gi":"g"):a.global||(a=new RegExp(a.source,a.ignoreCase?"gi":"g"));return{token:function(b){a.lastIndex=
b.pos;var c=a.exec(b.string);if(c&&c.index==b.pos)return b.pos+=c[0].length||1,"searching";c?b.pos=c.index:b.skipToEnd()}}}function z(){this.overlay=this.posFrom=this.posTo=this.lastQuery=this.query=null}function h(a){return a.state.search||(a.state.search=new z)}function m(a){return"string"==typeof a&&a==a.toLowerCase()}function k(a,b,d){return a.getSearchCursor(b,d,m(b))}function A(a,b,d,c,e){a.openDialog(b,c,{value:d,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){l(a)},onKeyDown:e})}function r(a,
b,d,c,e){a.openDialog?a.openDialog(b,e,{value:c,selectValueOnOpen:!0}):e(prompt(d,c))}function B(a,b,d,c){if(a.openConfirm)a.openConfirm(b,c);else if(confirm(d))c[0]()}function u(a){return a.replace(/\\(.)/g,function(a,d){return"n"==d?"\n":"r"==d?"\r":d})}function v(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);if(b)try{a=new RegExp(b[1],-1==b[2].indexOf("i")?"":"i")}catch(d){}else a=u(a);if("string"==typeof a?""==a:a.test(""))a=/x^/;return a}function n(a,b,d){b.queryText=d;b.query=v(d);a.removeOverlay(b.overlay,
m(b.query));b.overlay=y(b.query,m(b.query));a.addOverlay(b.overlay);a.showMatchesOnScrollbar&&(b.annotate&&(b.annotate.clear(),b.annotate=null),b.annotate=a.showMatchesOnScrollbar(b.query,m(b.query)))}function g(a,b,d,c){var e=h(a);if(e.query)return p(a,b);var q=a.getSelection()||e.lastQuery;if(d&&a.openDialog){var t=null,g=function(b,c){f.e_stop(c);b&&(b!=e.queryText&&(n(a,e,b),e.posFrom=e.posTo=a.getCursor()),t&&(t.style.opacity=1),p(a,c.shiftKey,function(b,e){var c;3>e.line&&document.querySelector&&
(c=a.display.wrapper.querySelector(".CodeMirror-dialog"))&&c.getBoundingClientRect().bottom-4>a.cursorCoords(e,"window").top&&((t=c).style.opacity=.4)}))};A(a,'Search: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',q,g,function(b,e){var c=f.keyName(b),d=f.keyMap[a.getOption("keyMap")][c];d||(d=a.getOption("extraKeys")[c]);if("findNext"==d||
"findPrev"==d||"findPersistentNext"==d||"findPersistentPrev"==d)f.e_stop(b),n(a,h(a),e),a.execCommand(d);else if("find"==d||"findPersistent"==d)f.e_stop(b),g(e,b)});c&&q&&(n(a,e,q),p(a,b))}else r(a,'Search: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',"Search for:",q,function(c){c&&!e.query&&a.operation(function(){n(a,e,c);e.posFrom=e.posTo=
a.getCursor();p(a,b)})})}function p(a,b,d){a.operation(function(){var c=h(a),e=k(a,c.query,b?c.posFrom:c.posTo);if(!e.find(b)&&(e=k(a,c.query,b?f.Pos(a.lastLine()):f.Pos(a.firstLine(),0)),!e.find(b)))return;a.setSelection(e.from(),e.to());a.scrollIntoView({from:e.from(),to:e.to()},20);c.posFrom=e.from();c.posTo=e.to();d&&d(e.from(),e.to())})}function l(a){a.operation(function(){var b=h(a);if(b.lastQuery=b.query)b.query=b.queryText=null,a.removeOverlay(b.overlay),b.annotate&&(b.annotate.clear(),b.annotate=
null)})}function w(a,b,d){a.operation(function(){for(var c=k(a,b);c.findNext();)if("string"!=typeof b){var e=a.getRange(c.from(),c.to()).match(b);c.replace(d.replace(/\$(\d)/g,function(a,b){return e[b]}))}else c.replace(d)})}function x(a,b){if(!a.getOption("readOnly")){var d=a.getSelection()||h(a).lastQuery,c=b?"Replace all:":"Replace:";r(a,c+' \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',
c,d,function(e){e&&(e=v(e),r(a,'With: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e',"Replace with:","",function(c){c=u(c);if(b)w(a,e,c);else{l(a);var d=k(a,e,a.getCursor("from")),f=function(){var b=d.from(),h;if(!(h=d.findNext())&&(d=k(a,e),!(h=d.findNext())||b&&d.from().line==b.line&&d.from().ch==b.ch))return;a.setSelection(d.from(),d.to());a.scrollIntoView({from:d.from(),to:d.to()});B(a,"Replace? \x3cbutton\x3eYes\x3c/button\x3e \x3cbutton\x3eNo\x3c/button\x3e \x3cbutton\x3eAll\x3c/button\x3e \x3cbutton\x3eStop\x3c/button\x3e",
"Replace?",[function(){g(h)},f,function(){w(a,e,c)}])},g=function(a){d.replace("string"==typeof e?c:c.replace(/\$(\d)/g,function(b,c){return a[c]}));f()};f()}}))})}}f.commands.find=function(a){l(a);g(a)};f.commands.findPersistent=function(a){l(a);g(a,!1,!0)};f.commands.findPersistentNext=function(a){g(a,!1,!0,!0)};f.commands.findPersistentPrev=function(a){g(a,!0,!0,!0)};f.commands.findNext=g;f.commands.findPrev=function(a){g(a,!0)};f.commands.clearSearch=l;f.commands.replace=x;f.commands.replaceAll=
function(a){x(a,!0)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/match-highlighter.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],f):f(CodeMirror)})(function(f){function q(a){this.options={};for(var b in g)this.options[b]=(a&&a.hasOwnProperty(b)?a:g)[b];this.matchesonscroll=this.overlay=this.timeout=null;this.active=!1}function h(a){var b=a.state.matchHighlighter;(b.active||a.hasFocus())&&k(a,b)}function l(a){var b=
a.state.matchHighlighter;b.active||(b.active=!0,k(a,b))}function k(a,b){clearTimeout(b.timeout);b.timeout=setTimeout(function(){m(a)},b.options.delay)}function n(a,b,d,c){var e=a.state.matchHighlighter;a.addOverlay(e.overlay=r(b,d,c));e.options.annotateScrollbar&&a.showMatchesOnScrollbar&&(e.matchesonscroll=a.showMatchesOnScrollbar(d?new RegExp("\\b"+b+"\\b"):b,!1,{className:"CodeMirror-selection-highlight-scrollbar"}))}function p(a){var b=a.state.matchHighlighter;b.overlay&&(a.removeOverlay(b.overlay),
b.overlay=null,b.matchesonscroll&&(b.matchesonscroll.clear(),b.matchesonscroll=null))}function m(a){a.operation(function(){var b=a.state.matchHighlighter;p(a);if(!a.somethingSelected()&&b.options.showToken){for(var d=!0===b.options.showToken?/[\w$]/:b.options.showToken,c=a.getCursor(),e=a.getLine(c.line),f=c=c.ch;c&&d.test(e.charAt(c-1));)--c;for(;f<e.length&&d.test(e.charAt(f));)++f;c<f&&n(a,e.slice(c,f),d,b.options.style)}else if(d=a.getCursor("from"),e=a.getCursor("to"),d.line==e.line){if(c=b.options.wordsOnly){a:if(null!==
a.getRange(d,e).match(/^\w+$/)){if(0<d.ch&&(c={line:d.line,ch:d.ch-1},c=a.getRange(c,d),null===c.match(/\W/))){c=!1;break a}if(e.ch<a.getLine(d.line).length&&(c={line:e.line,ch:e.ch+1},c=a.getRange(e,c),null===c.match(/\W/))){c=!1;break a}c=!0}else c=!1;c=!c}c||(d=a.getRange(d,e),b.options.trim&&(d=d.replace(/^\s+|\s+$/g,"")),d.length>=b.options.minChars&&n(a,d,!1,b.options.style))}})}function r(a,b,d){return{token:function(c){var e;if(e=c.match(a))(e=!b)||(e=(!c.start||!b.test(c.string.charAt(c.start-
1)))&&(c.pos==c.string.length||!b.test(c.string.charAt(c.pos))));if(e)return d;c.next();c.skipTo(a.charAt(0))||c.skipToEnd()}}}var g={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};f.defineOption("highlightSelectionMatches",!1,function(a,b,d){d&&d!=f.Init&&(p(a),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",h),a.off("focus",l));if(b){b=a.state.matchHighlighter=new q(b);if(a.hasFocus())b.active=
!0,m(a);else a.on("focus",l);a.on("cursorActivity",h)}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/searchcursor.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){function r(e,b,c,a){this.atOccurrence=!1;this.doc=e;null==a&&"string"==typeof b&&(a=!1);c=c?e.clipPos(c):k(0,0);this.pos={from:c,to:c};if("string"!=typeof b)b.global||(b=new RegExp(b.source,b.ignoreCase?"ig":"g")),this.matches=function(c,n){if(c){b.lastIndex=0;for(var a=e.getLine(n.line).slice(0,n.ch),
f=0,d,h;;){b.lastIndex=f;f=b.exec(a);if(!f)break;d=f;h=d.index;f=d.index+(d[0].length||1);if(f==a.length)break}(f=d&&d[0].length||0)||(0==h&&0==a.length?d=void 0:h!=e.getLine(n.line).length&&f++)}else b.lastIndex=n.ch,a=e.getLine(n.line),f=(d=b.exec(a))&&d[0].length||0,h=d&&d.index,h+f==a.length||f||(f=1);if(d&&f)return{from:k(n.line,h),to:k(n.line,h+f),match:d}};else{var g=b;a&&(b=b.toLowerCase());var m=a?function(b){return b.toLowerCase()}:function(b){return b},l=b.split("\n");if(1==l.length)this.matches=
b.length?function(c,a){if(c){var q=e.getLine(a.line).slice(0,a.ch),f=m(q),d=f.lastIndexOf(b);if(-1<d)return d=t(q,f,d),{from:k(a.line,d),to:k(a.line,d+g.length)}}else if(q=e.getLine(a.line).slice(a.ch),f=m(q),d=f.indexOf(b),-1<d)return d=t(q,f,d)+a.ch,{from:k(a.line,d),to:k(a.line,d+g.length)}}:function(){};else{var p=g.split("\n");this.matches=function(b,a){var c=l.length-1;if(b){if(!(a.line-(l.length-1)<e.firstLine())&&m(e.getLine(a.line).slice(0,p[c].length))==l[l.length-1]){for(var f=k(a.line,
p[c].length),d=a.line-1,h=c-1;1<=h;--h,--d)if(l[h]!=m(e.getLine(d)))return;var h=e.getLine(d),g=h.length-p[0].length;if(m(h.slice(g))==l[0])return{from:k(d,g),to:f}}}else if(!(a.line+(l.length-1)>e.lastLine())&&(h=e.getLine(a.line),g=h.length-p[0].length,m(h.slice(g))==l[0])){f=k(a.line,g);d=a.line+1;for(h=1;h<c;++h,++d)if(l[h]!=m(e.getLine(d)))return;if(m(e.getLine(d).slice(0,p[c].length))==l[c])return{from:f,to:k(d,p[c].length)}}}}}}function t(e,b,c){if(e.length==b.length)return c;for(b=Math.min(c,
e.length);;){var a=e.slice(0,b).toLowerCase().length;if(a<c)++b;else if(a>c)--b;else return b}}var k=g.Pos;r.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function b(a){a=k(a,0);c.pos={from:a,to:a};return c.atOccurrence=!1}for(var c=this,a=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,a))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!a.line)return b(0);a=k(a.line-1,this.doc.getLine(a.line-
1).length)}else{var g=this.doc.lineCount();if(a.line==g-1)return b(g);a=k(a.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,b){if(this.atOccurrence){var c=g.splitLines(e);this.doc.replaceRange(c,this.pos.from,this.pos.to,b);this.pos.to=k(this.pos.from.line+c.length-1,c[c.length-1].length+(1==c.length?this.pos.from.ch:0))}}};g.defineExtension("getSearchCursor",function(e,b,c){return new r(this.doc,e,b,
c)});g.defineDocExtension("getSearchCursor",function(e,b,c){return new r(this,e,b,c)});g.defineExtension("selectMatches",function(e,b){for(var c=[],a=this.getSearchCursor(e,this.getCursor("from"),b);a.findNext()&&!(0<g.cmpPos(a.to(),this.getCursor("to")));)c.push({anchor:a.from(),head:a.to()});c.length&&this.setSelections(c,0)})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-raw', location = '/static/bower/CodeMirror/addon/dialog/dialog.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function l(c,b,a){c=c.getWrapperElement().appendChild(document.createElement("div"));c.className=a?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof b?c.innerHTML=b:c.appendChild(b);return c}function m(b,g){b.state.currentNotificationClose&&b.state.currentNotificationClose();
b.state.currentNotificationClose=g}b.defineExtension("openDialog",function(c,g,a){function e(b){if("string"==typeof b)d.value=b;else if(!h&&(h=!0,f.parentNode.removeChild(f),k.focus(),a.onClose))a.onClose(f)}a||(a={});m(this,null);var f=l(this,c,a.bottom),h=!1,k=this,d=f.getElementsByTagName("input")[0];if(d){d.focus();a.value&&(d.value=a.value,!1!==a.selectValueOnOpen&&d.select());if(a.onInput)b.on(d,"input",function(b){a.onInput(b,d.value,e)});if(a.onKeyUp)b.on(d,"keyup",function(b){a.onKeyUp(b,
d.value,e)});b.on(d,"keydown",function(c){if(!(a&&a.onKeyDown&&a.onKeyDown(c,d.value,e))){if(27==c.keyCode||!1!==a.closeOnEnter&&13==c.keyCode)d.blur(),b.e_stop(c),e();13==c.keyCode&&g(d.value,c)}});if(!1!==a.closeOnBlur)b.on(d,"blur",e)}else if(c=f.getElementsByTagName("button")[0]){b.on(c,"click",function(){e();k.focus()});if(!1!==a.closeOnBlur)b.on(c,"blur",e);c.focus()}return e});b.defineExtension("openConfirm",function(c,g,a){function e(){h||(h=!0,f.parentNode.removeChild(f),k.focus())}m(this,
null);var f=l(this,c,a&&a.bottom);c=f.getElementsByTagName("button");var h=!1,k=this,d=1;c[0].focus();for(a=0;a<c.length;++a){var n=c[a];(function(a){b.on(n,"click",function(c){b.e_preventDefault(c);e();a&&a(k)})})(g[a]);b.on(n,"blur",function(){--d;setTimeout(function(){0>=d&&e()},200)});b.on(n,"focus",function(){++d})}});b.defineExtension("openNotification",function(c,g){function a(){f||(f=!0,clearTimeout(h),e.parentNode.removeChild(e))}m(this,a);var e=l(this,c,g&&g.bottom),f=!1,h,k=g&&"undefined"!==
typeof g.duration?g.duration:5E3;b.on(e,"click",function(c){b.e_preventDefault(c);a()});k&&(h=setTimeout(a,k));return a})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror', location = '/static/lib/CodeMirror/codemirror-AMD.js' */
define("codemirror",function(){return CodeMirror});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror', location = '/static/bower/CodeMirror/addon/runmode/runmode.js' */
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(l,d,h,c){d=a.getMode(a.defaults,d);var p=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(h.appendChild){var n=c&&c.tabSize||a.defaults.tabSize,m=h,f=0;m.innerHTML="";h=function(a,c){if("\n"==a)m.appendChild(document.createTextNode(p?"\r":
a)),f=0;else{for(var g="",e=0;;){var b=a.indexOf("\t",e);if(-1==b){g+=a.slice(e);f+=a.length-e;break}else{f+=b-e;g+=a.slice(e,b);e=n-f%n;f+=e;for(var d=0;d<e;++d)g+=" ";e=b+1}}c?(b=m.appendChild(document.createElement("span")),b.className="cm-"+c.replace(/ +/g," cm-"),b.appendChild(document.createTextNode(g))):m.appendChild(document.createTextNode(g))}}}l=a.splitLines(l);c=c&&c.state||a.startState(d);for(var k=0,q=l.length;k<q;++k){k&&h("\n");var b=new a.StringStream(l[k]);for(!b.string&&d.blankLine&&
d.blankLine(c);!b.eol();){var r=d.token(b,c);h(b.current(),r,k,b.start,c);b.start=b.pos}}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror', location = '/static/lib/CodeMirror/codemirror-AMD.js' */
define("codemirror",function(){return CodeMirror});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror', location = '/static/bower/CodeMirror/addon/runmode/runmode.js' */
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(l,d,h,c){d=a.getMode(a.defaults,d);var p=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(h.appendChild){var n=c&&c.tabSize||a.defaults.tabSize,m=h,f=0;m.innerHTML="";h=function(a,c){if("\n"==a)m.appendChild(document.createTextNode(p?"\r":
a)),f=0;else{for(var g="",e=0;;){var b=a.indexOf("\t",e);if(-1==b){g+=a.slice(e);f+=a.length-e;break}else{f+=b-e;g+=a.slice(e,b);e=n-f%n;f+=e;for(var d=0;d<e;++d)g+=" ";e=b+1}}c?(b=m.appendChild(document.createElement("span")),b.className="cm-"+c.replace(/ +/g," cm-"),b.appendChild(document.createTextNode(g))):m.appendChild(document.createTextNode(g))}}}l=a.splitLines(l);c=c&&c.state||a.startState(d);for(var k=0,q=l.length;k<q;++k){k&&h("\n");var b=new a.StringStream(l[k]);for(!b.string&&d.blankLine&&
d.blankLine(c);!b.eol();){var r=d.token(b,c);h(b.current(),r,k,b.start,c);b.start=b.pos}}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-util', location = '/static/bitbucket/internal/util/codemirror.js' */
define("bitbucket/internal/util/codemirror",["module","exports","codemirror"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(d),c=null;a.default={doInOperation:function(a){if(null===c){var b=document.createElement("div");c=(0,e.default)(b)}return c.operation(a)}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:string-replacer', location = '/static/bitbucket/internal/util/string-replacer.js' */
define("bitbucket/internal/util/string-replacer",["module","exports","lodash"],function(l,f,h){Object.defineProperty(f,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h);h=function(){function f(){babelHelpers.classCallCheck(this,f);this.replacers=[]}babelHelpers.createClass(f,[{key:"registerReplacer",value:function(d){this.replacers.push({replacer:d,weight:1<arguments.length&&void 0!==arguments[1]?arguments[1]:1E3});return this.replacers.sort(function(a,c){return a.weight-c.weight})}},
{key:"occurrenceIndexes",value:function(d,a){for(var c=a.find,b=!1!==a.multiple,e=[],g=-1;(-1===g||b)&&-1!==(g=d.indexOf(c,g+1));)e.push(g);return e}},{key:"addIndexes",value:function(d,a){var c=this;return k.default.flattenDeep(a.map(function(b){b=babelHelpers.slicedToArray(b,2);var a=b[0];return b[1].map(function(b){return c.occurrenceIndexes(d,b).map(function(c){return{weight:a.weight,start:c,end:c+b.find.length,replacement:b}})})}))}},{key:"sortByWeightOrPosition",value:function(d){return d.sort(function(a,
c){return a.weight-c.weight||a.start-c.start})}},{key:"sortByPosition",value:function(d){return d.sort(function(a,c){return a.start-c.start})}},{key:"dedupe",value:function(d,a){return a.reduce(function(a,b){return a.some(function(a){return a.start<=b.start&&a.end>b.start||b.start<=a.start&&b.end>a.start})?a:a.concat(b)},[])}},{key:"replace",value:function(d,a,c){"undefined"===typeof c&&(c=function(a){return a});if(!a.length)return c(d);a=a.reduce(function(a,e){a.pointer<e.start&&a.replacements.push(c(d.substring(a.pointer,
e.start)));a.replacements.push(e.replacement.replace);return{pointer:e.end,replacements:a.replacements}},{pointer:0,replacements:[]});a.pointer<d.length&&a.replacements.push(c(d.substring(a.pointer,d.length)));return a.replacements.join("")}},{key:"process",value:function(d,a,c){var b=this,e=this.replacers.map(function(c){var b=c.replacer;return b(d,a).catch(function(a){console.error(a,b," failed");return[]})});return Promise.all(e).then(function(a){return b.addIndexes(d,k.default.zip(b.replacers,
a))}).then(this.sortByWeightOrPosition).then(function(a){return b.dedupe(d,a)}).then(this.sortByPosition).then(function(a){return b.replace(d,a,c)})}}]);return f}();f.default=h;l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-message-enricher', location = '/static/bitbucket/internal/feature/commits/commit-message-enricher.js' */
define("bitbucket/internal/feature/commits/commit-message-enricher",["module","exports","../../util/string-replacer"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=new (babelHelpers.interopRequireDefault(b).default);a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:abbreviate-commit-message-util', location = '/static/bitbucket/internal/util/abbreviate-commit-message.js' */
define("bitbucket/internal/util/abbreviate-commit-message",["module","exports"],function(e,d){Object.defineProperty(d,"__esModule",{value:!0});d.default=function(b,a){a=parseInt(a,10);if(b.length<=a)return b;var c=b.indexOf("\n");return 0<c&&c<=a?b.substring(0,c+3>a?a-3:c)+"...":b.substring(0,a-3)+"..."};e.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:lozenge-internal', location = '/static/bitbucket/internal/widget/lozenge/lozenge.soy' */
// This file was automatically generated from lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.lozenge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.lozenge == 'undefined') { bitbucket.internal.widget.lozenge = {}; }


bitbucket.internal.widget.lozenge.lozenge = function(opt_data, opt_ignored) {
  var output = '';
  var tag__soy3 = opt_data.href ? 'a' : opt_data.htmlElement ? opt_data.htmlElement : opt_data.clickable ? 'button' : 'span';
  output += '<' + soy.$$escapeHtml(tag__soy3) + ' class="aui-lozenge' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.monospace) ? ' monospace-lozenge' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + ((opt_data.maxLength) ? soy.$$escapeHtml(soy.$$truncate(opt_data.text, opt_data.maxLength, true)) : soy.$$escapeHtml(opt_data.text)) + '</' + soy.$$escapeHtml(tag__soy3) + '>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.lozenge.soyTemplateName = 'bitbucket.internal.widget.lozenge.lozenge';
}


bitbucket.internal.widget.lozenge.htmlLozenge = function(opt_data, opt_ignored) {
  return '<' + ((opt_data.htmlElement) ? soy.$$escapeHtml(opt_data.htmlElement) : 'a') + ' class="aui-lozenge' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.monospace) ? ' monospace-lozenge' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + ((opt_data.htmlElement) ? soy.$$escapeHtml(opt_data.htmlElement) : 'a') + '>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.htmlLozenge.soyTemplateName = 'bitbucket.internal.widget.lozenge.htmlLozenge';
}


bitbucket.internal.widget.lozenge.merge = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'merge-lozenge' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + (opt_data.abbreviated ? ' abbreviated' : ''), text: '' + soy.$$escapeHtml(opt_data.abbreviated ? 'M' : 'Merge'), tooltip: '' + soy.$$escapeHtml('This commit is a merge.')});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.merge.soyTemplateName = 'bitbucket.internal.widget.lozenge.merge';
}


bitbucket.internal.widget.lozenge.pullRequestState = function(opt_data, opt_ignored) {
  var output = '';
  var commonClasses__soy84 = opt_data.extraClasses ? ' ' + opt_data.extraClasses + ' pull-request-state-lozenge' : ' pull-request-state-lozenge';
  switch (opt_data.state) {
    case 'OPEN':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete open' + commonClasses__soy84, text: 'OPEN', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request is in progress.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'OPENED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete opened' + commonClasses__soy84, text: opt_data.isActivityContext ? 'opened' : 'OPENED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request is in progress.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'MERGED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-success merged' + commonClasses__soy84, text: opt_data.isActivityContext ? 'merged' : 'MERGED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been merged.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'DECLINED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-error declined' + commonClasses__soy84, text: opt_data.isActivityContext ? 'declined' : 'DECLINED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been declined.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'REOPENED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete reopened' + commonClasses__soy84, text: opt_data.isActivityContext ? 'reopened' : 'REOPENED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been reopened.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'UPDATED':
    case 'RESCOPED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-current updated' + commonClasses__soy84, text: opt_data.isActivityContext ? 'updated' : 'UPDATED', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been updated.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'APPROVED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-success approved' + commonClasses__soy84, text: opt_data.isActivityContext ? 'approved' : 'Approved', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request has been approved.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'UNAPPROVED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-error unapproved' + commonClasses__soy84, text: opt_data.isActivityContext ? 'unapproved' : 'Unapproved', tooltip: opt_data.tooltip ? opt_data.tooltip : 'The approval has been withdrawn from this pull request.', clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'REVIEWED':
      output += bitbucket.internal.widget.lozenge.lozenge({extraClasses: 'needs-work' + commonClasses__soy84, text: opt_data.isActivityContext ? 'needs work' : 'Needs work', tooltip: opt_data.tooltip ? opt_data.tooltip : 'This pull request needs work.', clickable: opt_data.clickable, href: opt_data.href});
      break;
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.pullRequestState.soyTemplateName = 'bitbucket.internal.widget.lozenge.pullRequestState';
}


bitbucket.internal.widget.lozenge.enabled = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.lozenge.lozenge({extraClasses: opt_data.isEnabled ? 'lozenge-enabled' : 'lozenge-disabled', text: opt_data.isEnabled ? 'Enabled' : 'Disabled', tooltip: opt_data.tooltip});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.lozenge.enabled.soyTemplateName = 'bitbucket.internal.widget.lozenge.enabled';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-link', location = '/static/bitbucket/internal/feature/commit/commit-link/commit-link.soy' */
// This file was automatically generated from commit-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.commit.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.commit == 'undefined') { bitbucket.internal.feature.commit = {}; }


bitbucket.internal.feature.commit.link = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.repository ? 'a' : 'span') + ' class="commitid"' + ((opt_data.pullRequest && opt_data.repository) ? ' href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(opt_data.repository.project).repo(opt_data.repository).pullRequest(opt_data.pullRequest).commit(opt_data.commit.id).build()) + '"' : (opt_data.repository) ? ' href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(opt_data.repository.project).repo(opt_data.repository).commit(opt_data.commit.id).withParams(null).withFragment(opt_data.filePath).build()) + '"' : '') + ((opt_data.commit.message) ? ' data-commit-message="' + soy.$$escapeHtml(opt_data.commit.message) + '"' : '') + ' data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '">' + soy.$$escapeHtml((opt_data.commit.id).substring(0, 11)) + '</' + soy.$$escapeHtml(opt_data.repository ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.link.soyTemplateName = 'bitbucket.internal.feature.commit.link';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:user-link', location = '/static/bitbucket/internal/widget/user/user-link.soy' */
// This file was automatically generated from user-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.userLink = function(opt_data, opt_ignored) {
  var output = '';
  var displayName__soy3 = opt_data.user.displayName || opt_data.user.name;
  output += (opt_data.href || opt_data.user.type == 'NORMAL' && opt_data.user.slug && !!(require('bitbucket/internal/model/page-state').getCurrentUser())) ? '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : require('bitbucket/util/navbuilder').user(opt_data.user).build()) + '" ' + ((opt_data.extraClasses) ? 'class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ((! opt_data.skipTitle) ? 'title="' + soy.$$escapeHtml(displayName__soy3) + '"' : '') + '>' + soy.$$escapeHtml(soy.$$truncate(displayName__soy3, 100, true)) + '</a>' : '<span' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ((! opt_data.skipTitle) ? ' title="' + soy.$$escapeHtml(displayName__soy3) + '"' : '') + '>' + soy.$$escapeHtml(soy.$$truncate(displayName__soy3, 100, true)) + '</span>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.userLink.soyTemplateName = 'bitbucket.internal.widget.userLink';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:avatar', location = '/static/bitbucket/internal/widget/avatar/access-key-avatar.soy' */
// This file was automatically generated from access-key-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.accessKey = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.text) + '"><span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' key-avatar"></span><span class="access-key-label">' + soy.$$escapeHtml(opt_data.label || opt_data.text) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.accessKey.soyTemplateName = 'bitbucket.internal.widget.accessKey';
}


bitbucket.internal.widget.accessKeyWithText = function(opt_data, opt_ignored) {
  return bitbucket.internal.widget.accessKey(opt_data) + '<span class="access-key-text" title="' + soy.$$escapeHtml(opt_data.text) + '">' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.accessKeyWithText.soyTemplateName = 'bitbucket.internal.widget.accessKeyWithText';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:avatar', location = '/static/bitbucket/internal/widget/avatar/group-avatar.soy' */
// This file was automatically generated from group-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.groupAvatar = function(opt_data, opt_ignored) {
  return '<span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' group-avatar' + soy.$$escapeHtml(opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + '" data-groupname="' + soy.$$escapeHtml(opt_data.name) + '"></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.groupAvatar.soyTemplateName = 'bitbucket.internal.widget.groupAvatar';
}


bitbucket.internal.widget.groupAvatarWithName = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.name) + '"' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '><span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' group-avatar' + soy.$$escapeHtml(opt_data.avatarClasses ? ' ' + opt_data.avatarClasses : '') + '" data-groupname="' + soy.$$escapeHtml(opt_data.name) + '"></span>' + soy.$$escapeHtml(opt_data.name) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.groupAvatarWithName.soyTemplateName = 'bitbucket.internal.widget.groupAvatarWithName';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:avatar', location = '/static/bitbucket/internal/widget/avatar/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.avatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: require('bitbucket/util/navbuilder')._avatarUrl(opt_data.person, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build(), accessibilityText: opt_data.person.displayName || opt_data.person.name, title: opt_data.tooltip, badgeContent: opt_data.badgeContent, extraClasses: 'user-avatar' + (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), imageClasses: opt_data.imageClasses, extraAttributes: {'data-username': opt_data.person.name}, id: opt_data.id});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatar.soyTemplateName = 'bitbucket.internal.widget.avatar';
}


bitbucket.internal.widget.avatarWithName = function(opt_data, opt_ignored) {
  var output = '';
  var personName__soy14 = opt_data.person.displayName || opt_data.person.name;
  output += '<div class="avatar-with-name' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.deleted) ? ' deleted-user' : '') + '" title="' + soy.$$escapeHtml(personName__soy14) + '">' + bitbucket.internal.widget.avatar({size: opt_data.size, person: opt_data.person, imageClasses: opt_data.imageClasses, extraClasses: opt_data.avatarClasses, badgeContent: opt_data.badgeContent, hideBadge: opt_data.hideBadge, id: opt_data.id}) + ((opt_data.link && ! opt_data.deleted) ? bitbucket.internal.widget.userLink({user: opt_data.person, href: opt_data.href, extraClasses: opt_data.linkExtraClasses, skipTitle: true}) : '<span class="display-name">' + soy.$$escapeHtml(personName__soy14) + '</span>') + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithName.soyTemplateName = 'bitbucket.internal.widget.avatarWithName';
}


bitbucket.internal.widget.avatarWithNameAndEmail = function(opt_data, opt_ignored) {
  return bitbucket.internal.widget.avatarWithName(opt_data) + '<span class="email-address" title="' + soy.$$escapeHtml(opt_data.person.emailAddress) + '">' + soy.$$escapeHtml(opt_data.person.emailAddress) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithNameAndEmail.soyTemplateName = 'bitbucket.internal.widget.avatarWithNameAndEmail';
}


bitbucket.internal.widget.avatarSizeInPx = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]) + ((opt_data.showPx) ? 'px' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarSizeInPx.soyTemplateName = 'bitbucket.internal.widget.avatarSizeInPx';
}


bitbucket.internal.widget.avatarWithBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.avatar({size: opt_data.size, person: opt_data.person, tooltip: opt_data.tooltip, imageClasses: opt_data.imageClasses, extraClasses: opt_data.extraClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithBadge.soyTemplateName = 'bitbucket.internal.widget.avatarWithBadge';
}


bitbucket.internal.widget.avatarWithNameAndBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.avatarWithName({size: opt_data.size, person: opt_data.person, extraClasses: opt_data.extraClasses, avatarClasses: opt_data.avatarClasses, imageClasses: opt_data.imageClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.avatarWithNameAndBadge.soyTemplateName = 'bitbucket.internal.widget.avatarWithNameAndBadge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:loaded-range', location = '/static/bitbucket/internal/widget/loaded-range.js' */
define("bitbucket/internal/widget/loaded-range",["module","exports"],function(f,c){function b(a){this.nextPageStart=this.start=void 0;this._reachedCapacity=this._reachedEnd=this._reachedStart=!1;this._capacity=a||Infinity}Object.defineProperty(c,"__esModule",{value:!0});b.prototype.isEmpty=function(){return void 0===this.start};b.prototype.isBeforeStart=function(a){return a<this.start};b.prototype.isAfterNextPageStart=function(a){return a>this.nextPageStart};b.prototype.isLoaded=function(a){return!(this.isEmpty()||
this.isBeforeStart(a)||this.isAfterNextPageStart(a))};b.prototype.getAttachmentMethod=function(a,b){return this.isEmpty()?"html":this.isBeforeStart(a)?"prepend":"append"};b.prototype.add=function(a,b,c,d){var e=this.isEmpty();d=d||a+b;if(e||this.isBeforeStart(a))this.start=a;if(e||this.isAfterNextPageStart(d))this.nextPageStart=d;this._reachedStart=this._reachedStart||0>=a;!(this._reachedEnd=this._reachedEnd||c)&&this.nextPageStart>=this._capacity&&(this._reachedCapacity=this._reachedEnd=!0);return this};
b.prototype.reachedStart=function(){return this._reachedStart};b.prototype.reachedEnd=function(){return this._reachedEnd};b.prototype.reachedCapacity=function(){return this._reachedCapacity};b.prototype.pageBefore=function(a){if(this.reachedStart())return null;a=Math.max(0,this.start-a);return{start:a,limit:this.start-a}};b.prototype.pageAfter=function(a){return this.reachedEnd()?null:{start:this.nextPageStart,limit:a}};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paged-scrollable', location = '/static/bitbucket/internal/widget/paged-scrollable.js' */
define("bitbucket/internal/widget/paged-scrollable","module exports aui jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/navigator bitbucket/internal/widget/loaded-range".split(" "),function(q,g,h,r,t,u,v,w,x){function b(a,k){this.options=d.default.extend({},b.defaults,k);this.$scrollElement=(0,d.default)(a||window);if(d.default.isWindow(this.$scrollElement[0])){var c=window.document.documentElement;this.getPaneHeight=function(){return c.clientHeight};
this.getContentHeight=function(){return c.scrollHeight}}this._eventHandlers=[]}function l(a,b,c){if(a.currentXHR)return d.default.Deferred().reject();a.currentXHR=a.requestData(b,c);return a.currentXHR.always(function(){a.currentXHR=null}).done(function(e){!a.loadedRange.isEmpty()&&a.options.paginationContext&&m.default.trigger("bitbucket.internal.ui.nav.pagination",null,{context:a.options.paginationContext,page:(e.start||b)/(e.limit||c)+1});a.onDataLoaded(b,c,e)}).fail(function(){a.suspend()})}Object.defineProperty(g,
"__esModule",{value:!0});var y=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(r),f=babelHelpers.interopRequireDefault(t),m=babelHelpers.interopRequireDefault(u),n=babelHelpers.interopRequireDefault(v);h=babelHelpers.interopRequireDefault(w);var z=babelHelpers.interopRequireDefault(x),p=h.default.isIE();b.defaults={pageSize:50,scrollDelay:250,bufferPixels:0,precedingSpaceMaintained:!0,suspendOnFailure:!0,dataLoadedEvent:"bitbucket.internal.widget.pagedscrollable.dataLoaded",
autoLoad:!0,preventOverscroll:!1,idForEntity:null,paginationContext:null};b.prototype.init=function(a){b.prototype.reset.call(this);a=a||{};this.loadedRange=a.loadedRange||new z.default;var k=this,c=this.options.pageSize,e=a.targetedItem?Math.floor(a.targetedItem/c)*c:0;a.suspended&&this.suspend();return this.loadedRange.isLoaded(e)?(this.loadIfRequired()||d.default.Deferred().resolve()).done(function(){k.onFirstDataLoaded()}):l(this,e,c).then(void 0,function(){return 0!==e?l(k,0,c):d.default.Deferred().rejectWith(this,
arguments)}).fail(function(a,b,c,e){e&&e.errors&&e.errors.length&&k.handleErrors(e.errors)})};b.prototype.reset=function(){this.currentXHR&&this.cancelRequest();this.clearListeners();this._resizeHandler&&((0,d.default)(window).off("resize",this._resizeHandler),this._resizeHandler=null);this.options.idForEntity&&(this._ids={});this._suspended=!1};b.prototype.destroy=function(){this.reset();delete this.$scrollElement};b.prototype.suspend=function(){this._suspended=!0};b.prototype.resume=function(){this._suspended=
!1;return this.loadIfRequired()};b.prototype.isSuspended=function(){return this._suspended};b.prototype.getScrollTop=function(){return this.$scrollElement.scrollTop()};b.prototype.setScrollTop=function(a){this.$scrollElement.scrollTop(a)};b.prototype.getPane=function(){return this.$scrollElement};b.prototype.getPaneHeight=function(){return this.$scrollElement[0].clientHeight};b.prototype.getContentHeight=function(){return this.$scrollElement[0].scrollHeight};b.prototype.getOption=function(a){if(Object.prototype.hasOwnProperty.call(this.options,
a))return this.options[a]};b.prototype.setOptions=function(a){d.default.isPlainObject(a)&&(this.options=d.default.extend(this.options,a))};b.prototype.addScrollListener=function(a){a=this.scrollDelay?f.default.debounce(a,this.scrollDelay):a;this._eventHandlers.push(a);this.$scrollElement.on("scroll.paged-scrollable",a)};b.prototype._bindOverscrollPrevention=function(){function a(a,b){var e=this.scrollHeight-(0,d.default)(this).outerHeight()-1,f=0>b||isNaN(b),A=0<b||isNaN(b);(this.scrollTop>e&&f||
1>this.scrollTop&&A)&&a.preventDefault()}this._eventHandlers.push(a);this.$scrollElement.on("mousewheel.paged-scrollable",a)};b.prototype.clearListeners=function(){var a=this;f.default.each(this._eventHandlers,function(b){a.$scrollElement.unbind(".paged-scrollable",b)});this._eventHandlers.length=0};b.prototype.loadIfRequired=function(){if(!(this.isSuspended()||this.loadedRange.reachedEnd()&&this.loadedRange.reachedStart())){var a=this.getScrollTop(),b=this.getPaneHeight(),c=this.getContentHeight(),
b=b+a;if(d.default.isWindow(this.getPane()[0])||!this.getPane().is(":hidden")){if(f.default.any([!0,"previous"],n.default.eq(this.options.autoLoad))&&a<this.options.bufferPixels+this.loadedRange.start/this.loadedRange.nextPageStart*c&&(a=this.loadedRange.pageBefore(this.options.pageSize)))return this.load(a.start,a.limit);if(f.default.any([!0,"next"],n.default.eq(this.options.autoLoad))&&b+1>=c-this.options.bufferPixels&&(c=this.loadedRange.pageAfter(this.options.pageSize)))return this.load(c.start,
c.limit)}}};b.prototype.load=function(a,b){var c=this;return l(this,a,b).fail(function(a,b,k,d){d&&d.errors&&c.handleErrors(d.errors)})};b.prototype.loadAfter=function(){var a=this.loadedRange.pageAfter(this.options.pageSize);return a&&this.load(a.start,a.limit)};b.prototype.loadBefore=function(){var a=this.loadedRange.pageBefore(this.options.pageSize);return a&&this.load(a.start,a.limit)};b.prototype.onDataLoaded=function(a,b,c){void 0!==c.start&&(a=c.start);var e=this.loadedRange.isEmpty(),d=this.loadedRange.getAttachmentMethod(a,
c.size),f="prepend"===d;this.loadedRange.add(a,c.size,c.isLastPage,c.nextPageStart);var g,h;if(f||p)h=this.getScrollTop(),g=this.getContentHeight();c=this._addPage(c,d);if(f||p)d=f?this.getContentHeight()-g:0,this.setScrollTop(h+d);if(e)this.onFirstDataLoaded(a,b,c);m.default.trigger(this.options.dataLoadedEvent,this,a,b,c);this.loadIfRequired()};b.prototype._addPage=function(a,b){a=this._dedupe(a);this.attachNewContent(a,b);return a};b.prototype._dedupe=function(a){if(a&&a.values&&this.options.idForEntity){var b=
this._ids,c=this.options.idForEntity;a=d.default.extend({},a,{values:f.default.filter(a.values,function(a){a=c(a);return f.default.has(b,a)?!1:b[a]=!0})})}return a};b.prototype.onFirstDataLoaded=function(){var a=this;this.addScrollListener(function(){a.loadIfRequired()});this.options.preventOverscroll&&this._bindOverscrollPrevention();(0,d.default)(window).on("resize",this._resizeHandler=function(){a.loadIfRequired()})};b.prototype.cancelRequest=function(){this.currentXHR&&(this.currentXHR.abort?
this.currentXHR.abort():this.currentXHR.reject?this.currentXHR.reject():y.default.log("Couldn't cancel the current request."),this.currentXHR=null)};b.prototype.add=function(a,b){return a.length?(this._addPage({values:a,size:a.length},b||"prepend"),!0):!1};b.prototype.remove=function(a){return this.options.idForEntity&&(a=this.options.idForEntity(a),f.default.has(this._ids,a))?(delete this._ids[a],"number"===typeof this.loadedRange.nextPageStart&&(this.loadedRange.nextPageStart=Math.max(0,this.loadedRange.nextPageStart-
1)),!0):!1};b.prototype.attachNewContent=function(a,b){throw Error("attachNewContent is abstract and must be implemented.");};b.prototype.requestData=function(a,b){throw Error("requestData is abstract and must be implemented.  It must return a promise. It is preferred to return a jqXHR.");};b.prototype.handleErrors=function(a){throw Error("handleErrors is abstract and must be implemented.");};g.default=b;q.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paged-table', location = '/static/bitbucket/internal/widget/paged-table/paged-table.soy' */
// This file was automatically generated from paged-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.pagedTable = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.filterable) ? bitbucket.internal.widget.pagedTableFilter({forId: opt_data.id, filter: opt_data.filter, filterPlaceholder: opt_data.filterPlaceholder}) : '');
  var pageAttributes__soy9 = opt_data.page ? atl_soy.concat({start: opt_data.page.start, size: opt_data.page.size, lastpage: opt_data.page.isLastPage}, opt_data.page.nextPageRequest ? {nextpagestart: opt_data.page.nextPageRequest.start} : {}) : {};
  output += widget.aui.table({id: opt_data.id, dataAttributes: atl_soy.concat(pageAttributes__soy9, opt_data.extraDataAttributes ? opt_data.extraDataAttributes : {}), extraClasses: 'paged-table' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((! opt_data.page || opt_data.page.size == 0) ? ' no-rows' : ''), theadContent: opt_data.theadContent, content: opt_data.content}) + ((opt_data.page && opt_data.page.size == 0) ? bitbucket.internal.widget.pagedTableMessage({content: opt_data.filterable && opt_data.filter ? (opt_data.noneMatchingMessageContent ? opt_data.noneMatchingMessageContent : '') : opt_data.noneFoundMessageContent ? opt_data.noneFoundMessageContent : ''}) : '');
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTable.soyTemplateName = 'bitbucket.internal.widget.pagedTable';
}


bitbucket.internal.widget.pagedTableMessage = function(opt_data, opt_ignored) {
  return '<div class="paged-table-message">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTableMessage.soyTemplateName = 'bitbucket.internal.widget.pagedTableMessage';
}


bitbucket.internal.widget.pagedTableFilter = function(opt_data, opt_ignored) {
  return '' + aui.group.group({extraClasses: 'paged-table-filter', content: '' + aui.group.item({content: '' + bitbucket.internal.widget.pagedTableFilterField(opt_data)})});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTableFilter.soyTemplateName = 'bitbucket.internal.widget.pagedTableFilter';
}


bitbucket.internal.widget.pagedTableFilterField = function(opt_data, opt_ignored) {
  return '<label class="assistive" for="paged-table-input-for-' + soy.$$escapeHtml(opt_data.forId) + '">' + soy.$$escapeHtml(opt_data.filterPlaceholder ? opt_data.filterPlaceholder : 'Find') + '</label><input type="text" id="paged-table-input-for-' + soy.$$escapeHtml(opt_data.forId) + '" class="paged-table-filter-input" data-for="' + soy.$$escapeHtml(opt_data.forId) + '" autocomplete="off" placeholder="' + soy.$$escapeHtml(opt_data.filterPlaceholder ? opt_data.filterPlaceholder : 'Find') + '" value="' + soy.$$escapeHtml(opt_data.filter ? opt_data.filter : '') + '">';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.pagedTableFilterField.soyTemplateName = 'bitbucket.internal.widget.pagedTableFilterField';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paged-table', location = '/static/bitbucket/internal/widget/paged-table/paged-table.js' */
define("bitbucket/internal/widget/paged-table/paged-table","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/widget/error-dialog/error-dialog bitbucket/internal/widget/paged-scrollable".split(" "),function(l,g,m,n,p,q,r,t){function b(a){a=d.default.extend(!0,{},b.defaults,a);e.default.call(this,a.scrollPaneSelector,a);this.$table=(0,d.default)(a.target);if(a.filterable){this.$filter=a.filter?(0,d.default)(a.filter):this.$table.prev(".paged-table-filter").find(".paged-table-filter-input");
this._currentFilterText=d.default.trim(this.$filter.val());var h=f.default.debounce(f.default.bind(this._onFilterChanged,this),a.filterDebounce);this.$filter.on("keyup.paged-table-filter",function(a){a.which===k.default.keyCode.ESCAPE?(0,d.default)(this).blur():h(a)}).on("paste.paged-table-filter",h)}this.$spinner=(0,d.default)("\x3cdiv class\x3d'spinner'/\x3e").hide().insertAfter(this.$table);this.spinnerShowing=!1;this.processedDomData=null==this.$table.attr("data-lastpage")}Object.defineProperty(g,
"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q),v=babelHelpers.interopRequireDefault(r),e=babelHelpers.interopRequireDefault(t);b.defaults={ajaxDataType:"json",spinnerSize:"large",filterable:!1,bufferPixels:150,filterDebounce:350,rowSelector:"\x3e tbody \x3e tr",focusOptions:{escToCancel:!1,focusedClass:"focused",rowSelector:"\x3e tbody \x3e tr",wrapAround:!1}};
d.default.extend(b.prototype,e.default.prototype);b.prototype.init=function(){return e.default.prototype.init.apply(this,arguments).done(f.default.bind(function(){this.shortcutsInitialised&&this.focusInitialRow()},this))};b.prototype.getFilterText=function(){return this._currentFilterText};b.prototype._onFilterChanged=function(){var a=d.default.trim(this.$filter.val());this._currentFilterText!==a&&(this._currentFilterText=a,this.update())};b.prototype.requestData=function(a,b){if(!this.processedDomData)return d.default.Deferred().resolve(this.createDataFromJQuery(a,
b,this.$table));var c=this;c.spinnerShowing=!0;c.$spinner.show().spin(c.options.spinnerSize,{zIndex:10});return c.performAjax(a,b).always(function(){c._hideSpinnerTimeout=setTimeout(function(){c.spinnerShowing&&c.$spinner.spinStop().hide();c.spinnerShowing=!1},0)})};b.prototype.performAjax=function(a,b){return u.default.ajax({url:this.buildUrl(a,b,this.getFilterText()),dataType:this.options.ajaxDataType,statusCode:this.options.statusCode})};b.prototype.cancelRequest=function(){e.default.prototype.cancelRequest.call(this);
this._hideSpinnerTimeout&&clearTimeout(this._hideSpinnerTimeout)};b.prototype.reset=function(){e.default.prototype.reset.call(this);this.processedDomData&&this.$table.find(this.options.rowSelector).remove().end().next(".paged-table-message").remove().end();this.$table.addClass("no-rows")};b.prototype.update=function(a){this.reset();return this.init(a)};b.prototype.createDataFromJQuery=function(a,b,c){b=c.find(this.options.rowSelector);var d="true"===c.attr("data-lastpage");a=c.attr("data-nextpagestart");
c={start:Number(c.attr("data-start")),size:Number(c.attr("data-size")),values:b,isLastPage:d};null!=a&&(c.nextPageStart=Number(a));return c};b.prototype.attachNewContent=function(a,b){if(a.size){if(this.processedDomData){if(a&&a.errors){this.handleErrors(a.errors);return}this.handleNewRows(a,b)}0<a.start&&a.isLastPage&&this.handleLastPage();this.$table.removeClass("no-rows")}else a.isLastPage&&this.handleNoData();this.updateTimestamp();this.processedDomData=!0};b.prototype.updateTimestamp=function(){this.$table.attr("data-last-updated",
(new Date).getTime())};b.prototype.focusInitialRow=function(){this.$table.find(this.options.focusOptions.rowSelector).first().addClass(this.options.focusOptions.focusedClass)};b.prototype.initShortcuts=function(){this.shortcutsInitialised=!0;this.focusInitialRow();return{destroy:f.default.bind(this.resetShortcuts,this)}};b.prototype.resetShortcuts=function(){this.shortcutsInitialised=!1};b.prototype._new$Message=function(a){return(0,d.default)('\x3cdiv class\x3d"paged-table-message"/\x3e').addClass(this.options.tableMessageClass).html(a||
"")};b.prototype.handleLastPage=function(){this.$table.after(this._new$Message(this.options.allFetchedMessageHtml))};b.prototype.handleNoData=function(){var a=this.getFilterText(),a=a&&a.length?this.options.noneMatchingMessageHtml:this.options.noneFoundMessageHtml;this.$table.addClass("no-rows").after(this._new$Message(a))};b.prototype.handleErrors=function(a){(new v.default({panelContent:"\x3cp\x3e"+k.default.escapeHtml(a[0].message)+"\x3c/p\x3e"})).show()};b.prototype.buildUrl=function(a,b,c){throw Error("buildUrl is abstract and must be implemented.");
};b.prototype.handleNewRows=function(a,b){throw Error("handleNewRows is abstract and must be implemented.");};g.default=b;l.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-count', location = '/static/bitbucket/internal/feature/comment-count/comment-count.soy' */
// This file was automatically generated from comment-count.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }


bitbucket.internal.feature.commentCount = function(opt_data, opt_ignored) {
  var output = '<span class="comment-count" title="' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#comment|1\x3ccomments}',parseInt(opt_data.count))) + '">';
  switch (opt_data.size ? opt_data.size : 'small') {
    case 'small':
    case 'large':
      output += aui.icons.icon({icon: 'comment', size: opt_data.size, useIconFont: true, accessibilityText: AJS.format('{0} {0,choice,1#comment|1\x3ccomments}',parseInt(opt_data.count))});
      break;
    case 'tiny':
      output += '<img width="10" height="12" src="' + soy.$$escapeHtml('/s/837600433/a8ec8e6/1/1.0/_/download/resources/com.atlassian.bitbucket.server.bitbucket-web:comment-count/icons/icon-comment-tiny.svg') + '" alt="' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#comment|1\x3ccomments}',parseInt(opt_data.count))) + '" />';
      break;
    default:
      output += 'INVALID SIZE PROVIDED TO commentCount: ' + soy.$$escapeHtml(opt_data.size);
  }
  output += '<span class="count">' + soy.$$escapeHtml(require('bitbucket/internal/util/text').capInt(opt_data.count, 99)) + '</span></span>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentCount.soyTemplateName = 'bitbucket.internal.feature.commentCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-count', location = '/static/bitbucket/internal/feature/comment-count/comment-count.js' */
define("bitbucket/internal/feature/comment-count/comment-count",["module","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:!0});b.default={pullRequestRowItem:function(a){a=a.pullRequest;return a.properties&&a.properties.commentCount?bitbucket.internal.feature.commentCount({count:a.properties.commentCount}):""}};c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commits-table', location = '/static/bitbucket/internal/feature/commits/commits-table-clientside.soy' */
// This file was automatically generated from commits-table-clientside.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.commits.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.commits == 'undefined') { bitbucket.internal.feature.commits = {}; }


bitbucket.internal.feature.commits.commitsTableImpl = function(opt_data, opt_ignored) {
  var param13 = '';
  if (opt_data.commitPage) {
    var commitList16 = opt_data.commitPage.values;
    var commitListLen16 = commitList16.length;
    for (var commitIndex16 = 0; commitIndex16 < commitListLen16; commitIndex16++) {
      var commitData16 = commitList16[commitIndex16];
      param13 += bitbucket.internal.feature.commits.commitsTableRow({commit: commitData16, cellsContent: '' + bitbucket.internal.feature.commits.commitsTableCells({repository: opt_data.repository, commit: commitData16, webSections: opt_data.webSections, pullRequest: opt_data.pullRequest})});
    }
  }
  var output = '' + bitbucket.internal.widget.pagedTable({id: opt_data.tableId, page: opt_data.commitPage, extraClasses: 'commits-table' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), theadContent: '' + ((opt_data.commitPage && (opt_data.commitPage.size > 0 || opt_data.commitPage.start > 0) || ! opt_data.commitPage) ? '<tr>' + bitbucket.internal.feature.commits.commitsTableHeaderCells(opt_data) + '</tr>' : ''), content: param13});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableImpl.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableImpl';
}


bitbucket.internal.feature.commits.commitsTableHeaderCells = function(opt_data, opt_ignored) {
  var output = '<th class="author" title="' + soy.$$escapeHtml('Author') + '" scope="col">' + soy.$$escapeHtml('Author') + '</th><th class="commit" title="' + soy.$$escapeHtml('Commit') + '" scope="col">' + soy.$$escapeHtml('Commit') + '</th><th class="message" title="' + soy.$$escapeHtml('Message') + '" scope="col">' + soy.$$escapeHtml('Message') + '</th><th class="comment-count" scope="col"></th><th class="timestamp" title="' + soy.$$escapeHtml('Commit date') + '" scope="col">' + soy.$$escapeHtml('Commit date') + '</th>';
  if (opt_data.webSections) {
    var webSectionList47 = opt_data.webSections;
    var webSectionListLen47 = webSectionList47.length;
    for (var webSectionIndex47 = 0; webSectionIndex47 < webSectionListLen47; webSectionIndex47++) {
      var webSectionData47 = webSectionList47[webSectionIndex47];
      output += '<th class="' + soy.$$escapeHtml(webSectionData47.key) + '" title="' + soy.$$escapeHtml(webSectionData47.labelText) + '" scope="col">' + soy.$$escapeHtml(webSectionData47.labelText) + '</th>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableHeaderCells.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableHeaderCells';
}


bitbucket.internal.feature.commits.commitsTableRow = function(opt_data, opt_ignored) {
  return '<tr data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '" class="commit-row ' + ((opt_data.commit.parents.length >= 2) ? 'merge' : '') + '" data-commit-json="' + soy.$$escapeHtml(JSON.stringify(opt_data.commit).replace(/\//g, '\\/')) + '">' + soy.$$filterNoAutoescape(opt_data.cellsContent) + '</tr>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableRow.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableRow';
}


bitbucket.internal.feature.commits.commitsTableCells = function(opt_data, opt_ignored) {
  var output = '<td class="author">' + bitbucket.internal.widget.avatarWithName({size: 'small', person: opt_data.commit.author, link: true, linkExtraClasses: 'secondary-link'}) + '</td><td class="commit">' + bitbucket.internal.feature.commit.link(opt_data) + '<!-- show merge lozenge/icon if is a merge commit, eg has 2+ parents -->' + ((opt_data.commit.parents.length >= 2) ? bitbucket.internal.widget.lozenge.merge({abbreviated: true}) : '') + '</td><td class="message">';
  var parsedCommitMessage__soy87 = require('bitbucket/internal/util/parse-commit-message').splitIntoSubjectAndBody(opt_data.commit.message);
  output += '<span class="message-subject">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy87.subject, 400, true)) + '</span><span class="message-body">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy87.body, 400, true)) + '</span></td><td class="comment-count">' + ((opt_data.commit.properties && opt_data.commit.properties.commentCount) ? bitbucket.internal.feature.commentCount({count: opt_data.commit.properties.commentCount}) : '') + '</td><td class="timestamp">' + bitbucket.internal.widget.date.shortAge({date: opt_data.commit.authorTimestamp}) + '</td>' + ((opt_data.webSections) ? bitbucket.internal.feature.commits.commitsRowExtras(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.commitsTableCells.soyTemplateName = 'bitbucket.internal.feature.commits.commitsTableCells';
}


bitbucket.internal.feature.commits.link = function(opt_data, opt_ignored) {
  return ((opt_data.leadingSpaces) ? soy.$$escapeHtml(opt_data.leadingSpaces) : '') + '<a href="' + soy.$$escapeHtml(opt_data.commitUrl) + '" class="commit-preview-trigger commit-link" data-commit-id="' + soy.$$escapeHtml(opt_data.commit.id) + '" data-commit-message="' + soy.$$escapeHtml(opt_data.commit.message) + '">' + soy.$$escapeHtml(opt_data.shortMessage) + '</a>' + ((opt_data.trailingSpaces) ? soy.$$escapeHtml(opt_data.trailingSpaces) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commits.link.soyTemplateName = 'bitbucket.internal.feature.commits.link';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commits-table', location = '/static/bitbucket/internal/feature/commits/commits-table.js' */
define("bitbucket/internal/feature/commits/commits-table","module exports aui aui/flag jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/commits/commit-message-enricher bitbucket/internal/util/events bitbucket/internal/widget/paged-table/paged-table".split(" "),function(n,h,p,q,r,t,u,v,w,x){function b(c,a){this.getCommitsUrlBuilder=c;var e={target:"#commits-table",ajaxDataType:"html",tableMessageClass:"commits-table-message",allFetchedMessageHtml:'\x3cp class\x3d"no-more-results"\x3e'+
d.default.escapeHtml("No more history")+"\x3c/p\x3e",noneFoundMessageHtml:'\x3ch3 class\x3d"no-results entity-empty"\x3e'+d.default.escapeHtml("No history found")+"\x3c/h3\x3e",paginationContext:"commits-table"};a=g.default.extend({},e,a);f.default.call(this,a);this.$spinner.addClass("commits-table-spinner");this._destroyables=[]}Object.defineProperty(h,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(p),
y=babelHelpers.interopRequireDefault(q),g=babelHelpers.interopRequireDefault(r),z=babelHelpers.interopRequireDefault(t),A=babelHelpers.interopRequireDefault(u),B=babelHelpers.interopRequireDefault(v),l=babelHelpers.interopRequireDefault(w),f=babelHelpers.interopRequireDefault(x);g.default.extend(b.prototype,f.default.prototype);b.prototype.buildUrl=function(c,a){return this.getCommitsUrlBuilder().withParams({start:c,limit:a,contents:""}).build()};b.prototype.onDataLoaded=function(c,a,e){"string"===
typeof e&&(e=this.createDataFromJQuery(c,a,(0,g.default)(e)));return f.default.prototype.onDataLoaded.call(this,c,a,e)};b.prototype.attachNewContent=function(c,a){f.default.prototype.attachNewContent.call(this,c,a);l.default.trigger("bitbucket.internal.widget.commitsTable.contentAdded",this,c)};b.prototype.handleNewRows=function(c,a){this.$table.show().children("tbody")["html"!==a?a:"append"](c.values)};b.prototype.focusInitialRow=function(){this.$table.find("tbody tr.commit-row:first").addClass("focused-commit")};
b.prototype.bindKeyboardShortcuts=function(){var c=this,a=this.$table.selector,e=!1,b={focusedClass:"focused-commit",wrapAround:!1,escToCancel:!1},m=a+" .commit-row."+b.focusedClass,k=m+", "+a+".show-merges .commit-row, "+a+":not(.show-merges) .commit-row:not(.merge)";this._onDisableOpenItemHandler=function(){e=!0};this._onEnableOpenItemHandler=function(){e=!1};this.bindMoveToNextHandler=function(a){(this.moveToNextItem?this:d.default.whenIType(a)).moveToNextItem(k,b).execute(function(){(0,g.default)(k).last().hasClass(b.focusedClass)&&
window.scrollTo(0,document.documentElement.scrollHeight)})};this.bindMoveToPreviousHandler=function(a){(this.moveToPrevItem?this:d.default.whenIType(a)).moveToPrevItem(k,b)};this.bindOpenItemHandler=function(a){(this.execute?this:d.default.whenIType(a)).execute(function(){if(!e){var a=jQuery(m);a.length&&(window.location.href=a.find("td.commit a").attr("href"))}})};this.bindToggleMergesHandler=function(a){var b;(this.execute?this:d.default.whenIType(a)).execute(function(){c.$table.toggleClass("show-merges");
var a=c.$table.hasClass("show-merges")?"Showing all commits":"Hiding merge commits";b&&b.close();b=(0,y.default)({type:"info",title:a,close:"auto"})})};this._destroyables.push(l.default.chain().on("bitbucket.internal.keyboard.shortcuts.requestMoveToNextHandler",this.bindMoveToNextHandler).on("bitbucket.internal.keyboard.shortcuts.requestMoveToPreviousHandler",this.bindMoveToPreviousHandler).on("bitbucket.internal.keyboard.shortcuts.requestOpenItemHandler",
this.bindOpenItemHandler).on("bitbucket.internal.keyboard.shortcuts.requestToggleMergesHandler",this.bindToggleMergesHandler).on("bitbucket.internal.keyboard.shortcuts.disableOpenItemHandler",this._onDisableOpenItemHandler).on("bitbucket.internal.keyboard.shortcuts.enableOpenItemHandler",this._onEnableOpenItemHandler));this._destroyables.push(f.default.prototype.initShortcuts.call(this))};b.prototype.enrichCommitMessage=function(b,a){var e=(0,g.default)(a),d=e.data("commit-json"),f=A.default.currentRepo().commit(d.id).build();
e.find(".message-subject, .message-body").each(function(a,b){var c=(0,g.default)(b);B.default.process(c.text(),d,function(a){return bitbucket.internal.feature.commits.link({commit:d,commitUrl:f,shortMessage:a.trim(),leadingSpaces:a.match(/^\s*/)[0],trailingSpaces:a.match(/\s*$/)[0]})}).then(function(a){c.html(a)})})};b.prototype.destroy=function(){f.default.prototype.destroy.call(this);z.default.invoke(this._destroyables,"destroy")};h.default=b;n.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:enums', location = '/static/bitbucket/internal/enums.js' */
define("bitbucket/internal/enums",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var c=a.UserType={NORMAL:"NORMAL",SERVICE:"SERVICE"},d=a.ProjectType={NORMAL:"NORMAL",PERSONAL:"PERSONAL"},e=a.scmId={GIT:"git",HG:"hg"},f=a.RefType={TAG:"tag",BRANCH:"branch",COMMIT:"commit"},b=a.ParticipantRole={AUTHOR:"author",REVIEWER:"reviewer",PARTICIPANT:"participant"};a.UserRole=b;var g=a.ApprovalStatus={APPROVED:"APPROVED",NEEDS_WORK:"NEEDS_WORK",UNAPPROVED:"UNAPPROVED"},h=a.SelfAction=
{ADD_SELF:"ADD_SELF",REMOVE_SELF:"REMOVE_SELF"},k=a.PullRequestState={OPEN:"OPEN",MERGED:"MERGED",DECLINED:"DECLINED"},l=a.BranchStability={STABLE:"stable",UNSTABLE:"unstable"};a.MergeOutcome={CLEAN:"CLEAN",CONFLICTED:"CONFLICTED",UNKNOWN:"UNKNOWN"};a.default={ApprovalStatus:g,BranchStability:l,ProjectType:d,PullRequestState:k,RefType:f,ParticipantRole:b,SelfAction:h,scmId:e,UserRole:b,UserType:c}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-change-types', location = '/static/bitbucket/internal/model/file-change-types.js' */
define("bitbucket/internal/model/file-change-types",["module","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:!0});b.default={ADD:"ADD",DELETE:"DELETE",MODIFY:"MODIFY",COPY:"COPY",MOVE:"MOVE",RENAME:"RENAME",UNKNOWN:"UNKNOWN",changeTypeFromId:function(a){if(Object.prototype.hasOwnProperty.call(this,a)&&"string"===typeof this[a])return this[a]},guessChangeTypeFromDiff:function(a){return a?a.binary?null===a.source?this.ADD:null===a.destination?this.DELETE:this.MODIFY:(a=a.hunks[0])?
0===a.sourceLine?this.ADD:0===a.destinationLine?this.DELETE:this.MODIFY:this.UNKNOWN:this.UNKNOWN}};c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:conflict-change-model', location = '/static/bitbucket/internal/model/conflict-change.js' */
define("bitbucket/internal/model/conflict-change",["module","exports","backbone-brace","bitbucket/internal/model/file-change-types","bitbucket/internal/model/path"],function(f,b,c,a,g){Object.defineProperty(b,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);var d=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(g);var e=c.default.Model.extend({namedAttributes:{srcPath:a.default,path:a.default,type:null},initialize:function(){this.setType(e._mapChangeType(this.getType(),
this.getSrcPath(),this.getPath()))}},{_mapChangeType:function(a,b,c){return a===d.default.MOVE&&b&&b.isSameDirectory(c)?d.default.RENAME:d.default.changeTypeFromId(a)}});b.default=e;f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:conflict-model', location = '/static/bitbucket/internal/model/conflict.js' */
define("bitbucket/internal/model/conflict","module exports aui backbone-brace bitbucket/internal/model/conflict-change bitbucket/internal/model/file-change-types".split(" "),function(g,e,c,f,d,a){Object.defineProperty(e,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);f=babelHelpers.interopRequireDefault(f);d=babelHelpers.interopRequireDefault(d);a=babelHelpers.interopRequireDefault(a);var b={};b[a.default.ADD]={};b[a.default.ADD][a.default.ADD]="Conflict: Added file to Source, Added same file to Target";
b[a.default.ADD][a.default.RENAME]="Conflict: Added file to Source, Renamed to same on Target";b[a.default.ADD][a.default.MOVE]="Conflict: Added file to Source, Moved to same on Target";b[a.default.MODIFY]={};b[a.default.MODIFY][a.default.MODIFY]="Conflict: Modified on Source, Modified on Target";b[a.default.MODIFY][a.default.RENAME]="Conflict: Modified on Source, Renamed on Target";
b[a.default.MODIFY][a.default.MOVE]="Conflict: Modified on Source, Moved on Target";b[a.default.MODIFY][a.default.DELETE]="Conflict: Modified on Source, Deleted on Target";b[a.default.RENAME]={};b[a.default.RENAME][a.default.ADD]="Conflict: Renamed on Source, Added same to Target";b[a.default.RENAME][a.default.RENAME]="Conflict: Renamed on Source, Renamed on Target";
b[a.default.RENAME][a.default.MOVE]="Conflict: Renamed on Source, Moved on Target";b[a.default.RENAME][a.default.DELETE]="Conflict: Renamed on Source, Deleted on Target";b[a.default.MOVE]={};b[a.default.MOVE][a.default.ADD]="Conflict: Moved on Source, Added same to Target";b[a.default.MOVE][a.default.RENAME]="Conflict: Moved on Source, Renamed on Target";b[a.default.MOVE][a.default.MOVE]=
"Conflict: Moved on Source, Moved on Target";b[a.default.MOVE][a.default.DELETE]="Conflict: Moved on Source, Deleted on Target";b[a.default.DELETE]={};b[a.default.DELETE][a.default.MODIFY]="Conflict: Deleted on Source, Modified on Target";b[a.default.DELETE][a.default.RENAME]="Conflict: Deleted on Source, Renamed on Target";b[a.default.DELETE][a.default.MOVE]=
"Conflict: Deleted on Source, Moved on Target";a=f.default.Model.extend({namedAttributes:{ourChange:d.default,theirChange:d.default},getConflictMessage:function(){var a=this.getOurChange()&&this.getOurChange().getType(),c=this.getTheirChange()&&this.getTheirChange().getType();return b[c]&&b[c][a]||""}});e.default=a;g.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-change', location = '/static/bitbucket/internal/model/file-change.js' */
define("bitbucket/internal/model/file-change","module exports backbone-brace bitbucket/internal/model/commit-range bitbucket/internal/model/conflict bitbucket/internal/model/file-change-types bitbucket/internal/model/path bitbucket/internal/model/repository".split(" "),function(l,b,e,f,g,a,m,h){Object.defineProperty(b,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);f=babelHelpers.interopRequireDefault(f);g=babelHelpers.interopRequireDefault(g);var d=babelHelpers.interopRequireDefault(a);
a=babelHelpers.interopRequireDefault(m);h=babelHelpers.interopRequireDefault(h);var k=e.default.Model.extend({namedAttributes:{repository:h.default,commitRange:f.default,srcPath:a.default,path:a.default,line:null,search:null,type:null,nodeType:null,conflict:g.default,diff:null,srcExecutable:null,executable:null},initialize:function(){this.setType(k._mapChangeType(this.getType(),this.getSrcPath(),this.getPath()))}},{fromDiff:function(c,a,b){return new k({repository:b,commitRange:a,srcPath:c.source,
path:c.destination,diff:c,type:d.default.guessChangeTypeFromDiff(c)})},_mapChangeType:function(c,a,b){return c===d.default.MOVE&&a&&a.isSameDirectory(b)?d.default.RENAME:d.default.changeTypeFromId(c)}});b.default=k;l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:bacon', location = '/static/bower/bacon/dist/Bacon.js' */
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib={}.hasOwnProperty,jb=[].slice,kb=function(a,b){function c(){this.constructor=a}for(var d in b)ib.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},lb=function(a,b){return function(){return a.apply(b,arguments)}};a={toString:function(){return"Bacon"}},a.version="0.7.42",l=("undefined"!=typeof global&&null!==global?global:this).Error,gb={indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b===d)return c;return-1},indexWhere:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b(d))return c;return-1},head:function(a){return a[0]},always:function(a){return function(){return a}},negate:function(a){return function(b){return!a(b)}},empty:function(a){return 0===a.length},tail:function(a){return a.slice(1,a.length)},filter:function(a,b){var c,d,e,f;for(c=[],e=0,f=b.length;f>e;e++)d=b[e],a(d)&&c.push(d);return c},map:function(a,b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a(c));return f},each:function(a,b){var c,d;for(c in a)d=a[c],b(c,d);return void 0},toArray:function(a){return J(a)?a:[a]},contains:function(a,b){return-1!==gb.indexOf(a,b)},id:function(a){return a},last:function(a){return a[a.length-1]},all:function(a,b){var c,d,e;for(null==b&&(b=gb.id),d=0,e=a.length;e>d;d++)if(c=a[d],!b(c))return!1;return!0},any:function(a,b){var c,d,e;for(null==b&&(b=gb.id),d=0,e=a.length;e>d;d++)if(c=a[d],b(c))return!0;return!1},without:function(a,b){return gb.filter(function(b){return b!==a},b)},remove:function(a,b){var c;return c=gb.indexOf(b,a),c>=0?b.splice(c,1):void 0},fold:function(a,b,c){var d,e,f;for(e=0,f=a.length;f>e;e++)d=a[e],b=c(b,d);return b},flatMap:function(a,b){return gb.fold(b,[],function(b,c){return b.concat(a(c))})},cached:function(a){var b;return b=o,function(){return b===o&&(b=a(),a=void 0),b}},toString:function(a){var b,c,d,e;try{return X++,null==a?"undefined":L(a)?"function":J(a)?X>5?"[..]":"["+gb.map(gb.toString,a).toString()+"]":null!=(null!=a?a.toString:void 0)&&a.toString!==Object.prototype.toString?a.toString():"object"==typeof a?X>5?"{..}":(c=function(){var c;c=[];for(d in a)ib.call(a,d)&&(e=function(){try{return a[d]}catch(c){return b=c}}(),c.push(gb.toString(d)+":"+gb.toString(e)));return c}(),"{"+c+"}"):a}finally{X--}}},X=0,a._=gb,a.scheduler={setTimeout:function(a,b){return setTimeout(a,b)},setInterval:function(a,b){return setInterval(a,b)},clearInterval:function(a){return clearInterval(a)},now:function(){return(new Date).getTime()}},a.fromBinder=function(b,c){return null==c&&(c=gb.id),new k(B(a,"fromBinder",b,c),function(d){var e,f,g,h;return h=!1,e=!1,f=function(){return h?void 0:"undefined"!=typeof g&&null!==g?(g(),h=!0):e=!0},g=b(function(){var b,e,g,h,i,k;for(b=1<=arguments.length?jb.call(arguments,0):[],h=c.apply(this,b),J(h)&&gb.last(h)instanceof j||(h=[h]),g=a.more,i=0,k=h.length;k>i;i++)if(e=h[i],g=d(e=_(e)),g===a.noMore||e.isEnd())return f(),g;return g}),e&&f(),f})},a.$={},a.$.asEventStream=function(b,c,d){var e;return L(c)&&(e=[c,void 0],d=e[0],c=e[1]),eb(this.selector||this,"asEventStream",b,a.fromBinder(function(a){return function(d){return a.on(b,c,d),function(){return a.off(b,c,d)}}}(this),d))},null!=(hb="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(hb.fn.asEventStream=a.$.asEventStream),a.fromEventTarget=function(b,c,d){var e,f,g,h,i,j,k,l;return e=null!=(g=null!=(h=null!=(i=b.addEventListener)?i:b.addListener)?h:b.bind)?g:b.on,f=null!=(j=null!=(k=null!=(l=b.removeEventListener)?l:b.removeListener)?k:b.unbind)?j:b.off,eb(a,"fromEventTarget",b,c,a.fromBinder(function(a){return e.call(b,c,a),function(){return f.call(b,c,a)}},d))},a.fromPromise=function(b,c){return eb(a,"fromPromise",b,a.fromBinder(function(a){return b.then(a,function(b){return a(new i(b))}),function(){return c&&"function"==typeof b.abort?b.abort():void 0}},function(a){return[a,C()]}))},a.noMore=["<no-more>"],a.more=["<more>"],a.later=function(b,c){return eb(a,"later",b,c,a.fromPoll(b,function(){return[c,C()]}))},a.sequentially=function(b,c){var d;return d=0,eb(a,"sequentially",b,c,a.fromPoll(b,function(){var a;return a=c[d++],d<c.length?a:d===c.length?[a,C()]:C()}))},a.repeatedly=function(b,c){var d;return d=0,eb(a,"repeatedly",b,c,a.fromPoll(b,function(){return c[d++%c.length]}))},a.spy=function(a){return Z.push(a)},Z=[],Y=function(a){var b,c,d;if(Z.length&&!Y.running)try{for(Y.running=!0,c=0,d=Z.length;d>c;c++)(b=Z[c])(a)}finally{delete Y.running}return void 0},fb=function(a){return function(){var b,c,d,e;return d=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],"object"==typeof d&&b.length&&(c=d,e=b[0],d=function(){return c[e].apply(c,arguments)},b=b.slice(1)),a.apply(null,[d].concat(jb.call(b)))}},O=function(b,c){return fb(function(){var d,e,f;return e=arguments[0],d=2<=arguments.length?jb.call(arguments,1):[],f=W(c,[function(a,b){return e.apply(null,jb.call(a).concat([b]))}]),eb.apply(null,[a,b,e].concat(jb.call(d),[a.combineAsArray(d).flatMap(f)]))})},a.fromCallback=O("fromCallback",function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],a.fromBinder(function(a){return P(c,b)(a),V},function(a){return[a,C()]})}),a.fromNodeCallback=O("fromNodeCallback",function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],a.fromBinder(function(a){return P(c,b)(a),V},function(a,b){return a?[new i(a),C()]:[b,C()]})}),a.fromPoll=function(b,c){return eb(a,"fromPoll",b,c,a.fromBinder(function(c){var d;return d=a.scheduler.setInterval(c,b),function(){return a.scheduler.clearInterval(d)}},c))},a.interval=function(b,c){return null==c&&(c={}),eb(a,"interval",b,c,a.fromPoll(b,function(){return U(c)}))},a.constant=function(b){return new q(B(a,"constant",b),function(a){return a(I(b)),a(C()),V})},a.never=function(){return new k(B(a,"never"),function(a){return a(C()),V})},a.once=function(b){return new k(B(a,"once",b),function(a){return a(_(b)),a(C()),V})},a.fromArray=function(b){var c;return b.length?(c=0,new k(B(a,"fromArray",b),function(d){var e,f,g;return g=!1,f=a.more,e=function(){var h;return f===a.noMore||g||(h=b[c++],f=d(_(h)),f===a.noMore)?void 0:c===b.length?d(C()):u.afterTransaction(e)},e(),function(){return g=!0}})):eb(a,"fromArray",b,a.never())},a.mergeAll=function(){var b;return b=1<=arguments.length?jb.call(arguments,0):[],J(b[0])&&(b=b[0]),b.length?new k(B.apply(null,[a,"mergeAll"].concat(jb.call(b))),function(c){var d,e,f;return d=0,f=function(e){return function(f){return e.dispatcher.subscribe(function(e){var g;return e.isEnd()?(d++,d===b.length?c(C()):a.more):(g=c(e),g===a.noMore&&f(),g)})}},e=gb.map(f,b),x.apply(null,e)}):a.never()},a.zipAsArray=function(){var b;return b=1<=arguments.length?jb.call(arguments,0):[],J(b[0])&&(b=b[0]),eb.apply(null,[a,"zipAsArray"].concat(jb.call(b),[a.zipWith(b,function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[]})]))},a.zipWith=function(){var b,c,d;return b=arguments[0],c=2<=arguments.length?jb.call(arguments,1):[],L(b)||(d=[b,c[0]],c=d[0],b=d[1]),c=gb.map(function(a){return a.toEventStream()},c),eb.apply(null,[a,"zipWith",b].concat(jb.call(c),[a.when(c,b)]))},a.groupSimultaneous=function(){var c,d,e;return e=1<=arguments.length?jb.call(arguments,0):[],1===e.length&&J(e[0])&&(e=e[0]),d=function(){var a,d,f;for(f=[],a=0,d=e.length;d>a;a++)c=e[a],f.push(new b(c));return f}(),eb.apply(null,[a,"groupSimultaneous"].concat(jb.call(e),[a.when(d,function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[]})]))},a.combineAsArray=function(){var b,c,d,e,f,g,h;for(f=1<=arguments.length?jb.call(arguments,0):[],1===f.length&&J(f[0])&&(f=f[0]),b=g=0,h=f.length;h>g;b=++g)e=f[b],M(e)||(f[b]=a.constant(e));return f.length?(d=function(){var a,b,d;for(d=[],a=0,b=f.length;b>a;a++)c=f[a],d.push(new t(c,!0));return d}(),eb.apply(null,[a,"combineAsArray"].concat(jb.call(f),[a.when(d,function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[]}).toProperty()]))):a.constant([])},a.onValues=function(){var b,c,d;return c=2<=arguments.length?jb.call(arguments,0,d=arguments.length-1):(d=0,[]),b=arguments[d++],a.combineAsArray(c).onValues(b)},a.combineWith=function(){var b,c;return b=arguments[0],c=2<=arguments.length?jb.call(arguments,1):[],eb.apply(null,[a,"combineWith",b].concat(jb.call(c),[a.combineAsArray(c).map(function(a){return b.apply(null,a)})]))},a.combineTemplate=function(b){var c,d,e,f,g,h,i,j,k,l;return i=[],l=[],h=function(a){return a[a.length-1]},k=function(a,b,c){return h(a)[b]=c},c=function(a,b){return function(c,d){return k(c,a,d[b])}},g=function(a,b){return function(c){return k(c,a,b)}},j=function(a){return J(a)?[]:{}},e=function(a,b){var d,e;return M(b)?(l.push(b),i.push(c(a,l.length-1))):b!==Object(b)||"function"==typeof b||b instanceof RegExp||b instanceof Date?i.push(g(a,b)):(e=function(a){return function(c){var d;return d=j(b),k(c,a,d),c.push(d)}},d=function(a){return a.pop()},i.push(e(a)),f(b),i.push(d))},f=function(a){return gb.each(a,e)},f(b),d=function(a){var c,d,e,f,g;for(e=j(b),c=[e],f=0,g=i.length;g>f;f++)(d=i[f])(c,a);return e},eb(a,"combineTemplate",b,a.combineAsArray(l).map(d))},a.retry=function(b){var c,d,e,f,g,h;if(!L(b.source))throw new l("'source' option has to be a function");return h=b.source,f=b.retries||0,e=b.maxRetries||f,c=b.delay||function(){return 0},d=b.isRetryable||function(){return!0},g=function(b){var g,i;return i={source:h,retries:f-1,maxRetries:e,delay:c,isRetryable:d},g=function(){return a.retry(i)},a.later(c(b)).filter(!1).concat(a.once().flatMap(g))},eb(a,"retry",b,h().flatMapError(function(b){return d(b)&&f>0?g({error:b,retriesDone:e-f}):a.once(new i(b))}))},D=0,j=function(){function a(){this.id=++D}return a.prototype.isEvent=function(){return!0},a.prototype.isEnd=function(){return!1},a.prototype.isInitial=function(){return!1},a.prototype.isNext=function(){return!1},a.prototype.isError=function(){return!1},a.prototype.hasValue=function(){return!1},a.prototype.filter=function(){return!0},a.prototype.inspect=function(){return this.toString()},a.prototype.log=function(){return this.toString()},a}(),n=function(a){function b(a,c){b.__super__.constructor.call(this),!c&&L(a)||a instanceof b?(this.valueF=a,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=a)}return kb(b,a),b.prototype.isNext=function(){return!0},b.prototype.hasValue=function(){return!0},b.prototype.value=function(){return this.valueF instanceof b?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},b.prototype.fmap=function(a){var b,c;return this.valueInternal?(c=this.valueInternal,this.apply(function(){return a(c)})):(b=this,this.apply(function(){return a(b.value())}))},b.prototype.apply=function(a){return new b(a)},b.prototype.filter=function(a){return a(this.value())},b.prototype.toString=function(){return gb.toString(this.value())},b.prototype.log=function(){return this.value()},b}(j),m=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return kb(b,a),b.prototype.isInitial=function(){return!0},b.prototype.isNext=function(){return!1},b.prototype.apply=function(a){return new b(a)},b.prototype.toNext=function(){return new n(this)},b}(n),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return kb(b,a),b.prototype.isEnd=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<end>"},b}(j),i=function(a){function b(a){this.error=a}return kb(b,a),b.prototype.isError=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<error> "+gb.toString(this.error)},b}(j),H=0,p=function(){function b(a){this.id=++H,eb(a,this),this.initialDesc=this.desc}return b.prototype.subscribe=function(a){return u.wrappedSubscribe(this,a)},b.prototype.subscribeInternal=function(a){return this.dispatcher.subscribe(a)},b.prototype.onValue=function(){var a;return a=Q(arguments),this.subscribe(function(b){return b.hasValue()?a(b.value()):void 0})},b.prototype.onValues=function(a){return this.onValue(function(b){return a.apply(null,b)})},b.prototype.onError=function(){var a;return a=Q(arguments),this.subscribe(function(b){return b.isError()?a(b.error):void 0})},b.prototype.onEnd=function(){var a;return a=Q(arguments),this.subscribe(function(b){return b.isEnd()?a():void 0})},b.prototype.errors=function(){return eb(this,"errors",this.filter(function(){return!1}))},b.prototype.filter=function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],A(this,c,b,function(b){return eb(this,"filter",b,this.withHandler(function(c){return c.filter(b)?this.push(c):a.more}))})},b.prototype.takeWhile=function(){var b,c;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],A(this,c,b,function(b){return eb(this,"takeWhile",b,this.withHandler(function(c){return c.filter(b)?this.push(c):(this.push(C()),a.noMore)}))})},b.prototype.endOnError=function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],null==b&&(b=!0),A(this,b,a,function(a){return eb(this,"endOnError",this.withHandler(function(b){return b.isError()&&a(b.error)?(this.push(b),this.push(C())):this.push(b)}))})},b.prototype.take=function(b){return 0>=b?a.never():eb(this,"take",b,this.withHandler(function(c){return c.hasValue()?(b--,b>0?this.push(c):(0===b&&this.push(c),this.push(C()),a.noMore)):this.push(c)}))},b.prototype.map=function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],b instanceof q?b.sampledBy(this,G):A(this,b,a,function(a){return eb(this,"map",a,this.withHandler(function(b){return this.push(b.fmap(a))}))})},b.prototype.mapError=function(){var a;return a=Q(arguments),eb(this,"mapError",a,this.withHandler(function(b){return this.push(b.isError()?U(a(b.error)):b)}))},b.prototype.mapEnd=function(){var b;return b=Q(arguments),eb(this,"mapEnd",b,this.withHandler(function(c){return c.isEnd()?(this.push(U(b(c))),this.push(C()),a.noMore):this.push(c)}))},b.prototype.doAction=function(){var a;return a=Q(arguments),eb(this,"doAction",a,this.withHandler(function(b){return b.hasValue()&&a(b.value()),this.push(b)}))},b.prototype.skip=function(b){return eb(this,"skip",b,this.withHandler(function(c){return c.hasValue()&&b>0?(b--,a.more):this.push(c)}))},b.prototype.skipDuplicates=function(a){return null==a&&(a=function(a,b){return a===b}),eb(this,"skipDuplicates",this.withStateMachine(o,function(b,c){return c.hasValue()?c.isInitial()||b===o||!a(b.get(),c.value())?[new s(c.value()),[c]]:[b,[]]:[b,[c]]}))},b.prototype.skipErrors=function(){return eb(this,"skipErrors",this.withHandler(function(b){return b.isError()?a.more:this.push(b)}))},b.prototype.withStateMachine=function(b,c){var d;return d=b,eb(this,"withStateMachine",b,c,this.withHandler(function(b){var e,f,g,h,i,j,k;for(e=c(d,b),f=e[0],h=e[1],d=f,i=a.more,j=0,k=h.length;k>j;j++)if(g=h[j],i=this.push(g),i===a.noMore)return i;return i}))},b.prototype.scan=function(b,c){var d,e,f;return c=$(c),d=cb(b),f=function(b){return function(f){var g,h,i,j;return g=!1,j=V,h=a.more,i=function(){return g?void 0:d.forEach(function(b){return g=!0,h=f(new m(function(){return b})),h===a.noMore?(j(),j=V):void 0})},j=b.dispatcher.subscribe(function(b){var e,j;return b.hasValue()?g&&b.isInitial()?a.more:(b.isInitial()||i(),g=!0,j=d.getOrElse(void 0),e=c(j,b.value()),d=new s(e),f(b.apply(function(){return e}))):(b.isEnd()&&(h=i()),h!==a.noMore?f(b):void 0)}),u.whenDoneWith(e,i),j}}(this),e=new q(B(this,"scan",b,c),f)},b.prototype.fold=function(a,b){return eb(this,"fold",a,b,this.scan(a,b).sampledBy(this.filter(!1).mapEnd().toProperty()))},b.prototype.zip=function(b,c){return null==c&&(c=Array),eb(this,"zip",b,a.zipWith([this,b],c))},b.prototype.diff=function(a,b){return b=$(b),eb(this,"diff",a,b,this.scan([a],function(a,c){return[c,b(a[0],c)]}).filter(function(a){return 2===a.length}).map(function(a){return a[1]}))},b.prototype.flatMap=function(){return F(this,T(arguments))},b.prototype.flatMapFirst=function(){return F(this,T(arguments),!0)},b.prototype.flatMapWithConcurrencyLimit=function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],eb.apply(null,[this,"flatMapWithConcurrencyLimit",b].concat(jb.call(a),[F(this,T(a),!1,b)]))},b.prototype.flatMapLatest=function(){var a,b;return a=T(arguments),b=this.toEventStream(),eb(this,"flatMapLatest",a,b.flatMap(function(c){return S(a(c)).takeUntil(b)}))},b.prototype.flatMapError=function(b){return eb(this,"flatMapError",b,this.mapError(function(a){return new i(a)}).flatMap(function(c){return c instanceof i?b(c.error):a.once(c)}))},b.prototype.flatMapConcat=function(){return eb.apply(null,[this,"flatMapConcat"].concat(jb.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(jb.call(arguments)))]))},b.prototype.bufferingThrottle=function(b){return eb(this,"bufferingThrottle",b,this.flatMapConcat(function(c){return a.once(c).concat(a.later(b).filter(!1))}))},b.prototype.not=function(){return eb(this,"not",this.map(function(a){return!a}))},b.prototype.log=function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[],this.subscribe(function(b){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,jb.call(a).concat([b.log()])):void 0}),this},b.prototype.slidingWindow=function(a,b){return null==b&&(b=0),eb(this,"slidingWindow",a,b,this.scan([],function(b,c){return b.concat([c]).slice(-a)}).filter(function(a){return a.length>=b}))},b.prototype.combine=function(b,c){var d;return d=$(c),eb(this,"combine",b,c,a.combineAsArray(this,b).map(function(a){return d(a[0],a[1])}))},b.prototype.decode=function(b){return eb(this,"decode",b,this.combine(a.combineTemplate(b),function(a,b){return b[a]}))},b.prototype.awaiting=function(b){return eb(this,"awaiting",b,a.groupSimultaneous(this,b).map(function(a){var b,c;return b=a[0],c=a[1],0===c.length}).toProperty(!1).skipDuplicates())},b.prototype.name=function(a){return this._name=a,this},b.prototype.withDescription=function(){return B.apply(null,arguments).apply(this)},b.prototype.toString=function(){return this._name?this._name:this.desc.toString()},b.prototype.internalDeps=function(){return this.initialDesc.deps()},b}(),p.prototype.reduce=p.prototype.fold,p.prototype.assign=p.prototype.onValue,p.prototype.inspect=p.prototype.toString,F=function(b,c,e,f){var g,h,i;return i=[b],g=[],h=new k(B(b,"flatMap"+(e?"First":""),c),function(h){var i,j,k,l,n;return k=new d,l=[],n=function(b){var d;return d=S(c(b.value())),g.push(d),k.add(function(b,c){return d.dispatcher.subscribe(function(e){var f;return e.isEnd()?(gb.remove(d,g),j(),i(c),a.noMore):(e instanceof m&&(e=e.toNext()),f=h(e),f===a.noMore&&b(),f)})})},j=function(){var a;return a=l.shift(),a?n(a):void 0},i=function(a){return a(),k.empty()?h(C()):void 0},k.add(function(c,d){return b.dispatcher.subscribe(function(b){return b.isEnd()?i(d):b.isError()?h(b):e&&k.count()>1?a.more:k.unsubscribed?a.noMore:f&&k.count()>f?l.push(b):n(b)})}),k.unsubscribe}),h.internalDeps=function(){return g.length?i.concat(g):i},h},k=function(b){function c(a,b,d){L(a)&&(d=b,b=a,a=[]),c.__super__.constructor.call(this,a),this.dispatcher=new g(b,d),Y(this)}return kb(c,b),c.prototype.delay=function(b){return eb(this,"delay",b,this.flatMap(function(c){return a.later(b,c)}))},c.prototype.debounce=function(b){return eb(this,"debounce",b,this.flatMapLatest(function(c){return a.later(b,c)}))},c.prototype.debounceImmediate=function(b){return eb(this,"debounceImmediate",b,this.flatMapFirst(function(c){return a.once(c).concat(a.later(b).filter(!1))}))},c.prototype.throttle=function(a){return eb(this,"throttle",a,this.bufferWithTime(a).map(function(a){return a[a.length-1]}))},c.prototype.bufferWithTime=function(a){return eb(this,"bufferWithTime",a,this.bufferWithTimeOrCount(a,Number.MAX_VALUE))},c.prototype.bufferWithCount=function(a){return eb(this,"bufferWithCount",a,this.bufferWithTimeOrCount(void 0,a))},c.prototype.bufferWithTimeOrCount=function(a,b){var c;return c=function(c){return c.values.length===b?c.flush():void 0!==a?c.schedule():void 0},eb(this,"bufferWithTimeOrCount",a,b,this.buffer(a,c,c))},c.prototype.buffer=function(b,c,d){var e,f,g;return null==c&&(c=V),null==d&&(d=V),e={scheduled:!1,end:void 0,values:[],flush:function(){var b;if(this.scheduled=!1,this.values.length>0){if(b=this.push(U(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(b!==a.noMore)return d(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,b(function(a){return function(){return a.flush()}}(this)))}},g=a.more,L(b)||(f=b,b=function(b){return a.scheduler.setTimeout(b,f)}),eb(this,"buffer",this.withHandler(function(a){return e.push=function(a){return function(b){return a.push(b)}}(this),a.isError()?g=this.push(a):a.isEnd()?(e.end=a,e.scheduled||e.flush()):(e.values.push(a.value()),c(e)),g}))},c.prototype.merge=function(b){var c;return c=this,eb(c,"merge",b,a.mergeAll(this,b))},c.prototype.toProperty=function(b){var c,d;return d=0===arguments.length?o:cb(function(){return b}),c=this.dispatcher,new q(B(this,"toProperty",b),function(b){var e,f,g,h;return e=!1,h=V,f=a.more,g=function(){return e?void 0:d.forEach(function(c){return e=!0,f=b(new m(c)),f===a.noMore?(h(),h=V):void 0})},h=c.subscribe(function(c){return c.hasValue()?e&&c.isInitial()?a.more:(c.isInitial()||g(),e=!0,d=new s(c),b(c)):(c.isEnd()&&(f=g()),f!==a.noMore?b(c):void 0)}),g(),h})},c.prototype.toEventStream=function(){return this},c.prototype.sampledBy=function(a,b){return eb(this,"sampledBy",a,b,this.toProperty().sampledBy(a,b))},c.prototype.concat=function(a){var b;return b=this,new c(B(b,"concat",a),function(c){var d,e;return e=V,d=b.dispatcher.subscribe(function(b){return b.isEnd()?e=a.dispatcher.subscribe(c):c(b)}),function(){return d(),e()}})},c.prototype.takeUntil=function(b){var c;return c={},eb(this,"takeUntil",b,a.groupSimultaneous(this.mapEnd(c),b.skipErrors()).withHandler(function(d){var e,f,g,h,i,j;if(d.hasValue()){if(j=d.value(),e=j[0],b=j[1],b.length)return this.push(C());for(f=a.more,h=0,i=e.length;i>h;h++)g=e[h],f=this.push(g===c?C():U(g));return f}return this.push(d)}))},c.prototype.skipUntil=function(a){var b;return b=a.take(1).map(!0).toProperty(!1),eb(this,"skipUntil",a,this.filter(b))},c.prototype.skipWhile=function(){var b,c,d;return c=arguments[0],b=2<=arguments.length?jb.call(arguments,1):[],d=!1,A(this,c,b,function(b){return eb(this,"skipWhile",b,this.withHandler(function(c){return!d&&c.hasValue()&&b(c.value())?a.more:(c.hasValue()&&(d=!0),this.push(c))}))})},c.prototype.holdWhen=function(b){var c,d,e;return e=b.startWith(!1),d=e.filter(function(a){return!a}),c=e.filter(gb.id),eb(this,"holdWhen",b,this.filter(!1).merge(e.flatMapConcat(function(b){return function(e){return e?b.scan([],function(a,b){return a.concat(b)}).sampledBy(d).take(1).flatMap(a.fromArray):b.takeUntil(c)}}(this))))},c.prototype.startWith=function(b){return eb(this,"startWith",b,a.once(b).concat(this))},c.prototype.withHandler=function(a){return new c(B(this,"withHandler",a),this.dispatcher.subscribe,a)},c}(p),q=function(b){function c(a,b,d){L(a)&&(d=b,b=a,a=[]),c.__super__.constructor.call(this,a),this.dispatcher=new r(this,b,d),Y(this)}return kb(c,b),c.prototype.sampledBy=function(b,d){var e,f,g,h,i;return null!=d?d=$(d):(e=!0,d=function(a){return a.value()}),i=new t(this,!1,e),g=new t(b,!0,e),h=a.when([i,g],d),f=b instanceof c?h.toProperty():h,eb(this,"sampledBy",b,d,f)},c.prototype.sample=function(b){return eb(this,"sample",b,this.sampledBy(a.interval(b,{})))},c.prototype.changes=function(){return new k(B(this,"changes"),function(a){return function(b){return a.dispatcher.subscribe(function(a){return a.isInitial()?void 0:b(a)})}}(this))},c.prototype.withHandler=function(a){return new c(B(this,"withHandler",a),this.dispatcher.subscribe,a)},c.prototype.toProperty=function(){return this},c.prototype.toEventStream=function(){return new k(B(this,"toEventStream"),function(a){return function(b){return a.dispatcher.subscribe(function(a){return a.isInitial()&&(a=a.toNext()),b(a)})}}(this))},c.prototype.and=function(a){return eb(this,"and",a,this.combine(a,function(a,b){return a&&b}))},c.prototype.or=function(a){return eb(this,"or",a,this.combine(a,function(a,b){return a||b}))},c.prototype.delay=function(a){return this.delayChanges("delay",a,function(b){return b.delay(a)})},c.prototype.debounce=function(a){return this.delayChanges("debounce",a,function(b){return b.debounce(a)})},c.prototype.throttle=function(a){return this.delayChanges("throttle",a,function(b){return b.throttle(a)})},c.prototype.delayChanges=function(){var a,b,c;return a=2<=arguments.length?jb.call(arguments,0,c=arguments.length-1):(c=0,[]),b=arguments[c++],eb.apply(null,[this].concat(jb.call(a),[v(this,b(this.changes()))]))},c.prototype.takeUntil=function(a){var b;return b=this.changes().takeUntil(a),eb(this,"takeUntil",a,v(this,b))},c.prototype.startWith=function(a){return eb(this,"startWith",a,this.scan(a,function(a,b){return b}))},c.prototype.bufferingThrottle=function(){var a;return(a=c.__super__.bufferingThrottle.apply(this,arguments)).bufferingThrottle.apply(a,arguments).toProperty()},c}(p),A=function(a,b,c,d){var e;return b instanceof q?(e=b.sampledBy(a,function(a,b){return[a,b]}),d.call(e,function(a){var b,c;return b=a[0],c=a[1],b}).map(function(a){var b,c;return b=a[0],c=a[1]})):(b=P(b,c),d.call(a,b))},v=function(b,c){var d;return d=new k(B(b,"justInitValue"),function(c){var e,f;return f=void 0,e=b.dispatcher.subscribe(function(b){return b.isEnd()||(f=b),a.noMore}),u.whenDoneWith(d,function(){return null!=f&&c(f),c(C())}),e}),d.concat(c).toProperty()},g=function(){function b(a,b){this._subscribe=a,this._handleEvent=b,this.subscribe=lb(this.subscribe,this),this.handleEvent=lb(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return b.prototype.hasSubscribers=function(){return this.subscriptions.length>0},b.prototype.removeSub=function(a){return this.subscriptions=gb.without(a,this.subscriptions)},b.prototype.push=function(a){return a.isEnd()&&(this.ended=!0),u.inTransaction(a,this,this.pushIt,[a])},b.prototype.pushToSubscriptions=function(b){var c,d,e,f,g,h;try{for(f=this.subscriptions,g=0,h=f.length;h>g;g++)e=f[g],d=e.sink(b),(d===a.noMore||b.isEnd())&&this.removeSub(e);return!0}catch(i){throw c=i,this.pushing=!1,this.queue=[],c}},b.prototype.pushIt=function(b){if(this.pushing)return this.queue.push(b),a.more;if(b!==this.prevError){for(b.isError()&&(this.prevError=b),this.pushing=!0,this.pushToSubscriptions(b),this.pushing=!1;this.queue.length;)b=this.queue.shift(),this.push(b);return this.hasSubscribers()?a.more:(this.unsubscribeFromSource(),a.noMore)}},b.prototype.handleEvent=function(a){return this._handleEvent?this._handleEvent(a):this.push(a)},b.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},b.prototype.subscribe=function(a){var b;return this.ended?(a(C()),V):(b={sink:a},this.subscriptions.push(b),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent)),function(a){return function(){return a.removeSub(b),a.hasSubscribers()?void 0:a.unsubscribeFromSource()}}(this))},b}(),r=function(b){function c(a,b,d){this.property=a,this.subscribe=lb(this.subscribe,this),c.__super__.constructor.call(this,b,d),this.current=o,this.currentValueRootId=void 0,this.propertyEnded=!1}return kb(c,b),c.prototype.push=function(a){return a.isEnd()&&(this.propertyEnded=!0),a.hasValue()&&(this.current=new s(a),this.currentValueRootId=u.currentEventId()),c.__super__.push.call(this,a)},c.prototype.maybeSubSource=function(b,c){return c===a.noMore?V:this.propertyEnded?(b(C()),V):g.prototype.subscribe.call(this,b)},c.prototype.subscribe=function(b){var c,d,e,f;return d=!1,e=a.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(c=u.currentEventId(),f=this.currentValueRootId,!this.propertyEnded&&f&&c&&c!==f?(u.whenDoneWith(this.property,function(a){return function(){return a.currentValueRootId===f?b(I(a.current.get().value())):void 0}}(this)),this.maybeSubSource(b,e)):(u.inTransaction(void 0,this,function(){return e=b(I(this.current.get().value()))},[]),this.maybeSubSource(b,e))):this.maybeSubSource(b,e)},c}(g),c=function(b){function c(){this.guardedSink=lb(this.guardedSink,this),this.subscribeAll=lb(this.subscribeAll,this),this.unsubAll=lb(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,c.__super__.constructor.call(this,B(a,"Bus"),this.subscribeAll)}return kb(c,b),c.prototype.unsubAll=function(){var a,b,c,d;for(d=this.subscriptions,b=0,c=d.length;c>b;b++)a=d[b],"function"==typeof a.unsub&&a.unsub();return void 0},c.prototype.subscribeAll=function(a){var b,c,d,e;for(this.sink=a,e=w(this.subscriptions),c=0,d=e.length;d>c;c++)b=e[c],this.subscribeInput(b);return this.unsubAll},c.prototype.guardedSink=function(b){return function(c){return function(d){return d.isEnd()?(c.unsubscribeInput(b),a.noMore):c.sink(d)}}(this)},c.prototype.subscribeInput=function(a){return a.unsub=a.input.dispatcher.subscribe(this.guardedSink(a.input))},c.prototype.unsubscribeInput=function(a){var b,c,d,e,f;for(f=this.subscriptions,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c.input===a)return"function"==typeof c.unsub&&c.unsub(),void this.subscriptions.splice(b,1)},c.prototype.plug=function(a){var b;if(!this.ended)return b={input:a},this.subscriptions.push(b),null!=this.sink&&this.subscribeInput(b),function(b){return function(){return b.unsubscribeInput(a)}}(this)},c.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(C()):void 0},c.prototype.push=function(a){return"function"==typeof this.sink?this.sink(U(a)):void 0},c.prototype.error=function(a){return"function"==typeof this.sink?this.sink(new i(a)):void 0},c}(k),t=function(){function a(a,b,c){this.obs=a,this.sync=b,this.lazy=null!=c?c:!1,this.queue=[]}return a.prototype.subscribe=function(a){return this.obs.dispatcher.subscribe(a)},a.prototype.toString=function(){return this.obs.toString()},a.prototype.markEnded=function(){return this.ended=!0},a.prototype.consume=function(){return this.lazy?{value:gb.always(this.queue[0])}:this.queue[0]},a.prototype.push=function(a){return this.queue=[a]},a.prototype.mayHave=function(){return!0},a.prototype.hasAtLeast=function(){return this.queue.length},a.prototype.flatten=!0,a}(),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return kb(b,a),b.prototype.consume=function(){return this.queue.shift()},b.prototype.push=function(a){return this.queue.push(a)},b.prototype.mayHave=function(a){return!this.ended||this.queue.length>=a},b.prototype.hasAtLeast=function(a){return this.queue.length>=a},b.prototype.flatten=!1,b}(t),b=function(a){function b(a){b.__super__.constructor.call(this,a,!0)}return kb(b,a),b.prototype.consume=function(){var a;return a=this.queue,this.queue=[],{value:function(){return a}}},b.prototype.push=function(a){return this.queue.push(a.value())},b.prototype.hasAtLeast=function(){return!0},b}(t),t.isTrigger=function(a){return a instanceof t?a.sync:a instanceof k},t.fromObservable=function(a){return a instanceof t?a:a instanceof q?new t(a,!1):new e(a,!0)},B=function(){var a,b,c;return b=arguments[0],c=arguments[1],a=3<=arguments.length?jb.call(arguments,2):[],(b||c)instanceof f?b||c:new f(b,c,a)},E=function(a){return J(a)?gb.flatMap(E,a):M(a)?[a]:a instanceof t?[a.obs]:[]},f=function(){function a(a,b,c){this.context=a,this.method=b,this.args=c,this.cached=void 0
}return a.prototype.deps=function(){return this.cached||(this.cached=E([this.context].concat(this.args)))},a.prototype.apply=function(a){return a.desc=this,a},a.prototype.toString=function(){return gb.toString(this.context)+"."+gb.toString(this.method)+"("+gb.map(gb.toString,this.args)+")"},a}(),eb=function(){var a,b,c;return a=2<=arguments.length?jb.call(arguments,0,c=arguments.length-1):(c=0,[]),b=arguments[c++],B.apply(null,a).apply(b)},a.when=function(){var b,c,d,e,f,g,h,i,j,l,m,n,o,p,q,r,s,v,w,A;if(0===arguments.length)return a.never();for(f=arguments.length,q="when: expecting arguments in the form (Observable+,function)+",o=[],j=[],c=0,l=[];f>c;){for(l[c]=arguments[c],l[c+1]=arguments[c+1],i=gb.toArray(arguments[c]),b=y(arguments[c+1]),h={f:b,ixs:[]},p=!1,r=0,v=i.length;v>r;r++){for(n=i[r],d=gb.indexOf(o,n),p||(p=t.isTrigger(n)),0>d&&(o.push(n),d=o.length-1),A=h.ixs,s=0,w=A.length;w>s;s++)e=A[s],e.index===d&&e.count++;h.ixs.push({index:d,count:1})}i.length>0&&j.push(h),c+=2}return o.length?(o=gb.map(t.fromObservable,o),g=gb.any(o,function(a){return a.flatten})&&z(gb.map(function(a){return a.obs},o)),m=new k(B.apply(null,[a,"when"].concat(jb.call(l))),function(b){var d,e,f,h,i,k,l;return l=[],f=!1,h=function(a){var b,d,e;for(e=a.ixs,b=0,d=e.length;d>b;b++)if(c=e[b],!o[c.index].hasAtLeast(c.count))return!1;return!0},e=function(a){return!a.sync||a.ended},d=function(a){var b,d,e;for(e=a.ixs,b=0,d=e.length;d>b;b++)if(c=e[b],!o[c.index].mayHave(c.count))return!0},i=function(a){return!a.source.flatten},k=function(k){return function(n){var p,q,r;return q=function(){return u.whenDoneWith(m,p)},r=function(){var d,e,f,g,k,m;if(!(l.length>0))return a.more;for(f=a.more,g=l.pop(),k=0,m=j.length;m>k;k++)if(e=j[k],h(e))return d=function(){var a,b,d,f;for(d=e.ixs,f=[],a=0,b=d.length;b>a;a++)c=d[a],f.push(o[c.index].consume());return f}(),f=b(g.e.apply(function(){var a,b;return b=function(){var b,c,e;for(e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.value());return e}(),e.f.apply(e,b)})),l.length&&(l=gb.filter(i,l)),f===a.noMore?f:r()},p=function(){var c;return c=r(),f&&(f=!1,(gb.all(o,e)||gb.all(j,d))&&(c=a.noMore,b(C()))),c===a.noMore&&n(),c},k.subscribe(function(c){var d;return c.isEnd()?(f=!0,k.markEnded(),q()):c.isError()?d=b(c):(k.push(c),k.sync&&(l.push({source:k,e:c}),g||u.hasWaiters()?q():p())),d===a.noMore&&n(),d||a.more})}},x.apply(null,function(){var a,b,c;for(c=[],a=0,b=o.length;b>a;a++)n=o[a],c.push(k(n));return c}())})):a.never()},z=function(a,b){var c;return null==b&&(b=[]),c=function(a){var d;return gb.contains(b,a)?!0:(d=a.internalDeps(),d.length?(b.push(a),gb.any(d,c)):(b.push(a),!1))},gb.any(a,c)},a.update=function(){var b,c,d,e;for(c=arguments[0],e=2<=arguments.length?jb.call(arguments,1):[],d=function(a){return function(){var b;return b=1<=arguments.length?jb.call(arguments,0):[],function(c){return a.apply(null,[c].concat(b))}}},b=e.length-1;b>0;)e[b]instanceof Function||(e[b]=function(a){return function(){return a}}(e[b])),e[b]=d(e[b]),b-=2;return eb.apply(null,[a,"update",c].concat(jb.call(e),[a.when.apply(a,e).scan(c,function(a,b){return b(a)})]))},x=function(){var a;return a=1<=arguments.length?jb.call(arguments,0):[],new d(a).unsubscribe},d=function(){function a(a){var b,c,d;for(null==a&&(a=[]),this.unsubscribe=lb(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],c=0,d=a.length;d>c;c++)b=a[c],this.add(b)}return a.prototype.add=function(a){var b,c,d;if(!this.unsubscribed)return b=!1,c=V,this.starting.push(a),d=function(d){return function(){return d.unsubscribed?void 0:(b=!0,d.remove(c),gb.remove(a,d.starting))}}(this),c=a(this.unsubscribe,d),this.unsubscribed||b||this.subscriptions.push(c),gb.remove(a,this.starting),c},a.prototype.remove=function(a){return this.unsubscribed?void 0:void 0!==gb.remove(a,this.subscriptions)?a():void 0},a.prototype.unsubscribe=function(){var a,b,c,d;if(!this.unsubscribed){for(this.unsubscribed=!0,d=this.subscriptions,b=0,c=d.length;c>b;b++)(a=d[b])();return this.subscriptions=[],this.starting=[]}},a.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},a.prototype.empty=function(){return 0===this.count()},a}(),a.CompositeUnsubscribe=d,s=function(){function a(a){this.value=a}return a.prototype.getOrElse=function(){return this.value},a.prototype.get=function(){return this.value},a.prototype.filter=function(b){return b(this.value)?new a(this.value):o},a.prototype.map=function(b){return new a(b(this.value))},a.prototype.forEach=function(a){return a(this.value)},a.prototype.isDefined=!0,a.prototype.toArray=function(){return[this.value]},a.prototype.inspect=function(){return"Some("+this.value+")"},a.prototype.toString=function(){return this.inspect()},a}(),o={getOrElse:function(a){return a},filter:function(){return o},map:function(){return o},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},u=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return k=void 0,l=[],m={},c=[],d=0,b=function(a){return k?c.push(a):a()},n=function(a,b){var c;return k?(c=m[a.id],null==c?(c=m[a.id]=[b],l.push(a)):c.push(b)):b()},f=function(){for(;l.length>0;)h(0);return void 0},h=function(a){var b,c,d,e,f,h;for(c=l[a],d=c.id,e=m[d],l.splice(a,1),delete m[d],g(c),f=0,h=e.length;h>f;f++)(b=e[f])();return void 0},g=function(a){var b,c,d,e,f;for(c=a.internalDeps(),e=0,f=c.length;f>e;e++)b=c[e],g(b),m[b.id]&&(d=gb.indexOf(l,b),h(d));return void 0},j=function(a,b,e,g){var h,i;if(k)return e.apply(b,g);k=a;try{i=e.apply(b,g),f()}finally{for(k=void 0;d<c.length;)h=c[d],d++,h();d=0,c=[]}return i},e=function(){return k?k.id:void 0},o=function(c,d){var e,f,g,h;return h=!1,f=!1,e=function(){return f=!0},g=function(){return h=!0,e()},e=c.dispatcher.subscribe(function(c){return b(function(){var b;return h||(b=d(c),b!==a.noMore)?void 0:g()})}),f&&e(),g},i=function(){return l.length>0},{whenDoneWith:n,hasWaiters:i,inTransaction:j,currentEventId:e,wrappedSubscribe:o,afterTransaction:b}}(),a.EventStream=k,a.Property=q,a.Observable=p,a.Bus=c,a.Initial=m,a.Next=n,a.End=h,a.Error=i,V=function(){},N=function(a,b){return b},G=function(a){return a},I=function(a){return new m(a,!0)},U=function(a){return new n(a,!0)},C=function(){return new h},_=function(a){return a instanceof j?a:U(a)},w=function(a){return a.slice(0)},L=function(a){return"function"==typeof a},J=function(a){return a instanceof Array},M=function(a){return a instanceof p},W=function(a,b){return function(){var c;return c=1<=arguments.length?jb.call(arguments,0):[],a.apply(null,b.concat(c))}},T=function(a){return 1===a.length&&M(a[0])?gb.always(a[0]):Q(a)},Q=function(a){return a=Array.prototype.slice.call(a),R.apply(null,a)},R=fb(function(){var a,b;return b=arguments[0],a=2<=arguments.length?jb.call(arguments,1):[],L(b)?a.length?W(b,a):b:K(b)?ab(b,a):gb.always(b)}),P=function(a,b){return R.apply(null,[a].concat(jb.call(b)))},y=function(a){return L(a)?a:gb.always(a)},S=function(b){return M(b)?b:a.once(b)},K=function(a){return"string"==typeof a&&a.length>1&&"."===a.charAt(0)},a.isFieldKey=K,ab=function(a,b){var c,d;return d=a.slice(1).split("."),c=gb.map(db(b),d),function(b){var d,e;for(d=0,e=c.length;e>d;d++)a=c[d],b=a(b);return b}},db=function(a){return function(b){return function(c){var d;return null==c?void 0:(d=c[b],L(d)?d.apply(c,a):d)}}},bb=function(a){return a.slice(1)},$=function(a){var b;return L(a)?a:K(a)?(b=bb(a),function(a,c){return a[b](c)}):void 0},cb=function(a){return a instanceof s||a===o?a:new s(a)},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return a}),this.Bacon=a):"undefined"!=typeof module&&null!==module&&null!=module.exports?(module.exports=a,a.Bacon=a):this.Bacon=a}).call(this);
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:bacon', location = '/static/lib/Bacon-AMD.js' */
define("bacon",["jquery"],function(b){var a=window.Bacon||window.module.exports;b.fn.asEventStream=a.$.asEventStream;return a});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:performance-util', location = '/static/bitbucket/internal/util/performance.js' */
define("bitbucket/internal/util/performance",["module","exports","jquery"],function(p,f,q){function n(c,a){function d(){e=null;k=!0;b.fire();b=new l.default.Callbacks;k=!1;a()}var b=new l.default.Callbacks,k=!1,e=null;return{name:c,forceExecute:function(){e&&(clearTimeout(e),d())},queue:function(a){k?a():(b.add(a),e||(e=setTimeout(d,0)))}}}Object.defineProperty(f,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(q),m=n("READ",function(){g.forceExecute()}),g=n("WRITE",function(){m.forceExecute()});
f.default={queueDOMRead:m.queue.bind(m),queueDOMWrite:g.queue.bind(g),enqueueCapped:function(c,a,d){d=d||1;var b=0;return function(){b>=d||(b++,c(function(){try{return a.apply(this,arguments)}finally{b--}}))}},frameBatchedMap:function(c,a,d){a=l.default.extend({initial:500,min:10,max:Infinity},a);d=d||function(b){b()};return function(b){function k(){for(var a=Math.min(h+e,b.length);h<a;h++)g[h]=c(b[h])}var e=a.initial,f=l.default.Deferred(),h=0,g=[];requestAnimationFrame(function r(){if("pending"===
f.state()){var c=(new Date).getTime();d(k);c=(new Date).getTime()-c;c=Math.ceil(15/c*e);e=Math.min(a.max,Math.max(a.min,c));h===b.length?f.resolve(g):requestAnimationFrame(r)}});return f}}};p.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bacon-util', location = '/static/bitbucket/internal/util/bacon.js' */
define("bitbucket/internal/util/bacon","module exports bacon jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/performance".split(" "),function(r,m,n,p,t,u,v,w){Object.defineProperty(m,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),g=babelHelpers.interopRequireDefault(t),q=babelHelpers.interopRequireDefault(u),x=babelHelpers.interopRequireDefault(v),y=babelHelpers.interopRequireDefault(w);
n=g.default.once(function(){function a(){return{left:b.scrollLeft(),top:b.scrollTop()}}var b=(0,f.default)(window),c=e.default.fromBinder(function(a){var d=y.default.enqueueCapped(requestAnimationFrame,a),c=g.default.debounce(d,20);b.on("scroll",d).on("scroll",c);return function(){b.off("scroll",d).off("scroll",c)}}).map(a).skipDuplicates(function(a,b){return a.left===b.left&&a.top===b.top}).toProperty(a());c.onValue(f.default.noop);return c});p=g.default.once(function(){var a=(0,f.default)(window),
a=e.default.fromBinder(function(a){var c=q.default.chain().on("window.resize",function(c,d){a(new e.default.Next({width:c,height:d}))});return function(){c.destroy()}}).toProperty({width:a.width(),height:a.height()});a.onValue(f.default.noop);return a});m.default={events:function(a){return e.default.fromBinder(function(b){return q.default.chain().on(a,b).destroy})},split:function(a,b){return e.default.fromBinder(function(c){var h=[],d,k=[];k.push(a.onValue(function(a){var e=b(a);d&&e!==d&&(c(h),h=
[]);d=e;h.push(a)}));k.push(a.onEnd(function(){0<h.length&&c(h);c(new e.default.End)}));return g.default.partial(x.default.applyAll,k)})},toArray:function(a){var b=[];a.onValue(function(a){b.push(a)});return b},getWindowScrollProperty:n,getWindowSizeProperty:p,takeBetween:function(a,b){var c=b.start,h=b.end,d=b.startInclusive,k=b.endInclusive,l=b.equals||function(a,b){return a===b};if(l(c,h))return d||k?a.skipWhile(function(a){return!l(a,c)}).take(1):e.default.never();var f,g;return a.skipWhile(function(a){return g||
f?!1:l(a,c)?(f=!0,!d):l(a,h)?(g=!0,!k):!0}).takeWhile(function(a){return l(a,c)?(f=!0,d):l(a,h)?(g=!0,k):!(g&&f)})}};r.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comment-tips', location = '/static/bitbucket/internal/feature/comments/comment-tips.js' */
define("bitbucket/internal/feature/comments/comment-tips",["module","exports","aui","bitbucket/internal/util/navigator"],function(d,b,a,c){Object.defineProperty(b,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);c=babelHelpers.interopRequireDefault(c);b.default={tips:[c.default.isMac()?"\u2318 + Enter to post your comment":"Ctrl + Enter to post your comment","Type \u0027@\u0027 to mention other users",a.default.format("You can use {0}Markdown{1} in comments",
"\x3ca href\x3d'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Markdown+syntax+guide?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' target\x3d\"_blank\"\x3e","\x3c/a\x3e")]};d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:submit-spinner', location = '/static/bitbucket/internal/widget/submit-spinner/submit-spinner.js' */
define("bitbucket/internal/widget/submit-spinner/submit-spinner",["module","exports","jquery"],function(c,a,e){function b(a,c){if(!(this instanceof b))return new b(a);this.$button=(0,d.default)(a);this.$spinner=(0,d.default)('\x3cdiv class\x3d"submit-spinner invisible" /\x3e');"before"===c?this.$spinner.insertBefore(this.$button):this.$spinner.insertAfter(this.$button)}Object.defineProperty(a,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(e);b.prototype.show=function(){this.$spinner.removeClass("invisible");
this.$spinner.spin();return this};b.prototype.hide=function(){this.$spinner.addClass("invisible");this.$spinner.spinStop();return this};b.prototype.remove=function(){this.$spinner.remove();return this};a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:backbone', location = '/static/lib/backbone/backbone-sync-shim.js' */
require(["aui","backbone","lodash","bitbucket/internal/util/ajax"],function(e,c,d,f){var g={create:"POST",read:"GET",update:"PUT","delete":"DELETE"};c.sync=function(a,b,c){a=d.extend({url:d.isFunction(b.url)?b.url():b.url,type:g[a],data:b.toJSON()},c);e.hasOwnProperty("RestfulTable")&&b instanceof e.RestfulTable.EntryModel&&(a=d.extend({statusCode:{400:!1}},a));return f.rest(a)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time', location = '/static/bitbucket/internal/widget/date/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.date.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.date == 'undefined') { bitbucket.internal.widget.date = {}; }


bitbucket.internal.widget.date.customAge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.date.time({date: opt_data.date, title: opt_data.title, customMapping: opt_data.customMapping, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.customAge.soyTemplateName = 'bitbucket.internal.widget.date.customAge';
}


bitbucket.internal.widget.date.shortAge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.shortAge.soyTemplateName = 'bitbucket.internal.widget.date.shortAge';
}


bitbucket.internal.widget.date.short = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'short'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.short.soyTemplateName = 'bitbucket.internal.widget.date.short';
}


bitbucket.internal.widget.date.time = function(opt_data, opt_ignored) {
  return '' + ((opt_data.date) ? '<time title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : require('bitbucket/internal/util/time').format(opt_data.date, 'full')) + '" datetime="' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, 'timestamp')) + '"' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, opt_data.type, opt_data.customMapping)) + '</time>' : '<time' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml('Unknown Date') + '</time>');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.date.time.soyTemplateName = 'bitbucket.internal.widget.date.time';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time', location = '/static/bitbucket/internal/widget/date/deprecated-time.soy' */
// This file was automatically generated from deprecated-time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.date.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.date == 'undefined') { widget.date = {}; }


widget.date.shortAge = function(opt_data, opt_ignored) {
  return '' + widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  widget.date.shortAge.soyTemplateName = 'widget.date.shortAge';
}


widget.date.short = function(opt_data, opt_ignored) {
  return '' + widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'short'});
};
if (goog.DEBUG) {
  widget.date.short.soyTemplateName = 'widget.date.short';
}


widget.date.time = function(opt_data, opt_ignored) {
  return '' + ((opt_data.date) ? '<time title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : require('bitbucket/internal/util/time').format(opt_data.date, 'full')) + '" datetime="' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, 'timestamp')) + '" class="deprecated' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.date, opt_data.type)) + '</time>' : '<time class="deprecated' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml('Unknown Date') + '</time>');
};
if (goog.DEBUG) {
  widget.date.time.soyTemplateName = 'widget.date.time';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:confirm-dialog', location = '/static/bitbucket/internal/widget/confirm-dialog.js' */
define("bitbucket/internal/widget/confirm-dialog","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),function(l,c,m,n,r,t,u){function a(b,v){this.dialogOptions=e.default.extend({},a.dialogDefaults,b);this.ajaxOptions=v||{};this._selectors=[];this._okCallbacks=e.default.Callbacks();this._cancelCallback=e.default.Callbacks();this._detachers=e.default.Callbacks();this._attached=!1}Object.defineProperty(c,"__esModule",{value:!0});
var g=babelHelpers.interopRequireDefault(m),e=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(r),x=babelHelpers.interopRequireDefault(t),y=babelHelpers.interopRequireDefault(u);a.prototype.getConfirmButton=function(){return(0,e.default)("#"+this.dialogOptions.id+" ."+this.dialogOptions.confirmButtonClass)};a.prototype.getButtons=function(){var b=this.getConfirmButton(),a=this.dialogOptions.id;w.default.each(this._selectors,function(g){b=b.add((0,e.default)("#"+a+" "+g))});
return b};a.prototype.setButtonsDisabled=function(b){this.getButtons().each(function(){var a=(0,e.default)(this);a.prop("disabled",b).toggleClass("disabled",b);b?a.attr("aria-disabled","true"):a.removeAttr("aria-disabled")})};a.prototype.destroy=function(){this._detachers.fire();this._detachers=null};a.prototype.attachTo=function(b,a,c){var h=this,d=this.dialogOptions,l=this.ajaxOptions,m=this._okCallbacks,n=this._cancelCallback;c=c||document;var f=(0,e.default)(c);this._selectors.push(b);var p=function(){h.setButtonsDisabled(!1)};
f.on("hideLayer",p);var q=function(b){b.preventDefault();var c=(0,e.default)(this);if(!c.is(":disabled")){var f=function(a){h.setButtonsDisabled(!1);a.remove()},k=new g.default.Dialog({width:d.width,height:d.height,id:d.id,focusSelector:d.focusSelector,closeOnOutsideClick:!1,keypressListener:function(a){a.stopImmediatePropagation();a.keyCode===g.default.keyCode.ESCAPE&&(a.preventDefault(),f(k))}});k.addHeader(d.titleText,d.titleClass);k.addPanel("",d.panelContent,d.panelClass);k.addButton(d.submitText,
function(a){h.setButtonsDisabled(!0);var b=null,d=new y.default(h.getConfirmButton(),"before");h.dialogOptions.submitToHref&&(d.show(),"A"===c[0].tagName?b=x.default.rest(e.default.extend({url:c.attr("href")},l)).always(function(){d.hide();f(a)}):c.closest("form")[0].submit());m.fire(b,c,function(){f(a)},a,d)},"button "+(d.confirmButtonClass||""));k.addCancel("Cancel",function(a){f(a);n.fire(c)});a&&a(this,k,h);k.show();h._attached=!0}};f.on("click",b,
q);this._detachers.add(function(){f.off("hideLayer",p);f.off("click",b,q)})};a.prototype.addConfirmListener=function(a){this._okCallbacks.add(a)};a.prototype.addCancelListener=function(a){this._cancelCallback.add(a)};a.dialogDefaults={id:void 0,titleText:"Confirm",titleClass:"confirm-header",confirmButtonClass:"confirm-button",panelContent:"\x3cp\x3e"+"Are you sure you want to do that?"+"\x3c/p\x3e",panelClass:"panel-body",submitText:"Confirm",
submitToHref:!0,height:230,width:433,focusSelector:".confirm-button"};c.default=a;l.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:imagesloaded', location = '/static/bower/imagesloaded/jquery.imagesloaded.js' */
(function(c,q){var m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function n(){var b=c(j),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function p(b){k(b.target,"error"===b.type)}function k(b,a){b.src===m||-1!==c.inArray(b,l)||(l.push(b),a?h.push(b):j.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),r&&d.notifyWith(c(b),[a,e,c(j),c(h)]),e.length===l.length&&(setTimeout(n),e.unbind(".imagesLoaded",
p)))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():0,r=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),l=[],j=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",p).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)k(a,e.isBroken);else if(a.complete&&a.naturalWidth!==q)k(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=m,a.src=d}):
n();return d?d.promise(g):g}})(jQuery);
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:imagesloaded', location = '/static/lib/imagesloaded-AMD.js' */
define("bitbucket/internal/imagesloaded",function(){});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:scroll', location = '/static/bitbucket/internal/util/scroll.js' */
define("bitbucket/internal/util/scroll",["module","exports","jquery","lodash","bitbucket/internal/util/feature-detect"],function(k,h,l,m,n){Object.defineProperty(h,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),p=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(n),r={waitForImages:!1,cancelIfScrolled:!1,duration:400,getScrollPadding:function(){return document.documentElement.clientHeight/4}};h.default={scrollTo:function(g,t){function e(){if(!b){var d=
g.offset();if(d){var d=d.top,a=c.getScrollPadding(),e=c.duration;(0,f.default)("html, body").animate({scrollTop:Math.max(0,d-a)},e)}}}var c=f.default.extend({},r,t),b=!1;if(c.cancelIfScrolled)(0,f.default)(document).one("scroll",function(){b=!0});c.waitForImages?(0,f.default)(document).imagesLoaded(e):e()},fakeScroll:function(g,f){var e=q.default.cssTransform(),c={left:0,top:0},b=-1;f&&!0===f.withDocument&&(b=1);var d;switch(e){case "msTransform":d=function(a){g.style[e]=null===a?"":"translate("+
Math.round(a.left)*b+"px, "+Math.round(a.top)*b+"px)"};break;case void 0:d=function(a){g.style.left=null===a?"":Math.round(a.left)*b;g.style.top=null===a?"":Math.round(a.top)*b};break;default:d=function(a){g.style[e]=null===a?"":"translate3d("+Math.round(a.left)*b+"px, "+Math.round(a.top)*b+"px, 0)"}}return p.default.compose(d,function(a,b){c.left=null==a?c.left:a;c.top=null==b?c.top:b;return 0===c.left&&0===c.top?null:c})}};k.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:scroll', location = '/static/bitbucket/internal/util/horizontal-keyboard-scrolling.js' */
define("bitbucket/internal/util/horizontal-keyboard-scrolling",["module","exports","jquery"],function(g,a,h){Object.defineProperty(a,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),f=!1,e=!1,l=/INPUT|SELECT|TEXTAREA/i,c=null;a.default={init:function(){f||(f=!0,(0,k.default)(document).on("keydown",function(d){if(!e&&(37===d.keyCode||39===d.keyCode)){var a=d.target;a&&l.test(a.tagName)||c&&c.length&&c.forEach(function(a){var b=a.getScrollInfo();if(b.width>b.clientWidth){var c=b.left+
(37===d.keyCode?-50:50),b=b.width-b.clientWidth;a.scrollTo(c>b?b:c,null);d.preventDefault()}})}}))},setEditors:function(a){c=a},pause:function(){e=!0},resume:function(){e=!1}};g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-segment-types', location = '/static/bitbucket/internal/feature/file-content/diff-view-segment-types.js' */
define("bitbucket/internal/feature/file-content/diff-view-segment-types",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={ADDED:"ADDED",REMOVED:"REMOVED",CONTEXT:"CONTEXT"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-file-types', location = '/static/bitbucket/internal/feature/file-content/diff-view-file-types.js' */
define("bitbucket/internal/feature/file-content/diff-view-file-types",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={FROM:"FROM",TO:"TO"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:expanding-textarea', location = '/static/bower/ExpandingTextareas/expanding.js' */
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function d(){a(this).closest(".expandingText").find("div").text(this.value.replace(/\r\n/g,"\n")+" ");a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});var g="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust wordWrap word-break borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom boxSizing webkitBoxSizing mozBoxSizing msBoxSizing".split(" "),
h={position:"absolute",height:"100%",resize:"none"},k={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},l={position:"relative"};a.fn.expandingTextarea=function(c){var f=a.extend({},a.expandingTextarea.opts,c);if("resize"===c)return this.trigger("input.expanding");if("destroy"===c)return this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.closest(".expandingText").before(b).remove();b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),
this;this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var b=a(this);b.wrap("\x3cdiv class\x3d'expandingText'\x3e\x3c/div\x3e");b.after("\x3cpre class\x3d'textareaClone'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/pre\x3e");var c=b.parent().css(l).find("pre").css(k);b.data("expanding-styles",b.attr("style"));b.css(h);a.each(g,function(a,e){var d=b.css(e);c.css(e)!==d&&c.css(e,d)});b.bind("input.expanding propertychange.expanding keyup.expanding",d);d.apply(this);f.resize&&
b.bind("resize.expanding",f.resize)});return this};a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-progressive-data-set', location = 'node_modules/@atlassian/aui/src/js/aui/progressive-data-set.js' */
("undefined"===typeof window?global:window).__c35ee65482ba222c97e480e4544e6569=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=f(__922acd0053a6de3ea4c53d8902766ab6),g=f(__e3ce9f42f29f6bd2118d84461512f4a4),i=f(__4d02fe17b8e885a34493e34af3d145dd),h=g.default.Collection.extend({initialize:function(a,b){b||(b={});b.matcher&&(this.matcher=b.matcher);b.model&&(this.model=b.model);this._idAttribute=(new this.model).idAttribute;
this._maxResults=b.maxResults||5;this._queryData=b.queryData||{};this._queryParamKey=b.queryParamKey||"q";this._queryEndpoint=b.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;c.default.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(a){var b,d;this.value=a;d=this.getFilteredResults(a);this.respond(a,d);a&&(this._queryEndpoint&&!this.hasQueryCache(a)&&this.shouldGetMoreResults(d))&&(b=this.fetch(a),this.activeQueryCount++,this.trigger("activity",
{activity:!0}),b.always(c.default.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this)),b.done(c.default.bind(function(b,d,c){this.addQueryCache(a,b,c)},this)),b.done(c.default.bind(function(){a=this.value;d=this.getFilteredResults(a);this.respond(a,d)},this)))},getQueryData:function(a){var b=c.default.isFunction(this._queryData)?this._queryData(a):this._queryData,b=c.default.extend({},b);b[this._queryParamKey]=a;return b},fetch:function(a){a=
{add:!0,update:!0,remove:!1,data:this.getQueryData(a)};return g.default.Collection.prototype.fetch.call(this,a)},respond:function(a,b){this.trigger("respond",{query:a,results:b});return b},matcher:function(){},getFilteredResults:function(a){var b=[];if(!a)return b;b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=c.default.first(b,this._maxResults));return b},addQueryCache:function(a,b,d){var e=this.queryCache,b=this.parse(b,d);e[a]=c.default.pluck(b,this._idAttribute)},
hasQueryCache:function(a){return this.queryCache.hasOwnProperty(a)},findQueryCache:function(a){return this.queryCache[a]},shouldGetMoreResults:function(a){return a.length<this._maxResults},setMaxResults:function(a){this._maxResults=a;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,i.default)("ProgressiveDataSet",h);e.default=h;return e=e["default"]}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ajs-progressive-dataset', location = '/static/lib/AJS.progressive-dataset-AMD.js' */
define("aui/progressive-dataset",["aui"],function(a){return a.ProgressiveDataSet});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:autocomplete-dialog', location = '/static/bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog.js' */
define("bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog",["module","exports","backbone","jquery","lodash"],function(g,e,h,k,l){Object.defineProperty(e,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(k),m=babelHelpers.interopRequireDefault(l);e.default=f.default.View.extend({className:"aui-dropdown2 aui-style-default aui-dropdown2-tailed",initialize:function(){var a=parseInt(this.options.minZIndex,10);a&&this.$el.css("z-index",
a+1);(0,d.default)(document.body).append(this.el);this.options.anchor&&this.updateAnchorPosition(this.options.anchor);this.template=this.options.template||d.default.noop;this.highlighter=this.options.highlighter;this.collection=this.collection||new f.default.Collection;this.collection.bind("reset",this.render,this);this.render()},events:{"click li.result":"onClickItem"},render:function(){var a=this.collection.toJSON(),c=this.collection.query,b=this.collection.indexOf(this.selectedResult),b=(0,d.default)(this.template({query:c,
results:a,activeItemIndex:0<=b?b:0}));c&&a.length&&m.default.isFunction(this.highlighter)&&(b=this.highlighter(b,c));this.$el.html(b);this.$spinner&&this.$spinner.appendTo(this.$("ul"));return this},toggleSpinner:function(a){a?this.$spinner||(this.$spinner=(0,d.default)("\x3cli/\x3e").addClass("spinContainer").appendTo(this.$("ul")).spin("small")):(this.$spinner&&this.$spinner.spinStop().remove(),this.$spinner=null)},moveSelectionUp:function(){this.moveSelection(this.DIRECTION_UP)},moveSelectionDown:function(){this.moveSelection(this.DIRECTION_DOWN)},
moveSelection:function(a){var c=this.$("li");if(!(1>=c.length)){var b=c.filter(".active"),b=d.default.inArray(b.get(0),c);if(a===this.DIRECTION_DOWN?b<c.length-1:0<b)b+=a,c.removeClass("active").eq(b).addClass("active"),this.selectedResult=this.collection.at(b)}},getSelectedItemIndex:function(){return this.$("li.active").index()},onClickItem:function(a){this.trigger("itemSelected",this.$(a.currentTarget).index())},anchorOptions:{dropdownTailBufferLeft:25,dropdownTailBufferRight:35,viewportWidth:(0,
d.default)(window).width(),bufferTop:2},updateAnchorPosition:function(a){this.anchorOptions.viewportWidth-a.left>this.$el.outerWidth()?this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.anchorOptions.dropdownTailBufferLeft}).attr("data-dropdown2-alignment","left"):this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.$el.outerWidth()+this.anchorOptions.dropdownTailBufferRight}).attr("data-dropdown2-alignment","right")},DIRECTION_UP:-1,DIRECTION_DOWN:1});g.exports=
e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:textarea-caret-position', location = '/static/bower/textarea-caret-position/index.js' */
define("textarea-caret-position",function(){var g="direction boxSizing width height overflowX overflowY borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth paddingTop paddingRight paddingBottom paddingLeft fontStyle fontVariant fontWeight fontStretch fontSize fontSizeAdjust lineHeight fontFamily textAlign textTransform textIndent textDecoration letterSpacing wordSpacing".split(" "),h=null!=window.mozInnerScreenX,d=function(a,d,b){b=document.createElement("div");b.id="input-textarea-caret-position-mirror-div";
document.body.appendChild(b);var c=b.style,e=window.getComputedStyle?getComputedStyle(a):a.currentStyle;c.whiteSpace="pre-wrap";"INPUT"!==a.nodeName&&(c.wordWrap="break-word");c.position="absolute";c.visibility="hidden";g.forEach(function(a){c[a]=e[a]});h?(c.width=parseInt(e.width)-2+"px",a.scrollHeight>parseInt(e.height)&&(c.overflowY="scroll")):c.overflow="hidden";b.textContent=a.value.substring(0,d);"INPUT"===a.nodeName&&(b.textContent=b.textContent.replace(/\s/g,"\u00a0"));var f=document.createElement("span");
f.textContent=a.value.substring(d)||".";b.appendChild(f);a={top:f.offsetTop+parseInt(e.borderTopWidth),left:f.offsetLeft+parseInt(e.borderLeftWidth)};document.body.removeChild(b);return a};if("undefined"!==typeof Package)getCaretCoordinates=d;else if("undefined"!==typeof module&&module.exports)module.exports=d;else return d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/bower/xregexp/src/xregexp.js' */
var XRegExp=function(n){function C(a,b,d,c,e){var g;a.xregexp={captureNames:b};if(e)return a;if(a.__proto__)a.__proto__=f.prototype;else for(g in f.prototype)a[g]=f.prototype[g];a.xregexp.source=d;a.xregexp.flags=c?c.split("").sort().join(""):c;return a}function y(a){return k.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function u(a,b){if(!f.isRegExp(a))throw new TypeError("Type RegExp expected");var d=a.xregexp||{},c=K?a.flags:k.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(a))[1],e="",
g="",h=null,l=null;b=b||{};b.removeG&&(g+="g");b.removeY&&(g+="y");g&&(c=k.replace.call(c,new RegExp("["+g+"]+","g"),""));b.addG&&(e+="g");b.addY&&(e+="y");e&&(c=y(c+e));b.isInternalOnly||(void 0!==d.source&&(h=d.source),null!=d.flags&&(l=e?y(d.flags+e):d.flags));return a=C(new RegExp(a.source,c),a.xregexp&&a.xregexp.captureNames?d.captureNames.slice(0):null,h,l,b.isInternalOnly)}function v(a,b){var d=a.length,c;for(c=0;c<d;++c)if(a[c]===b)return c;return-1}function w(a,b){return D.call(a)==="[object "+
b+"]"}function E(a,b,d){return k.test.call(-1<d.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function L(a,b){var d;if(y(b)!==b)throw new SyntaxError("Invalid duplicate regex flag "+b);a=k.replace.call(a,/^\(\?([\w$]+)\)/,function(a,d){if(k.test.call(/[gy]/,d))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);b=y(b+d);return""});for(d=0;d<b.length;++d)if(!F[b.charAt(d)])throw new SyntaxError("Unknown regex flag "+
b.charAt(d));return{pattern:a,flags:b}}function G(a){var b={};return w(a,"String")?(f.forEach(a,/[^\s,]+/,function(a){b[a]=!0}),b):a}function H(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");F[a]=!0}function I(a){RegExp.prototype.exec=(a?m:k).exec;RegExp.prototype.test=(a?m:k).test;String.prototype.match=(a?m:k).match;String.prototype.replace=(a?m:k).replace;String.prototype.split=(a?m:k).split;q.natives=a}function x(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");
return a}var f,q={astral:!1,natives:!1},k={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},m={},t={},z={},A=[],M={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},N=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,
O=void 0===k.exec.call(/()??/,"")[1],J=function(){var a=!0;try{RegExp("","u")}catch(b){a=!1}return a}(),B=function(){var a=!0;try{RegExp("","y")}catch(b){a=!1}return a}(),K=void 0!==/a/.flags,F={g:!0,i:!0,m:!0,u:J,y:B},D={}.toString;f=function(a,b){var d={hasNamedCapture:!1,captureNames:[]},c="default",e="",g=0,h,l,m;if(f.isRegExp(a)){if(void 0!==b)throw new TypeError("Cannot supply flags when copying a RegExp");return u(a)}a=void 0===a?"":String(a);b=void 0===b?"":String(b);f.isInstalled("astral")&&
-1===b.indexOf("A")&&(b+="A");z[a]||(z[a]={});if(!z[a][b]){h=L(a,b);l=h.pattern;for(m=h.flags;g<l.length;){do{h=l;for(var p=m,n=g,q=c,x=d,t=A.length,y=h.charAt(n),v=null,w=void 0,r=void 0;t--;)if(r=A[t],!(r.leadChar&&r.leadChar!==y||r.scope!==q&&"all"!==r.scope||r.flag&&-1===p.indexOf(r.flag))&&(w=f.exec(h,r.regex,n,"sticky"))){v={matchLength:w[0].length,output:r.handler.call(x,w,q,p),reparse:r.reparse};break}(h=v)&&h.reparse&&(l=l.slice(0,g)+h.output+l.slice(g+h.matchLength))}while(h&&h.reparse);
h?(e+=h.output,g+=h.matchLength||1):(h=f.exec(l,M[c],g,"sticky")[0],e+=h,g+=h.length,"["===h&&"default"===c?c="class":"]"===h&&"class"===c&&(c="default"))}z[a][b]={pattern:k.replace.call(e,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:k.replace.call(m,/[^gimuy]+/g,""),captures:d.hasNamedCapture?d.captureNames:null}}d=z[a][b];return C(new RegExp(d.pattern,d.flags),d.captures,a,b)};f.prototype=RegExp();f.version="3.0.0";f.addToken=function(a,b,d){d=d||{};var c=d.optionalFlags,e;d.flag&&H(d.flag);
if(c)for(c=k.split.call(c,""),e=0;e<c.length;++e)H(c[e]);A.push({regex:u(a,{addG:!0,addY:B,isInternalOnly:!0}),handler:b,scope:d.scope||"default",flag:d.flag,reparse:d.reparse,leadChar:d.leadChar});f.cache.flush("patterns")};f.cache=function(a,b){t[a]||(t[a]={});return t[a][b]||(t[a][b]=f(a,b))};f.cache.flush=function(a){"patterns"===a?z={}:t={}};f.escape=function(a){return k.replace.call(x(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")};f.exec=function(a,b,d,c){var e="g",f=!1;(f=B&&!!(c||b.sticky&&!1!==
c))&&(e+="y");b.xregexp=b.xregexp||{};e=b.xregexp[e]||(b.xregexp[e]=u(b,{addG:!0,addY:f,removeY:!1===c,isInternalOnly:!0}));e.lastIndex=d=d||0;a=m.exec.call(e,a);c&&a&&a.index!==d&&(a=null);b.global&&(b.lastIndex=a?e.lastIndex:0);return a};f.forEach=function(a,b,d){for(var c=0,e=-1;c=f.exec(a,b,c);)d(c,++e,a,b),c=c.index+(c[0].length||1)};f.globalize=function(a){return u(a,{addG:!0})};f.install=function(a){a=G(a);!q.astral&&a.astral&&(q.astral=!0);!q.natives&&a.natives&&I(!0)};f.isInstalled=function(a){return!!q[a]};
f.isRegExp=function(a){return"[object RegExp]"===D.call(a)};f.match=function(a,b,d){var c=b.global&&"one"!==d||"all"===d,e=(c?"g":"")+(b.sticky?"y":"")||"noGY";b.xregexp=b.xregexp||{};e=b.xregexp[e]||(b.xregexp[e]=u(b,{addG:!!c,addY:!!b.sticky,removeG:"one"===d,isInternalOnly:!0}));a=k.match.call(x(a),e);b.global&&(b.lastIndex="one"===d&&a?a.index+a[0].length:0);return c?a||[]:a&&a[0]};f.matchChain=function(a,b){return function c(a,g){var h=b[g].regex?b[g]:{regex:b[g]},l=[],k=function(a){if(h.backref){if(!(a.hasOwnProperty(h.backref)||
+h.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+h.backref);l.push(a[h.backref]||"")}else l.push(a[0])},p;for(p=0;p<a.length;++p)f.forEach(a[p],h.regex,k);return g!==b.length-1&&l.length?c(l,g+1):l}([a],0)};f.replace=function(a,b,d,c){var e=f.isRegExp(b),g=b.global&&"one"!==c||"all"===c,h=(g?"g":"")+(b.sticky?"y":"")||"noGY",l=b;e?(b.xregexp=b.xregexp||{},l=b.xregexp[h]||(b.xregexp[h]=u(b,{addG:!!g,addY:!!b.sticky,removeG:"one"===c,isInternalOnly:!0}))):g&&(l=new RegExp(f.escape(String(b)),
"g"));a=m.replace.call(x(a),l,d);e&&b.global&&(b.lastIndex=0);return a};f.replaceEach=function(a,b){var d,c;for(d=0;d<b.length;++d)c=b[d],a=f.replace(a,c[0],c[1],c[2]);return a};f.split=function(a,b,d){return m.split.call(x(a),b,d)};f.test=function(a,b,d,c){return!!f.exec(a,b,d,c)};f.uninstall=function(a){a=G(a);q.astral&&a.astral&&(q.astral=!1);q.natives&&a.natives&&I(!1)};f.union=function(a,b){var d=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,c=[],e=0,g,h,l,m=function(a,b,d){var c=
h[e-g];if(b){if(++e,c)return"(?\x3c"+c+"\x3e"}else if(d)return"\\"+(+d+g);return a},p;if(!w(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(p=0;p<a.length;++p)l=a[p],f.isRegExp(l)?(g=e,h=l.xregexp&&l.xregexp.captureNames||[],c.push(k.replace.call(f(l.source).source,d,m))):c.push(f.escape(l));return f(c.join("|"),b)};m.exec=function(a){var b=this.lastIndex,d=k.exec.apply(this,arguments),c,e;if(d){!O&&1<d.length&&-1<v(d,"")&&(c=u(this,{removeG:!0,
isInternalOnly:!0}),k.replace.call(String(a).slice(d.index),c,function(){var a=arguments.length,b;for(b=1;b<a-2;++b)void 0===arguments[b]&&(d[b]=void 0)}));if(this.xregexp&&this.xregexp.captureNames)for(e=1;e<d.length;++e)(c=this.xregexp.captureNames[e-1])&&(d[c]=d[e]);this.global&&!d[0].length&&this.lastIndex>d.index&&(this.lastIndex=d.index)}this.global||(this.lastIndex=b);return d};m.test=function(a){return!!m.exec.call(this,a)};m.match=function(a){var b;if(!f.isRegExp(a))a=new RegExp(a);else if(a.global)return b=
k.match.apply(this,arguments),a.lastIndex=0,b;return m.exec.call(a,x(this))};m.replace=function(a,b){var d=f.isRegExp(a),c,e,g;d?(a.xregexp&&(e=a.xregexp.captureNames),c=a.lastIndex):a+="";g=w(b,"Function")?k.replace.call(String(this),a,function(){var c=arguments,f;if(e)for(c[0]=new String(c[0]),f=0;f<e.length;++f)e[f]&&(c[0][e[f]]=c[f+1]);d&&a.global&&(a.lastIndex=c[c.length-2]+c[0].length);return b.apply(void 0,c)}):k.replace.call(null==this?this:String(this),a,function(){var a=arguments;return k.replace.call(String(b),
N,function(b,d,c){if(d){c=+d;if(c<=a.length-3)return a[c]||"";c=e?v(e,d):-1;if(0>c)throw new SyntaxError("Backreference to undefined group "+b);return a[c+1]||""}if("$"===c)return"$";if("\x26"===c||0===+c)return a[0];if("`"===c)return a[a.length-1].slice(0,a[a.length-2]);if("'"===c)return a[a.length-1].slice(a[a.length-2]+a[0].length);c=+c;if(!isNaN(c)){if(c>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[c]||""}throw new SyntaxError("Invalid token "+b);})});d&&(a.lastIndex=
a.global?0:c);return g};m.split=function(a,b){if(!f.isRegExp(a))return k.split.apply(this,arguments);var d=String(this),c=[],e=a.lastIndex,g=0,h;b=(void 0===b?-1:b)>>>0;f.forEach(d,a,function(a){a.index+a[0].length>g&&(c.push(d.slice(g,a.index)),1<a.length&&a.index<d.length&&Array.prototype.push.apply(c,a.slice(1)),h=a[0].length,g=a.index+h)});g===d.length?k.test.call(a,"")&&!h||c.push(""):c.push(d.slice(g));a.lastIndex=e;return c.length>b?c.slice(0,b):c};n=f.addToken;n(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,
function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all",leadChar:"\\"});n(/\\u{([\dA-Fa-f]+)}/,function(a,b,d){b=parseInt(a[1],16);if(1114111<b)throw new SyntaxError("Invalid Unicode code point "+a[0]);if(65535>=b){for(a=parseInt(b,10).toString(16);4>a.length;)a="0"+a;return"\\u"+a}if(J&&-1<d.indexOf("u"))return a[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u");},{scope:"all",leadChar:"\\"});n(/\[(\^?)]/,
function(a){return a[1]?"[\\s\\S]":"\\b\\B"},{leadChar:"["});n(/\(\?#[^)]*\)/,function(a,b,d){return E(a.input,a.index+a[0].length,d)?"":"(?:)"},{leadChar:"("});n(/\s+|#.*/,function(a,b,d){return E(a.input,a.index+a[0].length,d)?"":"(?:)"},{flag:"x"});n(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."});n(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?v(this.captureNames,a[1])+1:+a[1],d=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+
a[0]);return"\\"+b+(d===a.input.length||isNaN(a.input.charAt(d))?"":"(?:)")},{leadChar:"\\"});n(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all",leadChar:"\\"});n(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+
a[0]);if(-1<v(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("},{leadChar:"("});n(/\((?!\?)/,function(a,b,d){if(-1<d.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n",leadChar:"("});return f}();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/lib/xregexp/xregexp-AMD.js' */
define("xregexp",[],function(){return XRegExp});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/bower/xregexp/src/addons/unicode-base.js' */
(function(h){function k(b){return b.replace(/[- _]+/g,"").toLowerCase()}function l(b){for(;4>b.length;)b="0"+b;return b}function m(b){var c=/^\\[xu](.+)/.exec(b);return c?parseInt(c[1],16):b.charCodeAt("\\"===b.charAt(0)?1:0)}function n(b){var c="",a=-1,d;h.forEach(b,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(b){d=m(b[1]);d>a+1&&(c+="\\u"+l(parseInt(a+1,10).toString(16)),d>a+2&&(c+="-\\u"+l(parseInt(d-1,10).toString(16))));a=m(b[2]||b[1])});65535>a&&(c+="\\u"+l(parseInt(a+
1,10).toString(16)),65534>a&&(c+="-\\uFFFF"));return c}var d={};h.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(b,c,a){var g="P"===b[1]||!!b[2],e=-1<a.indexOf("A");a=k(b[4]||b[3]);var f=d[a];if("P"===b[1]&&b[2])throw new SyntaxError("Invalid double negation "+b[0]);if(!d.hasOwnProperty(a))throw new SyntaxError("Unknown Unicode token "+b[0]);if(f.inverseOf){a=k(f.inverseOf);if(!d.hasOwnProperty(a))throw new ReferenceError("Unicode token missing data "+b[0]+" -\x3e "+f.inverseOf);f=d[a];
g=!g}if(!f.bmp&&!e)throw new SyntaxError("Astral mode required for Unicode token "+b[0]);if(e){if("class"===c)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");b=g?"a!":"a\x3d";(c=d[a][b])||(c=d[a],a=d[a],e="",a.bmp&&!a.isBmpLast&&(e="["+a.bmp+"]"+(a.astral?"|":"")),a.astral&&(e+=a.astral),a.isBmpLast&&a.bmp&&(e+=(a.astral?"|":"")+"["+a.bmp+"]"),c=c[b]=g?"(?:(?!"+e+")(?:[\ud800-\udbff][\udc00-\udfff]|[\x00-\uffff]))":"(?:"+e+")");return c}return"class"===
c?g?d[a]["b!"]||(d[a]["b!"]=n(d[a].bmp)):f.bmp:(g?"[^":"[")+f.bmp+"]"},{scope:"all",optionalFlags:"A",leadChar:"\\"});h.addUnicodeData=function(b){var c,a;for(a=0;a<b.length;++a){c=b[a];if(!c.name)throw Error("Unicode token requires name");if(!(c.inverseOf||c.bmp||c.astral))throw Error("Unicode token has no character data "+c.name);d[k(c.name)]=c;c.alias&&(d[k(c.alias)]=c)}h.cache.flush("patterns")}})(XRegExp);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:xregexp', location = '/static/bower/xregexp/src/addons/unicode-categories.js' */
(function(a){if(!a.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");a.addUnicodeData([{name:"C",alias:"Other",isBmpLast:!0,bmp:"\x00-\u001f\u007f-\u009f\u00ad\u0378\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557\u0558\u0560\u0588\u058b\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u0605\u061c\u061d\u06dd\u070e\u070f\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce\u10cf\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f6\u13f7\u13fe\u13ff\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180e\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u200b-\u200f\u202a-\u202e\u2060-\u206f\u2072\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74\u2b75\u2b96\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\uf8ff\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd-\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufffb\ufffe\uffff",
astral:"\ud834[\udcf6-\udcff\udd27\udd28\udd73-\udd7a\udde9-\uddff\ude46-\udeff\udf57-\udf5f\udf72-\udfff]|\ud836[\ude8c-\ude9a\udea0\udeb0-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcc0\udcd0\udcf6-\udcff\udd0d-\udd0f\udd2f\udd6c-\udd6f\udd9b-\udde5\ude03-\ude0f\ude3b-\ude3f\ude49-\ude4f\ude52-\udeff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\ude6d\ude70-\udecf\udeee\udeef\udef6-\udeff\udf46-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud809[\udc6f\udc75-\udc7f\udd44-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf7f-\udf8e\udfa0-\udfff]|\ud86e[\udc1e\udc1f]|\ud83d[\udd7a\udda4\uded1-\udedf\udeed-\udeef\udef4-\udeff\udf74-\udf7f\udfd5-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcff\udd28-\udd2f\udd64-\udd6e\udd70-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8d-\udd8f\udd9c-\udd9f\udda1-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udedf\udefc-\udeff\udf24-\udf2f\udf4b-\udf4f\udf7b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud869[\uded7-\udeff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|\ud87e[\ude1e-\udfff]|\udb40[\udc00-\udcff\uddf0-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7e\udcbd\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd44-\udd4f\udd77-\udd7f\uddce\uddcf\udde0\uddf5-\uddff\ude12\ude3e-\ude7f\ude87\ude89\ude8e\ude9e\udeaa-\udeaf\udeeb-\udeef\udefa-\udeff\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a\udf3b\udf45\udf46\udf49\udf4a\udf4e\udf4f\udf51-\udf56\udf58-\udf5c\udf64\udf65\udf6d-\udf6f\udf75-\udfff]|\ud83a[\udcc5\udcc6\udcd7-\udfff]|\ud80d[\udc2f-\udfff]|\ud86d[\udf35-\udf3f]|[\ud807\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud81c-\ud82b\ud82d\ud82e\ud830-\ud833\ud837-\ud839\ud83f\ud874-\ud87d\ud87f-\udb3f\udb41-\udbff][\udc00-\udfff]|\ud806[\udc00-\udc9f\udcf3-\udcfe\udd00-\udebf\udef9-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud805[\udc00-\udc7f\udcc8-\udccf\udcda-\udd7f\uddb6\uddb7\uddde-\uddff\ude45-\ude4f\ude5a-\ude7f\udeb8-\udebf\udeca-\udeff\udf1a-\udf1c\udf2c-\udf2f\udf40-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude04\ude07-\ude0b\ude14\ude18\ude34-\ude37\ude3b-\ude3e\ude48-\ude4f\ude59-\ude5f\udea0-\udebf\udee7-\udeea\udef7-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf92-\udf98\udf9d-\udfa8\udfb0-\udfff]|\ud808[\udf9a-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a\udc9b\udca0-\udfff]|\ud82c[\udc02-\udfff]|\ud811[\ude47-\udfff]|\ud83e[\udc0c-\udc0f\udc48-\udc4f\udc5a-\udc5f\udc88-\udc8f\udcae-\udd0f\udd19-\udd7f\udd85-\uddbf\uddc1-\udfff]|\ud873[\udea2-\udfff]"},
{name:"Cc",alias:"Control",bmp:"\x00-\u001f\u007f-\u009f"},{name:"Cf",alias:"Format",bmp:"\u00ad\u0600-\u0605\u061c\u06dd\u070f\u180e\u200b-\u200f\u202a-\u202e\u2060-\u2064\u2066-\u206f\ufeff\ufff9-\ufffb",astral:"\udb40[\udc01\udc20-\udc7f]|\ud82f[\udca0-\udca3]|\ud834[\udd73-\udd7a]|\ud804\udcbd"},{name:"Cn",alias:"Unassigned",bmp:"\u0378\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557\u0558\u0560\u0588\u058b\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u05ff\u061d\u070e\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce\u10cf\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f6\u13f7\u13fe\u13ff\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u2065\u2072\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74\u2b75\u2b96\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\ud7ff\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd\ufefe\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufff8\ufffe\uffff",
astral:"\udb40[\udc00\udc02-\udc1f\udc80-\udcff\uddf0-\udfff]|\ud834[\udcf6-\udcff\udd27\udd28\udde9-\uddff\ude46-\udeff\udf57-\udf5f\udf72-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcc0\udcd0\udcf6-\udcff\udd0d-\udd0f\udd2f\udd6c-\udd6f\udd9b-\udde5\ude03-\ude0f\ude3b-\ude3f\ude49-\ude4f\ude52-\udeff]|\ud81a[\ude39-\ude3f\ude5f\ude6a-\ude6d\ude70-\udecf\udeee\udeef\udef6-\udeff\udf46-\udf4f\udf5a\udf62\udf78-\udf7c\udf90-\udfff]|\ud809[\udc6f\udc75-\udc7f\udd44-\udfff]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf7f-\udf8e\udfa0-\udfff]|\ud86e[\udc1e\udc1f]|\ud83d[\udd7a\udda4\uded1-\udedf\udeed-\udeef\udef4-\udeff\udf74-\udf7f\udfd5-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udcff\udd28-\udd2f\udd64-\udd6e\udd70-\uddff\udf37-\udf3f\udf56-\udf5f\udf68-\udfff]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8d-\udd8f\udd9c-\udd9f\udda1-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udedf\udefc-\udeff\udf24-\udf2f\udf4b-\udf4f\udf7b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud869[\uded7-\udeff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|[\udbbf\udbff][\udffe\udfff]|\ud87e[\ude1e-\udfff]|\ud82f[\udc6b-\udc6f\udc7d-\udc7f\udc89-\udc8f\udc9a\udc9b\udca4-\udfff]|\ud83a[\udcc5\udcc6\udcd7-\udfff]|\ud80d[\udc2f-\udfff]|\ud86d[\udf35-\udf3f]|[\ud807\ud80a\ud80b\ud80e-\ud810\ud812-\ud819\ud81c-\ud82b\ud82d\ud82e\ud830-\ud833\ud837-\ud839\ud83f\ud874-\ud87d\ud87f-\udb3f\udb41-\udb7f][\udc00-\udfff]|\ud806[\udc00-\udc9f\udcf3-\udcfe\udd00-\udebf\udef9-\udfff]|\ud803[\udc49-\udc7f\udcb3-\udcbf\udcf3-\udcf9\udd00-\ude5f\ude7f-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud836[\ude8c-\ude9a\udea0\udeb0-\udfff]|\ud805[\udc00-\udc7f\udcc8-\udccf\udcda-\udd7f\uddb6\uddb7\uddde-\uddff\ude45-\ude4f\ude5a-\ude7f\udeb8-\udebf\udeca-\udeff\udf1a-\udf1c\udf2c-\udf2f\udf40-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc9f-\udca6\udcb0-\udcdf\udcf3\udcf6-\udcfa\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbb\uddd0\uddd1\ude04\ude07-\ude0b\ude14\ude18\ude34-\ude37\ude3b-\ude3e\ude48-\ude4f\ude59-\ude5f\udea0-\udebf\udee7-\udeea\udef7-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf92-\udf98\udf9d-\udfa8\udfb0-\udfff]|\ud808[\udf9a-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7e\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd44-\udd4f\udd77-\udd7f\uddce\uddcf\udde0\uddf5-\uddff\ude12\ude3e-\ude7f\ude87\ude89\ude8e\ude9e\udeaa-\udeaf\udeeb-\udeef\udefa-\udeff\udf04\udf0d\udf0e\udf11\udf12\udf29\udf31\udf34\udf3a\udf3b\udf45\udf46\udf49\udf4a\udf4e\udf4f\udf51-\udf56\udf58-\udf5c\udf64\udf65\udf6d-\udf6f\udf75-\udfff]|\ud82c[\udc02-\udfff]|\ud811[\ude47-\udfff]|\ud83e[\udc0c-\udc0f\udc48-\udc4f\udc5a-\udc5f\udc88-\udc8f\udcae-\udd0f\udd19-\udd7f\udd85-\uddbf\uddc1-\udfff]|\ud873[\udea2-\udfff]"},
{name:"Co",alias:"Private_Use",bmp:"\ue000-\uf8ff",astral:"[\udb80-\udbbe\udbc0-\udbfe][\udc00-\udfff]|[\udbbf\udbff][\udc00-\udffd]"},{name:"Cs",alias:"Surrogate",bmp:"\ud800-\udfff"},{name:"L",alias:"Letter",bmp:"A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
astral:"\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2]|\ud83a[\udc00-\udcc4]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud80d[\udc00-\udc2e]|\ud87e[\udc00-\ude1d]|\ud81b[\udf00-\udf44\udf50\udf93-\udf9f]|[\ud80c\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872][\udc00-\udfff]|\ud805[\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udf00-\udf19]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud809[\udc80-\udd43]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud808[\udc00-\udf99]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud811[\udc00-\ude46]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud82c[\udc00\udc01]|\ud873[\udc00-\udea1]"},
{name:"Ll",alias:"Lowercase_Letter",bmp:"a-z\u00b5\u00df-\u00f6\u00f8-\u00ff\u0101\u0103\u0105\u0107\u0109\u010b\u010d\u010f\u0111\u0113\u0115\u0117\u0119\u011b\u011d\u011f\u0121\u0123\u0125\u0127\u0129\u012b\u012d\u012f\u0131\u0133\u0135\u0137\u0138\u013a\u013c\u013e\u0140\u0142\u0144\u0146\u0148\u0149\u014b\u014d\u014f\u0151\u0153\u0155\u0157\u0159\u015b\u015d\u015f\u0161\u0163\u0165\u0167\u0169\u016b\u016d\u016f\u0171\u0173\u0175\u0177\u017a\u017c\u017e-\u0180\u0183\u0185\u0188\u018c\u018d\u0192\u0195\u0199-\u019b\u019e\u01a1\u01a3\u01a5\u01a8\u01aa\u01ab\u01ad\u01b0\u01b4\u01b6\u01b9\u01ba\u01bd-\u01bf\u01c6\u01c9\u01cc\u01ce\u01d0\u01d2\u01d4\u01d6\u01d8\u01da\u01dc\u01dd\u01df\u01e1\u01e3\u01e5\u01e7\u01e9\u01eb\u01ed\u01ef\u01f0\u01f3\u01f5\u01f9\u01fb\u01fd\u01ff\u0201\u0203\u0205\u0207\u0209\u020b\u020d\u020f\u0211\u0213\u0215\u0217\u0219\u021b\u021d\u021f\u0221\u0223\u0225\u0227\u0229\u022b\u022d\u022f\u0231\u0233-\u0239\u023c\u023f\u0240\u0242\u0247\u0249\u024b\u024d\u024f-\u0293\u0295-\u02af\u0371\u0373\u0377\u037b-\u037d\u0390\u03ac-\u03ce\u03d0\u03d1\u03d5-\u03d7\u03d9\u03db\u03dd\u03df\u03e1\u03e3\u03e5\u03e7\u03e9\u03eb\u03ed\u03ef-\u03f3\u03f5\u03f8\u03fb\u03fc\u0430-\u045f\u0461\u0463\u0465\u0467\u0469\u046b\u046d\u046f\u0471\u0473\u0475\u0477\u0479\u047b\u047d\u047f\u0481\u048b\u048d\u048f\u0491\u0493\u0495\u0497\u0499\u049b\u049d\u049f\u04a1\u04a3\u04a5\u04a7\u04a9\u04ab\u04ad\u04af\u04b1\u04b3\u04b5\u04b7\u04b9\u04bb\u04bd\u04bf\u04c2\u04c4\u04c6\u04c8\u04ca\u04cc\u04ce\u04cf\u04d1\u04d3\u04d5\u04d7\u04d9\u04db\u04dd\u04df\u04e1\u04e3\u04e5\u04e7\u04e9\u04eb\u04ed\u04ef\u04f1\u04f3\u04f5\u04f7\u04f9\u04fb\u04fd\u04ff\u0501\u0503\u0505\u0507\u0509\u050b\u050d\u050f\u0511\u0513\u0515\u0517\u0519\u051b\u051d\u051f\u0521\u0523\u0525\u0527\u0529\u052b\u052d\u052f\u0561-\u0587\u13f8-\u13fd\u1d00-\u1d2b\u1d6b-\u1d77\u1d79-\u1d9a\u1e01\u1e03\u1e05\u1e07\u1e09\u1e0b\u1e0d\u1e0f\u1e11\u1e13\u1e15\u1e17\u1e19\u1e1b\u1e1d\u1e1f\u1e21\u1e23\u1e25\u1e27\u1e29\u1e2b\u1e2d\u1e2f\u1e31\u1e33\u1e35\u1e37\u1e39\u1e3b\u1e3d\u1e3f\u1e41\u1e43\u1e45\u1e47\u1e49\u1e4b\u1e4d\u1e4f\u1e51\u1e53\u1e55\u1e57\u1e59\u1e5b\u1e5d\u1e5f\u1e61\u1e63\u1e65\u1e67\u1e69\u1e6b\u1e6d\u1e6f\u1e71\u1e73\u1e75\u1e77\u1e79\u1e7b\u1e7d\u1e7f\u1e81\u1e83\u1e85\u1e87\u1e89\u1e8b\u1e8d\u1e8f\u1e91\u1e93\u1e95-\u1e9d\u1e9f\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9\u1efb\u1efd\u1eff-\u1f07\u1f10-\u1f15\u1f20-\u1f27\u1f30-\u1f37\u1f40-\u1f45\u1f50-\u1f57\u1f60-\u1f67\u1f70-\u1f7d\u1f80-\u1f87\u1f90-\u1f97\u1fa0-\u1fa7\u1fb0-\u1fb4\u1fb6\u1fb7\u1fbe\u1fc2-\u1fc4\u1fc6\u1fc7\u1fd0-\u1fd3\u1fd6\u1fd7\u1fe0-\u1fe7\u1ff2-\u1ff4\u1ff6\u1ff7\u210a\u210e\u210f\u2113\u212f\u2134\u2139\u213c\u213d\u2146-\u2149\u214e\u2184\u2c30-\u2c5e\u2c61\u2c65\u2c66\u2c68\u2c6a\u2c6c\u2c71\u2c73\u2c74\u2c76-\u2c7b\u2c81\u2c83\u2c85\u2c87\u2c89\u2c8b\u2c8d\u2c8f\u2c91\u2c93\u2c95\u2c97\u2c99\u2c9b\u2c9d\u2c9f\u2ca1\u2ca3\u2ca5\u2ca7\u2ca9\u2cab\u2cad\u2caf\u2cb1\u2cb3\u2cb5\u2cb7\u2cb9\u2cbb\u2cbd\u2cbf\u2cc1\u2cc3\u2cc5\u2cc7\u2cc9\u2ccb\u2ccd\u2ccf\u2cd1\u2cd3\u2cd5\u2cd7\u2cd9\u2cdb\u2cdd\u2cdf\u2ce1\u2ce3\u2ce4\u2cec\u2cee\u2cf3\u2d00-\u2d25\u2d27\u2d2d\ua641\ua643\ua645\ua647\ua649\ua64b\ua64d\ua64f\ua651\ua653\ua655\ua657\ua659\ua65b\ua65d\ua65f\ua661\ua663\ua665\ua667\ua669\ua66b\ua66d\ua681\ua683\ua685\ua687\ua689\ua68b\ua68d\ua68f\ua691\ua693\ua695\ua697\ua699\ua69b\ua723\ua725\ua727\ua729\ua72b\ua72d\ua72f-\ua731\ua733\ua735\ua737\ua739\ua73b\ua73d\ua73f\ua741\ua743\ua745\ua747\ua749\ua74b\ua74d\ua74f\ua751\ua753\ua755\ua757\ua759\ua75b\ua75d\ua75f\ua761\ua763\ua765\ua767\ua769\ua76b\ua76d\ua76f\ua771-\ua778\ua77a\ua77c\ua77f\ua781\ua783\ua785\ua787\ua78c\ua78e\ua791\ua793-\ua795\ua797\ua799\ua79b\ua79d\ua79f\ua7a1\ua7a3\ua7a5\ua7a7\ua7a9\ua7b5\ua7b7\ua7fa\uab30-\uab5a\uab60-\uab65\uab70-\uabbf\ufb00-\ufb06\ufb13-\ufb17\uff41-\uff5a",
astral:"\ud803[\udcc0-\udcf2]|\ud835[\udc1a-\udc33\udc4e-\udc54\udc56-\udc67\udc82-\udc9b\udcb6-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udccf\udcea-\udd03\udd1e-\udd37\udd52-\udd6b\udd86-\udd9f\uddba-\uddd3\uddee-\ude07\ude22-\ude3b\ude56-\ude6f\ude8a-\udea5\udec2-\udeda\udedc-\udee1\udefc-\udf14\udf16-\udf1b\udf36-\udf4e\udf50-\udf55\udf70-\udf88\udf8a-\udf8f\udfaa-\udfc2\udfc4-\udfc9\udfcb]|\ud801[\udc28-\udc4f]|\ud806[\udcc0-\udcdf]"},{name:"Lm",alias:"Modifier_Letter",bmp:"\u02b0-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0374\u037a\u0559\u0640\u06e5\u06e6\u07f4\u07f5\u07fa\u081a\u0824\u0828\u0971\u0e46\u0ec6\u10fc\u17d7\u1843\u1aa7\u1c78-\u1c7d\u1d2c-\u1d6a\u1d78\u1d9b-\u1dbf\u2071\u207f\u2090-\u209c\u2c7c\u2c7d\u2d6f\u2e2f\u3005\u3031-\u3035\u303b\u309d\u309e\u30fc-\u30fe\ua015\ua4f8-\ua4fd\ua60c\ua67f\ua69c\ua69d\ua717-\ua71f\ua770\ua788\ua7f8\ua7f9\ua9cf\ua9e6\uaa70\uaadd\uaaf3\uaaf4\uab5c-\uab5f\uff70\uff9e\uff9f",
astral:"\ud81a[\udf40-\udf43]|\ud81b[\udf93-\udf9f]"},{name:"Lo",alias:"Other_Letter",bmp:"\u00aa\u00ba\u01bb\u01c0-\u01c3\u0294\u05d0-\u05ea\u05f0-\u05f2\u0620-\u063f\u0641-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u0800-\u0815\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e45\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10d0-\u10fa\u10fd-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17dc\u1820-\u1842\u1844-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c77\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u2135-\u2138\u2d30-\u2d67\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3006\u303c\u3041-\u3096\u309f\u30a1-\u30fa\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua014\ua016-\ua48c\ua4d0-\ua4f7\ua500-\ua60b\ua610-\ua61f\ua62a\ua62b\ua66e\ua6a0-\ua6e5\ua78f\ua7f7\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9e0-\ua9e4\ua9e7-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa6f\uaa71-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb\uaadc\uaae0-\uaaea\uaaf2\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff66-\uff6f\uff71-\uff9d\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
astral:"\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud83a[\udc00-\udcc4]|\ud803[\udc00-\udc48]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud80d[\udc00-\udc2e]|\ud87e[\udc00-\ude1d]|\ud81b[\udf00-\udf44\udf50]|[\ud80c\ud840-\ud868\ud86a-\ud86c\ud86f-\ud872][\udc00-\udfff]|\ud805[\udc80-\udcaf\udcc4\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udf00-\udf19]|\ud806[\udcff\udec0-\udef8]|\ud809[\udc80-\udd43]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud808[\udc00-\udf99]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf63-\udf77\udf7d-\udf8f]|\ud801[\udc50-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud811[\udc00-\ude46]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud82c[\udc00\udc01]|\ud873[\udc00-\udea1]"},
{name:"Lt",alias:"Titlecase_Letter",bmp:"\u01c5\u01c8\u01cb\u01f2\u1f88-\u1f8f\u1f98-\u1f9f\u1fa8-\u1faf\u1fbc\u1fcc\u1ffc"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-Z\u00c0-\u00d6\u00d8-\u00de\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0132\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014a\u014c\u014e\u0150\u0152\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d\u0181\u0182\u0184\u0186\u0187\u0189-\u018b\u018e-\u0191\u0193\u0194\u0196-\u0198\u019c\u019d\u019f\u01a0\u01a2\u01a4\u01a6\u01a7\u01a9\u01ac\u01ae\u01af\u01b1-\u01b3\u01b5\u01b7\u01b8\u01bc\u01c4\u01c7\u01ca\u01cd\u01cf\u01d1\u01d3\u01d5\u01d7\u01d9\u01db\u01de\u01e0\u01e2\u01e4\u01e6\u01e8\u01ea\u01ec\u01ee\u01f1\u01f4\u01f6-\u01f8\u01fa\u01fc\u01fe\u0200\u0202\u0204\u0206\u0208\u020a\u020c\u020e\u0210\u0212\u0214\u0216\u0218\u021a\u021c\u021e\u0220\u0222\u0224\u0226\u0228\u022a\u022c\u022e\u0230\u0232\u023a\u023b\u023d\u023e\u0241\u0243-\u0246\u0248\u024a\u024c\u024e\u0370\u0372\u0376\u037f\u0386\u0388-\u038a\u038c\u038e\u038f\u0391-\u03a1\u03a3-\u03ab\u03cf\u03d2-\u03d4\u03d8\u03da\u03dc\u03de\u03e0\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03f9\u03fa\u03fd-\u042f\u0460\u0462\u0464\u0466\u0468\u046a\u046c\u046e\u0470\u0472\u0474\u0476\u0478\u047a\u047c\u047e\u0480\u048a\u048c\u048e\u0490\u0492\u0494\u0496\u0498\u049a\u049c\u049e\u04a0\u04a2\u04a4\u04a6\u04a8\u04aa\u04ac\u04ae\u04b0\u04b2\u04b4\u04b6\u04b8\u04ba\u04bc\u04be\u04c0\u04c1\u04c3\u04c5\u04c7\u04c9\u04cb\u04cd\u04d0\u04d2\u04d4\u04d6\u04d8\u04da\u04dc\u04de\u04e0\u04e2\u04e4\u04e6\u04e8\u04ea\u04ec\u04ee\u04f0\u04f2\u04f4\u04f6\u04f8\u04fa\u04fc\u04fe\u0500\u0502\u0504\u0506\u0508\u050a\u050c\u050e\u0510\u0512\u0514\u0516\u0518\u051a\u051c\u051e\u0520\u0522\u0524\u0526\u0528\u052a\u052c\u052e\u0531-\u0556\u10a0-\u10c5\u10c7\u10cd\u13a0-\u13f5\u1e00\u1e02\u1e04\u1e06\u1e08\u1e0a\u1e0c\u1e0e\u1e10\u1e12\u1e14\u1e16\u1e18\u1e1a\u1e1c\u1e1e\u1e20\u1e22\u1e24\u1e26\u1e28\u1e2a\u1e2c\u1e2e\u1e30\u1e32\u1e34\u1e36\u1e38\u1e3a\u1e3c\u1e3e\u1e40\u1e42\u1e44\u1e46\u1e48\u1e4a\u1e4c\u1e4e\u1e50\u1e52\u1e54\u1e56\u1e58\u1e5a\u1e5c\u1e5e\u1e60\u1e62\u1e64\u1e66\u1e68\u1e6a\u1e6c\u1e6e\u1e70\u1e72\u1e74\u1e76\u1e78\u1e7a\u1e7c\u1e7e\u1e80\u1e82\u1e84\u1e86\u1e88\u1e8a\u1e8c\u1e8e\u1e90\u1e92\u1e94\u1e9e\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u1ef2\u1ef4\u1ef6\u1ef8\u1efa\u1efc\u1efe\u1f08-\u1f0f\u1f18-\u1f1d\u1f28-\u1f2f\u1f38-\u1f3f\u1f48-\u1f4d\u1f59\u1f5b\u1f5d\u1f5f\u1f68-\u1f6f\u1fb8-\u1fbb\u1fc8-\u1fcb\u1fd8-\u1fdb\u1fe8-\u1fec\u1ff8-\u1ffb\u2102\u2107\u210b-\u210d\u2110-\u2112\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u2130-\u2133\u213e\u213f\u2145\u2183\u2c00-\u2c2e\u2c60\u2c62-\u2c64\u2c67\u2c69\u2c6b\u2c6d-\u2c70\u2c72\u2c75\u2c7e-\u2c80\u2c82\u2c84\u2c86\u2c88\u2c8a\u2c8c\u2c8e\u2c90\u2c92\u2c94\u2c96\u2c98\u2c9a\u2c9c\u2c9e\u2ca0\u2ca2\u2ca4\u2ca6\u2ca8\u2caa\u2cac\u2cae\u2cb0\u2cb2\u2cb4\u2cb6\u2cb8\u2cba\u2cbc\u2cbe\u2cc0\u2cc2\u2cc4\u2cc6\u2cc8\u2cca\u2ccc\u2cce\u2cd0\u2cd2\u2cd4\u2cd6\u2cd8\u2cda\u2cdc\u2cde\u2ce0\u2ce2\u2ceb\u2ced\u2cf2\ua640\ua642\ua644\ua646\ua648\ua64a\ua64c\ua64e\ua650\ua652\ua654\ua656\ua658\ua65a\ua65c\ua65e\ua660\ua662\ua664\ua666\ua668\ua66a\ua66c\ua680\ua682\ua684\ua686\ua688\ua68a\ua68c\ua68e\ua690\ua692\ua694\ua696\ua698\ua69a\ua722\ua724\ua726\ua728\ua72a\ua72c\ua72e\ua732\ua734\ua736\ua738\ua73a\ua73c\ua73e\ua740\ua742\ua744\ua746\ua748\ua74a\ua74c\ua74e\ua750\ua752\ua754\ua756\ua758\ua75a\ua75c\ua75e\ua760\ua762\ua764\ua766\ua768\ua76a\ua76c\ua76e\ua779\ua77b\ua77d\ua77e\ua780\ua782\ua784\ua786\ua78b\ua78d\ua790\ua792\ua796\ua798\ua79a\ua79c\ua79e\ua7a0\ua7a2\ua7a4\ua7a6\ua7a8\ua7aa-\ua7ad\ua7b0-\ua7b4\ua7b6\uff21-\uff3a",
astral:"\ud806[\udca0-\udcbf]|\ud803[\udc80-\udcb2]|\ud801[\udc00-\udc27]|\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]"},{name:"M",alias:"Mark",bmp:"\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1ab0-\u1abe\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9e5\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f",
astral:"\ud805[\udcb0-\udcc3\uddaf-\uddb5\uddb8-\uddc0\udddc\udddd\ude30-\ude40\udeab-\udeb7\udf1d-\udf2b]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud804[\udc00-\udc02\udc38-\udc46\udc7f-\udc82\udcb0-\udcba\udd00-\udd02\udd27-\udd34\udd73\udd80-\udd82\uddb3-\uddc0\uddca-\uddcc\ude2c-\ude37\udedf-\udeea\udf00-\udf03\udf3c\udf3e-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf62\udf63\udf66-\udf6c\udf70-\udf74]|\ud81b[\udf51-\udf7e\udf8f-\udf92]|\ud81a[\udef0-\udef4\udf30-\udf36]|\ud82f[\udc9d\udc9e]|\ud800[\uddfd\udee0\udf76-\udf7a]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f\udee5\udee6]|\ud83a[\udcd0-\udcd6]|\udb40[\udd00-\uddef]"},
{name:"Mc",alias:"Spacing_Mark",bmp:"\u0903\u093b\u093e-\u0940\u0949-\u094c\u094e\u094f\u0982\u0983\u09be-\u09c0\u09c7\u09c8\u09cb\u09cc\u09d7\u0a03\u0a3e-\u0a40\u0a83\u0abe-\u0ac0\u0ac9\u0acb\u0acc\u0b02\u0b03\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd7\u0c01-\u0c03\u0c41-\u0c44\u0c82\u0c83\u0cbe\u0cc0-\u0cc4\u0cc7\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0d02\u0d03\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d57\u0d82\u0d83\u0dcf-\u0dd1\u0dd8-\u0ddf\u0df2\u0df3\u0f3e\u0f3f\u0f7f\u102b\u102c\u1031\u1038\u103b\u103c\u1056\u1057\u1062-\u1064\u1067-\u106d\u1083\u1084\u1087-\u108c\u108f\u109a-\u109c\u17b6\u17be-\u17c5\u17c7\u17c8\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u1a19\u1a1a\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1b04\u1b35\u1b3b\u1b3d-\u1b41\u1b43\u1b44\u1b82\u1ba1\u1ba6\u1ba7\u1baa\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1c24-\u1c2b\u1c34\u1c35\u1ce1\u1cf2\u1cf3\u302e\u302f\ua823\ua824\ua827\ua880\ua881\ua8b4-\ua8c3\ua952\ua953\ua983\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9c0\uaa2f\uaa30\uaa33\uaa34\uaa4d\uaa7b\uaa7d\uaaeb\uaaee\uaaef\uaaf5\uabe3\uabe4\uabe6\uabe7\uabe9\uabea\uabec",
astral:"\ud834[\udd65\udd66\udd6d-\udd72]|\ud804[\udc00\udc02\udc82\udcb0-\udcb2\udcb7\udcb8\udd2c\udd82\uddb3-\uddb5\uddbf\uddc0\ude2c-\ude2e\ude32\ude33\ude35\udee0-\udee2\udf02\udf03\udf3e\udf3f\udf41-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf62\udf63]|\ud805[\udcb0-\udcb2\udcb9\udcbb-\udcbe\udcc1\uddaf-\uddb1\uddb8-\uddbb\uddbe\ude30-\ude32\ude3b\ude3c\ude3e\udeac\udeae\udeaf\udeb6\udf20\udf21\udf26]|\ud81b[\udf51-\udf7e]"},{name:"Me",alias:"Enclosing_Mark",bmp:"\u0488\u0489\u1abe\u20dd-\u20e0\u20e2-\u20e4\ua670-\ua672"},
{name:"Mn",alias:"Nonspacing_Mark",bmp:"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c81\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d01\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab-\u1bad\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f",
astral:"\ud805[\udcb3-\udcb8\udcba\udcbf\udcc0\udcc2\udcc3\uddb2-\uddb5\uddbc\uddbd\uddbf\uddc0\udddc\udddd\ude33-\ude3a\ude3d\ude3f\ude40\udeab\udead\udeb0-\udeb5\udeb7\udf1d-\udf1f\udf22-\udf25\udf27-\udf2b]|\ud834[\udd67-\udd69\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud81a[\udef0-\udef4\udf30-\udf36]|\ud81b[\udf8f-\udf92]|\ud82f[\udc9d\udc9e]|\ud800[\uddfd\udee0\udf76-\udf7a]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f\udee5\udee6]|\ud804[\udc01\udc38-\udc46\udc7f-\udc81\udcb3-\udcb6\udcb9\udcba\udd00-\udd02\udd27-\udd2b\udd2d-\udd34\udd73\udd80\udd81\uddb6-\uddbe\uddca-\uddcc\ude2f-\ude31\ude34\ude36\ude37\udedf\udee3-\udeea\udf00\udf01\udf3c\udf40\udf66-\udf6c\udf70-\udf74]|\ud83a[\udcd0-\udcd6]|\udb40[\udd00-\uddef]"},
{name:"N",alias:"Number",bmp:"0-9\u00b2\u00b3\u00b9\u00bc-\u00be\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d66-\u0d75\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
astral:"\ud800[\udd07-\udd33\udd40-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23\udf41\udf4a\udfd1-\udfd5]|\ud801[\udca0-\udca9]|\ud803[\udcfa-\udcff\ude60-\ude7e]|\ud835[\udfce-\udfff]|\ud83a[\udcc7-\udccf]|\ud81a[\ude60-\ude69\udf50-\udf59\udf5b-\udf61]|\ud806[\udce0-\udcf2]|\ud804[\udc52-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udde1-\uddf4\udef0-\udef9]|\ud834[\udf60-\udf71]|\ud83c[\udd00-\udd0c]|\ud809[\udc00-\udc6e]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude47\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf3b]"},
{name:"Nd",alias:"Decimal_Number",bmp:"0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
astral:"\ud801[\udca0-\udca9]|\ud835[\udfce-\udfff]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9\udf30-\udf39]|\ud806[\udce0-\udce9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud81a[\ude60-\ude69\udf50-\udf59]"},{name:"Nl",alias:"Letter_Number",bmp:"\u16ee-\u16f0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303a\ua6e6-\ua6ef",astral:"\ud809[\udc00-\udc6e]|\ud800[\udd40-\udd74\udf41\udf4a\udfd1-\udfd5]"},{name:"No",alias:"Other_Number",bmp:"\u00b2\u00b3\u00b9\u00bc-\u00be\u09f4-\u09f9\u0b72-\u0b77\u0bf0-\u0bf2\u0c78-\u0c7e\u0d70-\u0d75\u0f2a-\u0f33\u1369-\u137c\u17f0-\u17f9\u19da\u2070\u2074-\u2079\u2080-\u2089\u2150-\u215f\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua830-\ua835",
astral:"\ud804[\udc52-\udc65\udde1-\uddf4]|\ud803[\udcfa-\udcff\ude60-\ude7e]|\ud83c[\udd00-\udd0c]|\ud806[\udcea-\udcf2]|\ud83a[\udcc7-\udccf]|\ud802[\udc58-\udc5f\udc79-\udc7f\udca7-\udcaf\udcfb-\udcff\udd16-\udd1b\uddbc\uddbd\uddc0-\uddcf\uddd2-\uddff\ude40-\ude47\ude7d\ude7e\ude9d-\ude9f\udeeb-\udeef\udf58-\udf5f\udf78-\udf7f\udfa9-\udfaf]|\ud805[\udf3a\udf3b]|\ud81a[\udf5b-\udf61]|\ud834[\udf60-\udf71]|\ud800[\udd07-\udd33\udd75-\udd78\udd8a\udd8b\udee1-\udefb\udf20-\udf23]"},{name:"P",alias:"Punctuation",
bmp:"!-#%-\\x2A,-/:;\\x3F@\\x5B-\\x5D_\\x7B}\u00a1\u00a7\u00ab\u00b6\u00b7\u00bb\u00bf\u037e\u0387\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u2308-\u230b\u2329\u232a\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30-\u2e42\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua8fc\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65",
astral:"\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udef0-\udef6\udf39-\udf3f\udf99-\udf9c]|\ud809[\udc70-\udc74]|\ud805[\udcc6\uddc1-\uddd7\ude41-\ude43\udf3c-\udf3e]|\ud836[\ude87-\ude8b]|\ud801\udd6f|\ud82f\udc9f|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\udd74\udd75\uddc5-\uddc9\uddcd\udddb\udddd-\udddf\ude38-\ude3d\udea9]|\ud800[\udd00-\udd02\udf9f\udfd0]|\ud81a[\ude6e\ude6f\udef5\udf37-\udf3b\udf44]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f"},
{name:"Pd",alias:"Dash_Punctuation",bmp:"\\x2D\u058a\u05be\u1400\u1806\u2010-\u2015\u2e17\u2e1a\u2e3a\u2e3b\u2e40\u301c\u3030\u30a0\ufe31\ufe32\ufe58\ufe63\uff0d"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\x29\\x5D}\u0f3b\u0f3d\u169c\u2046\u207e\u208e\u2309\u230b\u232a\u2769\u276b\u276d\u276f\u2771\u2773\u2775\u27c6\u27e7\u27e9\u27eb\u27ed\u27ef\u2984\u2986\u2988\u298a\u298c\u298e\u2990\u2992\u2994\u2996\u2998\u29d9\u29db\u29fd\u2e23\u2e25\u2e27\u2e29\u3009\u300b\u300d\u300f\u3011\u3015\u3017\u3019\u301b\u301e\u301f\ufd3e\ufe18\ufe36\ufe38\ufe3a\ufe3c\ufe3e\ufe40\ufe42\ufe44\ufe48\ufe5a\ufe5c\ufe5e\uff09\uff3d\uff5d\uff60\uff63"},
{name:"Pf",alias:"Final_Punctuation",bmp:"\u00bb\u2019\u201d\u203a\u2e03\u2e05\u2e0a\u2e0d\u2e1d\u2e21"},{name:"Pi",alias:"Initial_Punctuation",bmp:"\u00ab\u2018\u201b\u201c\u201f\u2039\u2e02\u2e04\u2e09\u2e0c\u2e1c\u2e20"},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\x2A,\\x2E/:;\\x3F@\\x5C\u00a1\u00a7\u00b6\u00b7\u00bf\u037e\u0387\u055a-\u055f\u0589\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u166d\u166e\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u1805\u1807-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2016\u2017\u2020-\u2027\u2030-\u2038\u203b-\u203e\u2041-\u2043\u2047-\u2051\u2053\u2055-\u205e\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00\u2e01\u2e06-\u2e08\u2e0b\u2e0e-\u2e16\u2e18\u2e19\u2e1b\u2e1e\u2e1f\u2e2a-\u2e2e\u2e30-\u2e39\u2e3c-\u2e3f\u2e41\u3001-\u3003\u303d\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua8fc\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufe10-\ufe16\ufe19\ufe30\ufe45\ufe46\ufe49-\ufe4c\ufe50-\ufe52\ufe54-\ufe57\ufe5f-\ufe61\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff07\uff0a\uff0c\uff0e\uff0f\uff1a\uff1b\uff1f\uff20\uff3c\uff61\uff64\uff65",
astral:"\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udef0-\udef6\udf39-\udf3f\udf99-\udf9c]|\ud809[\udc70-\udc74]|\ud805[\udcc6\uddc1-\uddd7\ude41-\ude43\udf3c-\udf3e]|\ud836[\ude87-\ude8b]|\ud801\udd6f|\ud82f\udc9f|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\udd74\udd75\uddc5-\uddc9\uddcd\udddb\udddd-\udddf\ude38-\ude3d\udea9]|\ud800[\udd00-\udd02\udf9f\udfd0]|\ud81a[\ude6e\ude6f\udef5\udf37-\udf3b\udf44]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\x28\\x5B\\x7B\u0f3a\u0f3c\u169b\u201a\u201e\u2045\u207d\u208d\u2308\u230a\u2329\u2768\u276a\u276c\u276e\u2770\u2772\u2774\u27c5\u27e6\u27e8\u27ea\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991\u2993\u2995\u2997\u29d8\u29da\u29fc\u2e22\u2e24\u2e26\u2e28\u2e42\u3008\u300a\u300c\u300e\u3010\u3014\u3016\u3018\u301a\u301d\ufd3f\ufe17\ufe35\ufe37\ufe39\ufe3b\ufe3d\ufe3f\ufe41\ufe43\ufe47\ufe59\ufe5b\ufe5d\uff08\uff3b\uff5b\uff5f\uff62"},
{name:"S",alias:"Symbol",bmp:"\\x24\\x2B\x3c-\x3e\\x5E`\\x7C~\u00a2-\u00a6\u00a8\u00a9\u00ac\u00ae-\u00b1\u00b4\u00b8\u00d7\u00f7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u03f6\u0482\u058d-\u058f\u0606-\u0608\u060b\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u09f2\u09f3\u09fa\u09fb\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0d79\u0e3f\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u17db\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u2052\u207a-\u207c\u208a-\u208c\u20a0-\u20be\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u2140-\u2144\u214a-\u214d\u214f\u218a\u218b\u2190-\u2307\u230c-\u2328\u232b-\u23fa\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u2767\u2794-\u27c4\u27c7-\u27e5\u27f0-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2b73\u2b76-\u2b95\u2b98-\u2bb9\u2bbd-\u2bc8\u2bca-\u2bd1\u2bec-\u2bef\u2ce5-\u2cea\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua700-\ua716\ua720\ua721\ua789\ua78a\ua828-\ua82b\ua836-\ua839\uaa77-\uaa79\uab5b\ufb29\ufbb2-\ufbc1\ufdfc\ufdfd\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd",
astral:"\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udd10-\udd18\udd80-\udd84\uddc0]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd10-\udd2e\udd30-\udd6b\udd70-\udd9a\udde6-\ude02\ude10-\ude3a\ude40-\ude48\ude50\ude51\udf00-\udfff]|\ud83d[\udc00-\udd79\udd7b-\udda3\udda5-\uded0\udee0-\udeec\udef0-\udef3\udf00-\udf73\udf80-\udfd4]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud800[\udd37-\udd3f\udd79-\udd89\udd8c\udd90-\udd9b\udda0\uddd0-\uddfc]|\ud82f\udc9c|\ud805\udf3f|\ud802[\udc77\udc78\udec8]|\ud81a[\udf3c-\udf3f\udf45]|\ud836[\udc00-\uddff\ude37-\ude3a\ude6d-\ude74\ude76-\ude83\ude85\ude86]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udde8\ude00-\ude41\ude45\udf00-\udf56]|\ud83b[\udef0\udef1]"},
{name:"Sc",alias:"Currency_Symbol",bmp:"\\x24\u00a2-\u00a5\u058f\u060b\u09f2\u09f3\u09fb\u0af1\u0bf9\u0e3f\u17db\u20a0-\u20be\ua838\ufdfc\ufe69\uff04\uffe0\uffe1\uffe5\uffe6"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\x5E`\u00a8\u00af\u00b4\u00b8\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u309b\u309c\ua700-\ua716\ua720\ua721\ua789\ua78a\uab5b\ufbb2-\ufbc1\uff3e\uff40\uffe3",astral:"\ud83c[\udffb-\udfff]"},
{name:"Sm",alias:"Math_Symbol",bmp:"\\x2B\x3c-\x3e\\x7C~\u00ac\u00b1\u00d7\u00f7\u03f6\u0606-\u0608\u2044\u2052\u207a-\u207c\u208a-\u208c\u2118\u2140-\u2144\u214b\u2190-\u2194\u219a\u219b\u21a0\u21a3\u21a6\u21ae\u21ce\u21cf\u21d2\u21d4\u21f4-\u22ff\u2320\u2321\u237c\u239b-\u23b3\u23dc-\u23e1\u25b7\u25c1\u25f8-\u25ff\u266f\u27c0-\u27c4\u27c7-\u27e5\u27f0-\u27ff\u2900-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2aff\u2b30-\u2b44\u2b47-\u2b4c\ufb29\ufe62\ufe64-\ufe66\uff0b\uff1c-\uff1e\uff5c\uff5e\uffe2\uffe9-\uffec",
astral:"\ud83b[\udef0\udef1]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]"},{name:"So",alias:"Other_Symbol",bmp:"\u00a6\u00a9\u00ae\u00b0\u0482\u058d\u058e\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u09fa\u0b70\u0bf3-\u0bf8\u0bfa\u0c7f\u0d79\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u214a\u214c\u214d\u214f\u218a\u218b\u2195-\u2199\u219c-\u219f\u21a1\u21a2\u21a4\u21a5\u21a7-\u21ad\u21af-\u21cd\u21d0\u21d1\u21d3\u21d5-\u21f3\u2300-\u2307\u230c-\u231f\u2322-\u2328\u232b-\u237b\u237d-\u239a\u23b4-\u23db\u23e2-\u23fa\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u25b6\u25b8-\u25c0\u25c2-\u25f7\u2600-\u266e\u2670-\u2767\u2794-\u27bf\u2800-\u28ff\u2b00-\u2b2f\u2b45\u2b46\u2b4d-\u2b73\u2b76-\u2b95\u2b98-\u2bb9\u2bbd-\u2bc8\u2bca-\u2bd1\u2bec-\u2bef\u2ce5-\u2cea\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua828-\ua82b\ua836\ua837\ua839\uaa77-\uaa79\ufdfd\uffe4\uffe8\uffed\uffee\ufffc\ufffd",
astral:"\ud83e[\udc00-\udc0b\udc10-\udc47\udc50-\udc59\udc60-\udc87\udc90-\udcad\udd10-\udd18\udd80-\udd84\uddc0]|\ud83d[\udc00-\udd79\udd7b-\udda3\udda5-\uded0\udee0-\udeec\udef0-\udef3\udf00-\udf73\udf80-\udfd4]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbf\udcc1-\udccf\udcd1-\udcf5\udd10-\udd2e\udd30-\udd6b\udd70-\udd9a\udde6-\ude02\ude10-\ude3a\ude40-\ude48\ude50\ude51\udf00-\udffa]|\ud800[\udd37-\udd3f\udd79-\udd89\udd8c\udd90-\udd9b\udda0\uddd0-\uddfc]|\ud82f\udc9c|\ud805\udf3f|\ud802[\udc77\udc78\udec8]|\ud81a[\udf3c-\udf3f\udf45]|\ud836[\udc00-\uddff\ude37-\ude3a\ude6d-\ude74\ude76-\ude83\ude85\ude86]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udde8\ude00-\ude41\ude45\udf00-\udf56]"},
{name:"Z",alias:"Separator",bmp:" \u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:" \u00a0\u1680\u2000-\u200a\u202f\u205f\u3000"}])})(XRegExp);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:rangy-inputs', location = '/static/lib/rangy-inputs.js' */
/*
 Rangy Text Inputs, a cross-browser textarea and text input library plug-in for jQuery.

 Part of Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Depends on jQuery 1.0 or later.

 Copyright 2010, Tim Down
 Licensed under the MIT license.
 Version: 0.1.205
 Build date: 5 November 2010

 Modified by Atlassian
*/
(function(p){function q(e,d){var f=typeof e[d];return"function"===f||!("object"!=f||!e[d])||"unknown"==f}function r(e,d){return!("object"!=typeof e[d]||!e[d])}function t(e,d,f){0>d&&(d+=e.value.length);"undefined"==typeof f&&(f=d);0>f&&(f+=e.value.length);return{start:d,end:f}}function l(){return r(document,"body")?document.body:document.getElementsByTagName("body")[0]}var h,g,u,m,v,w,x,y,n;p(document).ready(function(){function e(c,a){return function(){var b=this.jquery?this[0]:this,k=b.nodeName.toLowerCase();
if(1==b.nodeType&&("textarea"==k||"input"==k&&"text"==b.type)&&(b=[b].concat(Array.prototype.slice.call(arguments)),b=c.apply(this,b),!a))return b;if(a)return this}}var d=document.createElement("textarea");l().appendChild(d);if("undefined"!=typeof d.selectionStart&&"undefined"!=typeof d.selectionEnd)h=function(c){var a=c.selectionStart,b=c.selectionEnd;return{start:a,end:b,length:b-a,text:c.value.slice(a,b)}},g=function(c,a,b){a=t(c,a,b);c.selectionStart=a.start;c.selectionEnd=a.end},n=function(c,
a){a?c.selectionEnd=c.selectionStart:c.selectionStart=c.selectionEnd};else if(q(d,"createTextRange")&&r(document,"selection")&&q(document.selection,"createRange")){h=function(c){var a=0,b=0,k,e,d;(d=document.selection.createRange())&&d.parentElement()==c&&(k=c.value.replace(/\r\n/g,"\n"),e=k.length,b=c.createTextRange(),b.moveToBookmark(d.getBookmark()),d=c.createTextRange(),d.collapse(!1),-1<b.compareEndPoints("StartToEnd",d)?a=b=e:(a=-b.moveStart("character",-e),a+=k.slice(0,a).split("\n").length-
1,-1<b.compareEndPoints("EndToEnd",d)?b=e:(b=-b.moveEnd("character",-e),b+=k.slice(0,b).split("\n").length-1)));return{start:a,end:b,length:b-a,text:c.value.slice(a,b)}};var f=function(c,a){return a-(c.value.slice(0,a).split("\r\n").length-1)};g=function(c,a,b){a=t(c,a,b);b=c.createTextRange();var d=f(c,a.start);b.collapse(!0);a.start==a.end?b.move("character",d):(b.moveEnd("character",f(c,a.end)),b.moveStart("character",d));b.select()};n=function(c,a){var b=document.selection.createRange();b.collapse(a);
b.select()}}else{l().removeChild(d);window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: No means of finding text input caret position");return}l().removeChild(d);m=function(c,a,b,d){var e;a!=b&&(e=c.value,c.value=e.slice(0,a)+e.slice(b));d&&g(c,a,a)};u=function(c){var a=h(c);m(c,a.start,a.end,!0)};y=function(c){var a=h(c),b;a.start!=a.end&&(b=c.value,c.value=b.slice(0,a.start)+b.slice(a.end));g(c,a.start,a.start);return a.text};
v=function(c,a,b,d){var e=c.value;c.value=e.slice(0,b)+a+e.slice(b);d&&(a=b+a.length,g(c,a,a))};w=function(c,a){var b=h(c),d=c.value;c.value=d.slice(0,b.start)+a+d.slice(b.end);b=b.start+a.length;g(c,b,b)};x=function(c,a,b){var d=h(c),e=c.value;c.value=e.slice(0,d.start)+a+d.text+b+e.slice(d.end);a=d.start+a.length;g(c,a,a+d.length)};p.fn.extend({getSelection:e(h,!1),setSelection:e(g,!0),collapseSelection:e(n,!0),deleteSelectedText:e(u,!0),deleteText:e(m,!0),extractSelectedText:e(y,!1),insertText:e(v,
!0),replaceSelectedText:e(w,!0),surroundSelectedText:e(x,!0)})})})(jQuery);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-util', location = '/static/bitbucket/internal/util/markup.js' */
define("bitbucket/internal/util/markup",["module","exports"],function(q,f){function r(b,a,c,d){b=b.indexOf(a,c||0);return-1===b||d&&b>d?null:b}function l(b){for(var a=0,c=[],d=!1,k=!1,f=/`/,g=/`|~/,l=/^(~~~+|```+[\S]*)/,q=/\\/,t=0;a<b.length;){var m=a,n=b[a++],h=n;"\n"===n&&(t=a,d&&(c.push({start:m,end:a,value:h,blockType:p.INLINE,type:e.CODE_END}),d=!1));if(g.test(n)){var u=b.substring(t,r(b,"\n",a)||b.length);if(l.test(u)){for(;"\n"!==b[a]&&a<b.length;)h+=b[a++];if(k){if(c[c.length-1].value.substring(0,
3)!==h.substring(0,3))continue;k=!1}else k=!0;c.push({start:m,end:a,value:h,blockType:p.FENCED,type:k?e.CODE_START:e.CODE_END})}else q.test(b[m-1])||k||!f.test(n)||(d=d?!1:!0,c.push({start:m,end:a,value:h,blockType:p.INLINE,type:d?e.CODE_START:e.CODE_END}))}}return c}Object.defineProperty(f,"__esModule",{value:!0});var e={CODE_START:"CODE_START",CODE_END:"CODE_END"},p={INLINE:"INLINE",FENCED:"FENCED"};f.default={TokenTypes:e,BlockTypes:p,isPositionInsideCodeBlock:function(b,a){var c=l(a),d=!1;c.forEach(function(a,
f){if(a.type===e.CODE_START&&a.start<b){var g=c[f+1];if(g&&g.type===e.CODE_END&&g.blockType===a.blockType&&g.start>=b||!g)return d=!0,!1}});return d},codeBlockTokenizer:l,findNextTokenIndex:r};q.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:mentionable-textarea', location = '/static/bitbucket/internal/widget/mentionable-textarea/mentionable-textarea.soy' */
// This file was automatically generated from mentionable-textarea.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.mentionableTextarea.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.mentionableTextarea == 'undefined') { bitbucket.internal.widget.mentionableTextarea = {}; }


bitbucket.internal.widget.mentionableTextarea.dialog = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var minimumInputLength__soy3 = 2;
  output += '<ul>';
  if (opt_data.results && opt_data.results.length) {
    var resultList7 = opt_data.results;
    var resultListLen7 = resultList7.length;
    for (var resultIndex7 = 0; resultIndex7 < resultListLen7; resultIndex7++) {
      var resultData7 = resultList7[resultIndex7];
      output += bitbucket.internal.widget.mentionableTextarea.result({result: resultData7, isActive: opt_data.activeItemIndex ? resultIndex7 == opt_data.activeItemIndex : resultIndex7 == 0});
    }
  } else {
    output += (opt_data.query && opt_data.query.length >= minimumInputLength__soy3) ? '<li class="no-results"><span>' + soy.$$escapeHtml('No matching users found') + '</span></li>' : '<li class="mentions-help"><span>' + soy.$$escapeHtml('Start typing to find people') + '</span></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.mentionableTextarea.dialog.soyTemplateName = 'bitbucket.internal.widget.mentionableTextarea.dialog';
}


bitbucket.internal.widget.mentionableTextarea.result = function(opt_data, opt_ignored) {
  return '<li class="result ' + soy.$$escapeHtml(opt_data.isActive ? 'active' : '') + '">' + bitbucket.internal.widget.avatarWithNameAndEmail({size: 'small', person: opt_data.result}) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.mentionableTextarea.result.soyTemplateName = 'bitbucket.internal.widget.mentionableTextarea.result';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:mentionable-textarea', location = '/static/bitbucket/internal/widget/mentionable-textarea/mentionable-textarea.js' */
define("bitbucket/internal/widget/mentionable-textarea/mentionable-textarea","module exports aui aui/progressive-dataset backbone jquery lodash textarea-caret-position xregexp bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/model/stash-user bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/markup bitbucket/internal/widget/autocomplete-dialog/autocomplete-dialog".split(" "),function(p,m,q,r,t,u,v,w,x,y,z,A,B,C,D,E){function d(){this.init.apply(this,
arguments)}Object.defineProperty(m,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(q),F=babelHelpers.interopRequireDefault(r),G=babelHelpers.interopRequireDefault(t),g=babelHelpers.interopRequireDefault(u),e=babelHelpers.interopRequireDefault(v),H=babelHelpers.interopRequireDefault(w),l=babelHelpers.interopRequireDefault(x),I=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),J=babelHelpers.interopRequireDefault(A),n=babelHelpers.interopRequireDefault(B),
K=babelHelpers.interopRequireDefault(C),L=babelHelpers.interopRequireDefault(D),M=babelHelpers.interopRequireDefault(E);d.defaults={$container:(0,g.default)(document.body),selector:"textarea",dialogId:"mention-autocomplete-dialog"};d.prototype.init=function(a){this.options&&this.reset();this.options=g.default.extend({},d.defaults,a);e.default.bindAll(this,"onKeyDown","onKeyPress","onPaste","onDocumentClick","updateDialogAnchorPosition","updateResults","onActivity","selectItem","highlightMatches");
a=[];h.default.getPullRequest()?a=e.default.map([h.default.getPullRequest().getAuthor()].concat(h.default.getPullRequest().getReviewers().models,h.default.getPullRequest().getParticipants().models),function(a){return a.getUser()}):h.default.getCommitParticipants&&h.default.getCommitParticipants()&&(a=h.default.getCommitParticipants().pluck("user"));this.dataSource=N(a,this.matcher);this.dataSource.on("respond",this.updateResults);this.dataSource.on("activity",this.onActivity);this.isMentioningSelector=
e.default.map(this.options.selector.split(","),function(a){return g.default.trim(a)+".isMentioning"}).join(", ");this.options.$container.on("keypress",this.options.selector,this.onKeyPress);this.options.$container.on("keydown",this.isMentioningSelector,this.onKeyDown);this.options.$container.on("paste",this.isMentioningSelector,this.onPaste)};d.prototype.onKeyDown=function(a){if(this.dialog)switch(a.which){case f.default.keyCode.ENTER:case f.default.keyCode.TAB:this.selectHighlightedItem();a.preventDefault();
break;case f.default.keyCode.UP:this.dialog.moveSelectionUp();a.preventDefault();break;case f.default.keyCode.DOWN:this.dialog.moveSelectionDown();a.preventDefault();break;case f.default.keyCode.ESCAPE:this.endAutocomplete();a.preventDefault();a.stopPropagation();break;case f.default.keyCode.BACKSPACE:case f.default.keyCode.DELETE:this.onKeyPress(a)}};d.prototype.onKeyPress=function(a){a.which&&e.default.defer(e.default.bind(function(a){var b=(0,g.default)(a.target);if(b.hasClass("isMentioning"))this.updateAutocomplete();
else{var k=b.getSelection().start;"@"!==String.fromCharCode(a.which)||L.default.isPositionInsideCodeBlock(k,b.val())||this.beginAutocomplete(b)}},this),a)};d.prototype.onPaste=function(){e.default.defer(e.default.bind(this.updateAutocomplete,this))};d.prototype.onDocumentClick=function(a){var c=a.target;a=[];this.$textarea&&a.push(this.$textarea);this.dialog&&a.push(this.dialog.$el);e.default.any(a,function(a){return a.is(c)||g.default.contains(a[0],c)})||this.endAutocomplete()};d.prototype.beginAutocomplete=
function(a){var c=a.getSelection().start-1;0<c&&/^\w$/.test(a.val().substr(c-1,1))||(this.$textarea=a,this.$textarea.addClass("isMentioning"),this.mentionTriggerPos=c,this.resultsCollection=new G.default.Collection,this.dialog=new M.default({id:this.options.dialogId,collection:this.resultsCollection,minZIndex:this.options.$container.zIndex(),anchor:this.getCaretDocumentCoordinates(this.$textarea),template:bitbucket.internal.widget.mentionableTextarea.dialog,highlighter:this.highlightMatches}),this.dialog.on("itemSelected",
this.selectItem),n.default.on("window.resize.debounced",this.updateDialogAnchorPosition),(0,g.default)(document).on("click focusin mousedown",this.onDocumentClick),this.updateAutocomplete())};d.prototype.updateAutocomplete=function(){if(this.$textarea){this.currentCaretPos=this.$textarea.getSelection().start;var a=this.$textarea.val().substring(this.mentionTriggerPos,this.currentCaretPos);a&&0===a.indexOf("@")&&-1===a.indexOf("\n")?(a=a.substr(1),this.dataSource.query(a)):this.endAutocomplete()}};
d.prototype.updateDialogAnchorPosition=function(){e.default.defer(e.default.bind(function(){this.dialog&&this.$textarea&&this.dialog.updateAnchorPosition(this.getCaretDocumentCoordinates(this.$textarea))},this))};d.prototype.updateResults=function(a){this.resultsCollection&&(this.resultsCollection.query=a.query,this.resultsCollection.reset(a.results))};d.prototype.onActivity=function(a){this.dialog&&this.dialog.toggleSpinner(a.activity)};d.prototype.endAutocomplete=function(){this.$textarea&&(this.$textarea.removeClass("isMentioning"),
this.$textarea=null);this.currentCaretPos=this.mentionTriggerPos=void 0;this.dialog&&(this.dialog.off("itemSelected",this.selectItem),this.dialog.remove(),this.dialog=null);this.resultsCollection=null;n.default.off("window.resize.debounced",this.updateDialogAnchorPosition);(0,g.default)(document).off("click focusin mousedown",this.onDocumentClick)};d.prototype.selectHighlightedItem=function(){this.selectItem(this.dialog.getSelectedItemIndex())};d.prototype.selectItem=function(a){if(a=this.resultsCollection.at(a)){a=
this.escapeUsername(a.getName());var c=this.$textarea.val(),b=c.substring(0,this.mentionTriggerPos+1),c=c.substring(this.currentCaretPos,c.length),k=b.length+a.length+1;" "!==c.charAt(0)&&(c=" "+c);this.$textarea.val(b+a+c);this.$textarea.setSelection(k,k)}this.endAutocomplete()};d.prototype.matcher=function(a,c){if(h.default.getCurrentUser()&&a.getName()===h.default.getCurrentUser().getName())return!1;var b=l.default.cache("(\\b|^|[^\\p{L}\\p{N}])"+l.default.escape(c),"i"),k=[a.getName(),a.getEmailAddress(),
a.getDisplayName()];return e.default.any(k,function(a){return!(!a||!b.test(a))})};d.prototype.getMatchParts=function(a,c){var b=l.default.cache("(^|.*?(\\b|\\())("+l.default.escape(c)+")(.*)","i"),k={text:a};-1<a.toLowerCase().indexOf(c.toLowerCase())&&a.replace(b,function(a,b,c,d,e){k={prefix:b,match:d,suffix:e}});return k};d.prototype.highlightMatches=function(a,c){var b=this;a.find(".display-name, .email-address").each(function(){var a=(0,g.default)(this).contents().filter(function(){return this.nodeType===
Node.TEXT_NODE}),d=e.default.reduce(b.getMatchParts(a.text(),c),function(a,b,c){return a+("match"===c?"\x3cb\x3e"+f.default.escapeHtml(b)+"\x3c/b\x3e":f.default.escapeHtml(b))},"");a.replaceWith(d)});return a};d.prototype.getCaretDocumentCoordinates=function(a){var c=a.offset(),b=(0,H.default)(a[0],a[0].selectionStart);a=parseInt(a.css("font-size"),10);b.top+=c.top+a;b.left+=c.left;return b};d.prototype.escapeUsername=function(a){return/^\w*$/.test(a)?a:'"'+a.replace(/"/g,'\\"')+'"'};d.prototype.reset=
function(){this.destroy();delete this.options;delete this.dataSource;delete this.$textarea;delete this.dialog;delete this.resultsCollection;delete this.mentionTriggerPos;delete this.currentCaretPos};d.prototype.destroy=function(){this.dialog&&(this.dialog.off("itemSelected",this.selectItem),this.dialog.remove());this.dataSource.off("respond",this.updateResults);this.dataSource.off("activity",this.onActivity);this.options.$container.off("keypress",this.options.selector,this.onKeyPress);this.options.$container.off("keydown",
this.isMentioningSelector,this.onKeyDown);this.options.$container.off("paste",this.isMentioningSelector,this.onPaste);n.default.off("window.resize.debounced",this.updateDialogAnchorPosition);(0,g.default)(document).off("click focusin mousedown",this.onDocumentClick)};var N=e.default.once(function(a,c){var b=new F.default(a,{queryEndpoint:I.default.rest().users().build(),queryParamKey:"filter",queryData:{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"small"}),permission:"LICENSED_USER"},
maxResults:5,model:J.default,matcher:c});b.query=function(a){var b;this.value=a;b=this.getFilteredResults(a);this.respond(a,b);!a||!this._queryEndpoint||this.hasQueryCache(a)||!this.shouldGetMoreResults(b)||2>a.length||this.remoteQuery(a)}.bind(b);b.remoteQuery=function(a){var b=this.fetch(a);this.activeQueryCount++;this.trigger("activity",{activity:!0});b.always(e.default.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this));b.done(e.default.bind(function(b,
c,d){this.addQueryCache(a,b,d)},this));b.done(e.default.bind(function(){a=this.value;this.respond(a,this.getFilteredResults(a))},this))}.bind(b);b.remoteQuery=e.default.debounce(b.remoteQuery,300);b.parse=K.default.dot("values");b.getFilteredResults=function(a){var b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=e.default.take(b,this._maxResults));return b};return b});m.default=d;p.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:codemirror-mode-meta', location = '/static/bower/CodeMirror/mode/meta.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],b):b(CodeMirror)})(function(b){b.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",
file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:"cpp c++ cc cxx hpp h++ hh hxx".split(" "),alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",
mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",
ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",
mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},
{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",
mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",
mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",
mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],
mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},
{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",
mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",
mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:"txt text conf def list log".split(" ")},
{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",
ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",
mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],
mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",
mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",
mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:"123456789".split("")},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",
mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"XML",mimes:["application/xml",
"text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",
mode:"mscgen",ext:["msgenny"]}];for(var f=0;f<b.modeInfo.length;f++){var g=b.modeInfo[f];g.mimes&&(g.mime=g.mimes[0])}b.findModeByMIME=function(c){c=c.toLowerCase();for(var d=0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.mime==c)return a;if(a.mimes)for(var e=0;e<a.mimes.length;e++)if(a.mimes[e]==c)return a}};b.findModeByExtension=function(c){for(var d=0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.ext)for(var e=0;e<a.ext.length;e++)if(a.ext[e]==c)return a}};b.findModeByFileName=function(c){for(var d=
0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.file&&a.file.test(c))return a}d=c.lastIndexOf(".");if(c=-1<d&&c.substring(d+1,c.length))return b.findModeByExtension(c)};b.findModeByName=function(c){c=c.toLowerCase();for(var d=0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.name.toLowerCase()==c)return a;if(a.alias)for(var e=0;e<a.alias.length;e++)if(a.alias[e].toLowerCase()==c)return a}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:determine-language', location = '/static/bitbucket/internal/util/determine-language.js' */
define("bitbucket/internal/util/determine-language",["module","exports","codemirror","jquery","lodash"],function(t,k,l,u,v){Object.defineProperty(k,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v);document.documentElement.className+=" cm-s-stash-default";l=WRM.data.claim("com.atlassian.bitbucket.server.bitbucket-web:determine-language.syntax-highlighters")||{};var m={},n={};g.default.forEach(l,function(c,
a){g.default.forEach(c.e,function(b){m[b]=a});g.default.forEach(c.x,function(b){n[b]=a})});var p={},q={};k.default={fromFileInfo:function(c){var a=c.path,b=a.lastIndexOf("."),b=-1===b?a:a.substring(b+1),d;if(1<c.firstLine.length)if(d=/^#!(?:\/(?:usr\/)?(?:local\/)?bin\/([^\s]+))(?:\s+([^\s]+))?/.exec(c.firstLine)){var e=d[1];"env"===e&&(e=d[2]);d=e}else d=null;else d=null;var e=p.hasOwnProperty(b)?p[b]:d&&q.hasOwnProperty(d)?q[d]:null,h;e||((h=g.default.has(m,b)?m[b]:null)||(h=null!=d?g.default.has(n,
d)?n[d]:null:null),e=(e=h?f.default.findModeByMIME(h):f.default.findModeByFileName(a))||f.default.findModeByMIME("text/plain"),e.builtIn=!0);return c.legacy?h||"text":e},registerCodeMirrorMode:function(c,a,b){a&&a.forEach(function(a){p[a]=c});b&&b.forEach(function(a){q[a]=c})},getCodeMirrorModeForName:function(c){var a=f.default.findModeByName(c)||f.default.findModeByExtension(c);return a?"undefined"===typeof f.default.mimeModes[a.mime]?WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-highlight:"+
a.mode).then(function(){return a}):r.default.Deferred().resolve(a):r.default.Deferred().resolve(f.default.findModeByMIME("text/plain"))}};t.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:codemirror-whitespace', location = '/static/bitbucket/internal/feature/file-content/codemirror-whitespace/codemirror-whitespace.js' */
require(["codemirror"],function(e){e.defineOption("showWhiteSpaceCharacters",!1,function(b,c,d){d&&!c?b.removeOverlay("whitespace-characters"):!d&&c&&b.addOverlay({name:"whitespace-characters",flattenSpans:!1,token:function(a){var b=0;if(a.match(" ",!1))return a.eatWhile(function(a){return" "===a&&4>b++}),"whitespace";a.eatWhile(/[^ ]/);return null}})})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:editor-mode', location = '/static/bitbucket/internal/feature/file-content/editor-mode.js' */
define("bitbucket/internal/feature/file-content/editor-mode",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={EDIT:"EDIT",READONLY:"READONLY"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar.soy' */
// This file was automatically generated from stash-scrollbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.codemirror.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.codemirror == 'undefined') { bitbucket.internal.feature.fileContent.codemirror = {}; }


bitbucket.internal.feature.fileContent.codemirror.scrollbar = function(opt_data, opt_ignored) {
  return '<div class="CodeMirror-hscrollbar' + ((opt_data.fixed) ? ' stash-scroll-fixed' : '') + '" cm-not-content="true"' + ((opt_data.isMac) ? 'style="min-height: 18px"' : '') + '><div class="stash-scroll-inner"></div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.codemirror.scrollbar.soyTemplateName = 'bitbucket.internal.feature.fileContent.codemirror.scrollbar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar.js' */
define("bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar",["codemirror","jquery","lodash","bitbucket/internal/util/navigator"],function(d,k,l,m){function f(d){function b(a,b,c){this._cm=c;this._scroll=b;g.default.bindAll(this,"clear","onScroll");this.$barEl=(0,h.default)(bitbucket.internal.feature.fileContent.codemirror.scrollbar({isMac:n.default.isMac(),fixed:d.fixed}));this.$innerEl=this.$barEl.find("div");d.fixed?((0,h.default)("body").append(this.$barEl),c.getOption("stashDestroyables").push({destroy:this.clear})):
a(this.$barEl[0]);this.$barEl.on("scroll",this.onScroll)}b.prototype.clear=function(){this.$barEl.remove()};b.prototype.onScroll=function(){var a=this.$barEl[0];a.clientWidth&&this._scroll(a.scrollLeft,"horizontal")};b.prototype.setScrollLeft=function(a){this.$barEl.scrollLeft()!==a&&this.$barEl.scrollLeft(a)};b.prototype.setScrollTop=function(a){};b.prototype.update=function(a){if(g.default.isEqual(a,this.lastMeasure))return this.lastUpdateResult;this.lastMeasure=a;var b=a.scrollWidth>a.clientWidth+
1,c={},e={};b?(c.display="block",c.width=a.viewWidth+"px",d.fixed?c.left=this._cm.getWrapperElement().getBoundingClientRect().left+"px":c.right="0",e.width=a.scrollWidth-a.clientWidth+a.viewWidth+"px"):(c.display="",e.width="0");this.$barEl.css(c);this.$innerEl.css(e);return this.lastUpdateResult={right:0,bottom:b?a.nativeBarWidth:0}};return b}d=babelHelpers.interopRequireDefault(d);var h=babelHelpers.interopRequireDefault(k),g=babelHelpers.interopRequireDefault(l),n=babelHelpers.interopRequireDefault(m);
d.default.scrollbarModel["stash-inline"]=f({fixed:!1});d.default.scrollbarModel["stash-fixed"]=f({fixed:!0})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/search.js' */
define("bitbucket/internal/feature/file-content/stash-codemirror/search",["codemirror","jquery","bitbucket/internal/util/navigator"],function(q,r,t){function u(a,b){a="string"===typeof a?new RegExp("^"+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),b?"i":""):new RegExp("^(?:"+a.source+")",a.ignoreCase?"i":"");return{token:function(c){if(c.match(a))return"searching";for(;!c.eol()&&(c.next(),!c.match(a,!1)););}}}function v(){this.query=this.overlay=this.dialogEl=this.cursor=null}function f(a){return a.state.search||
(a.state.search=new v)}function l(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);return b?new RegExp(b[1],-1===b[2].indexOf("i")?"":"i"):a}function k(a,b){a.operation(function(){a.removeOverlay(b.overlay);b.overlay=u(b.query,"string"===typeof b.query);a.addOverlay(b.overlay)})}function m(a,b){a.operation(function(){a.removeOverlay(b.overlay);b.overlay=null})}function g(a,b,c){(b=b&&b.trim())&&0!==b.length&&a.operation(function(){var d=f(a);b!==d.query?(d.query=l(b),d.cursor=null,k(a,d)):d.overlay||k(a,d);
h(a,c)})}function n(a,b){var c=f(a);if(c.dialogEl){var d=c.dialogEl.getElementsByClassName("search-query")[0];d.focus()}else{d=(0,p.default)(bitbucket.internal.feature.fileContent.codemirror.searchQuery());d.find(".search-button").on("click",function(c){h(a,(0,p.default)(c.target).closest(".aui-button").data("rev"))}).tooltip();var e=d.find("input")[0];e.onkeydown=function(b){c.query=void 0;var d=w.default.isMac(),f=String.fromCharCode(b.keyCode),d=d&&b.metaKey&&!b.ctrlKey||!d&&!b.metaKey&&b.ctrlKey;
"F"!==f||!d||b.shiftKey||b.altKey?"G"!==f||!d||b.shiftKey||b.altKey?"G"===f&&d&&b.shiftKey&&!b.altKey&&(b.preventDefault(),g(a,e.value,!0)):(b.preventDefault(),g(a,e.value)):b.preventDefault()};c.dialogEl=d[0];d={value:a.getSelection()||c.query,closeOnEnter:!1,closeOnBlur:!1,onClose:function(){m(a,c);c.dialogEl=c.cursor=null}};a.openDialog(c.dialogEl,function(b,c){c.preventDefault();g(a,b)},d)}g(a,d.value,b)}function h(a,b){a.operation(function(){var c=f(a);if(c.query&&c.dialogEl){if(!c.cursor){b&&
a.execCommand("goCharLeft");var d;d=c.query;var g=a.getCursor();d=a.getSearchCursor(d,g,"string"===typeof d);c.cursor=d}if(!c.cursor.find(b)&&(d=c.query,g=b?e.default.Pos(a.lastLine()):e.default.Pos(a.firstLine(),0),d=a.getSearchCursor(d,g,"string"===typeof d),c.cursor=d,!c.cursor.find(b)))return;a.setSelection(c.cursor.from(),c.cursor.to());c={from:c.cursor.from(),to:c.cursor.to()};(d=a.getOption("scrollLineIntoViewFunc"))?(d(c),c=a.charCoords(c.from,"local"),d=a.getScrollInfo(),(d.left>c.left||
d.left+d.clientWidth<c.left)&&a.scrollTo(Math.max(0,c.left-20),null)):a.scrollIntoView(c,100)}else n(a,b)})}var e=babelHelpers.interopRequireDefault(q),p=babelHelpers.interopRequireDefault(r),w=babelHelpers.interopRequireDefault(t);e.default.defineOption("scrollLineIntoViewFunc",null);e.default.commands.find=n;e.default.commands.findNext=h;e.default.commands.findPrev=function(a){return h(a,!0)};e.default.commands.highlight=function(a,b){var c=f(a);0===b.length?m(a,c):(c.query=l(b),k(a,c))}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror.js' */
define("bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror","module exports aui codemirror jquery lodash bitbucket/internal/feature/file-content/editor-mode bitbucket/internal/util/function bitbucket/internal/feature/file-content/stash-codemirror/stash-scrollbar".split(" "),function(v,k,l,w,x,y,z,A){function B(c){c.on("keydown",function(a,b){!1!==a.options.readOnly&&33<=b.which&&40>=b.which&&!b.shiftKey&&!a.somethingSelected()&&(37>b.which&&b.preventDefault(),a.getInputField().blur())})}
function C(c){var a=!1,b=f.default.lazyDelay(function(){var b;a||(b=c.lineAtHeight(c.getScrollInfo().top+c.heightAtLine(0)),c.setSelection({line:b+1,ch:0}));a=!1},10);c.on("contextmenu",function(){a=!0});c.on("blur",function(c){c.options.readOnly&&c.somethingSelected()&&b();a=!1})}function n(c,a){var b=a===h.default.EDIT?"off":"on";c[b]("keydown",p);c[b]("keypress",p)}function p(c,a){var b=d.default.extend(jQuery.Event(a.type),d.default.pick(a,D));(0,e.default)(document).trigger(b);a.codemirrorIgnore=
!!q[a.which||a.keyCode]}function E(c){var a={},b=Array.prototype.slice.call(arguments,1),e=f.default.spread(function(b,r){a[b]=void 0!==r?d.default.compose(f.default.constant(r),c[b].bind(c)):c[b].bind(c)});b.forEach(f.default.unary(e));return a}function F(c,a){d.default.forEach(a,function(b,a){return c.setOption(a,b)})}function t(c,a){this.options=a;var b=new m.default(c,e.default.extend({mode:"text/plain",scrollbarStyle:a.scrollStyle?"stash-"+a.scrollStyle:"native",styleSelectedText:!0,stashDestroyables:[],
theme:"stash-default"},{viewportMargin:a&&a.autoResizing?Infinity:50},u[a.editorMode||h.default.READONLY],a));(0,e.default)(b.getWrapperElement()).find(".CodeMirror-lines, .CodeMirror-code").attr("data-skate-ignore","true");a&&a.autoResizing&&c.classList.add("codemirror-auto-resizing-container");B(b);n(b,a.editorMode);C(b);var g=E(b,["addLineClass",this],"addLineWidget","charCoords","clearGutter","defaultTextHeight","execCommand","focus","getDoc","getInputField","getLine","getLineHandle","getLineNumber",
"getOption","getScrollInfo","getWrapperElement","heightAtLine","lastLine","lineAtHeight","setCursor",["markText",this],["off",this],["on",this],["refresh",this],["removeLineClass",this],"replaceRange",["scrollIntoView",this],["scrollTo",this],["setGutterMarker",this],["setOption",this],["setSelection",this],["setValue",this],"swapDoc");e.default.extend(this,g);this.operation=function(a){b.operation(f.default.unary(d.default.partial(a,this)));return this};this.destroy=function(){d.default.invoke(b.getOption("stashDestroyables"),
"destroy");(0,e.default)(b.getWrapperElement()).remove()};this._highlight=function(a){m.default.commands.highlight(b,a)};this._insert=function(a,c,e){var d=0===c;--c;var g=b.getOption("wholeLineUpdateBefore");b.setOption("wholeLineUpdateBefore",d);var f=b.getDoc(),h={line:c,ch:d?0:b.getLine(c).length};f.replaceRange(d?a+"\r\n":"\r\n"+a,h);e&&f.setSelection({line:c,ch:0});b.setOption("wholeLineUpdateBefore",g)};this.switchEditorMode=function(c){var d=babelHelpers.extends({scrollbarStyle:this.options.scrollStyle?
"stash-"+a.scrollStyle:"native"},u[c]);F(b,d);n(b,c)};return this}Object.defineProperty(k,"__esModule",{value:!0});l=babelHelpers.interopRequireDefault(l);var m=babelHelpers.interopRequireDefault(w),e=babelHelpers.interopRequireDefault(x),d=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),f=babelHelpers.interopRequireDefault(A),g;m.default.defineOption("stashDestroyables",null);var q={};q[l.default.keyCode.TAB]=!0;var D=["which","keyCode","shiftKey","ctrlKey","metaKey"],
u=(g={},babelHelpers.defineProperty(g,h.default.READONLY,{lineSeparator:"\r\n",readOnly:!0,lineNumbers:!1,wholeLineUpdateBefore:!1,keyMap:"default",cursorBlinkRate:0}),babelHelpers.defineProperty(g,h.default.EDIT,{lineSeparator:null,readOnly:!1,lineNumbers:!0,wholeLineUpdateBefore:!0,scrollbarStyle:"native",keyMap:"sublime",cursorBlinkRate:530}),g);t.DEFAULT_LINE_ENDING="\r\n";k.default=t;v.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:stash-codemirror', location = '/static/bitbucket/internal/feature/file-content/stash-codemirror/codemirror-search.soy' */
// This file was automatically generated from codemirror-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.codemirror.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.codemirror == 'undefined') { bitbucket.internal.feature.fileContent.codemirror = {}; }


bitbucket.internal.feature.fileContent.codemirror.searchQuery = function(opt_data, opt_ignored) {
  return '<div class="codemirror-search-query">' + soy.$$escapeHtml('Find:') + '<div class="search-box"><input class="search-query" type="text" style="width: 10em"/></div>' + aui.buttons.buttons({content: '' + aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-up', extraClasses: ['search-button'], extraAttributes: {type: 'button', 'data-rev': 'true', title: 'Previous match'}}) + aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-down', extraClasses: ['search-button'], extraAttributes: {type: 'button', title: 'Next match'}})}) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.codemirror.searchQuery.soyTemplateName = 'bitbucket.internal.feature.fileContent.codemirror.searchQuery';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:clike', location = '/static/bower/CodeMirror/mode/clike/clike.js' */
(function(q){"object"==typeof exports&&"object"==typeof module?q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],q):q(CodeMirror)})(function(q){function C(a,b,K,c,h,n){this.indented=a;this.column=b;this.type=K;this.info=c;this.align=h;this.prev=n}function y(a,b,c,e){var h=a.indented;a.context&&"statement"!=a.context.type&&"statement"!=c&&(h=a.context.indented);return a.context=new C(h,b,c,e,null,a.context)}function w(a){var b=a.context.type;if(")"==
b||"]"==b||"}"==b)a.indented=a.context.indented;return a.context=a.context.prev}function G(a,b,c){if("variable"==b.prevToken||"variable-3"==b.prevToken||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(a.string.slice(0,c))||b.typeAtEndOfLine&&a.column()==a.indentation())return!0}function H(a){for(;;){if(!a||"top"==a.type)return!0;if("}"==a.type&&"namespace"!=a.prev.info)return!1;a=a.prev}}function c(a){var b={};a=a.split(" ");for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function r(a,b){return"function"===typeof a?
a(b):a.propertyIsEnumerable(b)}function p(a,b){if(!b.startOfLine)return!1;for(var c,e=null;c=a.peek();){if("\\"==c&&a.match(/^.$/)){e=p;break}else if("/"==c&&a.match(/^\/[\/\*]/,!1))break;a.next()}b.tokenize=e;return"meta"}function z(a,b){return"variable-3"==b.prevToken?"variable-3":!1}function l(a){a.eatWhile(/[\w\.']/);return"number"}function t(a,b){a.backUp(1);if(a.match(/(R|u8R|uR|UR|LR)/)){var c=a.match(/"([^\s\\()]{0,16})\(/);if(!c)return!1;b.cpp11RawStringDelim=c[1];b.tokenize=x;return x(a,
b)}if(a.match(/(u8|u|U|L)/))return a.match(/["']/,!1)?"string":!1;a.next();return!1}function A(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=null;break}return"string"}function x(a,b){var c=b.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$\x26");a.match(new RegExp(".*?\\)"+c+'"'))?b.tokenize=null:a.skipToEnd();return"string"}function k(a,b){function c(a){if(a)for(var b in a)a.hasOwnProperty(b)&&e.push(b)}"string"==typeof a&&(a=[a]);var e=[];c(b.keywords);c(b.types);c(b.builtin);
c(b.atoms);e.length&&(b.helperType=a[0],q.registerHelper("hintWords",a[0],e));for(var h=0;h<a.length;++h)q.defineMIME(a[h],b)}function D(a,b){for(var c=!1;!a.eol();){if(!c&&a.match('"""')){b.tokenize=null;break}c="\\"==a.next()&&!c}return"string"}function E(a){return function(b,c){for(var e=!1,h,n=!1;!b.eol();){if(!a&&!e&&b.match('"')){n=!0;break}if(a&&b.match('"""')){n=!0;break}h=b.next();!e&&"$"==h&&b.match("{")&&b.skipTo("}");e=!e&&"\\"==h&&!a}if(n||!a)c.tokenize=null;return"string"}}function B(a){return function(b,
c){for(var e=!1,h,n=!1;!b.eol();){if(!e&&b.match('"')&&("single"==a||b.match('""'))){n=!0;break}if(!e&&b.match("``")){u=B(a);n=!0;break}h=b.next();e="single"==a&&!e&&"\\"==h}n&&(c.tokenize=null);return"string"}}q.defineMode("clike",function(a,b){function c(a,b){var d=a.next();if(v[d]){var g=v[d](a,b);if(!1!==g)return g}if('"'==d||"'"==d)return b.tokenize=e(d),b.tokenize(a,b);if(L.test(d))return m=d,null;if(M.test(d)){a.backUp(1);if(a.match(N))return"number";a.next()}if("/"==d){if(a.eat("*"))return b.tokenize=
h,h(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(I.test(d)){for(;!a.match(/^\/[\/*]/,!1)&&a.eat(I););return"operator"}a.eatWhile(/[\w\$_\xa1-\uffff]/);if(J)for(;a.match(J);)a.eatWhile(/[\w\$_\xa1-\uffff]/);d=a.current();return r(t,d)?(r(x,d)&&(m="newstatement"),r(A,d)&&(F=!0),"keyword"):r(u,d)?"variable-3":r(z,d)?(r(x,d)&&(m="newstatement"),"builtin"):r(B,d)?"atom":"variable"}function e(a){return function(b,c){for(var g=!1,e,h=!1;null!=(e=b.next());){if(e==a&&!g){h=!0;break}g=!g&&"\\"==e}if(h||
!g&&!D)c.tokenize=null;return"string"}}function h(a,b){for(var c=!1,g;g=a.next();){if("/"==g&&c){b.tokenize=null;break}c="*"==g}return"comment"}function n(a,c){b.typeFirstDefinitions&&a.eol()&&H(c.context)&&(c.typeAtEndOfLine=G(a,c,a.pos))}var k=a.indentUnit,l=b.statementIndentUnit||k,p=b.dontAlignCalls,t=b.keywords||{},u=b.types||{},z=b.builtin||{},x=b.blockKeywords||{},A=b.defKeywords||{},B=b.atoms||{},v=b.hooks||{},D=b.multiLineStrings,E=!1!==b.indentStatements,J=b.namespaceSeparator,L=b.isPunctuationChar||
/[\[\]{}\(\),;\:\.]/,M=b.numberStart||/[\d\.]/,N=b.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,I=b.isOperatorChar||/[+\-*&%=<>!?|\/]/,O=b.endStatement||/^[;:,]$/,m,F;return{startState:function(a){return{tokenize:null,context:new C((a||0)-k,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(a,f){var d=f.context;a.sol()&&(null==d.align&&(d.align=!1),f.indented=a.indentation(),f.startOfLine=!0);if(a.eatSpace())return n(a,f),null;m=F=null;var g=
(f.tokenize||c)(a,f);if("comment"==g||"meta"==g)return g;null==d.align&&(d.align=!0);if(O.test(m))for(;"statement"==f.context.type;)w(f);else if("{"==m)y(f,a.column(),"}");else if("["==m)y(f,a.column(),"]");else if("("==m)y(f,a.column(),")");else if("}"==m){for(;"statement"==d.type;)d=w(f);for("}"==d.type&&(d=w(f));"statement"==d.type;)d=w(f)}else m==d.type?w(f):E&&(("}"==d.type||"top"==d.type)&&";"!=m||"statement"==d.type&&"newstatement"==m)&&y(f,a.column(),"statement",a.current());"variable"==g&&
("def"==f.prevToken||b.typeFirstDefinitions&&G(a,f,a.start)&&H(f.context)&&a.match(/^\s*\(/,!1))&&(g="def");v.token&&(d=v.token(a,f,g),void 0!==d&&(g=d));"def"==g&&!1===b.styleDefs&&(g="variable");f.startOfLine=!1;f.prevToken=F?"def":g||m;n(a,f);return g},indent:function(a,f){if(a.tokenize!=c&&null!=a.tokenize||a.typeAtEndOfLine)return q.Pass;var d=a.context,g=f&&f.charAt(0);"statement"==d.type&&"}"==g&&(d=d.prev);if(b.dontIndentStatements)for(;"statement"==d.type&&b.dontIndentStatements.test(d.info);)d=
d.prev;if(v.indent){var e=v.indent(a,d,f);if("number"==typeof e)return e}var e=g==d.type,h=d.prev&&"switch"==d.prev.info;if(b.allmanIndentation&&/[{(]/.test(g)){for(;"top"!=d.type&&"}"!=d.type;)d=d.prev;return d.indented}return"statement"==d.type?d.indented+("{"==g?0:l):!d.align||p&&")"==d.type?")"!=d.type||e?d.indented+(e?0:k)+(e||!h||/^(?:case|default)\b/.test(f)?0:k):d.indented+l:d.column+(e?0:1)},electricInput:!1!==b.indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",
blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});k(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile"),types:c("int long char short double float unsigned signed void size_t ptrdiff_t bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:c("case do else for if switch while struct"),
defKeywords:c("struct"),typeFirstDefinitions:!0,atoms:c("null true false"),hooks:{"#":p,"*":z},modeProps:{fold:["brace","include"]}});k(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),
types:c("int long char short double float unsigned signed void size_t ptrdiff_t bool wchar_t"),blockKeywords:c("catch class do else finally for if struct switch try while"),defKeywords:c("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:c("true false null"),dontIndentStatements:/^template$/,hooks:{"#":p,"*":z,u:t,U:t,L:t,R:t,0:l,1:l,2:l,3:l,4:l,5:l,6:l,7:l,8:l,9:l,token:function(a,b,c){if(b="variable"==c&&"("==a.peek()&&(";"==b.prevToken||null==b.prevToken||"}"==b.prevToken))a=a.current(),
b=(a=/(\w+)::(\w+)$/.exec(a))&&a[1]==a[2];if(b)return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}});k("text/x-java",{name:"clike",keywords:c("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:c("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),
blockKeywords:c("catch class do else finally for if switch try while"),defKeywords:c("class interface package enum"),typeFirstDefinitions:!0,atoms:c("true false null"),endStatement:/^[;:]$/,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"}},modeProps:{fold:["brace","import"]}});k("text/x-csharp",{name:"clike",keywords:c("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
types:c("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:c("catch class do else finally for foreach if struct switch try while"),defKeywords:c("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:c("true false null"),hooks:{"@":function(a,b){if(a.eat('"'))return b.tokenize=
A,A(a,b);a.eatWhile(/[\w\$_]/);return"meta"}}});k("text/x-scala",{name:"clike",keywords:c("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : \x3d \x3d\x3e \x3c- \x3c: \x3c% \x3e: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),
types:c("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),
multiLineStrings:!0,blockKeywords:c("catch class do else finally for forSome if match switch try while"),defKeywords:c("class def object package trait type val var"),atoms:c("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){if(!a.match('""'))return!1;b.tokenize=D;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},"\x3d":function(a,b){var c=b.context;return"}"==c.type&&c.align&&a.eat("\x3e")?
(b.context=new C(c.indented,c.column,c.type,c.info,null,c.prev),"operator"):!1}},modeProps:{closeBrackets:{triples:'"'}}});k("text/x-kotlin",{name:"clike",keywords:c("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix"),
types:c("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,blockKeywords:c("catch class do else finally for if where try while enum"),defKeywords:c("class val var object package interface fun"),
atoms:c("true false null this"),hooks:{'"':function(a,b){b.tokenize=E(a.match('""'));return b.tokenize(a,b)}},modeProps:{closeBrackets:{triples:'"'}}});k(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:c("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:c("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:c("for while do if else struct"),
builtin:c("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),
atoms:c("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),
indentSwitch:!1,hooks:{"#":p},modeProps:{fold:["brace","include"]}});k("text/x-nesc",{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileas atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:c("int long char short double float unsigned signed void size_t ptrdiff_t"),
blockKeywords:c("case do else for if switch while struct"),atoms:c("null true false"),hooks:{"#":p},modeProps:{fold:["brace","include"]}});k("text/x-objectivec",{name:"clike",keywords:c("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileinline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),
types:c("int long char short double float unsigned signed void size_t ptrdiff_t"),atoms:c("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(a){a.eatWhile(/[\w\$]/);return"keyword"},"#":p,indent:function(a,b,c){if("statement"==b.type&&/^@\w/.test(c))return b.indented}},modeProps:{fold:"brace"}});k("text/x-squirrel",{name:"clike",keywords:c("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),
types:c("int long char short double float unsigned signed void size_t ptrdiff_t"),blockKeywords:c("case catch class else for foreach if switch try while"),defKeywords:c("function local class"),typeFirstDefinitions:!0,atoms:c("true false null"),hooks:{"#":p},modeProps:{fold:["brace","include"]}});var u=null;k("text/x-ceylon",{name:"clike",keywords:c("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),
types:function(a){a=a.charAt(0);return a===a.toUpperCase()&&a!==a.toLowerCase()},blockKeywords:c("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:c("class dynamic function interface module object package value"),builtin:c("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,
isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:c("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){b.tokenize=B(a.match('""')?"triple":"single");return b.tokenize(a,b)},"`":function(a,b){if(!u||!a.match("`"))return!1;b.tokenize=
u;u=null;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},token:function(a,b,c){if(("variable"==c||"variable-3"==c)&&"."==b.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:commonlisp', location = '/static/bower/CodeMirror/mode/commonlisp/commonlisp.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("commonlisp",function(e){function g(b){for(var c;c=b.next();)if("\\"==c)b.next();else if(!k.test(c)){b.backUp(1);break}return b.current()}function f(b,c){if(b.eatSpace())return d="ws",null;if(b.match(l))return"number";var a=b.next();"\\"==a&&(a=b.next());if('"'==a)return(c.tokenize=m)(b,c);
if("("==a)return d="open","bracket";if(")"==a||"]"==a)return d="close","bracket";if(";"==a)return b.skipToEnd(),d="ws","comment";if(/['`,@]/.test(a))return null;if("|"==a){if(b.skipTo("|"))return b.next(),"symbol";b.skipToEnd();return"error"}if("#"==a)return a=b.next(),"["==a?(d="open","bracket"):/[+\-=\.']/.test(a)||/\d/.test(a)&&b.match(/^\d*#/)?null:"|"==a?(c.tokenize=n)(b,c):":"==a?(g(b),"meta"):"error";a=g(b);if("."==a)return null;d="symbol";return"nil"==a||"t"==a||":"==a.charAt(0)?"atom":"open"==
c.lastType&&(p.test(a)||h.test(a))?"keyword":"\x26"==a.charAt(0)?"variable-2":"variable"}function m(b,c){for(var a=!1,d;d=b.next();){if('"'==d&&!a){c.tokenize=f;break}a=!a&&"\\"==d}return"string"}function n(b,c){for(var a,e;a=b.next();){if("#"==a&&"|"==e){c.tokenize=f;break}e=a}d="ws";return"comment"}var p=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/,
h=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/,l=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/,k=/[^\s'`,@()\[\]";]/,d;return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:f}},token:function(b,c){b.sol()&&"number"!=typeof c.ctx.indentTo&&(c.ctx.indentTo=c.ctx.start+1);d=null;var a=c.tokenize(b,c);"ws"!=d&&(null==c.ctx.indentTo?"symbol"==d&&h.test(b.current())?c.ctx.indentTo=
c.ctx.start+e.indentUnit:c.ctx.indentTo="next":"next"==c.ctx.indentTo&&(c.ctx.indentTo=b.column()),c.lastType=d);"open"==d?c.ctx={prev:c.ctx,start:b.column(),indentTo:null}:"close"==d&&(c.ctx=c.ctx.prev||c.ctx);return a},indent:function(b,c){var a=b.ctx.indentTo;return"number"==typeof a?a:b.ctx.start+1},closeBrackets:{pairs:'()[]{}""'},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});e.defineMIME("text/x-common-lisp","commonlisp")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:css', location = '/static/bower/CodeMirror/mode/css/css.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function l(d){for(var e={},g=0;g<d.length;++g)e[d[g]]=!0;return e}function m(d,e){for(var g=!1,k;null!=(k=d.next());){if(g&&"/"==k){e.tokenize=null;break}g="*"==k}return["comment","comment"]}k.defineMode("css",function(d,e){function g(a,c){K=c;return a}function l(a,c){var b=a.next();if(w[b]){var d=w[b](a,
c);if(!1!==d)return d}if("@"==b)return a.eatWhile(/[\w\\\-]/),g("def",a.current());if("\x3d"==b||("~"==b||"|"==b)&&a.eat("\x3d"))return g(null,"compare");if('"'==b||"'"==b)return c.tokenize=m(b),c.tokenize(a,c);if("#"==b)return a.eatWhile(/[\w\\\-]/),g("atom","hash");if("!"==b)return a.match(/^\s*\w*/),g("keyword","important");if(/\d/.test(b)||"."==b&&a.eat(/\d/))return a.eatWhile(/[\w.%]/),g("number","unit");if("-"===b){if(/[\d.]/.test(a.peek()))return a.eatWhile(/[\w.%]/),g("number","unit");if(a.match(/^-[\w\\\-]+/))return a.eatWhile(/[\w\\\-]/),
a.match(/^\s*:/,!1)?g("variable-2","variable-definition"):g("variable-2","variable");if(a.match(/^\w+-/))return g("meta","meta")}else return/[,+>*\/]/.test(b)?g(null,"select-op"):"."==b&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?g("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(b)?g(null,b):"u"==b&&a.match(/rl(-prefix)?\(/)||"d"==b&&a.match("omain(")||"r"==b&&a.match("egexp(")?(a.backUp(1),c.tokenize=y,g("property","word")):/[\w\\\-]/.test(b)?(a.eatWhile(/[\w\\\-]/),g("property","word")):g(null,null)}function m(a){return function(c,
b){for(var d=!1,e;null!=(e=c.next());){if(e==a&&!d){")"==a&&c.backUp(1);break}d=!d&&"\\"==e}if(e==a||!d&&")"!=a)b.tokenize=null;return g("string","string")}}function y(a,c){a.next();a.match(/\s*[\"\')]/,!1)?c.tokenize=null:c.tokenize=m(")");return g(null,"(")}function r(a,c,b){this.type=a;this.indent=c;this.prev=b}function h(a,c,b,d){a.context=new r(b,c.indentation()+(!1===d?0:v),a.context);return b}function n(a){a.context.prev&&(a.context=a.context.prev);return a.context.type}function q(a,c,b,d){for(d=
d||1;0<d;d--)b.context=b.context.prev;return p[b.context.type](a,c,b)}function t(a){a=a.current().toLowerCase();f=F.hasOwnProperty(a)?"atom":E.hasOwnProperty(a)?"keyword":"variable"}var u=e.inline;e.propertyKeywords||(e=k.resolveMode("text/css"));var v=d.indentUnit,w=e.tokenHooks,z=e.documentTypes||{},A=e.mediaTypes||{},D=e.mediaFeatures||{},G=e.mediaValueKeywords||{},B=e.propertyKeywords||{},C=e.nonStandardPropertyKeywords||{},H=e.fontProperties||{},I=e.counterDescriptors||{},E=e.colorKeywords||
{},F=e.valueKeywords||{},x=e.allowNested,J=!0===e.supportsAtComponent,K,f,p={top:function(a,c,b){if("{"==a)return h(b,c,"block");if("}"==a&&b.context.prev)return n(b);if(J&&/@component/.test(a))return h(b,c,"atComponentBlock");if(/^@(-moz-)?document$/.test(a))return h(b,c,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(a))return h(b,c,"atBlock");if(/^@(font-face|counter-style)/.test(a))return b.stateArg=a,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a))return"keyframes";
if(a&&"@"==a.charAt(0))return h(b,c,"at");if("hash"==a)f="builtin";else if("word"==a)f="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return h(b,c,"interpolation");if(":"==a)return"pseudo";if(x&&"("==a)return h(b,c,"parens")}return b.context.type},block:function(a,c,b){if("word"==a){a=c.current().toLowerCase();if(B.hasOwnProperty(a))return f="property","maybeprop";if(C.hasOwnProperty(a))return f="string-2","maybeprop";if(x)return f=c.match(/^\s*:(?:\s|$)/,!1)?"property":
"tag","block";f+=" error";return"maybeprop"}if("meta"==a)return"block";if(x||"hash"!=a&&"qualifier"!=a)return p.top(a,c,b);f="error";return"block"},maybeprop:function(a,c,b){return":"==a?h(b,c,"prop"):p[b.context.type](a,c,b)},prop:function(a,c,b){if(";"==a)return n(b);if("{"==a&&x)return h(b,c,"propBlock");if("}"==a||"{"==a)return q(a,c,b);if("("==a)return h(b,c,"parens");if("hash"==a&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(c.current()))f+=" error";else if("word"==a)t(c);else if("interpolation"==
a)return h(b,c,"interpolation");return"prop"},propBlock:function(a,c,b){return"}"==a?n(b):"word"==a?(f="property","maybeprop"):b.context.type},parens:function(a,c,b){if("{"==a||"}"==a)return q(a,c,b);if(")"==a)return n(b);if("("==a)return h(b,c,"parens");if("interpolation"==a)return h(b,c,"interpolation");"word"==a&&t(c);return"parens"},pseudo:function(a,c,b){return"word"==a?(f="variable-3",b.context.type):p[b.context.type](a,c,b)},documentTypes:function(a,c,b){return"word"==a&&z.hasOwnProperty(c.current())?
(f="tag",b.context.type):p.atBlock(a,c,b)},atBlock:function(a,c,b){if("("==a)return h(b,c,"atBlock_parens");if("}"==a||";"==a)return q(a,c,b);if("{"==a)return n(b)&&h(b,c,x?"block":"top");if("interpolation"==a)return h(b,c,"interpolation");"word"==a&&(a=c.current().toLowerCase(),f="only"==a||"not"==a||"and"==a||"or"==a?"keyword":A.hasOwnProperty(a)?"attribute":D.hasOwnProperty(a)?"property":G.hasOwnProperty(a)?"keyword":B.hasOwnProperty(a)?"property":C.hasOwnProperty(a)?"string-2":F.hasOwnProperty(a)?
"atom":E.hasOwnProperty(a)?"keyword":"error");return b.context.type},atComponentBlock:function(a,c,b){if("}"==a)return q(a,c,b);if("{"==a)return n(b)&&h(b,c,x?"block":"top",!1);"word"==a&&(f="error");return b.context.type},atBlock_parens:function(a,c,b){return")"==a?n(b):"{"==a||"}"==a?q(a,c,b,2):p.atBlock(a,c,b)},restricted_atBlock_before:function(a,c,b){return"{"==a?h(b,c,"restricted_atBlock"):"word"==a&&"@counter-style"==b.stateArg?(f="variable","restricted_atBlock_before"):p[b.context.type](a,
c,b)},restricted_atBlock:function(a,c,b){return"}"==a?(b.stateArg=null,n(b)):"word"==a?(f="@font-face"==b.stateArg&&!H.hasOwnProperty(c.current().toLowerCase())||"@counter-style"==b.stateArg&&!I.hasOwnProperty(c.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(a,c,b){return"word"==a?(f="variable","keyframes"):"{"==a?h(b,c,"top"):p[b.context.type](a,c,b)},at:function(a,c,b){if(";"==a)return n(b);if("{"==a||"}"==a)return q(a,c,b);"word"==a?f="tag":"hash"==
a&&(f="builtin");return"at"},interpolation:function(a,c,b){if("}"==a)return n(b);if("{"==a||";"==a)return q(a,c,b);"word"==a?f="variable":"variable"!=a&&"("!=a&&")"!=a&&(f="error");return"interpolation"}};return{startState:function(a){return{tokenize:null,state:u?"block":"top",stateArg:null,context:new r(u?"block":"top",a||0,null)}},token:function(a,c){if(!c.tokenize&&a.eatSpace())return null;var b=(c.tokenize||l)(a,c);b&&"object"==typeof b&&(K=b[1],b=b[0]);f=b;c.state=p[c.state](K,a,c);return f},
indent:function(a,c){var b=a.context,d=c&&c.charAt(0),e=b.indent;"prop"!=b.type||"}"!=d&&")"!=d||(b=b.prev);if(b.prev)if("}"==d&&("block"==b.type||"top"==b.type||"interpolation"==b.type||"restricted_atBlock"==b.type))b=b.prev,e=b.indent;else if(")"==d&&("parens"==b.type||"atBlock_parens"==b.type)||"{"==d&&("at"==b.type||"atBlock"==b.type))e=Math.max(0,b.indent-v);return e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var y=["domain","regexp","url","url-prefix"],G=
l(y),B="all aural braille handheld print projection screen tty tv embossed".split(" "),r=l(B),C="width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid orientation device-pixel-ratio min-device-pixel-ratio max-device-pixel-ratio pointer any-pointer hover any-hover".split(" "),
t=l(C),H="landscape portrait none coarse fine on-demand hover interlace progressive".split(" "),D=l(H),I="align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-fill-mode animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-blend-mode background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset flow-from flow-into font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid grid-area grid-auto-columns grid-auto-flow grid-auto-rows grid-column grid-column-end grid-column-gap grid-column-start grid-gap grid-row grid-row-end grid-row-gap grid-row-start grid-template grid-template-areas grid-template-columns grid-template-rows hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marker-offset marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up object-fit object-position opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range play-during position presentation-level punctuation-trim quotes region-break-after region-break-before region-break-inside region-fragment rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span shape-image-threshold shape-inside shape-margin shape-outside size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-overflow text-shadow text-size-adjust text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width word-break word-spacing word-wrap z-index clip-path clip-rule mask enable-background filter flood-color flood-opacity lighting-color stop-color stop-opacity pointer-events color-interpolation color-interpolation-filters color-rendering fill fill-opacity fill-rule image-rendering marker marker-end marker-mid marker-start shape-rendering stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-rendering baseline-shift dominant-baseline glyph-orientation-horizontal glyph-orientation-vertical text-anchor writing-mode".split(" "),
u=l(I),E="scrollbar-arrow-color scrollbar-base-color scrollbar-dark-shadow-color scrollbar-face-color scrollbar-highlight-color scrollbar-shadow-color scrollbar-3d-light-color scrollbar-track-color shape-inside searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration zoom".split(" "),v=l(E),w=l("font-family src unicode-range font-variant font-feature-settings font-stretch font-weight font-style".split(" ")),F=l("additive-symbols fallback negative pad prefix range speak-as suffix symbols system".split(" ")),
J="aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkturquoise darkviolet deeppink deepskyblue dimgray dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray grey green greenyellow honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightpink lightsalmon lightseagreen lightskyblue lightslategray lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple rebeccapurple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" "),
z=l(J),L="above absolute activeborder additive activecaption afar after-white-space ahead alias all all-scroll alphabetic alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks attr auto avoid avoid-column avoid-page avoid-region background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break break-all break-word bullets button button-bevel buttonface buttonhighlight buttonshadow buttontext calc cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-decimal cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse color color-burn color-dodge column column-reverse compact condensed contain content content-box context-menu continuous copy counter counters cover crop cross crosshair currentcolor cursive cyclic darken dashed decimal decimal-leading-zero default default-button dense destination-atop destination-in destination-out destination-over devanagari difference disc discard disclosure-closed disclosure-open document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipse ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ethiopic-numeric ew-resize exclusion expanded extends extra-condensed extra-expanded fantasy fast fill fixed flat flex flex-end flex-start footnotes forwards from geometricPrecision georgian graytext grid groove gujarati gurmukhi hand hangul hangul-consonant hard-light hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla hue icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-flex inline-grid inline-table inset inside intrinsic invert italic japanese-formal japanese-informal justify kannada katakana katakana-iroha keep-all khmer korean-hangul-formal korean-hanja-formal korean-hanja-informal landscape lao large larger left level lighter lighten line-through linear linear-gradient lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr luminosity malayalam match matrix matrix3d media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple multiply myanmar n-resize narrower ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize numbers numeric nw-resize nwse-resize oblique octal open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside outside-shape overlay overline padding padding-box painted page paused persian perspective plus-darker plus-lighter pointer polygon portrait pre pre-line pre-wrap preserve-3d progress push-button radial-gradient radio read-only read-write read-write-plaintext-only rectangle region relative repeat repeating-linear-gradient repeating-radial-gradient repeat-x repeat-y reset reverse rgb rgba ridge right rotate rotate3d rotateX rotateY rotateZ round row row-resize row-reverse rtl run-in running s-resize sans-serif saturation scale scale3d scaleX scaleY scaleZ screen scroll scrollbar se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration semi-condensed semi-expanded separate serif show sidama simp-chinese-formal simp-chinese-informal single skew skewX skewY skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller soft-light solid somali source-atop source-in source-out source-over space space-around space-between spell-out square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize symbolic symbols table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group tamil telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top trad-chinese-formal trad-chinese-informal translate translate3d translateX translateY translateZ transparent ultra-condensed ultra-expanded underline up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url var vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave wider window windowframe windowtext words wrap wrap-reverse x-large x-small xor xx-large xx-small".split(" "),
A=l(L),y=y.concat(B).concat(C).concat(H).concat(I).concat(E).concat(J).concat(L);k.registerHelper("hintWords","css",y);k.defineMIME("text/css",{documentTypes:G,mediaTypes:r,mediaFeatures:t,mediaValueKeywords:D,propertyKeywords:u,nonStandardPropertyKeywords:v,fontProperties:w,counterDescriptors:F,colorKeywords:z,valueKeywords:A,tokenHooks:{"/":function(d,e){if(!d.eat("*"))return!1;e.tokenize=m;return m(d,e)}},name:"css"});k.defineMIME("text/x-scss",{mediaTypes:r,mediaFeatures:t,mediaValueKeywords:D,
propertyKeywords:u,nonStandardPropertyKeywords:v,colorKeywords:z,valueKeywords:A,fontProperties:w,allowNested:!0,tokenHooks:{"/":function(d,e){return d.eat("/")?(d.skipToEnd(),["comment","comment"]):d.eat("*")?(e.tokenize=m,m(d,e)):["operator","operator"]},":":function(d){return d.match(/\s*\{/)?[null,"{"]:!1},$:function(d){d.match(/^[\w-]+/);return d.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(d){return d.eat("{")?[null,"interpolation"]:!1}},name:"css",
helperType:"scss"});k.defineMIME("text/x-less",{mediaTypes:r,mediaFeatures:t,mediaValueKeywords:D,propertyKeywords:u,nonStandardPropertyKeywords:v,colorKeywords:z,valueKeywords:A,fontProperties:w,allowNested:!0,tokenHooks:{"/":function(d,e){return d.eat("/")?(d.skipToEnd(),["comment","comment"]):d.eat("*")?(e.tokenize=m,m(d,e)):["operator","operator"]},"@":function(d){if(d.eat("{"))return[null,"interpolation"];if(d.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,
!1))return!1;d.eatWhile(/[\w\\\-]/);return d.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"\x26":function(){return["atom","atom"]}},name:"css",helperType:"less"});k.defineMIME("text/x-gss",{documentTypes:G,mediaTypes:r,mediaFeatures:t,propertyKeywords:u,nonStandardPropertyKeywords:v,fontProperties:w,counterDescriptors:F,colorKeywords:z,valueKeywords:A,supportsAtComponent:!0,tokenHooks:{"/":function(d,e){if(!d.eat("*"))return!1;e.tokenize=m;return m(d,e)}},name:"css",
helperType:"gss"})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:javascript', location = '/static/bower/CodeMirror/mode/javascript/javascript.js' */
(function(q){"object"==typeof exports&&"object"==typeof module?q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],q):q(CodeMirror)})(function(q){function ga(q,r,p){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(r.lastType)||"quasi"==r.lastType&&/\{\s*$/.test(q.string.slice(0,q.pos-(p||0)))}q.defineMode("javascript",function(ta,r){function p(a,e,b){F=a;N=b;return e}function A(a,e){var b=a.next();if('"'==b||"'"==b)return e.tokenize=
ua(b),e.tokenize(a,e);if("."==b&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return p("number","number");if("."==b&&a.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(b))return p(b);if("\x3d"==b&&a.eat("\x3e"))return p("\x3d\x3e","operator");if("0"==b&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),p("number","number");if("0"==b&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),p("number","number");if("0"==b&&a.eat(/b/i))return a.eatWhile(/[01]/i),p("number","number");if(/\d/.test(b))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),
p("number","number");if("/"==b){if(a.eat("*"))return e.tokenize=O,O(a,e);if(a.eat("/"))return a.skipToEnd(),p("comment","comment");if(ga(a,e,1)){a:for(var b=!1,c,d=!1;null!=(c=a.next());){if(!b){if("/"==c&&!d)break a;"["==c?d=!0:d&&"]"==c&&(d=!1)}b=!b&&"\\"==c}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return p("regexp","string-2")}a.eatWhile(P);return p("operator","operator",a.current())}if("`"==b)return e.tokenize=V,V(a,e);if("#"==b)return a.skipToEnd(),p("error","error");if(P.test(b))return a.eatWhile(P),
p("operator","operator",a.current());if(W.test(b))return a.eatWhile(W),b=a.current(),(c=ha.propertyIsEnumerable(b)&&ha[b])&&"."!=e.lastType?p(c.type,c.style,b):p("variable","variable",b)}function ua(a){return function(e,b){var c=!1,d;if(Q&&"@"==e.peek()&&e.match(va))return b.tokenize=A,p("jsonld-keyword","meta");for(;null!=(d=e.next())&&(d!=a||c);)c=!c&&"\\"==d;c||(b.tokenize=A);return p("string","string")}}function O(a,e){for(var b=!1,c;c=a.next();){if("/"==c&&b){e.tokenize=A;break}b="*"==c}return p("comment",
"comment")}function V(a,b){for(var d=!1,c;null!=(c=a.next());){if(!d&&("`"==c||"$"==c&&a.eat("{"))){b.tokenize=A;break}d=!d&&"\\"==c}return p("quasi","string-2",a.current())}function X(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var d=a.string.indexOf("\x3d\x3e",a.start);if(!(0>d)){for(var c=0,y=!1,d=d-1;0<=d;--d){var g=a.string.charAt(d),f="([{}])".indexOf(g);if(0<=f&&3>f){if(!c){++d;break}if(0==--c){"("==g&&(y=!0);break}}else if(3<=f&&6>f)++c;else if(W.test(g))y=!0;else{if(/["'\/]/.test(g))return;if(y&&
!c){++d;break}}}y&&!c&&(b.fatArrowAt=d)}}function ia(a,b,d,c,f,g){this.indented=a;this.column=b;this.type=d;this.prev=f;this.info=g;null!=c&&(this.align=c)}function f(){for(var a=arguments.length-1;0<=a;a--)d.cc.push(arguments[a])}function b(){f.apply(null,arguments);return!0}function G(a){function b(e){for(;e;e=e.next)if(e.name==a)return!0;return!1}var l=d.state;d.marked="def";l.context?b(l.localVars)||(l.localVars={name:a,next:l.localVars}):!b(l.globalVars)&&r.globalVars&&(l.globalVars={name:a,
next:l.globalVars})}function H(){d.state.context={prev:d.state.context,vars:d.state.localVars};d.state.localVars=wa}function I(){d.state.localVars=d.state.context.vars;d.state.context=d.state.context.prev}function m(a,b){var l=function(){var c=d.state,l=c.indented;if("stat"==c.lexical.type)l=c.lexical.indented;else for(var g=c.lexical;g&&")"==g.type&&g.align;g=g.prev)l=g.indented;c.lexical=new ia(l,d.stream.column(),a,null,c.lexical,b)};l.lex=!0;return l}function h(){var a=d.state;a.lexical.prev&&
(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function k(a){function e(d){return d==a?b():";"==a?f():b(e)}return e}function t(a,e){return"var"==a?b(m("vardef",e.length),Y,k(";"),h):"keyword a"==a?b(m("form"),Z,t,h):"keyword b"==a?b(m("form"),t,h):"{"==a?b(m("}"),R,h):";"==a?b():"if"==a?("else"==d.state.lexical.info&&d.state.cc[d.state.cc.length-1]==h&&d.state.cc.pop()(),b(m("form"),Z,t,h,ja)):"function"==a?b(x):"for"==a?b(m("form"),xa,t,h):"variable"==a?b(m("stat"),
ya):"switch"==a?b(m("form"),Z,m("}","switch"),k("{"),R,h,h):"case"==a?b(n,k(":")):"default"==a?b(k(":")):"catch"==a?b(m("form"),H,k("("),aa,k(")"),t,h,I):"class"==a?b(m("form"),za,h):"export"==a?b(m("stat"),Aa,h):"import"==a?b(m("stat"),Ba,h):"module"==a?b(m("form"),v,m("}"),k("{"),R,h,h):"type"==a?b(w,k("operator"),w,k(";")):"async"==a?b(t):f(m("stat"),n,k(";"),h)}function n(a){return ka(a,!1)}function u(a){return ka(a,!0)}function Z(a){return"("!=a?f():b(m(")"),n,k(")"),h)}function ka(a,e){if(d.state.fatArrowAt==
d.stream.start){var l=e?la:ma;if("("==a)return b(H,m(")"),z(v,")"),h,k("\x3d\x3e"),l,I);if("variable"==a)return f(H,v,k("\x3d\x3e"),l,I)}l=e?J:B;return Ca.hasOwnProperty(a)?b(l):"function"==a?b(x,l):"keyword c"==a||"async"==a?b(e?Da:ba):"("==a?b(m(")"),ba,k(")"),h,l):"operator"==a||"spread"==a?b(e?u:n):"["==a?b(m("]"),Ea,h,l):"{"==a?K(ca,"}",null,l):"quasi"==a?f(S,l):"new"==a?b(Fa(e)):b()}function ba(a){return a.match(/[;\}\)\],]/)?f():f(n)}function Da(a){return a.match(/[;\}\)\],]/)?f():f(u)}function B(a,
e){return","==a?b(n):J(a,e,!1)}function J(a,e,d){var c=0==d?B:J,y=0==d?n:u;if("\x3d\x3e"==a)return b(H,d?la:ma,I);if("operator"==a)return/\+\+|--/.test(e)?b(c):"?"==e?b(n,k(":"),y):b(y);if("quasi"==a)return f(S,c);if(";"!=a){if("("==a)return K(u,")","call",c);if("."==a)return b(Ga,c);if("["==a)return b(m("]"),ba,k("]"),h,c)}}function S(a,e){return"quasi"!=a?f():"${"!=e.slice(e.length-2)?b(S):b(n,Ha)}function Ha(a){if("}"==a)return d.marked="string-2",d.state.tokenize=V,b(S)}function ma(a){X(d.stream,
d.state);return f("{"==a?t:n)}function la(a){X(d.stream,d.state);return f("{"==a?t:u)}function Fa(a){return function(e){return"."==e?b(a?Ia:Ja):f(a?u:n)}}function Ja(a,e){if("target"==e)return d.marked="keyword",b(B)}function Ia(a,e){if("target"==e)return d.marked="keyword",b(J)}function ya(a){return":"==a?b(h,t):f(B,k(";"),h)}function Ga(a){if("variable"==a)return d.marked="property",b()}function ca(a,e){if("async"==a)return d.marked="property",b(ca);if("variable"==a||"keyword"==d.style)return d.marked=
"property","get"==e||"set"==e?b(Ka):b(C);if("number"==a||"string"==a)return d.marked=Q?"property":d.style+" property",b(C);if("jsonld-keyword"==a)return b(C);if("modifier"==a)return b(ca);if("["==a)return b(n,k("]"),C);if("spread"==a)return b(n);if(":"==a)return f(C)}function Ka(a){if("variable"!=a)return f(C);d.marked="property";return b(x)}function C(a){if(":"==a)return b(u);if("("==a)return f(x)}function z(a,e){function l(c,h){if(","==c){var g=d.state.lexical;"call"==g.info&&(g.pos=(g.pos||0)+
1);return b(function(b,c){return b==e||c==e?f():f(a)},l)}return c==e||h==e?b():b(k(e))}return function(c,d){return c==e||d==e?b():f(a,l)}}function K(a,e,l){for(var c=3;c<arguments.length;c++)d.cc.push(arguments[c]);return b(m(e,l),z(a,e),h)}function R(a){return"}"==a?b():f(t,R)}function T(a,e){if(L){if(":"==a)return b(w);if("?"==e)return b(T)}}function La(a,e){if("\x3d"==e)return b(u)}function w(a){if("variable"==a)return d.marked="variable-3",b(da);if("{"==a)return b(z(na,"}"));if("("==a)return b(z(oa,
")"),Ma)}function Ma(a){if("\x3d\x3e"==a)return b(w)}function na(a){if("variable"==a||"keyword"==d.style)return d.marked="property",b(na);if(":"==a)return b(w)}function oa(a){if("variable"==a)return b(oa);if(":"==a)return b(w)}function da(a,e){if("\x3c"==e)return b(z(w,"\x3e"),da);if("["==a)return b(k("]"),da)}function Y(){return f(v,T,ea,Na)}function v(a,e){if("modifier"==a)return b(v);if("variable"==a)return G(e),b();if("spread"==a)return b(v);if("["==a)return K(v,"]");if("{"==a)return K(Oa,"}")}
function Oa(a,e){if("variable"==a&&!d.stream.match(/^\s*:/,!1))return G(e),b(ea);"variable"==a&&(d.marked="property");return"spread"==a?b(v):"}"==a?f():b(k(":"),v,ea)}function ea(a,e){if("\x3d"==e)return b(u)}function Na(a){if(","==a)return b(Y)}function ja(a,e){if("keyword b"==a&&"else"==e)return b(m("form","else"),t,h)}function xa(a){if("("==a)return b(m(")"),Pa,k(")"),h)}function Pa(a){return"var"==a?b(Y,k(";"),U):";"==a?b(U):"variable"==a?b(Qa):f(n,k(";"),U)}function Qa(a,e){return"in"==e||"of"==
e?(d.marked="keyword",b(n)):b(B,U)}function U(a,e){return";"==a?b(pa):"in"==e||"of"==e?(d.marked="keyword",b(n)):f(n,k(";"),pa)}function pa(a){")"!=a&&b(n)}function x(a,e){if("*"==e)return d.marked="keyword",b(x);if("variable"==a)return G(e),b(x);if("("==a)return b(H,m(")"),z(aa,")"),h,T,t,I)}function aa(a){return"spread"==a?b(aa):f(v,T,La)}function za(a,e){if("variable"==a)return G(e),b(qa)}function qa(a,e){if("extends"==e)return b(L?w:n,qa);if("{"==a)return b(m("}"),M,h)}function M(a,e){if("variable"==
a||"keyword"==d.style){if(("static"==e||"get"==e||"set"==e||L&&("public"==e||"private"==e||"protected"==e))&&d.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return d.marked="keyword",b(M);d.marked="property";return b(L?Ra:x,M)}if("*"==e)return d.marked="keyword",b(M);if(";"==a)return b(M);if("}"==a)return b()}function Ra(a){return":"==a?b(w):f(x)}function Aa(a,e){return"*"==e?(d.marked="keyword",b(ra,k(";"))):"default"==e?(d.marked="keyword",b(n,k(";"))):f(t)}function Ba(a){return"string"==a?b():f(fa,ra)}
function fa(a,e){if("{"==a)return K(fa,"}");"variable"==a&&G(e);"*"==e&&(d.marked="keyword");return b(Sa)}function Sa(a,e){if("as"==e)return d.marked="keyword",b(fa)}function ra(a,e){if("from"==e)return d.marked="keyword",b(n)}function Ea(a){return"]"==a?b():f(z(u,"]"))}var D=ta.indentUnit,sa=r.statementIndent,Q=r.jsonld,E=r.json||Q,L=r.typescript,W=r.wordCharacters||/[\w$\xa1-\uffff]/,ha=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),d=a("keyword b"),c=a("keyword c"),
f=a("operator"),g={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":d,"do":d,"try":d,"finally":d,"return":c,"break":c,"continue":c,"new":a("new"),"delete":c,"throw":c,"debugger":c,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":f,"typeof":f,"instanceof":f,"true":g,"false":g,"null":g,undefined:g,NaN:g,Infinity:g,"this":a("this"),"class":a("class"),"super":a("atom"),
yield:c,"export":a("export"),"import":a("import"),"extends":c,await:c,async:a("async")};if(L){var d={type:"variable",style:"variable-3"},c={"interface":a("class"),"implements":c,namespace:c,module:a("module"),"enum":a("module"),type:a("type"),"public":a("modifier"),"private":a("modifier"),"protected":a("modifier"),"abstract":a("modifier"),as:f,string:d,number:d,"boolean":d,any:d},h;for(h in c)b[h]=c[h]}return b}(),P=/[+\-*&%=<>!?|~^]/,va=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,
F,N,Ca={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},d={state:null,column:null,marked:null,cc:null},wa={name:"this",next:{name:"arguments"}};h.lex=!0;return{startState:function(a){a={tokenize:A,lastType:"sof",cc:[],lexical:new ia((a||0)-D,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:a||0};r.globalVars&&"object"==typeof r.globalVars&&(a.globalVars=r.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||
(b.lexical.align=!1),b.indented=a.indentation(),X(a,b));if(b.tokenize!=O&&a.eatSpace())return null;var f=b.tokenize(a,b);if("comment"==F)return f;b.lastType="operator"!=F||"++"!=N&&"--"!=N?F:"incdec";a:{var c=F,h=N,g=b.cc;d.state=b;d.stream=a;d.marked=null;d.cc=g;d.style=f;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((g.length?g.pop():E?n:t)(c,h)){for(;g.length&&g[g.length-1].lex;)g.pop()();if(d.marked){f=d.marked;break a}if(c="variable"==c)b:{for(c=b.localVars;c;c=c.next)if(c.name==
h){c=!0;break b}for(g=b.context;g;g=g.prev)for(c=g.vars;c;c=c.next)if(c.name==h){c=!0;break b}c=void 0}if(c){f="variable-2";break a}break a}}return f},indent:function(a,b){if(a.tokenize==O)return q.Pass;if(a.tokenize!=A)return 0;var d=b&&b.charAt(0),c=a.lexical,f;if(!/^\s*else\b/.test(b))for(var g=a.cc.length-1;0<=g;--g){var k=a.cc[g];if(k==h)c=c.prev;else if(k!=ja)break}for(;!("stat"!=c.type&&"form"!=c.type||"}"!=d&&(!(f=a.cc[a.cc.length-1])||f!=B&&f!=J||/^[,\.=+\-*:?[\(]/.test(b)));)c=c.prev;sa&&
")"==c.type&&"stat"==c.prev.type&&(c=c.prev);f=c.type;g=d==f;return"vardef"==f?c.indented+("operator"==a.lastType||","==a.lastType?c.info+1:0):"form"==f&&"{"==d?c.indented:"form"==f?c.indented+D:"stat"==f?(d=c.indented,c="operator"==a.lastType||","==a.lastType||P.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),d+(c?sa||D:0)):"switch"!=c.info||g||0==r.doubleIndentSwitch?c.align?c.column+(g?0:1):c.indented+(g?0:D):c.indented+(/^(?:case|default)\b/.test(b)?D:2*D)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,
blockCommentStart:E?null:"/*",blockCommentEnd:E?null:"*/",lineComment:E?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:E?"json":"javascript",jsonldMode:Q,jsonMode:E,expressionAllowed:ga,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=n&&b!=u||a.cc.pop()}}});q.registerHelper("wordChars","javascript",/[\w$]/);q.defineMIME("text/javascript","javascript");q.defineMIME("text/ecmascript","javascript");q.defineMIME("application/javascript","javascript");q.defineMIME("application/x-javascript",
"javascript");q.defineMIME("application/ecmascript","javascript");q.defineMIME("application/json",{name:"javascript",json:!0});q.defineMIME("application/x-json",{name:"javascript",json:!0});q.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});q.defineMIME("text/typescript",{name:"javascript",typescript:!0});q.defineMIME("application/typescript",{name:"javascript",typescript:!0})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:xml', location = '/static/bower/CodeMirror/mode/xml/xml.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){var D={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},E={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};g.defineMode("xml",function(F,p){function h(a,c){function b(b){c.tokenize=b;return b(a,c)}var d=a.next();if("\x3c"==d){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?b(q("atom","]]\x3e")):null:a.match("--")?b(q("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),b(r(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),c.tokenize=q("meta","?\x3e"),
"meta";l=a.eat("/")?"closeTag":"openTag";c.tokenize=t;return"tag bracket"}if("\x26"==d)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function t(a,c){var b=a.next();if("\x3e"==b||"/"==b&&a.eat("\x3e"))return c.tokenize=h,l="\x3e"==b?"endTag":"selfcloseTag","tag bracket";if("\x3d"==b)return l="equals",null;if("\x3c"==b)return c.tokenize=h,c.state=n,c.tagName=c.tagStart=
null,(b=c.tokenize(a,c))?b+" tag error":"tag error";if(/[\'\"]/.test(b))return c.tokenize=G(b),c.stringStartCol=a.column(),c.tokenize(a,c);a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function G(a){var c=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=t;break}return"string"};c.isInAttribute=!0;return c}function q(a,c){return function(b,d){for(;!b.eol();){if(b.match(c)){d.tokenize=h;break}b.next()}return a}}function r(a){return function(c,b){for(var d;null!=(d=c.next());){if("\x3c"==
d)return b.tokenize=r(a+1),b.tokenize(c,b);if("\x3e"==d)if(1==a){b.tokenize=h;break}else return b.tokenize=r(a-1),b.tokenize(c,b)}return"meta"}}function H(a,c,b){this.prev=a.context;this.tagName=c;this.indent=a.indented;this.startOfLine=b;if(e.doNotIndent.hasOwnProperty(c)||a.context&&a.context.noIndent)this.noIndent=!0}function u(a){a.context&&(a.context=a.context.prev)}function x(a,c){for(var b;a.context;){b=a.context.tagName;if(!e.contextGrabbers.hasOwnProperty(b)||!e.contextGrabbers[b].hasOwnProperty(c))break;
u(a)}}function n(a,c,b){return"openTag"==a?(b.tagStart=c.column(),y):"closeTag"==a?I:n}function y(a,c,b){if("word"==a)return b.tagName=c.current(),f="tag",k;f="error";return y}function I(a,c,b){if("word"==a){a=c.current();b.context&&b.context.tagName!=a&&e.implicitlyClosed.hasOwnProperty(b.context.tagName)&&u(b);if(b.context&&b.context.tagName==a||!1===e.matchClosing)return f="tag",v;f="tag error";return z}f="error";return z}function v(a,c,b){if("endTag"!=a)return f="error",v;u(b);return n}function z(a,
c,b){f="error";return v(a,c,b)}function k(a,c,b){if("word"==a)return f="attribute",J;if("endTag"==a||"selfcloseTag"==a){c=b.tagName;var d=b.tagStart;b.tagName=b.tagStart=null;"selfcloseTag"==a||e.autoSelfClosers.hasOwnProperty(c)?x(b,c):(x(b,c),b.context=new H(b,c,d==b.indented));return n}f="error";return k}function J(a,c,b){if("equals"==a)return A;e.allowMissing||(f="error");return k(a,c,b)}function A(a,c,b){if("string"==a)return B;if("word"==a&&e.allowUnquoted)return f="string",k;f="error";return k(a,
c,b)}function B(a,c,b){return"string"==a?B:k(a,c,b)}var w=F.indentUnit,e={},C=p.htmlMode?D:E,m;for(m in C)e[m]=C[m];for(m in p)e[m]=p[m];var l,f;h.isInText=!0;return{startState:function(a){var c={tokenize:h,state:n,indented:a||0,tagName:null,tagStart:null,context:null};null!=a&&(c.baseIndent=a);return c},token:function(a,c){!c.tagName&&a.sol()&&(c.indented=a.indentation());if(a.eatSpace())return null;l=null;var b=c.tokenize(a,c);(b||l)&&"comment"!=b&&(f=null,c.state=c.state(l||b,a,c),f&&(b="error"==
f?b+" error":f));return b},indent:function(a,c,b){var d=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+w;if(d&&d.noIndent)return g.Pass;if(a.tokenize!=t&&a.tokenize!=h)return b?b.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==e.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+w*(e.multilineTagIndentFactor||1);if(e.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;if((c=c&&/^<(\/)?([\w_:\.-]*)/.exec(c))&&c[1])for(;d;)if(d.tagName==
c[2]){d=d.prev;break}else if(e.implicitlyClosed.hasOwnProperty(d.tagName))d=d.prev;else break;else if(c)for(;d;)if((b=e.contextGrabbers[d.tagName])&&b.hasOwnProperty(c[2]))d=d.prev;else break;for(;d&&d.prev&&!d.startOfLine;)d=d.prev;return d?d.indent+w:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml",skipAttribute:function(a){a.state==A&&(a.state=k)}}});g.defineMIME("text/xml",
"xml");g.defineMIME("application/xml","xml");g.mimeModes.hasOwnProperty("text/html")||g.defineMIME("text/html",{name:"xml",htmlMode:!0})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:htmlmixed', location = '/static/bower/CodeMirror/mode/htmlmixed/htmlmixed.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],d):d(CodeMirror)})(function(d){function q(h){var c=n[h];return c?c:n[h]=new RegExp("\\s+"+h+"\\s*\x3d\\s*('|\")?([^'\"]+)('|\")?\\s*")}function r(h,c){var d=h.match(q(c));return d?/^\s*(.*?)\s*$/.exec(d[2])[1]:
""}function p(d,c){for(var g in d)for(var f=c[g]||(c[g]=[]),k=d[g],e=k.length-1;0<=e;e--)f.unshift(k[e])}function t(d,c){for(var g=0;g<d.length;g++){var f=d[g];if(!f[0]||f[1].test(r(c,f[0])))return f[2]}}var u={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],
[null,null,"css"]]},n={};d.defineMode("htmlmixed",function(h,c){function g(a,b){var c=f.token(a,b.htmlState),e=/\btag\b/.test(c),l;if(e&&!/[<>\s\/]/.test(a.current())&&(l=b.htmlState.tagName&&b.htmlState.tagName.toLowerCase())&&k.hasOwnProperty(l))b.inTag=l+" ";else if(b.inTag&&e&&/>$/.test(a.current())){e=/^([\S]+) (.*)/.exec(b.inTag);b.inTag=null;l="\x3e"==a.current()&&t(k[e[1]],e[2]);l=d.getMode(h,l);var m=new RegExp("^\x3c/s*"+e[1]+"s*\x3e","i"),n=new RegExp("\x3c/s*"+e[1]+"s*\x3e","i");b.token=
function(a,b){if(a.match(m,!1))return b.token=g,b.localState=b.localMode=null;var d=b.localMode.token(a,b.localState),c=a.current(),e=c.search(n);-1<e?a.backUp(c.length-e):c.match(/<\/?$/)&&(a.backUp(c.length),a.match(n,!1)||a.match(c));return d};b.localMode=l;b.localState=d.startState(l,f.indent(b.htmlState,""))}else b.inTag&&(b.inTag+=a.current(),a.eol()&&(b.inTag+=" "));return c}var f=d.getMode(h,{name:"xml",htmlMode:!0,multilineTagIndentFactor:c.multilineTagIndentFactor,multilineTagIndentPastTag:c.multilineTagIndentPastTag}),
k={},e=c&&c.tags,m=c&&c.scriptTypes;p(u,k);e&&p(e,k);if(m)for(e=m.length-1;0<=e;e--)k.script.unshift(["type",m[e].matches,m[e].mode]);return{startState:function(){var a=d.startState(f);return{token:g,inTag:null,localMode:null,localState:null,htmlState:a}},copyState:function(a){var b;a.localState&&(b=d.copyState(a.localMode,a.localState));return{token:a.token,inTag:a.inTag,localMode:a.localMode,localState:b,htmlState:d.copyState(f,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,
b){return!a.localMode||/^\s*<\//.test(b)?f.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b):d.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||f}}}},"xml","javascript","css");d.defineMIME("text/html","htmlmixed")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:markdown', location = '/static/bower/CodeMirror/mode/markdown/markdown.js' */
(function(h){"object"==typeof exports&&"object"==typeof module?h(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],h):h(CodeMirror)})(function(h){h.defineMode("markdown",function(v,d){function r(b,a,c){a.f=a.inline=c;return c(b,a)}function t(b){return!b||!/\S/.test(b.string)}function w(b){b.linkTitle=!1;b.em=!1;b.strong=!1;b.strikethrough=!1;b.quote=0;b.indentedCode=!1;x&&b.f==u&&(b.f=
m,b.block=p);b.trailingSpace=0;b.trailingSpaceNewLine=!1;b.prevLine=b.thisLine;return b.thisLine=null}function p(b,a){var c=b.sol(),e=!1!==a.list,l=a.indentedCode;a.indentedCode=!1;e&&(0<=a.indentationDiff?(4>a.indentationDiff&&(a.indentation-=a.indentationDiff),a.list=null):a.list=0<a.indentation?null:!1);var k=null;if(4<=a.indentationDiff)return b.skipToEnd(),l||t(a.prevLine)?(a.indentation-=4,a.indentedCode=!0,g.code):null;if(b.eatSpace())return null;if((k=b.match(E))&&6>=k[1].length)return a.header=
k[1].length,d.highlightFormatting&&(a.formatting="header"),a.f=a.inline,f(a);if(t(a.prevLine)||a.quote||e||l||!(k=b.match(F))){if(b.eat("\x3e"))return a.quote=c?1:a.quote+1,d.highlightFormatting&&(a.formatting="quote"),b.eatSpace(),f(a);if("["===b.peek())return r(b,a,G);if(b.match(H,!0))return a.hr=!0,g.hr;if((t(a.prevLine)||e)&&(b.match(y,!1)||b.match(z,!1))){c=null;b.match(y,!0)?c="ul":(b.match(z,!0),c="ol");a.indentation=b.column()+b.current().length;for(a.list=!0;a.listStack&&b.column()<a.listStack[a.listStack.length-
1];)a.listStack.pop();a.listStack.push(a.indentation);d.taskLists&&b.match(A,!1)&&(a.taskList=!0);a.f=a.inline;d.highlightFormatting&&(a.formatting=["list","list-"+c]);return f(a)}if(d.fencedCodeBlocks&&(k=b.match(I,!0)))return a.fencedChars=k[1],c=k[2],h.findModeByName&&(e=h.findModeByName(c))&&(c=e.mime||e.mimes[0]),c=h.getMode(v,c),a.localMode="null"==c.name?null:c,a.localMode&&(a.localState=h.startState(a.localMode)),a.f=a.block=J,d.highlightFormatting&&(a.formatting="code-block"),a.code=-1,f(a)}else return a.header=
"\x3d"==k[0].charAt(0)?1:2,d.highlightFormatting&&(a.formatting="header"),a.f=a.inline,f(a);return r(b,a,a.inline)}function u(b,a){var c=n.token(b,a.htmlState);if(!x){var d=h.innerMode(n,a.htmlState);if("xml"==d.mode.name&&null===d.state.tagStart&&!d.state.context&&d.state.tokenize.isInText||a.md_inside&&-1<b.current().indexOf("\x3e"))a.f=m,a.block=p,a.htmlState=null}return c}function J(b,a){if(a.fencedChars&&b.match(a.fencedChars,!1))return a.localMode=a.localState=null,a.f=a.block=K,null;if(a.localMode)return a.localMode.token(b,
a.localState);b.skipToEnd();return g.code}function K(b,a){b.match(a.fencedChars);a.block=p;a.f=m;a.fencedChars=null;d.highlightFormatting&&(a.formatting="code-block");a.code=1;var c=f(a);a.code=0;return c}function f(b){var a=[];if(b.formatting){a.push(g.formatting);"string"===typeof b.formatting&&(b.formatting=[b.formatting]);for(var c=0;c<b.formatting.length;c++)a.push(g.formatting+"-"+b.formatting[c]),"header"===b.formatting[c]&&a.push(g.formatting+"-"+b.formatting[c]+"-"+b.header),"quote"===b.formatting[c]&&
(!d.maxBlockquoteDepth||d.maxBlockquoteDepth>=b.quote?a.push(g.formatting+"-"+b.formatting[c]+"-"+b.quote):a.push("error"))}if(b.taskOpen)return a.push("meta"),a.length?a.join(" "):null;if(b.taskClosed)return a.push("property"),a.length?a.join(" "):null;b.linkHref?a.push(g.linkHref,"url"):(b.strong&&a.push(g.strong),b.em&&a.push(g.em),b.strikethrough&&a.push(g.strikethrough),b.linkText&&a.push(g.linkText),b.code&&a.push(g.code),b.image&&a.push(g.image),b.imageAltText&&a.push(g.imageAltText,"link"),
b.imageMarker&&a.push(g.imageMarker));b.header&&a.push(g.header,g.header+"-"+b.header);b.quote&&(a.push(g.quote),!d.maxBlockquoteDepth||d.maxBlockquoteDepth>=b.quote?a.push(g.quote+"-"+b.quote):a.push(g.quote+"-"+d.maxBlockquoteDepth));!1!==b.list&&((c=(b.listStack.length-1)%3)?1===c?a.push(g.list2):a.push(g.list3):a.push(g.list1));b.trailingSpaceNewLine?a.push("trailing-space-new-line"):b.trailingSpace&&a.push("trailing-space-"+(b.trailingSpace%2?"a":"b"));return a.length?a.join(" "):null}function L(b,
a){if(b.match(M,!0))return f(a)}function m(b,a){var c=a.text(b,a);if("undefined"!==typeof c)return c;if(a.list)return a.list=null,f(a);if(a.taskList)return"x"!==b.match(A,!0)[1]?a.taskOpen=!0:a.taskClosed=!0,d.highlightFormatting&&(a.formatting="task"),a.taskList=!1,f(a);a.taskOpen=!1;a.taskClosed=!1;if(a.header&&b.match(/^#+$/,!0))return d.highlightFormatting&&(a.formatting="header"),f(a);var c=b.sol(),e=b.next();if(a.linkTitle){a.linkTitle=!1;var l=e;"("===e&&(l=")");l=(l+"").replace(/([.?*+^$[\]\\(){}|-])/g,
"\\$1");if(b.match(new RegExp("^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l),!0))return g.linkHref}if("`"===e){c=a.formatting;d.highlightFormatting&&(a.formatting="code");b.eatWhile("`");e=b.current().length;if(0==a.code)return a.code=e,f(a);if(e==a.code)return c=f(a),a.code=0,c;a.formatting=c;return f(a)}if(a.code)return f(a);if("\\"===e&&(b.next(),d.highlightFormatting))return c=f(a),e=g.formatting+"-escape",c?c+" "+e:e;if("!"===e&&b.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.imageMarker=!0,a.image=
!0,d.highlightFormatting&&(a.formatting="image"),f(a);if("["===e&&a.imageMarker)return a.imageMarker=!1,a.imageAltText=!0,d.highlightFormatting&&(a.formatting="image"),f(a);if("]"===e&&a.imageAltText)return d.highlightFormatting&&(a.formatting="image"),c=f(a),a.imageAltText=!1,a.image=!1,a.inline=a.f=B,c;if("["===e&&b.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1)&&!a.image)return a.linkText=!0,d.highlightFormatting&&(a.formatting="link"),f(a);if("]"===e&&a.linkText&&b.match(/\(.*?\)| ?\[.*?\]/,!1))return d.highlightFormatting&&
(a.formatting="link"),c=f(a),a.linkText=!1,a.inline=a.f=B,c;if("\x3c"===e&&b.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return a.f=a.inline=C,d.highlightFormatting&&(a.formatting="link"),c=f(a),(c?c+" ":"")+g.linkInline;if("\x3c"===e&&b.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return a.f=a.inline=C,d.highlightFormatting&&(a.formatting="link"),c=(c=f(a))?c+" ":"",c+g.linkEmail;if("\x3c"===e&&b.match(/^(!--|\w)/,!1))return c=b.string.indexOf("\x3e",b.pos),-1!=c&&(c=b.string.substring(b.start,c),
/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(c)&&(a.md_inside=!0)),b.backUp(1),a.htmlState=h.startState(n),c=u,a.f=a.block=c,c(b,a);if("\x3c"===e&&b.match(/^\/\w*?>/))return a.md_inside=!1,"tag";l=!1;if(!d.underscoresBreakWords&&"_"===e&&"_"!==b.peek()&&b.match(/(\w)/,!1)){var k=b.pos-2;0<=k&&(k=b.string.charAt(k),"_"!==k&&k.match(/(\w)/,!1)&&(l=!0))}if("*"===e||"_"===e&&!l){if(!c||" "!==b.peek()){if(a.strong===e&&b.eat(e))return d.highlightFormatting&&(a.formatting="strong"),c=f(a),a.strong=!1,c;
if(!a.strong&&b.eat(e))return a.strong=e,d.highlightFormatting&&(a.formatting="strong"),f(a);if(a.em===e)return d.highlightFormatting&&(a.formatting="em"),c=f(a),a.em=!1,c;if(!a.em)return a.em=e,d.highlightFormatting&&(a.formatting="em"),f(a)}}else if(" "===e&&(b.eat("*")||b.eat("_"))){if(" "===b.peek())return f(a);b.backUp(1)}if(d.strikethrough)if("~"===e&&b.eatWhile(e)){if(a.strikethrough)return d.highlightFormatting&&(a.formatting="strikethrough"),c=f(a),a.strikethrough=!1,c;if(b.match(/^[^\s]/,
!1))return a.strikethrough=!0,d.highlightFormatting&&(a.formatting="strikethrough"),f(a)}else if(" "===e&&b.match(/^~~/,!0)){if(" "===b.peek())return f(a);b.backUp(2)}" "===e&&(b.match(/ +$/,!1)?a.trailingSpace++:a.trailingSpace&&(a.trailingSpaceNewLine=!0));return f(a)}function C(b,a){if("\x3e"===b.next()){a.f=a.inline=m;d.highlightFormatting&&(a.formatting="link");var c=f(a);return(c?c+" ":"")+g.linkInline}b.match(/^[^>]+/,!0);return g.linkInline}function B(b,a){if(b.eatSpace())return null;var c=
b.next();return"("===c||"["===c?(a.f=a.inline=N("("===c?")":"]",0),d.highlightFormatting&&(a.formatting="link-string"),a.linkHref=!0,f(a)):"error"}function N(b){return function(a,c){if(a.next()===b){c.f=c.inline=m;d.highlightFormatting&&(c.formatting="link-string");var e=f(c);c.linkHref=!1;return e}a.match(O[b]);c.linkHref=!0;return f(c)}}function G(b,a){return b.match(/^([^\]\\]|\\.)*\]:/,!1)?(a.f=P,b.next(),d.highlightFormatting&&(a.formatting="link"),a.linkText=!0,f(a)):r(b,a,m)}function P(b,a){if(b.match(/^\]:/,
!0)){a.f=a.inline=Q;d.highlightFormatting&&(a.formatting="link");var c=f(a);a.linkText=!1;return c}b.match(/^([^\]\\]|\\.)+/,!0);return g.linkText}function Q(b,a){if(b.eatSpace())return null;b.match(/^[^\s]+/,!0);void 0===b.peek()?a.linkTitle=!0:b.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);a.f=a.inline=m;return g.linkHref+" url"}var n=h.getMode(v,"text/html"),x="null"==n.name;void 0===d.highlightFormatting&&(d.highlightFormatting=!1);void 0===d.maxBlockquoteDepth&&
(d.maxBlockquoteDepth=0);void 0===d.underscoresBreakWords&&(d.underscoresBreakWords=!0);void 0===d.taskLists&&(d.taskLists=!1);void 0===d.strikethrough&&(d.strikethrough=!1);void 0===d.tokenTypeOverrides&&(d.tokenTypeOverrides={});var g={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",
em:"em",strong:"strong",strikethrough:"strikethrough"},q;for(q in g)g.hasOwnProperty(q)&&d.tokenTypeOverrides[q]&&(g[q]=d.tokenTypeOverrides[q]);var H=/^([*\-_])(?:\s*\1){2,}\s*$/,y=/^[*\-+]\s+/,z=/^[0-9]+([.)])\s+/,A=/^\[(x| )\](?=\s)/,E=d.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,F=/^ *(?:\={1,}|-{1,})\s*$/,M=/^[^#!\[\]*_\\<>` "'(~]+/,I=new RegExp("^("+(!0===d.fencedCodeBlocks?"~~~+|```+":d.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),O={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,
"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/},D={startState:function(){return{f:p,prevLine:null,thisLine:null,block:p,htmlState:null,indentation:0,inline:m,text:L,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(b){return{f:b.f,prevLine:b.prevLine,thisLine:b.thisLine,block:b.block,htmlState:b.htmlState&&h.copyState(n,
b.htmlState),indentation:b.indentation,localMode:b.localMode,localState:b.localMode?h.copyState(b.localMode,b.localState):null,inline:b.inline,text:b.text,formatting:!1,linkTitle:b.linkTitle,code:b.code,em:b.em,strong:b.strong,strikethrough:b.strikethrough,header:b.header,hr:b.hr,taskList:b.taskList,list:b.list,listStack:b.listStack.slice(0),quote:b.quote,indentedCode:b.indentedCode,trailingSpace:b.trailingSpace,trailingSpaceNewLine:b.trailingSpaceNewLine,md_inside:b.md_inside,fencedChars:b.fencedChars}},
token:function(b,a){a.formatting=!1;if(b!=a.thisLine){var c=a.header||a.hr;a.header=0;a.hr=!1;if(b.match(/^\s*$/,!0)||c){w(a);if(!c)return null;a.prevLine=null}a.prevLine=a.thisLine;a.thisLine=b;a.taskList=!1;a.trailingSpace=0;a.trailingSpaceNewLine=!1;a.f=a.block;c=b.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;a.indentationDiff=Math.min(c-a.indentation,4);a.indentation+=a.indentationDiff;if(0<c)return null}return a.f(b,a)},innerMode:function(b){return b.block==u?{state:b.htmlState,mode:n}:b.localState?
{state:b.localState,mode:b.localMode}:{state:b,mode:D}},blankLine:w,getType:f,fold:"markdown"};return D},"xml");h.defineMIME("text/x-markdown","markdown")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:perl', location = '/static/bower/CodeMirror/mode/perl/perl.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function g(d,e){return d.string.charAt(d.pos+(e||0))}function q(d,e){if(e){var g=d.pos-e;return d.string.substr(0<=g?g:0,e)}return d.string.substr(0,d.pos-1)}function p(d,e){var g=d.string.length,m=g-d.pos+1;return d.string.substr(d.pos,e&&e<g?e:m)}function e(d,e){var g=d.pos+e,m;0>=g?d.pos=0:g>=(m=d.string.length-
1)?d.pos=m:d.pos=g}k.defineMode("perl",function(){function d(a,c,d,e,b){c.chain=null;c.style=null;c.tail=null;c.tokenize=function(a,c){for(var f=!1,g,k=0;g=a.next();){if(g===d[k]&&!f){void 0!==d[++k]?(c.chain=d[k],c.style=e,c.tail=b):b&&a.eatWhile(b);c.tokenize=n;break}f=!f&&"\\"==g}return e};return c.tokenize(a,c)}function k(a,c,d){c.tokenize=function(a,b){a.string==d&&(b.tokenize=n);a.skipToEnd();return"string"};return c.tokenize(a,c)}function n(a,c){if(a.eatSpace())return null;if(c.chain)return d(a,
c,c.chain,c.style,c.tail);if(a.match(/^\-?[\d\.]/,!1)&&a.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(a.match(/^<<(?=\w)/))return a.eatWhile(/\w/),k(a,c,a.current().substr(2));if(a.sol()&&a.match(/^\=item(?!\w)/))return k(a,c,"\x3dcut");var h=a.next();if('"'==h||"'"==h){if(q(a,3)=="\x3c\x3c"+h){var l=a.pos;a.eatWhile(/\w/);var b=a.current().substr(1);if(b&&a.eat(h))return k(a,c,b);a.pos=l}return d(a,c,[h],"string")}if("q"==h&&(b=g(a,-2),!b||
!/\w/.test(b)))if(b=g(a,0),"x"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string-2",f);if("["==b)return e(a,2),d(a,c,["]"],"string-2",f);if("{"==b)return e(a,2),d(a,c,["}"],"string-2",f);if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"string-2",f);if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string-2",f)}else if("q"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string");if("["==b)return e(a,2),d(a,c,["]"],"string");if("{"==b)return e(a,2),d(a,c,["}"],"string");if("\x3c"==b)return e(a,
2),d(a,c,["\x3e"],"string");if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string")}else if("w"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"bracket");if("["==b)return e(a,2),d(a,c,["]"],"bracket");if("{"==b)return e(a,2),d(a,c,["}"],"bracket");if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"bracket");if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"bracket")}else if("r"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string-2",f);if("["==b)return e(a,2),d(a,c,["]"],"string-2",f);
if("{"==b)return e(a,2),d(a,c,["}"],"string-2",f);if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"string-2",f);if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string-2",f)}else if(/[\^'"!~\/(\[{<]/.test(b)){if("("==b)return e(a,1),d(a,c,[")"],"string");if("["==b)return e(a,1),d(a,c,["]"],"string");if("{"==b)return e(a,1),d(a,c,["}"],"string");if("\x3c"==b)return e(a,1),d(a,c,["\x3e"],"string");if(/[\^'"!~\/]/.test(b))return d(a,c,[a.eat(b)],"string")}if("m"==h&&(b=g(a,-2),!b||!/\w/.test(b))&&(b=
a.eat(/[(\[{<\^'"!~\/]/))){if(/[\^'"!~\/]/.test(b))return d(a,c,[b],"string-2",f);if("("==b)return d(a,c,[")"],"string-2",f);if("["==b)return d(a,c,["]"],"string-2",f);if("{"==b)return d(a,c,["}"],"string-2",f);if("\x3c"==b)return d(a,c,["\x3e"],"string-2",f)}if("s"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat(/[(\[{<\^'"!~\/]/)))||"y"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat(/[(\[{<\^'"!~\/]/)))||"t"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat("r")))&&(b=a.eat(/[(\[{<\^'"!~\/]/)))return"["==
b?d(a,c,["]","]"],"string-2",f):"{"==b?d(a,c,["}","}"],"string-2",f):"\x3c"==b?d(a,c,["\x3e","\x3e"],"string-2",f):"("==b?d(a,c,[")",")"],"string-2",f):d(a,c,[b,b],"string-2",f);if("`"==h)return d(a,c,[h],"variable-2");if("/"==h)return/~\s*$/.test(q(a))?d(a,c,[h],"string-2",f):"operator";if("$"==h){l=a.pos;if(a.eatWhile(/\d/)||a.eat("{")&&a.eatWhile(/\d/)&&a.eat("}"))return"variable-2";a.pos=l}if(/[$@%]/.test(h)){l=a.pos;if(a.eat("^")&&a.eat(/[A-Z]/)||!/[@$%&]/.test(g(a,-2))&&a.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/))if(b=
a.current(),m[b])return"variable-2";a.pos=l}if(/[$@%&]/.test(h)&&(a.eatWhile(/[\w$\[\]]/)||a.eat("{")&&a.eatWhile(/[\w$\[\]]/)&&a.eat("}")))return b=a.current(),m[b]?"variable-2":"variable";if("#"==h&&"$"!=g(a,-2))return a.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(h)){l=a.pos;a.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/);if(m[a.current()])return"operator";a.pos=l}if("_"==h&&1==a.pos){if("_END__"==p(a,6))return d(a,c,["\x00"],"comment");if("_DATA__"==p(a,7))return d(a,c,["\x00"],"variable-2");
if("_C__"==p(a,7))return d(a,c,["\x00"],"string")}if(/\w/.test(h)){l=a.pos;if("{"==g(a,-2)&&("}"==g(a,0)||a.eatWhile(/\w/)&&"}"==g(a,0)))return"string";a.pos=l}if(/[A-Z]/.test(h)){var n=g(a,-2),l=a.pos;a.eatWhile(/[A-Z_]/);if(/[\da-z]/.test(g(a,0)))a.pos=l;else{b=m[a.current()];if(!b)return"meta";b[1]&&(b=b[0]);return":"!=n?1==b?"keyword":2==b?"def":3==b?"atom":4==b?"operator":5==b?"variable-2":"meta":"meta"}}if(/[a-zA-Z_]/.test(h)){n=g(a,-2);a.eatWhile(/\w/);b=m[a.current()];if(!b)return"meta";b[1]&&
(b=b[0]);return":"!=n?1==b?"keyword":2==b?"def":3==b?"atom":4==b?"operator":5==b?"variable-2":"meta":"meta"}return null}var m={"-\x3e":4,"++":4,"--":4,"**":4,"\x3d~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"\x3c\x3c":4,"\x3e\x3e":4,"\x3c":4,"\x3e":4,"\x3c\x3d":4,"\x3e\x3d":4,lt:4,gt:4,le:4,ge:4,"\x3d\x3d":4,"!\x3d":4,"\x3c\x3d\x3e":4,eq:4,ne:4,cmp:4,"~~":4,"\x26":4,"|":4,"^":4,"\x26\x26":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"\x3d":4,"+\x3d":4,"-\x3d":4,"*\x3d":4,",":4,"\x3d\x3e":4,
"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$\x3c":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$\x3e":5,
$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$\x26":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,
$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,
"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$\x3d":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,
"$[":5,$OLD_PERL_VERSION:5,"$]":5,"if":[1,1],elsif:[1,1],"else":[1,1],"while":[1,1],unless:[1,1],"for":[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,"break":1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,"continue":[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,"default":1,defined:1,"delete":1,die:1,"do":1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,
exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,"goto":1,grep:1,hex:1,"import":1,index:1,"int":1,ioctl:1,join:1,keys:1,
kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,"new":1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,"package":1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,"return":1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,
say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,
ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},f=/[goseximacplud]/;return{startState:function(){return{tokenize:n,chain:null,style:null,tail:null}},token:function(a,c){return(c.tokenize||n)(a,c)},lineComment:"#"}});k.registerHelper("wordChars","perl",/[\w$]/);k.defineMIME("text/x-perl","perl")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:php', location = '/static/bower/CodeMirror/mode/php/php.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],g):g(CodeMirror)})(function(g){function h(c){var a={};c=c.split(" ");for(var d=0;d<c.length;++d)a[c[d]]=!0;return a}function l(c,a,d){return 0==c.length?k(a):function(e,f){for(var b=c[0],m=0;m<b.length;m++)if(e.match(b[m][0]))return f.tokenize=
l(c.slice(1),a),b[m][1];f.tokenize=k(a,d);return"string"}}function k(c,a){return function(d,e){var f;if(!1!==a&&d.match("${",!1)||d.match("{$",!1))e.tokenize=null,f="string";else if(!1!==a&&d.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))d.match("[",!1)&&(e.tokenize=l([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],c,a)),d.match(/\-\>\w/,!1)&&(e.tokenize=l([[["-\x3e",null]],[[/[\w]+/,"variable"]]],c,a)),f="variable-2";else{for(f=!1;!d.eol()&&
(f||!1===a||!d.match("{$",!1)&&!d.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!f&&d.match(c)){e.tokenize=null;e.tokStack.pop();e.tokStack.pop();break}f="\\"==d.next()&&!f}f="string"}return f}}g.registerHelper("hintWords","php","abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__ func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count".split(" "));
g.registerHelper("wordChars","php",/[\w$]/);var n={name:"clike",helperType:"php",keywords:h("abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally"),
blockKeywords:h("catch do else elseif for foreach if switch try while finally"),defKeywords:h("class function interface namespace trait"),atoms:h("true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__"),builtin:h("func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count"),
multiLineStrings:!0,hooks:{$:function(c){c.eatWhile(/[\w\$_]/);return"variable-2"},"\x3c":function(c,a){var d;if(d=c.match(/<<\s*/)){var e=c.eat(/['"]/);c.eatWhile(/[\w\.]/);d=c.current().slice(d[0].length+(e?2:1));e&&c.eat(e);if(d)return(a.tokStack||(a.tokStack=[])).push(d,0),a.tokenize=k(d,"'"!=e),"string"}return!1},"#":function(c){for(;!c.eol()&&!c.match("?\x3e",!1);)c.next();return"comment"},"/":function(c){if(c.eat("/")){for(;!c.eol()&&!c.match("?\x3e",!1);)c.next();return"comment"}return!1},
'"':function(c,a){(a.tokStack||(a.tokStack=[])).push('"',0);a.tokenize=k('"');return"string"},"{":function(c,a){a.tokStack&&a.tokStack.length&&a.tokStack[a.tokStack.length-1]++;return!1},"}":function(c,a){a.tokStack&&0<a.tokStack.length&&!--a.tokStack[a.tokStack.length-1]&&(a.tokenize=k(a.tokStack[a.tokStack.length-2]));return!1}}};g.defineMode("php",function(c,a){var d=g.getMode(c,"text/html"),e=g.getMode(c,n);return{startState:function(){var f=g.startState(d),b=a.startOpen?g.startState(e):null;
return{html:f,php:b,curMode:a.startOpen?e:d,curState:a.startOpen?b:f,pending:null}},copyState:function(f){var b=g.copyState(d,f.html),a=f.php,a=a&&g.copyState(e,a);return{html:b,php:a,curMode:f.curMode,curState:f.curMode==d?b:a,pending:f.pending}},token:function(a,b){var c=b.curMode==e;a.sol()&&b.pending&&'"'!=b.pending&&"'"!=b.pending&&(b.pending=null);if(c)return c&&null==b.php.tokenize&&a.match("?\x3e")?(b.curMode=d,b.curState=b.html,b.php.context.prev||(b.php=null),"meta"):e.token(a,b.curState);
if(a.match(/^<\?\w*/))return b.curMode=e,b.php||(b.php=g.startState(e,d.indent(b.html,""))),b.curState=b.php,"meta";if('"'==b.pending||"'"==b.pending){for(;!a.eol()&&a.next()!=b.pending;);c="string"}else b.pending&&a.pos<b.pending.end?(a.pos=b.pending.end,c=b.pending.style):c=d.token(a,b.curState);b.pending&&(b.pending=null);var h=a.current(),k=h.search(/<\?/),l;-1!=k&&("string"==c&&(l=h.match(/[\'\"]$/))&&!/\?>/.test(h)?b.pending=l[0]:b.pending={end:a.pos,style:c},a.backUp(h.length-k));return c},
indent:function(a,b){return a.curMode!=e&&/^\s*<\//.test(b)||a.curMode==e&&/^\?>/.test(b)?d.indent(a.html,b):a.curMode.indent(a.curState,b)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(a){return{state:a.curState,mode:a.curMode}}}},"htmlmixed","clike");g.defineMIME("application/x-httpd-php","php");g.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0});g.defineMIME("text/x-php",n)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:python', location = '/static/bower/CodeMirror/mode/python/python.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){function n(f){return new RegExp("^(("+f.join(")|(")+"))\\b")}function f(f){return f.scopes[f.scopes.length-1]}var A=n(["and","or","not","is"]),r="as assert break class continue def del elif else except finally for from global if import lambda pass raise return try while with yield in".split(" "),t="abs all any bin bool bytearray callable chr classmethod compile complex delattr dict dir divmod enumerate eval filter float format frozenset getattr globals hasattr hash help hex id input int isinstance issubclass iter len list locals map max memoryview min next object oct open ord pow property range repr reversed round set setattr slice sorted staticmethod str sum super tuple type vars zip __import__ NotImplemented Ellipsis __debug__".split(" ");
g.registerHelper("hintWords","python",r.concat(t));g.defineMode("python",function(q,c){function l(a,b){a.sol()&&(b.indent=a.indentation());if(a.sol()&&"py"==f(b).type){var d=f(b).offset;if(a.eatSpace()){var e=a.indentation();e>d?u(b):e<d&&v(a,b)&&(b.errorToken=!0);return null}e=w(a,b);0<d&&v(a,b)&&(e+=" error");return e}return w(a,b)}function w(a,b){if(a.eatSpace())return null;if("#"==a.peek())return a.skipToEnd(),"comment";if(a.match(/^[0-9\.]/,!1)){var d=!1;a.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&
(d=!0);a.match(/^\d+\.\d*/)&&(d=!0);a.match(/^\.\d+/)&&(d=!0);if(d)return a.eat(/J/i),"number";d=!1;a.match(/^0x[0-9a-f]+/i)&&(d=!0);a.match(/^0b[01]+/i)&&(d=!0);a.match(/^0o[0-7]+/i)&&(d=!0);a.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(a.eat(/J/i),d=!0);a.match(/^0(?![\dx])/i)&&(d=!0);if(d)return a.eat(/L/i),"number"}if(a.match(x))return b.tokenize=B(a.current()),b.tokenize(a,b);if(a.match(C)||a.match(D))return"punctuation";if(a.match(E)||a.match(y))return"operator";if(a.match(F))return"punctuation";if("."==
b.lastToken&&a.match(m))return"property";if(a.match(G)||a.match(A))return"keyword";if(a.match(H))return"builtin";if(a.match(/^(self|cls)\b/))return"variable-2";if(a.match(m))return"def"==b.lastToken||"class"==b.lastToken?"def":"variable";a.next();return"error"}function B(a){function b(b,f){for(;!b.eol();)if(b.eatWhile(/[^'"\\]/),b.eat("\\")){if(b.next(),d&&b.eol())return"string"}else{if(b.match(a))return f.tokenize=l,"string";b.eat(/['"]/)}if(d){if(c.singleLineStringErrors)return"error";f.tokenize=
l}return"string"}for(;0<="rubf".indexOf(a.charAt(0).toLowerCase());)a=a.substr(1);var d=1==a.length;b.isString=!0;return b}function u(a){for(;"py"!=f(a).type;)a.scopes.pop();a.scopes.push({offset:f(a).offset+q.indentUnit,type:"py",align:null})}function v(a,b){for(var d=a.indentation();1<b.scopes.length&&f(b).offset>d;){if("py"!=f(b).type)return!0;b.scopes.pop()}return f(b).offset!=d}var F=c.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,E=c.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/,D=c.doubleDelimiters||
/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/,C=c.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/,p=c.hangingIndent||q.indentUnit,h=r,k=t;void 0!=c.extra_keywords&&(h=h.concat(c.extra_keywords));void 0!=c.extra_builtins&&(k=k.concat(c.extra_builtins));var z=!(c.version&&3>Number(c.version));if(z)var y=c.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/,m=c.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/,h=h.concat("nonlocal False True None async await".split(" ")),k=k.concat(["ascii","bytes","exec","print"]),
x=/^(([rbuf]|(br))?('{3}|"{3}|['"]))/i;else y=c.singleOperators||/^[\+\-\*\/%&|\^~<>!]/,m=c.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/,h=h.concat(["exec","print"]),k=k.concat("apply basestring buffer cmp coerce execfile file intern long raw_input reduce reload unichr unicode xrange False True None".split(" ")),x=/^(([rub]|(ur)|(br))?('{3}|"{3}|['"]))/i;var G=n(h),H=n(k);return{startState:function(a){return{tokenize:l,scopes:[{offset:a||0,type:"py",align:null}],indent:a||0,lastToken:null,lambda:!1,dedent:0}},
token:function(a,b){var d=b.errorToken;d&&(b.errorToken=!1);var e;a:{a.sol()&&(b.beginningOfLine=!0);e=b.tokenize(a,b);var c=a.current();if(b.beginningOfLine&&"@"==c)e=a.match(m,!1)?"meta":z?"operator":"error";else{/\S/.test(c)&&(b.beginningOfLine=!1);"variable"!=e&&"builtin"!=e||"meta"!=b.lastToken||(e="meta");if("pass"==c||"return"==c)b.dedent+=1;"lambda"==c&&(b.lambda=!0);":"!=c||b.lambda||"py"!=f(b).type||u(b);var g=1==c.length?"[({".indexOf(c):-1;if(-1!=g){var g="])}".slice(g,g+1),h=a.match(/^([\s\[\{\(]|#.*)*$/,
!1)?null:a.column()+1;b.scopes.push({offset:b.indent+p,type:g,align:h})}g="])}".indexOf(c);if(-1!=g)if(f(b).type==c)b.indent=b.scopes.pop().offset-p;else{e="error";break a}0<b.dedent&&a.eol()&&"py"==f(b).type&&(1<b.scopes.length&&b.scopes.pop(),--b.dedent)}}e&&"comment"!=e&&(b.lastToken="keyword"==e||"punctuation"==e?a.current():e);"punctuation"==e&&(e=null);a.eol()&&b.lambda&&(b.lambda=!1);return d?e+" error":e},indent:function(a,b){if(a.tokenize!=l)return a.tokenize.isString?g.Pass:0;var d=f(a),
c=d.type==b.charAt(0);return null!=d.align?d.align-(c?1:0):d.offset-(c?p:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"}});g.defineMIME("text/x-python","python");g.defineMIME("text/x-cython",{name:"python",extra_keywords:"by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE".split(" ")})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:ruby', location = '/static/bower/CodeMirror/mode/ruby/ruby.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.defineMode("ruby",function(f){function n(a){for(var c={},b=0,d=a.length;b<d;++b)c[a[b]]=!0;return c}function k(a,c,b){b.tokenize.push(a);return a(c,b)}function m(a,c){if(a.sol()&&a.match("\x3dbegin")&&a.eol())return c.tokenize.push(r),"comment";if(a.eatSpace())return null;var b=a.next(),d;if("`"==b||
"'"==b||'"'==b)return k(l(b,"string",'"'==b||"`"==b),a,c);if("/"==b){d=a.current().length;if(a.skipTo("/")){var h=a.current().length;a.backUp(a.current().length-d);for(var e=0;a.current().length<h;){var f=a.next();"("==f?e+=1:")"==f&&--e;if(0>e)break}a.backUp(a.current().length-d);if(0==e)return k(l(b,"string-2",!0),a,c)}return"operator"}if("%"==b){b="string";d=!0;a.eat("s")?b="atom":a.eat(/[WQ]/)?b="string":a.eat(/[r]/)?b="string-2":a.eat(/[wxq]/)&&(b="string",d=!1);h=a.eat(/[^\w\s=]/);if(!h)return"operator";
p.propertyIsEnumerable(h)&&(h=p[h]);return k(l(h,b,d,!0),a,c)}if("#"==b)return a.skipToEnd(),"comment";if("\x3c"==b&&(d=a.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return k(t(d[1]),a,c);if("0"==b)return a.eat("x")?a.eatWhile(/[\da-fA-F]/):a.eat("b")?a.eatWhile(/[01]/):a.eatWhile(/[0-7]/),"number";if(/\d/.test(b))return a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==b){for(;a.match(/^\\[CM]-/););a.eat("\\")?a.eatWhile(/\w/):a.next();return"string"}if(":"==b)return a.eat("'")?
k(l("'","atom",!1),a,c):a.eat('"')?k(l('"',"atom",!0),a,c):a.eat(/[\<\>]/)?(a.eat(/[\<\>]/),"atom"):a.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":a.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(a.eatWhile(/[\w$\xa1-\uffff]/),a.eat(/[\?\!\=]/),"atom"):"operator";if("@"==b&&a.match(/^@?[a-zA-Z_\xa1-\uffff]/))return a.eat("@"),a.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==b)return a.eat(/[a-zA-Z_]/)?a.eatWhile(/[\w]/):a.eat(/\d/)?a.eat(/\d/):a.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(b))return a.eatWhile(/[\w\xa1-\uffff]/),
a.eat(/[\?\!]/),a.eat(":")?"atom":"ident";if("|"!=b||!c.varList&&"{"!=c.lastTok&&"do"!=c.lastTok)return/[\(\)\[\]{}\\;]/.test(b)?(g=b,null):"-"==b&&a.eat("\x3e")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(b)?(d=a.eatWhile(/[=+\-\/*:\.^%<>~|]/),"."!=b||d||(g="."),"operator"):null;g="|";return null}function q(a){a||(a=1);return function(c,b){if("}"==c.peek()){if(1==a)return b.tokenize.pop(),b.tokenize[b.tokenize.length-1](c,b);b.tokenize[b.tokenize.length-1]=q(a-1)}else"{"==c.peek()&&(b.tokenize[b.tokenize.length-
1]=q(a+1));return m(c,b)}}function u(){var a=!1;return function(c,b){if(a)return b.tokenize.pop(),b.tokenize[b.tokenize.length-1](c,b);a=!0;return m(c,b)}}function l(a,c,b,d){return function(h,e){var f=!1,g;"read-quoted-paused"===e.context.type&&(e.context=e.context.prev,h.eat("}"));for(;null!=(g=h.next());){if(g==a&&(d||!f)){e.tokenize.pop();break}if(b&&"#"==g&&!f)if(h.eat("{")){"}"==a&&(e.context={prev:e.context,type:"read-quoted-paused"});e.tokenize.push(q());break}else if(/[@\$]/.test(h.peek())){e.tokenize.push(u());
break}f=!f&&"\\"==g}return c}}function t(a){return function(c,b){c.match(a)?b.tokenize.pop():c.skipToEnd();return"string"}}function r(a,c){a.sol()&&a.match("\x3dend")&&a.eol()&&c.tokenize.pop();a.skipToEnd();return"comment"}var v=n("alias and BEGIN begin break case class def defined? do else elsif END end ensure false for if in module next not or redo rescue retry return self super then true undef unless until when while yield nil raise throw catch fail loop callcc caller lambda proc public protected private require load require_relative extend autoload __END__ __FILE__ __LINE__ __dir__".split(" ")),
w=n("def class case for while until module then catch loop proc begin".split(" ")),x=n(["end","until"]),p={"[":"]","{":"}","(":")"},g;return{startState:function(){return{tokenize:[m],indented:0,context:{type:"top",indented:-f.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(a,c){g=null;a.sol()&&(c.indented=a.indentation());var b=c.tokenize[c.tokenize.length-1](a,c),d,f=g;if("ident"==b){var e=a.current(),b="."==c.lastTok?"property":v.propertyIsEnumerable(a.current())?"keyword":
/^[A-Z]/.test(e)?"tag":"def"==c.lastTok||"class"==c.lastTok||c.varList?"def":"variable";"keyword"==b&&(f=e,w.propertyIsEnumerable(e)?d="indent":x.propertyIsEnumerable(e)?d="dedent":"if"!=e&&"unless"!=e||a.column()!=a.indentation()?"do"==e&&c.context.indented<c.indented&&(d="indent"):d="indent")}if(g||b&&"comment"!=b)c.lastTok=f;"|"==g&&(c.varList=!c.varList);"indent"==d||/[\(\[\{]/.test(g)?c.context={prev:c.context,type:g||b,indented:c.indented}:("dedent"==d||/[\)\]\}]/.test(g))&&c.context.prev&&
(c.context=c.context.prev);a.eol()&&(c.continuedLine="\\"==g||"operator"==b);return b},indent:function(a,c){if(a.tokenize[a.tokenize.length-1]!=m)return 0;var b=c&&c.charAt(0),d=a.context,b=d.type==p[b]||"keyword"==d.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(c);return d.indented+(b?0:f.indentUnit)+(a.continuedLine?f.indentUnit:0)},electricInput:/^\s*(?:end|rescue|\})$/,lineComment:"#"}});f.defineMIME("text/x-ruby","ruby")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:sass', location = '/static/bower/CodeMirror/mode/sass/sass.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.defineMode("sass",function(f){function k(a,b){var c=a.peek();if(")"===c)return a.next(),b.tokenizer=g,"operator";if("("===c)return a.next(),a.eatSpace(),"operator";b.tokenizer="'"===c||'"'===c?h(a.next()):h(")",!1);return"string"}function l(a,b){return function(c,d){if(c.sol()&&c.indentation()<=a)return d.tokenizer=
g,g(c,d);b&&c.skipTo("*/")?(c.next(),c.next(),d.tokenizer=g):c.skipToEnd();return"comment"}}function h(a,b){function c(d,f){var e=d.next(),m=d.peek(),h=d.string.charAt(d.pos-2);return"\\"!==e&&m===a||e===a&&"\\"!==h?(e!==a&&b&&d.next(),f.tokenizer=g,"string"):"#"===e&&"{"===m?(f.tokenizer=n(c),d.next(),"operator"):"string"}null==b&&(b=!0);return c}function n(a){return function(b,c){return"}"===b.peek()?(b.next(),c.tokenizer=a,"operator"):g(b,c)}}function e(a){0==a.indentCount&&(a.indentCount++,a.scopes.unshift({offset:a.scopes[0].offset+
f.indentUnit}))}function g(a,b){var c=a.peek();if(a.match("/*"))return b.tokenizer=l(a.indentation(),!0),b.tokenizer(a,b);if(a.match("//"))return b.tokenizer=l(a.indentation(),!1),b.tokenizer(a,b);if(a.match("#{"))return b.tokenizer=n(g),"operator";if('"'===c||"'"===c)return a.next(),b.tokenizer=h(c),"string";if(b.cursorHalf){if("#"===c&&(a.next(),a.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))||a.match(/^-?[0-9\.]+/))return a.peek()||(b.cursorHalf=0),"number";if(a.match(/^(px|em|in)\b/))return a.peek()||
(b.cursorHalf=0),"unit";if(a.match(p))return a.peek()||(b.cursorHalf=0),"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=k,a.peek()||(b.cursorHalf=0),"atom";if("$"===c)return a.next(),a.eatWhile(/[\w-]/),a.peek()||(b.cursorHalf=0),"variable-3";if("!"===c)return a.next(),a.peek()||(b.cursorHalf=0),a.match(/^[\w]+/)?"keyword":"operator";if(a.match(q))return a.peek()||(b.cursorHalf=0),"operator";if(a.eatWhile(/[\w-]/))return a.peek()||(b.cursorHalf=0),"attribute";if(!a.peek())return b.cursorHalf=
0,null}else{if("."===c&&(a.next(),a.match(/^[\w-]+/)||"#"===a.peek())||"#"===c&&(a.next(),a.match(/^[\w-]+/)||"#"===a.peek()))return e(b),"atom";if("$"===c)return a.next(),a.eatWhile(/[\w-]/),"variable-2";if(a.match(/^-?[0-9\.]+/))return"number";if(a.match(/^(px|em|in)\b/))return"unit";if(a.match(p))return"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=k,"atom";if("\x3d"===c&&a.match(/^=[\w-]+/))return e(b),"meta";if("+"===c&&a.match(/^\+[\w-]+/))return"variable-3";"@"===c&&a.match(/@extend/)&&
!a.match(/\s*[\w]/)&&1!=b.scopes.length&&b.scopes.shift();if(a.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return e(b),"meta";if("@"===c)return a.next(),a.eatWhile(/[\w-]/),"meta";if(a.eatWhile(/[\w-]/)){if(a.match(/ *: *[\w-\+\$#!\("']/,!1))return"property";a.match(/ *:/,!1)?(e(b),b.cursorHalf=1):a.match(/ *,/,!1)||e(b);return"atom"}if(":"===c){if(a.match(r))return"keyword";a.next();b.cursorHalf=1;return"operator"}}if(a.match(q))return"operator";a.next();return null}var p=/^true|false|null|auto/,
q=/^\(|\)|=|>|<|==|>=|<=|\+|-|\!=|\/|\*|%|and|or|not|;|\{|\}|:/,r=/^::?[a-zA-Z_][\w\-]*/;return{startState:function(){return{tokenizer:g,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(a,b){a.sol()&&(b.indentCount=0);var c=b.tokenizer(a,b),d=a.current();"@return"!==d&&"}"!==d||1==b.scopes.length||b.scopes.shift();if(null!==c){for(var d=a.pos-d.length+f.indentUnit*b.indentCount,e=[],g=0;g<b.scopes.length;g++){var h=b.scopes[g];h.offset<=d&&
e.push(h)}b.scopes=e}b.lastToken={style:c,content:a.current()};return c},indent:function(a){return a.scopes[0].offset}}});f.defineMIME("text/x-sass","sass")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:shell', location = '/static/bower/CodeMirror/mode/shell/shell.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("shell",function(){function e(a,c){for(var d=c.split(" "),b=0;b<d.length;b++)h[d[b]]=a}function g(a,c){if(a.eatSpace())return null;var d=a.sol(),b=a.next();if("\\"===b)return a.next(),null;if("'"===b||'"'===b||"`"===b)return c.tokens.unshift(k(b)),(c.tokens[0]||g)(a,c);if("#"===b){if(d&&a.eat("!"))return a.skipToEnd(),
"meta";a.skipToEnd();return"comment"}if("$"===b)return c.tokens.unshift(l),(c.tokens[0]||g)(a,c);if("+"===b||"\x3d"===b)return"operator";if("-"===b)return a.eat("-"),a.eatWhile(/\w/),"attribute";if(/\d/.test(b)&&(a.eatWhile(/\d/),a.eol()||!/\w/.test(a.peek())))return"number";a.eatWhile(/[\w-]/);d=a.current();return"\x3d"===a.peek()&&/\w+/.test(d)?"def":h.hasOwnProperty(d)?h[d]:null}function k(a){return function(c,d){for(var b,e=!1,f=!1;null!=(b=c.next());){if(b===a&&!f){e=!0;break}if("$"===b&&!f&&
"'"!==a){f=!0;c.backUp(1);d.tokens.unshift(l);break}f=!f&&"\\"===b}!e&&f||d.tokens.shift();return"`"===a||")"===a?"quote":"string"}}var h={};e("atom","true false");e("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function");e("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");
var l=function(a,c){1<c.tokens.length&&a.eat("$");var d=a.next(),b=/\w/;"{"===d&&(b=/[^}]/);if("("===d)return c.tokens[0]=k(")"),(c.tokens[0]||g)(a,c);/\d/.test(d)||(a.eatWhile(b),a.eat("}"));c.tokens.shift();return"def"};return{startState:function(){return{tokens:[]}},token:function(a,c){return(c.tokens[0]||g)(a,c)},lineComment:"#",fold:"brace"}});e.defineMIME("text/x-sh","shell")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:sql', location = '/static/bower/CodeMirror/mode/sql/sql.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){d.defineMode("sql",function(l,f){function k(c,h){var b=c.next();if(m[b]){var d=m[b](c,h);if(!1!==d)return d}if(1==g.hexNumber&&("0"==b&&c.match(/^[xX][0-9a-fA-F]+/)||("x"==b||"X"==b)&&c.match(/^'[0-9a-fA-F]+'/))||1==g.binaryNumber&&(("b"==b||"B"==b)&&c.match(/^'[01]+'/)||"0"==b&&c.match(/^b[01]+/)))return"number";
if(47<b.charCodeAt(0)&&58>b.charCodeAt(0))return c.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==g.decimallessFloat&&c.eat("."),"number";if("?"==b&&(c.eatSpace()||c.eol()||c.eat(";")))return"variable-3";if("'"==b||'"'==b&&g.doubleQuote)return h.tokenize=a(b),h.tokenize(c,h);if(!(1==g.nCharCast&&("n"==b||"N"==b)||1==g.charsetCast&&"_"==b&&c.match(/[a-z][a-z0-9]*/i))||"'"!=c.peek()&&'"'!=c.peek()){if(/^[\(\),\;\[\]]/.test(b))return null;if(g.commentSlashSlash&&"/"==b&&c.eat("/")||g.commentHash&&"#"==
b||"-"==b&&c.eat("-")&&(!g.commentSpaceRequired||c.eat(" ")))return c.skipToEnd(),"comment";if("/"==b&&c.eat("*"))return h.tokenize=e,h.tokenize(c,h);if("."==b){if(1==g.zerolessFloat&&c.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(1==g.ODBCdotTable&&c.match(/^[a-zA-Z_]+/))return"variable-2"}else{if(n.test(b))return c.eatWhile(n),null;if("{"==b&&(c.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||c.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";c.eatWhile(/^[_\w\d]/);b=c.current().toLowerCase();
return q.hasOwnProperty(b)&&(c.match(/^( )+'[^']*'/)||c.match(/^( )+"[^"]*"/))?"number":r.hasOwnProperty(b)?"atom":t.hasOwnProperty(b)?"builtin":u.hasOwnProperty(b)?"keyword":v.hasOwnProperty(b)?"string-2":null}}else return"keyword"}function a(c){return function(a,b){for(var e=!1,d;null!=(d=a.next());){if(d==c&&!e){b.tokenize=k;break}e=!e&&"\\"==d}return"string"}}function e(c,a){for(;;)if(c.skipTo("*")){if(c.next(),c.eat("/")){a.tokenize=k;break}}else{c.skipToEnd();break}return"comment"}function p(a,
e,b){e.context={prev:e.context,indent:a.indentation(),col:a.column(),type:b}}var v=f.client||{},r=f.atoms||{"false":!0,"true":!0,"null":!0},t=f.builtin||{},u=f.keywords||{},n=f.operatorChars||/^[*+\-%<>!=&|~^]/,g=f.support||{},m=f.hooks||{},q=f.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:k,context:null}},token:function(a,e){a.sol()&&e.context&&null==e.context.align&&(e.context.align=!1);if(a.eatSpace())return null;var b=e.tokenize(a,e);if("comment"==b)return b;
e.context&&null==e.context.align&&(e.context.align=!0);var d=a.current();"("==d?p(a,e,")"):"["==d?p(a,e,"]"):e.context&&e.context.type==d&&(e.indent=e.context.indent,e.context=e.context.prev);return b},indent:function(a,e){var b=a.context;if(!b)return d.Pass;var g=e.charAt(0)==b.type;return b.align?b.col+(g?0:1):b.indent+(g?0:l.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:g.commentSlashSlash?"//":g.commentHash?"#":null}});(function(){function l(a){for(var d;null!=(d=a.next());)if("`"==
d&&!a.eat("`"))return"variable-2";a.backUp(a.current().length-1);return a.eatWhile(/\w/)?"variable-2":null}function f(a){a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./));return a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function k(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function a(a){var d={};a=a.split(" ");for(var f=
0;f<a.length;++f)d[a[f]]=!0;return d}d.defineMIME("text/x-sql",{name:"sql",keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit begin"),builtin:a("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),
atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")});d.defineMIME("text/x-mssql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),
builtin:a("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":f}});d.defineMIME("text/x-mysql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":f,"`":l,"\\":k}});d.defineMIME("text/x-mariadb",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":f,"`":l,"\\":k}});d.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:a("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),
builtin:a("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:a("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:a("commentSlashSlash decimallessFloat"),hooks:{}});d.defineMIME("text/x-plsql",{name:"sql",client:a("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:a("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:a("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:a("date time timestamp"),support:a("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});d.defineMIME("text/x-hive",{name:"sql",keywords:a("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),
builtin:a("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")});d.defineMIME("text/x-pgsql",{name:"sql",client:a("source"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat"),
builtin:a("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:a("date time timestamp"),
support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")});d.defineMIME("text/x-gql",{name:"sql",keywords:a("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:a("false true"),builtin:a("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/})})()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:vbscript', location = '/static/bower/CodeMirror/mode/vbscript/vbscript.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("vbscript",function(e,n){function d(a){return new RegExp("^(("+a.join(")|(")+"))\\b","i")}function h(a,c){if(a.eatSpace())return"space";if("'"===a.peek()||a.match(p))return a.skipToEnd(),"comment";if(a.match(/^((&H)|(&O))?[0-9\.]/i,!1)&&!a.match(/^((&H)|(&O))?[0-9\.]+[a-z_]/i,!1)){var b=!1;
a.match(/^\d*\.\d+/i)?b=!0:a.match(/^\d+\.\d*/)?b=!0:a.match(/^\.\d+/)&&(b=!0);if(b)return a.eat(/J/i),"number";b=!1;a.match(/^&H[0-9a-f]+/i)?b=!0:a.match(/^&O[0-7]+/i)?b=!0:a.match(/^[1-9]\d*F?/)?(a.eat(/J/i),b=!0):a.match(/^0(?![\dx])/i)&&(b=!0);if(b)return a.eat(/L/i),"number"}if(a.match('"'))return c.tokenize=q(a.current()),c.tokenize(a,c);if(a.match(r)||a.match(t)||a.match(u))return"operator";if(a.match(v))return null;if(a.match(w))return"bracket";if(a.match(x))return c.doInCurrentLine=!0,"keyword";
if(a.match(y))return c.currentIndent++,c.doInCurrentLine=!0,"keyword";if(a.match(z))return c.doInCurrentLine?c.doInCurrentLine=!1:c.currentIndent++,"keyword";if(a.match(k))return"keyword";if(a.match(l))return c.currentIndent--,c.currentIndent--,"keyword";if(a.match(m))return c.doInCurrentLine?c.doInCurrentLine=!1:c.currentIndent--,"keyword";if(a.match(A))return"keyword";if(a.match(B))return"atom";if(a.match(C))return"variable-2";if(a.match(D))return"builtin";if(a.match(E))return"variable-2";if(a.match(F))return"variable";
a.next();return"error"}function q(a){var c=1==a.length;return function(b,d){for(;!b.eol();){b.eatWhile(/[^'"]/);if(b.match(a))return d.tokenize=h,"string";b.eat(/['"]/)}if(c){if(n.singleLineStringErrors)return"error";d.tokenize=h}return"string"}}var t=/^[\+\-\*/&\\\^<>=]/,r=/^((<>)|(<=)|(>=))/,v=/^[\.,]/,w=/^[\(\)]/,F=/^[A-Za-z][_A-Za-z0-9]*/,u=d("and or not xor is mod eqv imp".split(" ")),f=["WScript","err","debug","RegExp"],G=["server","response","request","session","application"],H="buffer cachecontrol charset contenttype expires expiresabsolute isclientconnected pics status clientcertificate cookies form querystring servervariables totalbytes contents staticobjects codepage lcid sessionid timeout scripttimeout".split(" "),
I="addheader appendtolog binarywrite end flush redirect binaryread remove removeall lock unlock abandon getlasterror htmlencode mappath transfer urlencode".split(" "),g="clear execute raise replace test write writeline close open state eof update addnew end createobject quit".split(" ").concat("description firstindex global helpcontext helpfile ignorecase length number pattern source value count".split(" ")),f=f.concat("vbBlack vbRed vbGreen vbYellow vbBlue vbMagenta vbCyan vbWhite vbBinaryCompare vbTextCompare vbSunday vbMonday vbTuesday vbWednesday vbThursday vbFriday vbSaturday vbUseSystemDayOfWeek vbFirstJan1 vbFirstFourDays vbFirstFullWeek vbGeneralDate vbLongDate vbShortDate vbLongTime vbShortTime vbObjectError vbOKOnly vbOKCancel vbAbortRetryIgnore vbYesNoCancel vbYesNo vbRetryCancel vbCritical vbQuestion vbExclamation vbInformation vbDefaultButton1 vbDefaultButton2 vbDefaultButton3 vbDefaultButton4 vbApplicationModal vbSystemModal vbOK vbCancel vbAbort vbRetry vbIgnore vbYes vbNo vbCr VbCrLf vbFormFeed vbLf vbNewLine vbNullChar vbNullString vbTab vbVerticalTab vbUseDefault vbTrue vbFalse vbEmpty vbNull vbInteger vbLong vbSingle vbDouble vbCurrency vbDate vbString vbObject vbError vbBoolean vbVariant vbDataObject vbDecimal vbByte vbArray".split(" "));
e.isASP&&(f=f.concat(G),g=g.concat(I,H));var A=d("dim;redim;then;until;randomize;byval;byref;new;property;exit;in;const;private;public;get;set;let;stop;on error resume next;on error goto 0;option explicit;call;me".split(";")),B=d(["true","false","nothing","empty","null"]),D=d("abs array asc atn cbool cbyte ccur cdate cdbl chr cint clng cos csng cstr date dateadd datediff datepart dateserial datevalue day escape eval execute exp filter formatcurrency formatdatetime formatnumber formatpercent getlocale getobject getref hex hour inputbox instr instrrev int fix isarray isdate isempty isnull isnumeric isobject join lbound lcase left len loadpicture log ltrim rtrim trim maths mid minute month monthname msgbox now oct replace rgb right rnd round scriptengine scriptenginebuildversion scriptenginemajorversion scriptengineminorversion second setlocale sgn sin space split sqr strcomp string strreverse tan time timer timeserial timevalue typename ubound ucase unescape vartype weekday weekdayname year".split(" ")),
E=d(f),C=d(g),z=d("class sub select while if function property with for".split(" ")),k=d(["else","elseif","case"]),m=d(["next","loop","wend"]),l=d(["end"]),y=d(["do"]),x=d(["on error resume next","exit"]),p=d(["rem"]);return{electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:h,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1,ignoreKeyword:!1}},token:function(a,c){a.sol()&&(c.currentIndent+=c.nextLineIndent,c.nextLineIndent=0,c.doInCurrentLine=0);var b;b=c.tokenize(a,
c);var d=a.current();if("."===d)if(b=c.tokenize(a,c),d=a.current(),!b||"variable"!==b.substr(0,8)&&"builtin"!==b&&"keyword"!==b)b="error";else{if("builtin"===b||"keyword"===b)b="variable";-1<g.indexOf(d.substr(1))&&(b="variable-2")}c.lastToken={style:b,content:a.current()};"space"===b&&(b=null);return b},indent:function(a,c){var b=c.replace(/^\s+|\s+$/g,"");return b.match(m)||b.match(l)||b.match(k)?e.indentUnit*(a.currentIndent-1):0>a.currentIndent?0:a.currentIndent*e.indentUnit}}});e.defineMIME("text/vbscript",
"vbscript")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-highlight:yaml', location = '/static/bower/CodeMirror/mode/yaml/yaml.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.defineMode("yaml",function(){var c=/\b((true)|(false)|(on)|(off)|(yes)|(no))$/i;return{token:function(b,a){var d=b.peek(),e=a.escaped;a.escaped=!1;if("#"==d&&(0==b.pos||/\s/.test(b.string.charAt(b.pos-1))))return b.skipToEnd(),"comment";if(b.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(a.literal&&
b.indentation()>a.keyCol)return b.skipToEnd(),"string";a.literal&&(a.literal=!1);if(b.sol()){a.keyCol=0;a.pair=!1;a.pairStart=!1;if(b.match(/---/)||b.match(/\.\.\./))return"def";if(b.match(/\s*-\s+/))return"meta"}if(b.match(/^(\{|\}|\[|\])/))return"{"==d?a.inlinePairs++:"}"==d?a.inlinePairs--:"["==d?a.inlineList++:a.inlineList--,"meta";if(0<a.inlineList&&!e&&","==d)return b.next(),"meta";if(0<a.inlinePairs&&!e&&","==d)return a.keyCol=0,a.pair=!1,a.pairStart=!1,b.next(),"meta";if(a.pairStart){if(b.match(/^\s*(\||\>)\s*/))return a.literal=
!0,"meta";if(b.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==a.inlinePairs&&b.match(/^\s*-?[0-9\.\,]+\s?$/)||0<a.inlinePairs&&b.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(b.match(c))return"keyword"}if(!a.pair&&b.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/))return a.pair=!0,a.keyCol=b.indentation(),"atom";if(a.pair&&b.match(/^:\s*/))return a.pairStart=!0,"meta";a.pairStart=!1;a.escaped="\\"==d;b.next();return null},startState:function(){return{pair:!1,
pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}});c.defineMIME("text/x-yaml","yaml")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:syntax-highlight', location = '/static/bitbucket/internal/util/syntax-highlight.js' */
define("bitbucket/internal/util/syntax-highlight",["module","exports","codemirror","jquery","bitbucket/internal/util/determine-language"],function(d,a,g,h,k){function b(a){function b(a){l.default.runMode(c.text(),a.mime||{name:e},c[0])}function d(a){console.warn(a||e+" could not be loaded for syntax highlighting.")}var c=(0,f.default)(a);if(c.length){var e=c.attr("data-language");m.default.getCodeMirrorModeForName(e).then(b).fail(d)}}Object.defineProperty(a,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(g),
f=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(k);a.default={codeblock:b,container:function(a){(0,f.default)(a).find("pre \x3e code[data-language]").each(function(){b(this)})}};d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-preview-soy', location = '/static/bitbucket/internal/widget/markup-preview/markup-preview.soy' */
// This file was automatically generated from markup-preview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.markupPreview.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.markupPreview == 'undefined') { bitbucket.internal.widget.markupPreview = {}; }


bitbucket.internal.widget.markupPreview.preview = function(opt_data, opt_ignored) {
  return '<div class="markup-preview markup" title="' + soy.$$escapeHtml('Click to edit') + '"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupPreview.preview.soyTemplateName = 'bitbucket.internal.widget.markupPreview.preview';
}


bitbucket.internal.widget.markupPreview.previewHelp = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.button({href: 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Markdown+syntax+guide?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash', extraClasses: 'aui-button-subtle aui-button-compact markup-preview-help', title: 'Markup syntax guide', iconType: 'custom', iconClass: 'aui-icon aui-icon-small aui-iconfont-help', iconText: 'Markup syntax guide', buttonText: '', extraAttributes: {target: '_blank'}});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupPreview.previewHelp.soyTemplateName = 'bitbucket.internal.widget.markupPreview.previewHelp';
}


bitbucket.internal.widget.markupPreview.previewButton = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.button({extraClasses: 'aui-button-subtle aui-button-compact markup-preview-button', buttonText: 'Preview', extraAttributes: {type: 'button', 'data-preview-tooltip': opt_data.title}});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupPreview.previewButton.soyTemplateName = 'bitbucket.internal.widget.markupPreview.previewButton';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-preview', location = '/static/bitbucket/internal/widget/markup-preview/markup-preview.js' */
define("bitbucket/internal/widget/markup-preview/markup-preview","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/util/syntax-highlight".split(" "),function(m,b,n,p,q,r,t,u,v,w,x){function a(a){this.init.apply(this,arguments)}Object.defineProperty(b,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),
c=babelHelpers.interopRequireDefault(q),y=babelHelpers.interopRequireDefault(r),z=babelHelpers.interopRequireDefault(t),h=babelHelpers.interopRequireDefault(u),d=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w),B=babelHelpers.interopRequireDefault(x),f="ctrl+shift+p";d.default.on("bitbucket.internal.keyboard.shortcuts.requestPreviewComment",function(a){f=a;this.unbind()});d.default.addLocalEventMixin(a.prototype);a.prototype.init=function(a){c.default.bindAll(this,"togglePreview",
"updatePreview","refreshPreview","hidePreview","cancelPreview");var b=A.default.isMac()?f.replace(/ctrl/i,"meta"):f;this.$editor=(0,g.default)(a);this.$textarea=this.$editor.find("textarea");this.$previewButton=this.$editor.find(".markup-preview-button");this.$previewPanel=this.$editor.find(".markup-preview");this._destroyables=[];var k=this.$textarea.add(this.$previewButton);k.on("keydown",[b],this.togglePreview);this._destroyables.push({destroy:function(){k.off("keydown",this.togglePreview)}.bind(this)});
this._destroyables.push(d.default.chainWith(this.$previewButton).on("click",this.togglePreview));this._destroyables.push(d.default.chainWith(this.$previewPanel).on("click",h.default.filterByTarget(":not(a, a \x3e img)",this.togglePreview)));this._destroyables.push(d.default.chainWith(this.$textarea).on("input",c.default.debounce(this.refreshPreview,100)));this._destroyables.push({destroy:this.cancelPreview});var l=this;this.$previewButton.tooltip({gravity:function(){return g.default.fn.tipsy.autoNS.apply(this,
arguments)+"e"},title:function(){return l.isPreviewing()?"Continue editing":l.$previewButton.attr("data-preview-tooltip")}})};a.prototype.isPreviewing=function(){return this.$editor.hasClass("previewing")};a.prototype.togglePreview=h.default.preventDefault(function(){this.isPreviewing()?this.cancelPreview():this.showPreview()});a.prototype.showPreview=function(){this.$editor.addClass("previewing");this.$textarea.parent().spin("medium");this.$previewButton.text("Edit");
this._request&&this._request.abort();this._request=z.default.rest({type:"POST",url:C(),data:this.$textarea.val(),dataType:"json"}).done(this.updatePreview).fail(function(a,b){"abort"!==b&&this.hidePreview()}.bind(this)).always(function(){this.$textarea.parent().spinStop();this._request=null}.bind(this))};a.prototype.refreshPreview=function(){this.isPreviewing()&&this.showPreview()};a.prototype.updatePreview=function(a){this.$previewPanel.html(a.html);this.$previewPanel.find("a").attr("target","_blank");
this.$editor.addClass("loaded");this.$previewButton.focus();B.default.container(this.$previewPanel);a=this.trigger.bind(this,"resize");c.default.defer(a);this.$previewPanel.imagesLoaded(a)};a.prototype.cancelPreview=function(){this._request&&this._request.abort();this.hidePreview()};a.prototype.hidePreview=function(){this.$editor.removeClass("previewing loaded");this.$previewButton.text("Preview");this.$textarea.focus();this.trigger("resize")};a.prototype.destroy=
function(){c.default.invoke(this._destroyables,"destroy")};var C=c.default.once(function(){return y.default.rest().markup().preview().build()});b.default=a;m.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:client-file-handlers', location = '/static/bitbucket/internal/widget/client-file-handlers/client-file-uploader.js' */
define("bitbucket/internal/widget/client-file-handlers/client-file-uploader","module exports jquery lodash bitbucket/internal/util/ajax bitbucket/internal/util/feature-detect bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(l,h,k,m,n,p,q){function a(d){if(!a.isSupported())throw Error("ClientFileUploader requires FormData support");this.init.apply(this,arguments)}Object.defineProperty(h,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),d=babelHelpers.interopRequireDefault(m),
r=babelHelpers.interopRequireDefault(n);k=babelHelpers.interopRequireDefault(p);var c=babelHelpers.interopRequireDefault(q);a.isSupported=k.default.formData;a.typeFilters=c.default.typeFilters;f.default.extend(a.prototype,c.default.prototype);a.prototype.defaults=f.default.extend({},c.default.prototype.defaults,{url:void 0,fieldName:"file",fileSizeLimit:void 0});a.prototype.init=function(a){d.default.bindAll(this,"uploadFiles");c.default.prototype.init.call(this,a);this.uploads=[];this.on("validFiles",
this.uploadFiles)};a.prototype.uploadFiles=function(a){var b=this;d.default.forEach(a,function(a){var c=new FormData,e=f.default.Deferred();c.append(b.options.fieldName,a,a.name);var g=r.default.ajax({url:d.default.isFunction(b.options.url)?b.options.url():b.options.url,type:"POST",data:c,timeout:b.options.timeout,xhr:function(){var a=f.default.ajaxSettings.xhr();(a.upload?a.upload:a).addEventListener("progress",function(a){a.lengthComputable&&e.notify(Math.max(0,Math.min(100,100*a.loaded/a.total)))});
return a},statusCode:{500:!1},processData:!1,contentType:!1}).done(function(){e.notify(100);e.resolveWith(this,arguments)}).fail(function(){e.rejectWith(this,arguments)}).always(function(){b.uploads=d.default.without(b.uploads,g)});e.promise(g);b.uploads.push(g);b.trigger("uploadStarted",g,a)})};a.prototype.destroy=function(){d.default.invoke(this.uploads,"abort");this.uploads=[]};h.default=a;l.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:client-file-handlers', location = '/static/bitbucket/internal/widget/client-file-handlers/client-file-handler.js' */
define("bitbucket/internal/widget/client-file-handlers/client-file-handler",["module","exports","jquery","lodash","bitbucket/internal/util/events"],function(g,e,h,k,l){function b(a){return this.init(a)}Object.defineProperty(e,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(h),d=babelHelpers.interopRequireDefault(k);babelHelpers.interopRequireDefault(l).default.addLocalEventMixin(b.prototype);b.typeFilters={all:/.*/,application:/^application\/.*/i,audio:/^audio\/.*/i,image:/^image\/.*/i,
imageWeb:/^image\/(jpeg|png|gif)$/i,text:/^text\/.*/i,video:/^video\/.*/i};b.prototype.defaults={fileTypeFilter:b.typeFilters.all,fileCountLimit:Infinity,fileSizeLimit:10485760,onSuccess:f.default.noop,onError:f.default.noop};b.prototype.init=function(a){this.options=f.default.extend({},this.defaults,a);a&&!a.fileSizeLimit&&(this.options.fileSizeLimit=this.defaults.fileSizeLimit);a&&!a.fileCountLimit&&(this.options.fileCountLimit=this.defaults.fileCountLimit);d.default.bindAll(this,"handleFiles",
"filterFiles");return this};b.prototype.handleFiles=function(a){this.trigger("filesSelected",a);a=this.filterFiles(a);0<a.valid.length?(d.default.isFunction(this.options.onSuccess)&&this.options.onSuccess(a.valid),this.trigger("validFiles",a.valid)):d.default.isFunction(this.options.onError)&&this.options.onError(a.invalid);d.default.keys(a.invalid).length&&this.trigger("invalidFiles",a.invalid)};b.prototype.filterFiles=function(a){var b=d.default.isRegExp(this.options.fileTypeFilter)?this.options.fileTypeFilter:
this.defaults.fileTypeFilter,e=this.options.fileSizeLimit;a=d.default.reduce(a,function(a,c){b.test(c.type)?c.size>e?a.invalid.bySize=a.invalid.bySize?a.invalid.bySize.concat(c):[c]:a.valid.push(c):a.invalid.byType=a.invalid.byType?a.invalid.byType.concat(c):[c];return a},{valid:[],invalid:{}});a.valid.length>this.options.fileCountLimit&&(a.invalid.byCount=a.valid.slice(this.options.fileCountLimit),a.valid=a.valid.slice(0,this.options.fileCountLimit));return a};e.default=b;g.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:client-file-handlers', location = '/static/bitbucket/internal/widget/client-file-handlers/client-file-reader.js' */
define("bitbucket/internal/widget/client-file-handlers/client-file-reader","module exports jquery lodash bitbucket/internal/util/feature-detect bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(h,e,b,f,k,l){function a(m){if(!a.isSupported())throw Error("ClientFileReader requires FileReaderAPI support");return this.init(m)}Object.defineProperty(e,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);var d=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(k);
var c=babelHelpers.interopRequireDefault(l),g={ArrayBuffer:"readAsArrayBuffer",BinaryString:"readAsBinaryString",DataURL:"readAsDataURL",Text:"readAsText"};a.isSupported=f.default.fileReader;b.default.extend(a.prototype,c.default.prototype);a.readMethods={ArrayBuffer:"ArrayBuffer",BinaryString:"BinaryString",DataURL:"DataURL",Text:"Text"};a.typeFilters=c.default.typeFilters;a.prototype.defaults=b.default.extend({},c.default.prototype.defaults,{readMethod:a.readMethods.DataURL,onRead:b.default.noop});
a.prototype.init=function(a){d.default.bindAll(this,"onSuccess","readFile");c.default.prototype.init.call(this,a);this.options.onSuccess=this.onSuccess;return this};a.prototype.onSuccess=function(a){var b=d.default.has(g,this.options.readMethod)?g[this.options.readMethod]:void 0;b&&d.default.each(a,d.default.bind(function(a){var c=new FileReader;c.onload=d.default.bind(this.readFile,this,a);c[b](a)},this))};a.prototype.readFile=function(a,b){d.default.isFunction(this.options.onRead)&&this.options.onRead(b.target.result,
a)};e.default=a;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:drag-drop-file-target', location = '/static/bitbucket/internal/widget/drag-drop-file-target/drag-drop-file-target.js' */
define("bitbucket/internal/widget/drag-drop-file-target/drag-drop-file-target",["module","exports","jquery","lodash","bitbucket/internal/util/events"],function(f,c,g,h,k){function b(a,b){return this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),l=babelHelpers.interopRequireDefault(k);b.prototype.getDefaults=function(){return{activeDropTargetClass:"active-drop-target",uploadPrompt:"Drag a file here to upload",
clientFileHandler:null}};b.prototype.init=function(a,b){e.default.bindAll(this,"onDragOver","onDragEnd","onDrop");this.$target=(0,d.default)(a);this.options=d.default.extend({},this.getDefaults(),b);this.$target.attr("data-upload-prompt",this.options.uploadPrompt);this._destroyables=[];this._destroyables.push(l.default.chainWith(this.$target).on("dragover",this.onDragOver).on("dragleave",this.onDragEnd).on("dragend",this.onDragEnd).on("drop",this.onDrop))};b.prototype.onDragOver=function(a){a.preventDefault();
this.$target.addClass(this.options.activeDropTargetClass)};b.prototype.onDragEnd=function(a){a.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass)};b.prototype.onDrop=function(a){a.preventDefault();a.originalEvent.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass);this.options.clientFileHandler&&this.options.clientFileHandler.handleFiles(a.originalEvent.dataTransfer.files,a.originalEvent.target)};b.prototype.destroy=function(){this.$target.removeAttr("data-upload-prompt");
this.$target.removeClass(this.options.activeDropTargetClass);e.default.invoke(this._destroyables,"destroy")};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paste-image-target', location = '/static/bitbucket/internal/widget/paste-image-target/paste-image-target.js' */
define("bitbucket/internal/widget/paste-image-target/paste-image-target","module exports jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/widget/client-file-handlers/client-file-handler".split(" "),function(e,d,f,g,h,k,l){function b(a,b){this.init.apply(this,arguments)}Object.defineProperty(d,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(f),c=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),
q=babelHelpers.interopRequireDefault(l);b.prototype.init=function(a,b){c.default.bindAll(this,"handlePaste","processClipboardItem");this.$el=(0,m.default)(a);this.clientFileHandler=b;this._destroyables=[];this._destroyables.push(n.default.chainWith(this.$el).on("paste",this.handlePaste))};b.prototype.handlePaste=function(a){var b=q.default.typeFilters.image;a=a.originalEvent;a=a.clipboardData&&a.clipboardData.items;this.clientFileHandler&&a&&1===a.length&&c.default.toArray(a).filter(c.default.compose(b.test.bind(b),
p.default.dot("type"))).forEach(this.processClipboardItem)};b.prototype.processClipboardItem=function(a){a=a.getAsFile();a.name="upload."+c.default.last(a.type.split("/"));this.clientFileHandler.handleFiles([a],this.$el)};b.prototype.destroy=function(){c.default.invoke(this._destroyables,"destroy")};d.default=b;e.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:upload-interceptor', location = '/static/bitbucket/internal/widget/upload-interceptor/upload-interceptor.js' */
define("bitbucket/internal/widget/upload-interceptor/upload-interceptor",["module","exports","jquery","lodash","bitbucket/internal/util/events"],function(f,c,g,h,k){function b(a,b){this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),l=babelHelpers.interopRequireDefault(k);b.prototype.init=function(a,b){e.default.bindAll(this,"onSelectFile");this.$el=(0,d.default)(a);this.clientFileHandler=
b;this._destroyables=[];this._destroyables.push(l.default.chainWith(this.$el).on("change",this.onSelectFile))};b.prototype.onSelectFile=function(a){a=a.target;a.files&&a.files.length&&this.clientFileHandler&&(this.clientFileHandler.handleFiles(a.files,a),(0,d.default)(a).wrap("\x3cform\x3e").parent("form").trigger("reset").end().unwrap())};b.prototype.destroy=function(){e.default.invoke(this._destroyables,"destroy")};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:faux-upload-field', location = '/static/bitbucket/internal/widget/faux-upload-field/faux-upload-field.soy' */
// This file was automatically generated from faux-upload-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.fauxUploadField.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.fauxUploadField == 'undefined') { bitbucket.internal.widget.fauxUploadField = {}; }


bitbucket.internal.widget.fauxUploadField.uploadField = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<input type="file" ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + 'class="faux-upload-field assistive ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.accept) ? ' accept="' + soy.$$escapeHtml(opt_data.accept) + '"' : '') + ((opt_data.allowMultiple) ? ' multiple' : '') + '/>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.fauxUploadField.uploadField.soyTemplateName = 'bitbucket.internal.widget.fauxUploadField.uploadField';
}


bitbucket.internal.widget.fauxUploadField.labelButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({tagName: 'label', extraClasses: 'faux-upload-label-button ' + opt_data.extraClasses, text: opt_data.text});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.fauxUploadField.labelButton.soyTemplateName = 'bitbucket.internal.widget.fauxUploadField.labelButton';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:faux-upload-field', location = '/static/bitbucket/internal/widget/faux-upload-field/faux-upload-field.js' */
define("bitbucket/internal/widget/faux-upload-field/faux-upload-field","module exports jquery lodash bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/widget/client-file-handlers/client-file-handler bitbucket/internal/widget/upload-interceptor/upload-interceptor".split(" "),function(h,c,k,l,m,n,p,q,r){function a(a,b){this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(k),
g=babelHelpers.interopRequireDefault(l),t=babelHelpers.interopRequireDefault(m),u=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),e=babelHelpers.interopRequireDefault(q),w=babelHelpers.interopRequireDefault(r);a.prototype.defaults={clientFileHandler:null,accept:null,allowMultiple:!1};a.prototype.init=function(a,b){this.$el=(0,d.default)(a);this._destroyables=[];switch(b.accept){case e.default.typeFilters.audio:b.accept="audio/*";break;case e.default.typeFilters.image:b.accept=
"image/*";break;case e.default.typeFilters.imageWeb:b.accept="image/jpeg, image/gif, image/png";break;case e.default.typeFilters.video:b.accept="video/*"}this.options=d.default.extend({},this.defaults,b);var c=g.default.uniqueId("faux-upload-field-"),f=(0,d.default)(bitbucket.internal.widget.fauxUploadField.uploadField({id:c,accept:this.options.accept,allowMultiple:this.options.allowMultiple})).insertBefore(this.$el);this.$el.tooltip({gravity:d.default.fn.tipsy.autoNS});this.$el.is("label")?this.$el.attr("for",
c):v.default.isIE()?(this.$el.hide(),f.show()):this._destroyables.push(u.default.chainWith(this.$el).on("click",t.default.preventDefault(f.click.bind(f))));this.options.clientFileHandler&&this._destroyables.push(new w.default(f,this.options.clientFileHandler))};a.prototype.destroy=function(){g.default.invoke(this._destroyables,"destroy")};c.default=a;h.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:drag-drop-file-uploader', location = '/static/bitbucket/internal/widget/drag-drop-file-uploader/drag-drop-file-uploader.js' */
define("bitbucket/internal/widget/drag-drop-file-uploader/drag-drop-file-uploader","module exports jquery lodash bitbucket/internal/util/events bitbucket/internal/widget/client-file-handlers/client-file-uploader bitbucket/internal/widget/drag-drop-file-target/drag-drop-file-target bitbucket/internal/widget/faux-upload-field/faux-upload-field bitbucket/internal/widget/paste-image-target/paste-image-target".split(" "),function(h,c,e,k,l,m,n,p,q){function a(d,c){if(!a.isSupported())throw Error("DragDropUploader requires ClientFileUploader support");
this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e),g=babelHelpers.interopRequireDefault(k);e=babelHelpers.interopRequireDefault(l);var d=babelHelpers.interopRequireDefault(m),r=babelHelpers.interopRequireDefault(n),t=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q);a.typeFilters=d.default.typeFilters;a.isSupported=d.default.isSupported;e.default.addLocalEventMixin(a.prototype);a.prototype.defaults=
{url:null,fieldName:"file",uploadButton:void 0,fileTypeFilter:void 0,fileCountLimit:void 0,fileSizeLimit:void 0,pasteUpload:!0};a.prototype.init=function(a,c){this.$target=(0,f.default)(a);var b=g.default.pick(d.default.prototype.defaults,"fileTypeFilter","fileCountLimit","fileSizeLimit");this.options=f.default.extend({},this.defaults,b,c);this._destroyables=[];b=new d.default({url:this.options.url,fieldName:this.options.fieldName,fileSizeLimit:this.options.fileSizeLimit});this._destroyables.push(this.retriggerFrom(b,
"filesSelected","validFiles","invalidFiles","uploadStarted"));this._destroyables.push(b);this._destroyables.push(new r.default(this.$target,{clientFileHandler:b}));this.options.uploadButton&&this._destroyables.push(new t.default((0,f.default)(this.options.uploadButton),{clientFileHandler:b,allowMultiple:1<this.options.fileCountLimit}));this.options.pasteUpload&&this._destroyables.push(new u.default(this.$target,b))};a.prototype.destroy=function(){g.default.invoke(this._destroyables,"destroy")};c.default=
a;h.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:promise-util', location = '/static/bitbucket/internal/util/promise.js' */
define("bitbucket/internal/util/promise",["module","exports","jquery","lodash"],function(v,l,w,x){function n(a){a&&a.abort&&a.abort()}function y(){console.log("Promise does not have an abort function")}function m(a,b,c){function k(a,c){return function(){return f?(new d.default.Deferred)[a+"With"](this,arguments):g=c.apply(this,arguments)}}var f,g=a,e=d.default.Callbacks(),h={};a=a.then(b?k("resolve",b):null,c?k("reject",c):null);h.abort=function(){"pending"===h.state()&&(f||n(g),f=!0);e.fire()};h.thenAbortable=
function(a,c){var b=m(h,a,c);e.add(b.abort);return b};return a.promise(h)}function q(){return d.default.when.apply(d.default,e.default.map(arguments,z)).then(r,r)}function z(a){return a.then(t(!1),t(!0))}function t(a){return function(){return d.default.Deferred().resolve({rejectedSelf:a&&this,self:this,args:Array.prototype.slice.call(arguments)})}}function r(){var a=e.default.chain(arguments).pluck("rejectedSelf").find(e.default.identity).value(),b=(a?"reject":"resolve")+"With",a=a||arguments[0].self,
c=e.default.pluck(arguments,"args");return d.default.Deferred()[b](a,c)}Object.defineProperty(l,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(w),e=babelHelpers.interopRequireDefault(x),u={PENDING:"pending",REJECTED:"rejected",RESOLVED:"resolved"};l.default={state:u,delay:function(a,b){return function(){var c=d.default.Deferred(),k=this,f=Array.prototype.slice.call(arguments),g,p=function(){return setTimeout(function(){var b=a.apply(k,f);b.done(c.resolve).fail(c.reject);g=b.abort?
e.default.bind(b.abort,b):y},b)},h=p();g=function(){clearTimeout(h);c.reject(c,"abort","abort")};return c.promise({abort:function(){g()},reset:function(){"pending"===c.state()&&(clearTimeout(h),f=Array.prototype.slice.call(arguments),h=p())}})}},reduce:function(){var a=Array.prototype.slice.call(arguments),b=d.default.when.apply(d.default,a);b.abort=function(){e.default.forEach(a,n)};return b},settle:q,spinner:function(a,b,c,e,f){var g=(0,d.default)(a).spin(c||"small",e||{});return b.always(function(){f?
g.spinStop():g.remove()})},rollingSpinner:function(a,b,c){function k(){var a=Array.prototype.slice.call(arguments);a.length&&(g.spin(c).addClass("spinning"),f=q.apply(null,e.default.compact(a.concat(f))),f.always(function(){f.state()!==u.PENDING&&g.spinStop().removeClass("spinning")}))}c=c||"small";var f,g=(0,d.default)(a);b&&k(b);return{add:k}},thenAbortable:m,whenAbortable:function(){var a=d.default.when.apply(d.default,arguments);a.abort=e.default.invoke.bind(e.default,arguments,"abort");return m(a)},
waitFor:function(a){var b=d.default.Deferred();a=d.default.extend({timeout:1E4,interval:100,name:"",predicate:d.default.noop},a);var c=(new Date).getTime()+a.timeout,e=setInterval(function(){var d=a.predicate();d?(clearInterval(e),b.resolve(d)):(new Date).getTime()>c&&(clearInterval(e),b.reject("Predicate '"+a.name+"' was false after "+a.timeout+"ms"))},a.interval);return b.promise()}};v.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inline-error-dialog', location = '/static/bitbucket/internal/widget/inline-error-dialog/inline-error-dialog.soy' */
// This file was automatically generated from inline-error-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.inlineErrorDialog.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.inlineErrorDialog == 'undefined') { bitbucket.internal.widget.inlineErrorDialog = {}; }


bitbucket.internal.widget.inlineErrorDialog.contents = function(opt_data, opt_ignored) {
  var output = '<h4>' + aui.icons.icon({icon: 'error', useIconFont: true}) + ((opt_data.title) ? soy.$$escapeHtml(opt_data.title) : '') + '</h4>' + ((opt_data.subtitle) ? '<h6>' + soy.$$escapeHtml(opt_data.subtitle) + '</h6>' : '');
  var errorList16 = opt_data.errors;
  var errorListLen16 = errorList16.length;
  for (var errorIndex16 = 0; errorIndex16 < errorListLen16; errorIndex16++) {
    var errorData16 = errorList16[errorIndex16];
    output += ((errorIndex16 == 0) ? '<ul>' : '') + '<li>' + soy.$$escapeHtml(errorData16) + '</li>' + ((errorIndex16 == errorListLen16 - 1) ? '</ul>' : '');
  }
  output += (opt_data.persistent) ? bitbucket.internal.buttons.button({extraClasses: 'dismiss-button', type: 'button', buttonText: 'Dismiss'}) : '';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.inlineErrorDialog.contents.soyTemplateName = 'bitbucket.internal.widget.inlineErrorDialog.contents';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inline-error-dialog', location = '/static/bitbucket/internal/widget/inline-error-dialog/inline-error-dialog.js' */
define("bitbucket/internal/widget/inline-error-dialog/inline-error-dialog","module exports aui jquery lodash bitbucket/internal/util/events".split(" "),function(f,b,g,h,k,l){function a(a,c){this.init.apply(this,arguments)}Object.defineProperty(b,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),c=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(l);a.prototype.init=function(a,b){this.errors=[];this.options=e.default.extend({persistent:!0},
b);this._destroyables=[];c.default.bindAll(this,"_renderDialogContents","hide","show","refresh","add","reset","destroy");var d={noBind:!0,persistent:this.options.persistent,addActiveClass:!1,fadeTime:0};this._$inlineDialog=m.default.InlineDialog((0,e.default)(a),c.default.uniqueId("inline-error-dialog-"),this._renderDialogContents,d);this.options.persistent&&this._destroyables.push(n.default.chainWith(this._$inlineDialog).on("click",".dismiss-button",this.hide))};a.prototype._renderDialogContents=
function(a,b,d){a.html(bitbucket.internal.widget.inlineErrorDialog.contents({title:c.default.isFunction(this.options.title)?this.options.title(this.errors):this.options.title,subtitle:c.default.isFunction(this.options.subtitle)?this.options.subtitle(this.errors):this.options.subtitle,errors:this.errors,persistent:this.options.persistent})).addClass("inline-error-contents");d()};a.prototype.hide=function(){this._$inlineDialog.hide();this.reset()};a.prototype.show=function(){this._$inlineDialog.show();
this.refresh()};a.prototype.refresh=function(){this._$inlineDialog.refresh()};a.prototype.add=function(a){this.errors.push(a)};a.prototype.reset=function(){this.errors.length=0};a.prototype.destroy=function(){this.errors.length=0;c.default.invoke(this._destroyables,"destroy");this._$inlineDialog.remove()};b.default=a;f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:property-util', location = '/static/bitbucket/internal/util/property.js' */
define("bitbucket/internal/util/property",["module","exports","jquery"],function(f,b,g){function c(a,b){if(null==a)return a;switch(b){case "STRING":return a;case "NUMBER":return Number(a);case "BOOLEAN":return"true"===a.toLowerCase()}}Object.defineProperty(b,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e={};b.default={getFromProvider:function(a){return(a=e[a]||(e[a]=WRM.data.claim("com.atlassian.bitbucket.server.config-wrm-data:"+a+".data")))?d.default.Deferred().resolve(c(a.value,
a.type)):d.default.Deferred().reject()},_coerce:c};f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-attachments', location = '/static/bitbucket/internal/widget/markup-attachments/markup-attachments.soy' */
// This file was automatically generated from markup-attachments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.markupAttachments.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.markupAttachments == 'undefined') { bitbucket.internal.widget.markupAttachments = {}; }


bitbucket.internal.widget.markupAttachments.uploadTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.buttons.button({tagName: 'label', extraClasses: 'aui-button-subtle aui-button-compact markup-attachments-button', title: opt_data.title, iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-attachment', iconText: opt_data.accessibilityText, buttonText: opt_data.buttonText ? opt_data.buttonText : ''});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupAttachments.uploadTrigger.soyTemplateName = 'bitbucket.internal.widget.markupAttachments.uploadTrigger';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-attachments', location = '/static/bitbucket/internal/widget/markup-attachments/markup-attachments.js' */
define("bitbucket/internal/widget/markup-attachments/markup-attachments","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/util/events bitbucket/internal/util/feature-enabled bitbucket/internal/util/function bitbucket/internal/util/promise bitbucket/internal/util/property bitbucket/internal/util/text bitbucket/internal/widget/drag-drop-file-uploader/drag-drop-file-uploader bitbucket/internal/widget/inline-error-dialog/inline-error-dialog".split(" "),
function(r,f,g,t,u,v,w,x,y,h,z,A,B,C,D){function b(a){if(!b.isSupported())throw Error("MarkupAttachments requires DragDropFileUploader support");this.init.apply(this,arguments)}function E(a,c,b){var d=a.links.attachment;a=d&&d.href||a.links.self.href;c=(c||"").replace(/[^\w\.\-]/g,"");c=0===c.length||"."===e.default.first(c)?"upload"+c:c;a=a.replace(/([\(\)])/g,"\\$1");return"["+(k.default.typeFilters.image.test(b)?"!["+c+"]("+a+")":c)+"]("+a+")"}function F(a){return a+(a.length&&"\n"!==e.default.last(a)?
"\n":"")}Object.defineProperty(f,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(g),m=babelHelpers.interopRequireDefault(t),e=babelHelpers.interopRequireDefault(u),G=babelHelpers.interopRequireDefault(v),H=babelHelpers.interopRequireDefault(w),n=babelHelpers.interopRequireDefault(x);g=babelHelpers.interopRequireDefault(y);var d=babelHelpers.interopRequireDefault(h),I=babelHelpers.interopRequireDefault(z);h=babelHelpers.interopRequireDefault(A);var J=babelHelpers.interopRequireDefault(B),
k=babelHelpers.interopRequireDefault(C),K=babelHelpers.interopRequireDefault(D),p;g.default.getFromProvider("attachments").done(function(a){p=a});var q;h.default.getFromProvider("attachment.upload.max.size").done(function(a){q=a});b.isEnabled=function(){return p};b.isSupported=k.default.isSupported;b._editorClass="markup-attachments";b.prototype.init=function(a){this.$editor=(0,m.default)(a);this.$textarea=this.$editor.find("textarea");this.$uploadButton=this.$editor.find(".markup-attachments-button");
this._destroyables=[];e.default.bindAll(this,"handleUpload","handleAttachment","handleFailures","hideErrors");this.$editor.addClass(b._editorClass);this.dragDropFileUploader=new k.default(this.$editor,{url:L,fieldName:"files",uploadButton:this.$uploadButton,fileSizeLimit:q});this._destroyables.push(this.dragDropFileUploader);this._destroyables.push(n.default.chainWith(this.dragDropFileUploader).on({filesSelected:this.hideErrors,invalidFiles:d.default.partialRight(e.default.forEach,d.default.binary(this.handleFailures)),
uploadStarted:this.handleUpload}));a=J.default.formatSizeInBytes(this.dragDropFileUploader.options.fileSizeLimit);this.errorDialog=new K.default(this.$uploadButton,{title:function(a){return l.default.format("{0,choice,1#There was a problem with your upload and the following file was not added|1\u003cThere was a problem with your upload and the following files were not added}",a.length)},subtitle:l.default.format("Note: There is a {0} size limit per file",a)});this._destroyables.push(this.errorDialog);this._destroyables.push(n.default.chainWith(this.$editor).on("resize",this.errorDialog.refresh));a=(0,
m.default)(aui.icons.icon({icon:"success",useIconFont:!0})).appendTo(this.$uploadButton);this._destroyables.push({destroy:a.remove.bind(a)});this.rollingSpinner=I.default.rollingSpinner(this.$uploadButton)};b.prototype.handleUpload=function(a,c){this.rollingSpinner.add(a);var b=e.default.compose(d.default.partialRight(e.default.forEach,e.default.partial(this.handleAttachment,c)),d.default.dot("attachments"));a.done(b).fail(function(a,b){this.handleFailures([c],b,{statusCode:a.status})}.bind(this))};
b.prototype.handleAttachment=function(a,b){if(b.errors){var d=e.default.first(b.errors);this.handleFailures([a],d.exceptionName,{message:d.message})}else this.$textarea.val(F(this.$textarea.val())+E(b,a.name,a.type)).trigger("input").focus()};b.prototype.handleFailures=function(a,b,d){"abort"===b||"error"===b&&500!==d.statusCode?this.hideErrors():(e.default.pluck(a,"name").forEach(this.errorDialog.add),this.errorDialog.show())};b.prototype.hideErrors=function(){this.errorDialog.hide()};b.prototype.destroy=
function(){this.$editor.removeClass(b._editorClass);e.default.invoke(this._destroyables,"destroy")};var L=function(){return H.default.getRepository()&&G.default.currentRepo().attachments().build()};f.default=b;r.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:async-element-resize-helper', location = '/static/bitbucket/internal/util/async-element-resize-helper.js' */
define("bitbucket/internal/util/async-element-resize-helper",["module","exports"],function(e,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){if(!a)throw Error("asyncElementResizeHelper called with null elem");requestAnimationFrame(function(){var c=a.clientWidth,d=a.clientHeight;a._cachedSize&&a._cachedSize.w===c&&a._cachedSize.h===d||(a._cachedSize={w:c,h:d},b())})};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-editor', location = '/static/bitbucket/internal/widget/markup-editor/markup-editor.soy' */
// This file was automatically generated from markup-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.markupEditor.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.markupEditor == 'undefined') { bitbucket.internal.widget.markupEditor = {}; }


bitbucket.internal.widget.markupEditor.editor = function(opt_data, opt_ignored) {
  return '<div class="markup-editor">' + bitbucket.internal.widget.markupPreview.preview(null) + widget.aui.form.expandingTextarea({id: opt_data.textareaId, name: opt_data.textareaName ? opt_data.textareaName : 'text', extraClasses: 'text', initialValue: opt_data.text, placeholderText: opt_data.placeholderText}) + '<div class="markup-toolbar"><div class="secondary">' + bitbucket.internal.widget.markupPreview.previewHelp(null) + bitbucket.internal.widget.markupPreview.previewButton({title: opt_data.previewButtonTitle}) + '</div><div class="primary">' + bitbucket.internal.widget.markupAttachments.uploadTrigger({title: opt_data.attachmentButtonTitle, accessibilityText: opt_data.attachmentButtonAccessibilityText}) + '</div><div class="tertiary"></div></div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.markupEditor.editor.soyTemplateName = 'bitbucket.internal.widget.markupEditor.editor';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:markup-editor', location = '/static/bitbucket/internal/widget/markup-editor/markup-editor.js' */
define("bitbucket/internal/widget/markup-editor/markup-editor","module exports aui jquery lodash bitbucket/internal/util/async-element-resize-helper bitbucket/internal/util/events bitbucket/internal/widget/markup-attachments/markup-attachments bitbucket/internal/widget/markup-preview/markup-preview bitbucket/internal/widget/mentionable-textarea/mentionable-textarea".split(" "),function(m,f,n,p,q,r,t,u,v,w){function b(a){this.init.apply(this,arguments)}Object.defineProperty(f,"__esModule",{value:!0});
var l=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),c=babelHelpers.interopRequireDefault(q),x=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v),z=babelHelpers.interopRequireDefault(w),d=[];b._dataKey="markup-editor";b.bindTo=function(a){a=b.unbindFrom(a);var e=new b(a);a.data(b._dataKey,e);return e};b.unbindFrom=function(a){a=(0,g.default)(a);a=a.is(".markup-editor")?
a:a.find(".markup-editor");var e=a.data(b._dataKey);e&&e.destroy();return a};b.registerExtension=function(a){c.default.contains(d,a)||d.push(a)};b.deregisterExtension=function(a){d=c.default.without(d,a)};h.default.addLocalEventMixin(b.prototype);b.prototype.init=function(a){a=(0,g.default)(a);this.$editor=a.is(".markup-editor")?a:a.find(".markup-editor");this._destroyables=[];a=this.$editor.find("textarea");a.is(document.activeElement)&&c.default.defer(a.focus.bind(a));a=this.$editor.find("textarea.expanding").expandingTextarea();
this._destroyables.push(h.default.chainWith(a).on("resize.expanding",this.onComponentResize.bind(this,!1)));this._destroyables.push({destroy:a.expandingTextarea.bind(a,"destroy")});a=new y.default(this.$editor);this._destroyables.push(h.default.chainWith(a).on("resize",this.onComponentResize.bind(this,!0)));this._destroyables.push(a);this._destroyables.push(new z.default({$container:this.$editor}));a=function(a){this.$editor.find(".markup-attachments-button").addClass("disabled").prop("disabled",
"disabled").attr("aria-disabled",!0).attr("title",a)}.bind(this);k.default.isEnabled()?k.default.isSupported()?this._destroyables.push(new k.default(this.$editor)):a("Uploading attachments is not supported in this browser"):a("Your system administrator has disabled uploading attachments");d.forEach(function(a){a.init(this.$editor);c.default.isFunction(a.destroy)&&this._destroyables.push({destroy:c.default.partial(a.destroy,this.$editor)})}.bind(this));this.$editor.find(".markup-preview-help").tooltip({gravity:g.default.fn.tipsy.autoNS})};
b.prototype.onComponentResize=function(a){var b=this;(0,x.default)(this.$editor[0],function(){b.$editor.triggerHandler("resize");b.trigger("resize",a)})};b.prototype.destroy=function(){c.default.invoke(this._destroyables,"destroy");this.$editor.data(b._dataKey,null);this.$editor=null;this.off()};f.default=b;m.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-shortcuts', location = '/static/bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts.soy' */
// This file was automatically generated from keyboard-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.keyboardShortcutsContent = function(opt_data, opt_ignored) {
  var param6 = '';
  var contextNameList7 = opt_data.contextNames;
  var contextNameListLen7 = contextNameList7.length;
  for (var contextNameIndex7 = 0; contextNameIndex7 < contextNameListLen7; contextNameIndex7++) {
    var contextNameData7 = contextNameList7[contextNameIndex7];
    param6 += (contextNameIndex7 % 2 == 0) ? bitbucket.internal.widget.keyboardShortContext({contextName: contextNameData7, contextShortcuts: opt_data.contexts[contextNameIndex7]}) : '';
  }
  var param5 = '' + aui.group.item({content: param6});
  var param15 = '';
  var contextNameList16 = opt_data.contextNames;
  var contextNameListLen16 = contextNameList16.length;
  for (var contextNameIndex16 = 0; contextNameIndex16 < contextNameListLen16; contextNameIndex16++) {
    var contextNameData16 = contextNameList16[contextNameIndex16];
    param15 += (contextNameIndex16 % 2 == 1) ? bitbucket.internal.widget.keyboardShortContext({contextName: contextNameData16, contextShortcuts: opt_data.contexts[contextNameIndex16]}) : '';
  }
  param5 += aui.group.item({content: param15});
  var output = '' + aui.group.group({extraClasses: 'keyboard-shortcut-help', extraAttributes: {tabindex: '0'}, content: param5});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutsContent.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutsContent';
}


bitbucket.internal.widget.keyboardShortContext = function(opt_data, opt_ignored) {
  var output = '<div class="keyboard-shortcut-context"><h3>' + soy.$$escapeHtml(opt_data.contextName) + '</h3><dl>';
  var shortcutList29 = opt_data.contextShortcuts;
  var shortcutListLen29 = shortcutList29.length;
  for (var shortcutIndex29 = 0; shortcutIndex29 < shortcutListLen29; shortcutIndex29++) {
    var shortcutData29 = shortcutList29[shortcutIndex29];
    output += (! shortcutData29.hidden) ? bitbucket.internal.widget.keyboardShortcutItem({shortcut: shortcutData29}) : '';
  }
  output += '</dl></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortContext.soyTemplateName = 'bitbucket.internal.widget.keyboardShortContext';
}


bitbucket.internal.widget.keyboardShortcutItem = function(opt_data, opt_ignored) {
  var output = '<dt>' + soy.$$escapeHtml(opt_data.shortcut.description) + '</dt>';
  var optionList40 = opt_data.shortcut.keys;
  var optionListLen40 = optionList40.length;
  for (var optionIndex40 = 0; optionIndex40 < optionListLen40; optionIndex40++) {
    var optionData40 = optionList40[optionIndex40];
    output += ((! (optionIndex40 == 0) && ! (optionIndex40 == optionListLen40 - 1)) ? '<dd class=\'separator\'>' + soy.$$escapeHtml(',') + '</dd>' : '') + ((! (optionIndex40 == 0) && optionIndex40 == optionListLen40 - 1) ? '<dd class=\'separator\'>' + soy.$$escapeHtml(' or') + '</dd>' : '') + '<dd>' + bitbucket.internal.widget.keyboardShortcutOption({sequence: optionData40}) + '</dd>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutItem.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutItem';
}


bitbucket.internal.widget.keyboardShortcutOption = function(opt_data, opt_ignored) {
  var output = '';
  var keypressList57 = opt_data.sequence;
  var keypressListLen57 = keypressList57.length;
  for (var keypressIndex57 = 0; keypressIndex57 < keypressListLen57; keypressIndex57++) {
    var keypressData57 = keypressList57[keypressIndex57];
    output += ((! (keypressIndex57 == 0)) ? ' ' + soy.$$escapeHtml('then') + ' ' : '') + ((keypressData57.modifiers) ? bitbucket.internal.widget.keyboardShortcutModifier({keypress: keypressData57}) : bitbucket.internal.widget.keyboardShortcutKey({key: keypressData57}));
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutOption.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutOption';
}


bitbucket.internal.widget.keyboardShortcutModifier = function(opt_data, opt_ignored) {
  var output = '';
  var modifierList72 = opt_data.keypress.modifiers;
  var modifierListLen72 = modifierList72.length;
  for (var modifierIndex72 = 0; modifierIndex72 < modifierListLen72; modifierIndex72++) {
    var modifierData72 = modifierList72[modifierIndex72];
    output += bitbucket.internal.widget.keyboardShortcutKey({key: modifierData72});
  }
  output += bitbucket.internal.widget.keyboardShortcutKey({key: opt_data.keypress.key});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutModifier.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutModifier';
}


bitbucket.internal.widget.keyboardShortcutKey = function(opt_data, opt_ignored) {
  return '<kbd>' + soy.$$escapeHtml(opt_data.key) + '</kbd>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.keyboardShortcutKey.soyTemplateName = 'bitbucket.internal.widget.keyboardShortcutKey';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-shortcuts', location = '/static/bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts.js' */
define("bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts","module exports aui jquery lodash bitbucket/internal/util/events bitbucket/internal/util/navigator".split(" "),function(q,l,r,t,u,v,w){function c(){if(!(this instanceof c))return new c;this._enabledContexts=[]}function m(a,b){a=f.default.extend({},a);a.keys=d.default.map(a.keys,function(a){return d.default.map(a,function(a){if(d.default.all(["key","modifiers"],d.default.partial(d.default.has,a)))return a;var g=1<a.length?a.split("+"):
a;return d.default.isArray(g)&&1!==g.length?{key:g.pop(),modifiers:b&&!1===b.convertOSModifier?g:d.default.map(g,c.convertOSModifier)}:a})});a.displayContext||(a.displayContext=c._contextDisplayInfo[a.context]?c._contextDisplayInfo[a.context].displayName:a.context.replace(/\b[a-z]/g,function(a){return a.toUpperCase()}));h[a.displayContext]||(h[a.displayContext]=[]);h[a.displayContext].push(a)}function n(a,b){p.default.trigger("bitbucket.internal.ui.keyboard.shortcutClicked",null,{context:a,keyEventName:b})}
Object.defineProperty(l,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(r),f=babelHelpers.interopRequireDefault(t),d=babelHelpers.interopRequireDefault(u),p=babelHelpers.interopRequireDefault(v),x=babelHelpers.interopRequireDefault(w),y=/^[cC]trl$/i,k,h={};c.prototype._setRegistry=function(a){this._registry=a};c.prototype._initContent=function(){this._dialog=b.default.dialog2(aui.dialog.dialog2({titleText:"Keyboard shortcuts",content:bitbucket.internal.widget.keyboardShortcutsContent({contextNames:d.default.keys(h),
contexts:d.default.values(h)}),size:"large",id:"keyboard-shortcut-dialog"}))};c.prototype._bind=function(a){this._$trigger=a;var b=this;this._$trigger.on("click",function(a){a.preventDefault();b._show()})};c.prototype.enableContext=function(a){-1===f.default.inArray(a,this._enabledContexts)&&(k=a,this._registry.enableContext(a),k=void 0,this._enabledContexts.push(a))};c.prototype.resetContexts=function(){b.default.trigger("remove-bindings.keyboardshortcuts");this._enabledContexts=[];b.default.trigger("add-bindings.keyboardshortcuts")};
c.prototype._show=function(){this._hasShown||(this._initContent(),this._hasShown=!0);this._dialog.show()};c.prototype.addCustomShortcut=function(a,b,c,d){m({keys:b,context:a,displayContext:d,description:c},{convertOSModifier:!1})};c.convertOSModifier=function(a){return x.default.isMac()?a.replace(y,"\u2318"):a};c.internalizeShortcuts=function(a){d.default.each(a,m)};c._contextDisplayInfo={repository:{displayName:"Within A Repository"},"branch-compare":{displayName:"Branch compare"},
"branch-list":{displayName:"Branch list"},commit:{displayName:"Commit"},commits:{displayName:"Commit List"},"diff-tree":{displayName:"Commit"},"diff-view":{displayName:"Diff View"},filebrowser:{displayName:"Directory Browsing"},
global:{displayName:"Global"},"pull-request":{displayName:"Within A Pull Request"},"pull-request-list":{displayName:"Pull Request List"},"pull-request-overview":{displayName:"Within A Pull Request"},sourceview:{displayName:"Source View"}};
var e=new c;l.default={onReady:function(){e._bind((0,f.default)(".keyboard-shortcut-link"));var a=f.default.Deferred();(0,f.default)(document).ready(function(){setTimeout(function(){a.resolve()},0)});b.default.bind("register-contexts.keyboardshortcuts",function(b,c){e._setRegistry(c.shortcutRegistry);e.enableContext("global");a.done(function(){p.default.trigger("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",e,e)})});b.default.bind("shortcuts-loaded.keyboardshortcuts",function(a,
b){c.internalizeShortcuts(b.shortcuts)});b.default.params["keyboardshortcut-hash"]="bundled";b.default.trigger("initialize.keyboardshortcuts");require("bitbucket/internal/util/shortcuts",null).bind("keyboardShortcutsDialog",e._show.bind(e))},addTooltip:function(a,e){var g=(0,d.default)(e.split("+")).chain().map(c.convertOSModifier).map(function(a){return"shift"===a?"Shift":"ctrl"===a?c.convertOSModifier("Ctrl"):
a}).value().join(" + "),f=a.attr("title");a.attr("title",f+b.default.format(" (type \u0027\u0027{0}\u0027\u0027)",g));return{remove:function(){a.attr("title",f)}}},bindKeyboardShortcutAnalytics:function(a,b){b.onValue(n.bind(null,k,a))},getEnablingContext:function(){return k},showDialog:function(){e&&e._show()},resetContexts:function(){e.resetContexts()},fireKeyboardShocutAnalyticsEvent:n};q.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-shortcuts-util', location = '/static/bitbucket/internal/util/shortcuts.js' */
define("bitbucket/internal/util/shortcuts","module exports aui bacon bitbucket/util/events bitbucket/internal/util/navigator bitbucket/internal/widget/keyboard-shortcuts/keyboard-shortcuts".split(" "),function(l,f,m,n,p,q,r){function k(b){var a=d[b];a.lazy.whenIType&&a.lazy.whenIType.unbind();var c=t.default.whenIType(a.lazy.keys);a.lazy.whenIType=c;c.execute(a._sink);c.execute(g.default.fireKeyboardShocutAnalyticsEvent.bind(null,a.lazy.analyticsContext,b))}function h(b){d.hasOwnProperty(b)||(d[b]=
{analyticsBound:!1,lazy:{keys:null,whenIType:null,analyticsContext:null},baconSink:function(a){this._sink&&this._sink(a)},_sink:null,stream:u.default.fromBinder(function(a){var c=d[b];c._sink=a;c.lazy.keys&&k(b);return function(){c._sink=null;c.lazy.whenIType&&c.lazy.whenIType.unbind()}})});return d[b]}Object.defineProperty(f,"__esModule",{value:!0});var t=babelHelpers.interopRequireDefault(m),u=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q),
g=babelHelpers.interopRequireDefault(r),d={};f.default={registerLazy:function(b,a,c){w.default.isMac()&&(c=c.replace(/ctrl/i,"meta"));a.unbind();a=h(b);a.lazy.keys=c;a.lazy.analyticsContext=g.default.getEnablingContext();a._sink&&k(b)},setup:function(b,a,c){var e=h(b);a.execute(e.baconSink.bind(e));e.analyticsBound||(e.analyticsBound=!0,g.default.bindKeyboardShortcutAnalytics(b,d[b].stream));v.default.trigger("bitbucket.internal.keyboard.shortcuts."+b,a,c)},bind:function(b,a){return h(b).stream.onValue(a)}};
l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time-i18n-mappings', location = '/static/bitbucket/internal/util/time-i18n-mappings.js' */
define("bitbucket/internal/util/time-i18n-mappings",["module","exports","aui"],function(d,c,e){Object.defineProperty(c,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(e);c.default={commentEditedAge:{aMomentAgo:function(){return "edited a moment ago"},oneMinuteAgo:function(){return "edited 1 min ago"},xMinutesAgo:function(b){return a.default.format("edited {0} mins ago",
b)},oneHourAgo:function(){return "edited 1 hour ago"},xHoursAgo:function(b){return a.default.format("edited {0} hours ago",b)},oneDayAgo:function(){return "edited yesterday"},xDaysAgo:function(b){return a.default.format("edited {0} days ago",b)},oneWeekAgo:function(){return "edited 1 week ago"},absolute:function(b){return a.default.format("edited on {0}",
b)}}};d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-page-data:page-data-loader', location = '/static/lib/page-data-loader.js' */
var _PageDataPlugin=function(){function k(){e.each(f,function(a,d){e.each(d,function(b,c){c.reject(h[a]?Error("Provider "+a+" not included with context "+b):Error("Provider "+a+" not included on page."))})})}var l=Object.prototype.hasOwnProperty,e=jQuery,h={},f={};e(document).ready(k);return{load:function(a,d){for(var b in d)if(l.call(d,b)){var c=f[b]||(f[b]={}),c=c[a]||(c[a]=e.Deferred()),g=h[b]||(h[b]={});g[a]=d[b];if("pending"!==c.state())throw Error("Attempt to set context "+a+" for plugin key "+
b+" multiple times.");c.resolve(g[a])}},data:h,ready:function(a,d){var b=Array.prototype.slice.call(arguments,2),c=f[a]||(f[a]={}),g=c[d]||(c[d]=e.Deferred());b.forEach(function(a){g.done(a)});return g},_domReady:k}}();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:web-fragment-manager', location = '/static/bitbucket/internal/util/web-fragment-manager.js' */
window.WebFragments=function(){function x(a){for(var b=Array.prototype.slice.call(arguments,1),c=void 0,f=b.length,c=0;c<f;c++){var g=b[c];if(g)for(var q=p(g),h=void 0,w=q.length,h=0;h<w;h++){var d=q[h];a[d]=g[d]}}return a}function t(a,b){return"function"===typeof a?a(x({},b)):a}function e(a){var b=l[a];return function(c,f){var g=b[c],q=[];if(g&&g.length)for(var h=void 0,w=g.length,h=0;h<w;h++){var d;d=g[h];var m=f,r=void 0,n=void 0,k=void 0,e=void 0,l={type:a.toUpperCase()};if(u.call(d,"serverCondition")&&
!d.serverCondition)d=null;else if(m=x({},m,d.serverContext,d.params),u.call(d,"condition")&&!t(d.condition,m))d=null;else{d["context-provider"]&&"function"===typeof d["context-provider"]&&(m=t(d["context-provider"],m));r=p(d);k=0;for(e=r.length;k<e;k++)n=r[k],/con(dition|text-provider)|params/.test(n)||(l[n]=t(d[n],m));if(d.params)for(var v=l.params={},r=p(d.params),k=0,e=r.length;k<e;k++)n=r[k],v[n]=t(d.params[n],m);d=l}d&&q.push(d)}-1===c.indexOf("bitbucket.internal.")&&(new RegExp("[\\?\x26]web\\."+
a+"s(\x3d|\x26|$)")).test(window.location.search)&&q.push(B[a](c,f));return q}}function v(a){var b=l[a];return function(a){if(!a)throw Error("No descriptor provided");if("string"!==typeof a.location)throw Error("No location provided, or location was not a string.");if("string"!==typeof a.completeModuleKey)throw Error("No completeModuleKey provided, or completeModuleKey was not a string.");y(a);b[a.location]||(b[a.location]=[]);b[a.location].push(a);b[a.location].sort(z)}}function z(a,b){return(0<=
a.weight?a.weight:1E3)-(0<=b.weight?b.weight:1E3)}var u=Object.prototype.hasOwnProperty,l={item:{},section:{},panel:{}},p=function(a){var b=[],c;for(c in a)u.call(a,c)&&b.push(c);return b},y=void 0,y=window._PageDataPlugin&&_PageDataPlugin.ready?function(a){_PageDataPlugin.ready(a.completeModuleKey,a.location,function(b){u.call(b,"serverCondition")&&(a.serverCondition=b.serverCondition);u.call(b,"serverContext")&&(a.serverContext=b.serverContext)})}:function(a){return a},B={item:function(a,b){return{url:"#example-web-item-url",
pluginKey:"org.example.plugins",moduleKey:"example-web-item",completeModuleKey:"org.example.plugins:example-web-item",linkText:"Client Web Item: "+a,hasTooltip:!0,tooltip:"Client Context Items: "+p(b).join(", "),hasIcon:!1,iconUrl:null,iconWidth:0,iconHeight:0,styleClass:"plugin-point",linkId:null,description:null,params:{},type:"ITEM",weight:1E3}},section:function(a,b){return{name:"example-web-section",key:"example-web-section",location:a,labelText:"Client Web Section: "+a,type:"SECTION",params:{},
weight:1E3}},panel:function(a,b){return{view:'\x3cdiv class\x3d"plugin-point web-panel"\x3e\x3cstrong\x3eClient Web Panel\x3c/strong\x3e: '+a+"\x3cbr /\x3e\x3cstrong\x3eClient Context Items\x3c/strong\x3e: "+p(b).join(", ")+"\x3c/div\x3e",weight:1E3}}},A=e("panel");e("item");return{getWebItems:e("item"),getWebSections:e("section"),getWebPanels:function(a,b){for(var c=A(a,b),f=void 0,g=c.length,f=0;f<g;f++)c[f]=c[f].view;return c},getWebFragmentDescriptors:function(a,b){var c=l[b];return(c=c&&c[a])&&
c.slice()},addWebItemDescriptor:v("item"),addWebSectionDescriptor:v("section"),addWebPanelDescriptor:v("panel"),getWebFragments:function(a,b,c){"string"!==typeof b&&(c=b,b=a);a=this.getWebItems(a,c);b=this.getWebSections(b,c);b=a.concat(b);b.sort(z);return b},_getValue:t,_formatI18n:function(a,b,c){var f=(a===b?c:a)||b||c||"";return function(a){var b=[],c=p(a);c.sort();for(var e=void 0,d=c.length,e=0;e<d;e++)b.push(a[c[e]]);return AJS.format(f,b)}},_getWebPanels:A}}();
define("bitbucket/internal/util/web-fragment-manager",function(){return window.WebFragments});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-create-task', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'comment-create-task','moduleKey':'comment-create-task','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-create-task','weight':40.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/taskable-comment/taskable-comment').isPullRequest), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'task-create'),'location':'bitbucket.comments.actions','url':WebFragments._formatI18n(null, null, '#'),'linkText':WebFragments._formatI18n("Create task", 'bitbucket.web.tasks.createTask', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-analytics-resources', location = '/static/bitbucket/internal/feature/comments/likes/analytics.js' */
define("bitbucket/internal/feature/comments/likes/analytics",["bitbucket/util/events","bitbucket/util/state","bitbucket/internal/util/analytics","bitbucket/internal/util/function","exports",],function(i,g,e,f,c){function h(){i.on("bitbucket.internal.feature.comments.likes.like",b.bind(null,"like"));i.on("bitbucket.internal.feature.comments.likes.unlike",b.bind(null,"unlike"));i.on("bitbucket.internal.feature.comments.likes.actions.like",b.bind(null,"actions.like"))}var d="comment.";function b(k,j){e.add(d+k,a(j))}function a(l){var n=g.getPullRequest();var m=g.getRepository();var o={"comment.id":l.commentId,"repository.id":m.id,totalLikes:l.likerCount,};if(n){var k=g.getCurrentUser().slug;var j=n.reviewers.map(f.dot("user.slug"));o.isAuthor=n.author.user.slug===k;o.isReviewer=j.indexOf(k)!==-1;o["pullRequest.id"]=n.id}return o}c.init=h});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-analytics-resources', location = '/static/bitbucket/internal/feature/comments/likes/analytics-init.js' */
require("bitbucket/internal/feature/comments/likes/analytics").init();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-resources', location = '/static/bitbucket/internal/feature/comments/likes/controller.js' */
define("bitbucket/internal/feature/comments/likes/controller",["aui","jquery","lib/jsuri","lodash","bitbucket/util/events","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/util/state",],function(k,f,c,l,m,h,d,j){function g(o){l.bindAll(this);this.options=o;this.$buttonEl=null;this.$infoPanel=null;this.likes=o.likes;this.dialog=null;this.$infoPanel=o.$infoPlaceholder.parent();this.$infoPanel.on("click","button",this.onInfoClicked);this.updateLikeInfo();if(this.likes.canLike){this.$buttonEl=this.$infoPanel.parentsUntil(".content").find(".comment-likes-button");this.$buttonEl.on("click",this.onLikeClick);this.likeIfDeepLinked()}else{if(this.likes.likerCount===0){this.$infoPanel.remove()}}}g.prototype.updateLikeButton=function(){var o=this.likes.userHasLiked?"Unlike":"Like";this.$buttonEl.text(o)};g.prototype.updateLikeInfo=function(){if(this.likes.likerCount===0){this.$infoPanel.addClass("hidden")}else{this.$infoPanel.html(bitbucket.internal.plugin.comment.likes.likeInfo(this.likes));this.$infoPanel.removeClass("hidden");this.dialog=null}};g.prototype.getLikesURL=function(){var o=j.getPullRequest();var q=j.getCommit();var p=h.rest("comment-likes");if(o){p=p.currentPullRequest()}else{if(q){p=p.project(j.getProject().key).repo(j.getRepository().slug).commit(q.id)}}return p.addPathComponents("comments",this.options.commentId,"likes").build()};g.prototype.onInfoClicked=function(p){p.preventDefault();var o=this;if(!this.dialog){this.dialog=k.InlineDialog(p.target,"likes-info-panel",function(r,q,s){r.html(bitbucket.internal.plugin.comment.likes.dialog(o.likes));s()},{closeOnTriggerClick:true,initCallback:e,hideCallback:a,});this.dialog.show()}};g.prototype.likeIfDeepLinked=function(){var o=new c(window.location);if(o.getQueryParamValue("action")==="like"&&parseInt(o.getQueryParamValue("commentId"),10)===this.options.commentId&&!this.likes.userHasLiked){this.setLike(true);this._triggerEvent("actions.like")}};function n(o){if(this.popup&&!this.popup.has(o.target).length){this.hide()}}var b;function e(){b=n.bind(this);f(document).on("mouseup",b)}function a(){f(document).off("mouseup",b);b=null}g.prototype.onLikeClick=function(o){o.preventDefault();this.setLike(!this.likes.userHasLiked)};g.prototype.setLike=function(o){this._setInteralLikeStatus(o);this._syncLike(o)};g.prototype._setInteralLikeStatus=function(o){this.likes.userHasLiked=o;this.likes.likerCount=o?this.likes.likerCount+1:this.likes.likerCount-1;this.updateLikeButton();this.updateLikeInfo()};var i={404:function(t,o,s,r){var p=r&&r.errors&&r.errors.length&&r.errors[0];var q=p&&p.message;return{title:"Comment not found",message:q,shouldReload:true,fallbackUrl:undefined,}},};g.prototype._syncLike=function(o){d.rest({type:o?"POST":"DELETE",url:this.getLikesURL(),statusCode:i,}).done(this._triggerEvent.bind(this,o?"like":"unlike")).fail(this._setInteralLikeStatus.bind(this,!o))};g.prototype._triggerEvent=function(o){m.trigger("bitbucket.internal.feature.comments.likes."+o,null,l.extend({commentId:this.options.commentId,},this.likes))};return g});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-resources', location = '/static/bitbucket/internal/feature/comments/likes/web-panel.js' */
define("bitbucket/internal/feature/comments/likes/web-panel",["bitbucket/util/state","bitbucket/internal/feature/comments/comment-async-web-panel","bitbucket/internal/feature/comments/likes/controller","exports",],function(e,g,c,b){function d(i){var l=i.comment;var k=l.properties&&l.properties.likedBy;var h=e.getCurrentUser().slug;var j={userHasLiked:false,otherLiker:null,likerCount:0,otherLikers:[],canLike:l.author.slug!==h,};if(k){j.userHasLiked=k.total>0&&k.likers[0].slug===h;if(j.userHasLiked){j.otherLiker=k.total>1?k.likers[1]:null}else{j.otherLiker=k.total>0?k.likers[0]:null}j.likerCount=k.total;j.otherLikers=j.userHasLiked?k.likers.slice(1):k.likers}return j}function a(h){return d(h).canLike}function f(h){return g.getWebPanelEl(function(i){new c({commentId:h.comment.id,likes:d(h),$infoPlaceholder:i,})})}b.contextProvider=d;b.buttonPanelCondition=a;b.infoPanel=f});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-resources', location = '/static/bitbucket/internal/feature/comments/likes/comment-likes.soy' */
// This file was automatically generated from comment-likes.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.plugin.comment.likes.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.plugin == 'undefined') { bitbucket.internal.plugin = {}; }
if (typeof bitbucket.internal.plugin.comment == 'undefined') { bitbucket.internal.plugin.comment = {}; }
if (typeof bitbucket.internal.plugin.comment.likes == 'undefined') { bitbucket.internal.plugin.comment.likes = {}; }


bitbucket.internal.plugin.comment.likes.likeButton = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.linkButton({content: '' + ((opt_data.userHasLiked) ? soy.$$escapeHtml('Unlike') : soy.$$escapeHtml('Like')), extraClasses: 'comment-likes-button'});
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.comment.likes.likeButton.soyTemplateName = 'bitbucket.internal.plugin.comment.likes.likeButton';
}


bitbucket.internal.plugin.comment.likes.likeInfo = function(opt_data, opt_ignored) {
  return '<span class="comment-likes-info">' + aui.icons.icon({icon: 'like-small', useIconFont: true}) + ((opt_data.userHasLiked) ? (opt_data.likerCount == 1) ? soy.$$escapeHtml('You like this') : (opt_data.likerCount == 2) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('You and \x3cspan class\x3d\x22comment-liker\x22 title\x3d\x22{0}\x22\x3e{0}\x3c/span\x3e like this',typeof (opt_data.otherLiker.displayName || opt_data.otherLiker.name) === 'number' ? opt_data.otherLiker.displayName || opt_data.otherLiker.name : soy.$$escapeHtml(opt_data.otherLiker.displayName || opt_data.otherLiker.name)))) : soy.$$filterNoAutoescape(AJS.format('You and {1}{0} others{2} like this',opt_data.likerCount - 1,'<button class="stash-link-button">','</button>')) : (opt_data.likerCount == 1) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x3cspan class\x3d\x22comment-liker\x22 title\x3d\x22{0}\x22\x3e{0}\x3c/span\x3e likes this',typeof (opt_data.otherLiker.displayName || opt_data.otherLiker.name) === 'number' ? opt_data.otherLiker.displayName || opt_data.otherLiker.name : soy.$$escapeHtml(opt_data.otherLiker.displayName || opt_data.otherLiker.name)))) : soy.$$filterNoAutoescape(AJS.format('{1}{0} people{2} like this',opt_data.likerCount,'<button class="stash-link-button">','</button>'))) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.comment.likes.likeInfo.soyTemplateName = 'bitbucket.internal.plugin.comment.likes.likeInfo';
}


bitbucket.internal.plugin.comment.likes.dialog = function(opt_data, opt_ignored) {
  var output = '<div class="comment-likes-dialog"><h5 class="title">' + soy.$$escapeHtml('People who like this') + '</h5><ul class="user-list">';
  var likerList38 = opt_data.otherLikers;
  var likerListLen38 = likerList38.length;
  for (var likerIndex38 = 0; likerIndex38 < likerListLen38; likerIndex38++) {
    var likerData38 = likerList38[likerIndex38];
    output += '<li>' + bitbucket.internal.widget.avatar({size: 'small', person: likerData38}) + bitbucket.internal.widget.userLink({extraClasses: 'liker-name', user: likerData38}) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.comment.likes.dialog.soyTemplateName = 'bitbucket.internal.plugin.comment.likes.dialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-button', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes','key':'comment-likes-button','moduleKey':'comment-likes-button','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-button','weight':110.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/comments/likes/web-panel').buttonPanelCondition), ctx); },'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/comments/likes/web-panel').contextProvider), ctx); },'params':{},'location':'bitbucket.comments.info','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.plugin.comment.likes.likeButton), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-info', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes','key':'comment-likes-info','moduleKey':'comment-likes-info','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-comment-likes:comment-likes-info','weight':111.0,'params':{},'location':'bitbucket.comments.info','view':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/comments/likes/web-panel').infoPanel), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:product-info', location = '/static/bitbucket/internal/util/product-info/product-info.soy' */
// This file was automatically generated from product-info.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.util.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.util == 'undefined') { bitbucket.internal.util = {}; }


bitbucket.internal.util.productName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml("Bitbucket");
};
if (goog.DEBUG) {
  bitbucket.internal.util.productName.soyTemplateName = 'bitbucket.internal.util.productName';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-model-resources', location = '/static/bitbucket/internal/feature/tasks/model/task-collection.js' */
define("bitbucket/internal/feature/tasks/model/task-collection","module exports backbone-brace bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-state".split(" "),function(h,d,e,f,k,c,g,b){Object.defineProperty(d,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);var l=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(k);c=babelHelpers.interopRequireDefault(c);
g=babelHelpers.interopRequireDefault(g);var m=babelHelpers.interopRequireDefault(b);b=e.default.Collection.extend({model:g.default,initialize:function(){this.on("remove",function(a){a.isNew()||(a=a.toJSON(),a.lastState=a.state,a.state=m.default.DEFAULT,l.default.trigger("bitbucket.internal.feature.pull-request-tasks.deleted",null,{task:a}))})},url:f.default.rest("tasks").addPathComponents("pull-requests").withParams({repositoryId:c.default.getRepository().id,pullRequestId:c.default.getPullRequest().id,
start:0,limit:1E3}).build()});var n=new b;b.getCollection=function(){return n};d.default=b;h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-model-resources', location = '/static/bitbucket/internal/feature/tasks/model/task.js' */
define("bitbucket/internal/feature/tasks/model/task","module exports aui backbone backbone-brace lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/model/stash-user".split(" "),function(r,h,k,t,u,l,v,w,m,x){function d(a){return a&&"bitbucket.internal.feature.pull-request-tasks."+a}Object.defineProperty(h,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(t);k=babelHelpers.interopRequireDefault(u);
var p=babelHelpers.interopRequireDefault(l),y=babelHelpers.interopRequireDefault(v);l=babelHelpers.interopRequireDefault(w);var e=babelHelpers.interopRequireDefault(m);m=babelHelpers.interopRequireDefault(x);var z=l.default.rest().addPathComponents("tasks"),g=k.default.Model.extend({namedAttributes:{id:"number",anchor:null,state:"string",author:m.default,createdDate:"number",text:"string",html:"string",properties:null,permittedOperations:null,lastState:"string",pendingSync:"boolean",pullRequestId:"number",
repositoryId:"number"},defaults:{state:e.default.OPEN,text:"",pendingSync:!1,permittedOperations:{}},url:function(){var a=z;this.isNew()||(a=a.addPathComponents(this.getId()));return a.build()},initialize:function(){this.on("sync",function(){this._previousAttributes.id||this._triggerTaskEvent(d("created"));this._triggerTaskEvent(d("saved"))})},nextState:function(){return e.default.Transitions[this.getState()]},eventNameForState:function(a){switch(a){case e.default.OPEN:return this._previousAttributes.id?
d("reopened"):d("created");case e.default.RESOLVED:return d("resolved");case e.default.DELETED:return d("deleted");default:return d("default")}},transitionToNextState:function(){return this._updateState(this.nextState())},changeState:function(a){this.set({state:a,lastState:this.getState()},{local:!0});this._triggerTaskEvent(this.eventNameForState(a))},_updateState:function(a){var c=this.getState(),q=this.eventNameForState(a),b=this;this.changeState(a);return this.save().done(function(){b.getState()!==
a&&(q=b.eventNameForState(b.getState()),b._triggerTaskEvent(q))}).fail(function(){b.set({state:c,lastState:a});b._triggerTaskEvent(d("failed-transition"))})},updateText:function(a){var c=this,d=this.getText(),b=g.sanitiseText(a);this.setText(b);return(this.save()||n.default.$.Deferred().reject(this.validationError)).fail(function(){""!==b&&c.setText(d)})},validate:function(a,c){if(g.sanitiseText(a.text)!==a.text)return "Invalid task text";if(""===a.text)return "Please enter some text"},
sync:function(a,c,d){this.setPendingSync(!0);c=n.default.sync(a,c,p.default.extend(d,{statusCode:{404:function(b,c,d,e){b=(b=e&&e.errors&&e.errors.length&&e.errors[0])&&b.message;"create"!==a&&(b=f.default.format("{0} could not update this task, it has been deleted.",bitbucket.internal.util.productName()));return{title:"Task not found",message:b,shouldReload:!0,fallbackUrl:void 0}}}}));c.always(this.setPendingSync.bind(this,!1));return c},_triggerTaskEvent:function(a,
c){c===this&&(c={});y.default.trigger(a,null,p.default.extend({task:this.toJSON()},c))}},{Anchor:{COMMENT:"COMMENT"}});g.sanitiseText=function(a){return a.trim().replace(/\s+/gm," ")};h.default=g;r.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-model-resources', location = '/static/bitbucket/internal/feature/tasks/model/task-state.js' */
define("bitbucket/internal/feature/tasks/model/task-state",["module","exports"],function(c,b){Object.defineProperty(b,"__esModule",{value:!0});var a={DEFAULT:"NONE",OPEN:"OPEN",RESOLVED:"RESOLVED",DELETED:"DELETED",Transitions:{}};a.Transitions[a.DEFAULT]=a.OPEN;a.Transitions[a.OPEN]=a.RESOLVED;a.Transitions[a.RESOLVED]=a.OPEN;b.default=a;c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-view-resources', location = '/static/bitbucket/internal/feature/tasks/task-view/task-view.js' */
define("bitbucket/internal/feature/tasks/task-view/task-view","module exports aui backbone jquery lodash bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/util/async-element-resize-helper bitbucket/internal/util/events bitbucket/internal/util/function".split(" "),function(k,e,f,l,c,m,n,p,q,r){Object.defineProperty(e,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(l);var h=babelHelpers.interopRequireDefault(c),d=babelHelpers.interopRequireDefault(m),
t=babelHelpers.interopRequireDefault(n),u=babelHelpers.interopRequireDefault(p),v=babelHelpers.interopRequireDefault(q);c=babelHelpers.interopRequireDefault(r);var b={VIEW:"view",EDIT:"edit"};c=f.default.View.extend({events:{"click .task-checkbox":"transitionTaskHandler","click .task-edit":"onTaskEditClick","click .task-save":"onTaskSaveClick","click .task-cancel":"onTaskCancelClick","keydown .task-text":"onTaskKeyDown","click .task-delete":"onTaskDeleteClick","keypress textarea":"onTaskTextareaKeypress"},
defaults:{showLink:!1,mode:b.VIEW},initialize:function(a){d.default.bindAll(this,"focusEditor","_onResize");this.listenTo(this.model,"change invalid",this.render);this.listenToOnce(this.model,"destroy",this._onResize);this.options=d.default.extend({},this.defaults,a);this.mode=this.options.mode;this.mode===b.EDIT&&(this.originalText=this.model.getText());this._enableExpandingTextareas()},template:c.default.dot("bitbucket.internal.feature.tasks.taskView.task")(window),render:function(){var a=(0,h.default)(this.template({task:this.model.toJSON(),
mode:this.mode,showLink:this.options.showLink,error:this.model.validationError}));this.$el.replaceWith(a);this.setElement(a);this._enableExpandingTextareas();this.mode===b.EDIT&&d.default.defer(this.focusEditor);d.default.defer(this._onResize);return this},transitionTaskHandler:function(){this.model.transitionToNextState()},saveTask:function(){var a=this,w=this.$(".task-text").val();a.switchMode(b.VIEW);this.model.updateText(w).fail(function(){a.switchMode(b.EDIT)})},switchMode:function(a){this.mode=
a;a===b.EDIT&&(this.originalText=this.model.getText()||this.originalText);this.render()},cancelTaskEdit:function(){this.model.isNew()?this.model.destroy():(this.model.setText(this.originalText),this.model.isValid(),this.originalText=null,this.switchMode(b.VIEW))},onTaskDeleteClick:function(a){var b=this;a.preventDefault();this.model.isNew()||(b.model.changeState(t.default.DELETED),b.model.destroy({wait:!0,error:function(){b.model.changeState(b.model.getLastState())}}))},focusEditor:function(){this.$(".task-text").focus()},
getEditorText:function(){return this.$(".task-text").val()},onTaskKeyDown:function(a){a.keyCode===g.default.keyCode.ESCAPE?(a.preventDefault(),a.stopPropagation(),this.cancelTaskEdit()):a.keyCode===g.default.keyCode.ENTER&&(a.preventDefault(),this.saveTask())},onTaskEditClick:function(a){a.preventDefault();this.model.isNew()||this.switchMode(b.EDIT)},onTaskSaveClick:function(a){a.preventDefault();this.saveTask()},onTaskCancelClick:function(a){a.preventDefault();this.cancelTaskEdit()},onTaskTextareaKeypress:d.default.debounce(function(a){(0,
h.default)(a.target).removeClass("task-error")},300),_enableExpandingTextareas:function(){if(this.mode===b.EDIT)this.$("textarea.expanding").expandingTextarea().on("input.expanding",this._onResize)},_onResize:function(){var a=this.$el[0];a&&(0,u.default)(a,function(){v.default.trigger("bitbucket.internal.webpanel.resize",null,{location:"bitbucket.comments.extra",el:a})})}},{Mode:b});e.default=c;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-view-resources', location = '/static/bitbucket/internal/feature/tasks/task-view/task-view.soy' */
// This file was automatically generated from task-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.taskView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.taskView == 'undefined') { bitbucket.internal.feature.tasks.taskView = {}; }


bitbucket.internal.feature.tasks.taskView.task = function(opt_data, opt_ignored) {
  var output = '<div class="task task-status-' + soy.$$escapeHtml(opt_data.task.state.toLowerCase()) + ((opt_data.error) ? ' task-error' : '') + ((opt_data.task.pendingSync) ? ' task-pending-sync' : '') + ((opt_data.task.text == '' && ! opt_data.task.id) ? ' task-blank' : '') + '" data-task-state="' + soy.$$escapeHtml(opt_data.task.state) + '" data-task-id="' + soy.$$escapeHtml([opt_data ? opt_data.task.id : null,''].filter(function(x){return x != null;})[0]) + '" data-comment-id="' + soy.$$escapeHtml(opt_data.task.anchor.id) + '"><div class="task-action task-checkbox-container"><input type="checkbox" class="task-checkbox checkbox"' + ((opt_data.task.state == 'RESOLVED') ? ' checked="checked"' : '') + ((opt_data.mode == 'edit' || ! opt_data.task.permittedOperations.transitionable) ? ' disabled=\'disabled\'' : '') + ' /></div>' + ((opt_data.mode == 'edit') ? bitbucket.internal.feature.tasks.taskView.editTaskForm(opt_data) : bitbucket.internal.feature.tasks.taskView.viewTask(opt_data)) + ((opt_data.showLink) ? aui.buttons.button({text: '', type: 'link', extraClasses: 'task-action task-link-button', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-link'}) : '') + '<div class="task-footer">';
  var diffAnchorPath__soy45 = opt_data.task.properties && opt_data.task.properties.diffAnchorPath;
  output += ((opt_data.showLink && diffAnchorPath__soy45) ? '<aside class="comment-diff-anchor">' + aui.icons.icon({useIconFont: true, icon: 'file', iconFontSet: 'devtools'}) + aui.buttons.button({text: new (require('bitbucket/internal/model/path'))(diffAnchorPath__soy45).getName(), type: 'link', extraAttributes: {'data-path': diffAnchorPath__soy45}}) + '</aside>' : '') + ((opt_data.mode == 'edit' || (opt_data.task.permittedOperations.editable || opt_data.task.permittedOperations.deletable) || opt_data.task.id == null) ? '<ul class="actions">' + ((opt_data.mode == 'edit') ? bitbucket.internal.feature.tasks.taskView.editTaskActions(null) : bitbucket.internal.feature.tasks.taskView.viewTaskActions(opt_data)) + '</ul>' : '') + ((opt_data.mode == 'edit') ? '<div class="task-tip">' + soy.$$escapeHtml('Tip: Try selecting some of the comment before clicking \x22Create task\x22') + '</div>' : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.task.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.task';
}


bitbucket.internal.feature.tasks.taskView.viewTask = function(opt_data, opt_ignored) {
  return '<div class="task-content message ' + soy.$$escapeHtml(opt_data.task.html ? 'markup' : 'plaintext') + '">' + ((opt_data.task.html) ? soy.$$filterNoAutoescape(opt_data.task.html) : soy.$$escapeHtml(opt_data.task.text)) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.viewTask.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.viewTask';
}


bitbucket.internal.feature.tasks.taskView.viewTaskActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.task.permittedOperations.editable || opt_data.task.id == null) ? '<li><a href="#" class="task-edit">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((opt_data.task.permittedOperations.deletable || opt_data.task.id == null) ? '<li><a href="#" class="task-delete">' + soy.$$escapeHtml('Delete') + '</a></li>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.viewTaskActions.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.viewTaskActions';
}


bitbucket.internal.feature.tasks.taskView.editTaskForm = function(opt_data, opt_ignored) {
  return '' + widget.aui.form.expandingTextarea({name: 'task-text', initialValue: opt_data.task.text, placeholderText: '' + ((opt_data.error) ? soy.$$escapeHtml(opt_data.error) : (opt_data.task.text) ? soy.$$escapeHtml('Please enter some text') : soy.$$escapeHtml('Add new task')), extraClasses: 'task-text' + ((opt_data.error) ? ' task-error' : '')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.editTaskForm.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.editTaskForm';
}


bitbucket.internal.feature.tasks.taskView.editTaskActions = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="task-save">' + soy.$$escapeHtml('Save') + '</a></li><li><a href="#" class="task-cancel">' + soy.$$escapeHtml('Cancel') + '</a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskView.editTaskActions.soyTemplateName = 'bitbucket.internal.feature.tasks.taskView.editTaskActions';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list.soy' */
// This file was automatically generated from task-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.taskList.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.taskList == 'undefined') { bitbucket.internal.feature.tasks.taskList = {}; }


bitbucket.internal.feature.tasks.taskList.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'task-list-dialog', size: 'medium', titleText: 'Tasks', extraClasses: 'task-list-dialog', content: '' + bitbucket.internal.feature.tasks.taskList.dialogContent(null), footerHintText: 'Tip: Use Shift + T to open the task list.', footerActionContent: '' + aui.buttons.button({id: 'dialog-close-button', text: 'Close', extraClasses: 'aui-button-link'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialog.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialog';
}


bitbucket.internal.feature.tasks.taskList.dialogContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<ul id="' + soy.$$escapeHtml([opt_data ? opt_data.id : null,'task-list-dialog-list'].filter(function(x){return x != null;})[0]) + '" class="paged-table task-list"></ul>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialogContent.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialogContent';
}


bitbucket.internal.feature.tasks.taskList.dialogContentSection = function(opt_data, opt_ignored) {
  return '<li class="task-list-row section-heading"><h6>' + soy.$$escapeHtml(opt_data.title) + '</h6></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialogContentSection.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialogContentSection';
}


bitbucket.internal.feature.tasks.taskList.taskListRow = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<li class="task-list-row' + soy.$$escapeHtml(opt_data.isCollapsed ? ' collapsed' : ' expanded') + ' task-container"></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.taskListRow.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.taskListRow';
}


bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('There are no tasks for this pull request.') + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage.soyTemplateName = 'bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-table.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list-table","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/feature/tasks/task-list/task-list-row-view bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/widget/paged-table/paged-table".split(" "),function(q,h,r,t,u,v,w,x,y,z,A,B){function a(c,a,b,e){var C=this;this._scrollable=(0,m.default)(a);
this.$target=(0,m.default)(c);this.collection=b;this.context=e;this._destroyables=[];this._resolvedHeaderOutput=!1;f.default.bindAll(this,"_onTaskDestroy","_handleEdit","_handleMoveNext","_handleMovePrevious","_handleOpen","_handleTransitionToNextState","_handleDelete");this.collection.on("destroy",this._onTaskDestroy);this._taskRowViews=[];g.default.call(this,{target:this.$target,noneFoundMessageHtml:bitbucket.internal.feature.tasks.taskList.dialogEmptyMessage,scrollPaneSelector:a,rowSelector:"\x3e li",
taskContainerSelector:".task-container",paginationContext:"task-list",focusOptions:{rowSelector:"\x3e li",focusedClass:"focused"},statusCode:{"*":function(c,a,b,d,e){return"timeout"===b||500<=c.status&&599>=c.status?(bitbucket.internal.widget.paragraph({text:e.message}),C._addNoRowsMessage(e.message),!1):!0}}});this.prNavBuilder=n.default.project(e.projectKey).repo(e.repository).pullRequest(e.pullRequestId);this.bindNavigationHandlers()}Object.defineProperty(h,"__esModule",{value:!0});var D=babelHelpers.interopRequireDefault(r),
m=babelHelpers.interopRequireDefault(t),f=babelHelpers.interopRequireDefault(u),n=babelHelpers.interopRequireDefault(v),E=babelHelpers.interopRequireDefault(w),k=babelHelpers.interopRequireDefault(x),F=babelHelpers.interopRequireDefault(y),p=babelHelpers.interopRequireDefault(z),l=babelHelpers.interopRequireDefault(A),g=babelHelpers.interopRequireDefault(B);f.default.extend(a.prototype,g.default.prototype);p.default.addLocalEventMixin(a.prototype);a.prototype._addNoRowsMessage=function(c){this.$table.addClass("no-rows").after(this._new$Message(c||
this.options.noneFoundMessageHtml()))};a.prototype.update=function(c){this._resolvedHeaderOutput=!1;f.default.invoke(this._taskRowViews,"remove");this._taskRowViews=[];g.default.prototype.update.call(this,c).done(this.trigger.bind(this,"dataLoaded"))};a.prototype.buildUrl=function(c,a){return n.default.rest().project(this.context.projectKey).repo(this.context.repository).pullRequest(this.context.pullRequestId).addPathComponents("tasks").withParams({start:c,limit:a,withComments:!0}).build()};a.prototype.handleNewRows=
function(c,a){var b=this,e=[];f.default.each(c.values,function(c){var a=b.collection.get(c.id);a?a.set(c):(a=new E.default(c),a.setPullRequestId(b.context.pullRequestId),b.collection.add(a));c=new F.default({prNavBuilder:b.prNavBuilder,model:a});b._taskRowViews.push(c);a.getState()!==k.default.RESOLVED||b._resolvedHeaderOutput||(a=bitbucket.internal.feature.tasks.taskList.dialogContentSection({title:"Resolved tasks"}),e.push(a),b._resolvedHeaderOutput=
!0);e.push(c.render().$el)});b.$table.show()["html"!==a?a:"append"](e)};a.prototype.bindNavigationHandlers=function(){this._destroyables.push(p.default.chain().on("bitbucket.internal.feature.tasks.dialog.action.edit",this._handleEdit).on("bitbucket.internal.feature.tasks.dialog.action.moveNext",this._handleMoveNext).on("bitbucket.internal.feature.tasks.dialog.action.movePrevious",this._handleMovePrevious).on("bitbucket.internal.feature.tasks.dialog.action.open",this._handleOpen).on("bitbucket.internal.feature.tasks.dialog.action.transitionToNextState",
this._handleTransitionToNextState).on("bitbucket.internal.feature.tasks.dialog.action.delete",this._handleDelete));this._destroyables.push(g.default.prototype.initShortcuts.call(this))};a.prototype.destroy=function(){g.default.prototype.destroy.call(this);f.default.invoke(this._destroyables,"destroy")};a.prototype.getTaskListRowViewForTask=function(a){var d=this._taskRowViews.filter(function(b){return b.model.getId()===a.getId()});return d&&d[0]};a.prototype.focusInitialRow=function(){this._$focusedRow=
this.$target.find(this.options.focusOptions.rowSelector+this.options.taskContainerSelector).first().addClass(this.options.focusOptions.focusedClass)};a.prototype.scrollToRow=function(a){var d=this._scrollable.offset().top,b=this._scrollable.scrollTop();a=a.offset().top;this._scrollable.scrollTop(a-d+b)};a.prototype._handleMoveNext=function(){this._focusRow("nextAll")};a.prototype._handleMovePrevious=function(){this._focusRow("prevAll")};a.prototype._focusRow=function(a,d){var b=this._$focusedRow[a](this.options.taskContainerSelector);
b.length&&(this._$focusedRow.removeClass(this.options.focusOptions.focusedClass),this._$focusedRow=b.first().addClass(this.options.focusOptions.focusedClass),d||this.scrollToRow(this._$focusedRow))};a.prototype._handleOpen=function(){this._$focusedRow.find(".task-link-button").trigger("click")};a.prototype._handleEdit=function(){this.getTaskListRowViewForTask(this.getTaskFromFocusedRow()).setCollapsed(!1);this._$focusedRow.find(".task-edit").trigger("click")};a.prototype._handleTransitionToNextState=
function(){var a=this.getTaskFromFocusedRow();a&&a.transitionToNextState()};a.prototype._handleDelete=function(){this._$focusedRow.find(".task-delete").trigger("click")};a.prototype.getTaskFromFocusedRow=function(){var a=this._$focusedRow.find(".task").data("task-id");return a&&this.collection.get(a)};a.prototype._onTaskDestroy=function(a){var d=f.default.find(this._taskRowViews,l.default.dotEq("model",a));if(d){var b=this._$focusedRow.is(this.options.taskContainerSelector+":last")?"prevAll":"nextAll";
this._focusRow(b,!0);d.remove();this._taskRowViews=f.default.without(this._taskRowViews,d);a.getLastState()===k.default.RESOLVED&&(a=f.default.compose(l.default.eq(k.default.RESOLVED),l.default.invoke("model.getState")),this._taskRowViews.some(a)||(this._resolvedHeaderOutput=!1,this.$table.find(".section-heading").remove()));0===this._taskRowViews.length&&this._addNoRowsMessage()}};h.default=a;q.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-row-view.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list-row-view","module exports backbone jquery lodash bitbucket/util/events bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/feature/tasks/task-view/task-view bitbucket/internal/util/feature-detect bitbucket/internal/util/function".split(" "),function(p,d,h,k,q,r,t,u,v,w){Object.defineProperty(d,"__esModule",{value:!0});h=babelHelpers.interopRequireDefault(h);var m=babelHelpers.interopRequireDefault(k),c=babelHelpers.interopRequireDefault(q),
e=babelHelpers.interopRequireDefault(r),n=babelHelpers.interopRequireDefault(t),l=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(v);k=babelHelpers.interopRequireDefault(w);d.default=h.default.View.extend({events:{"click .task-content":"taskListContentClicked","click .task-link-button":"taskListLinkClicked","click .comment-diff-anchor .aui-button":"taskListDiffAnchorClicked"},defaults:{isCollapsible:!0,showLink:!0,initialTaskViewMode:l.default.Mode.VIEW},initialize:function(a){this.options=
c.default.extend({},this.defaults,a);this.isCollapsed=this.options.isCollapsible;this.taskView=new l.default({model:this.model,mode:this.options.initialTaskViewMode,prNavBuilder:this.prNavBuilder,showLink:this.options.showLink});this.focusEditor=this.taskView.focusEditor;this.getEditorText=this.taskView.getEditorText;this.listenTo(this.model,"change:state",this._handleTaskChangeState);this.listenTo(this.model,"change:text",this._handleTaskChangeText);this.options.isCollapsible&&(c.default.bindAll(this,
"handleTaskExpand"),e.default.on("bitbucket.internal.feature.tasks.list.expand",this.handleTaskExpand))},template:k.default.dot("bitbucket.internal.feature.tasks.taskList.taskListRow")(window),activityUrl:function(){var a=this.model.getAnchor();return this.options.prNavBuilder.overview().comment(a.id).build()},diffUrl:function(a){return this.options.prNavBuilder.diff().change(a).build()},render:function(){var a=(0,m.default)(this.template({isCollapsed:this.isCollapsed}));a.append(this.taskView.render().$el);
this.$el.replaceWith(a);this.setElement(a);return this},transitionTaskHandler:function(){this.model.transitionToNextState()},taskListContentClicked:function(a){this.options.isCollapsible&&((0,m.default)(a.target).is("a")||this.setCollapsed(!this.isCollapsed))},setCollapsed:function(a){function b(a,b,c,e){function d(){f.$el.removeClass([b,e].join(" ")).addClass(c).css({height:""})}f.$el.css({height:a}).addClass(b);if(g.default.cssTransition())f.$el.one(g.default.transitionEndEventName(),d);else d()}
var f=this;(this.isCollapsed=a)?(this.$el.css({height:f.$el.find(".task").get(0).scrollHeight}).removeClass("expanded"),c.default.defer(b.bind(this,"","collapsing","collapsed","expanded expanding"))):this.model.getState()===n.default.OPEN&&(e.default.trigger("bitbucket.internal.feature.tasks.list.expand",null,this),this.$el.removeClass("collapsed"),b(f.$el.find(".task").get(0).scrollHeight,"expanding","expanded","collapsed collapsing"))},taskListDiffAnchorClicked:function(a){var b=this.model.getProperties().diffAnchorPath;
this._handleTaskClick(a,"bitbucket.internal.layout.pull-request.urlRequested",this.diffUrl(b));this.triggerTaskVisitedEvent({location:"diff"})},taskListLinkClicked:function(a){this._handleTaskClick(a,"bitbucket.internal.layout.pull-request.urlRequested",this.activityUrl());this.triggerTaskVisitedEvent({location:"activity-stream"})},triggerTaskVisitedEvent:function(a){a=c.default.extend({},{task:this.model.toJSON()},a);e.default.trigger("bitbucket.internal.feature.tasks.visit-task",null,a)},handleTaskExpand:function(a){a===
this||this.isCollapsed||(this.taskView.mode===l.default.Mode.EDIT&&this.taskView.cancelTaskEdit(),this.setCollapsed(!0))},highlight:function(){var a=this.$el.removeClass.bind(this.$el,"task-highlight");this.$el.addClass("task-highlight");if(g.default.cssAnimation())this.$el.one(g.default.animationEndEventName(),a);else setTimeout(a,5E3)},_handleTaskClick:function(a,b){a.preventDefault();e.default.trigger.apply(this,[b,null].concat(c.default.toArray(arguments).slice(2)))},_handleTaskChangeState:function(a){this.$el.toggleClass("pending-delete",
a.getState()===n.default.DELETED)},_handleTaskChangeText:function(a){a.isNew()&&""!==a.getText()&&this.highlight()}});p.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/comment-task-list-view.js' */
define("bitbucket/internal/feature/tasks/task-list/comment-task-list-view","module exports backbone lodash bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/task-list/task-list-row-view bitbucket/internal/feature/tasks/task-view/task-view bitbucket/internal/util/events bitbucket/internal/util/feature-detect bitbucket/internal/util/function".split(" "),function(n,e,f,d,p,q,r,t,u,v){Object.defineProperty(e,"__esModule",{value:!0});f=babelHelpers.interopRequireDefault(f);var h=
babelHelpers.interopRequireDefault(d),k=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q),l=babelHelpers.interopRequireDefault(r),x=babelHelpers.interopRequireDefault(t),m=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v);d=f.default.View.extend({defaults:{pullRequestId:null},initialize:function(a){var b=this;this.comment=a.comment;["add","remove"].forEach(function(a){b.listenTo(b.collection,a,b.render.bind(b,a))});this.options=h.default.extend({},
this.defaults,a);this.taskRowViews=[]},getCurrentTask:function(){return this.collection.find(y.default.invoke("isNew"))},getCurrentTaskText:function(){return this.getCurrentTaskRowView().getEditorText()||""},getCurrentTaskRowView:function(){return this._findRowViewForTask(this.getCurrentTask())},createTask:function(a){var b=this.getCurrentTaskRowView();if(b)return b.focusEditor(),null;b=new k.default({anchor:{id:this.comment.id,type:k.default.Anchor.COMMENT},pullRequestId:this.options.pullRequestId,
repositoryId:this.options.repositoryId,text:a});this.collection.unshift(b);a&&(b.prefilled=!0,b.save().fail(this.collection.remove.bind(this.collection,b)));return b},render:function(a,b,c,g){function e(a){return new w.default({model:a,initialTaskViewMode:a.isNew()&&""===a.getText()?l.default.Mode.EDIT:l.default.Mode.VIEW,isCollapsible:!1,showLink:!1})}function f(a){d.$el.removeClass("transition-height").css({height:"auto"});a&&x.default.trigger("bitbucket.internal.webpanel.resize",null,{location:"bitbucket.comments.extra",
el:d.$el.get(0)})}var d=this;this.$(".pending-delete").removeClass("pending-delete");c=this.$el.outerHeight(!0);this.$el.css({height:c});c=!1;switch(a){case "remove":if(a=this._findRowViewForTask(b))a.$el.addClass("pending-delete").trigger("comment-child-removed"),a.remove(),this.taskRowViews=h.default.without(this.taskRowViews,a);c=!0;break;case "add":c=g.at;a=e(b);this.taskRowViews.splice(c,0,a);g=a.render().$el;c=this.$(this.$("li").get(c));c.length?c.before(g):this.$el.append(g);b.isNew()&&""!==
b.getText()&&a.highlight();g.trigger("comment-child-added");c=!0;break;default:h.default.invoke(this.taskRowViews,"remove"),this.taskRowViews=this.collection.map(e),this.$el.append(this.taskRowViews.map(function(a){return a.render().$el}))}b=this.taskRowViews.reduce(function(a,b){return a+b.$el.outerHeight(!0)},0);if(m.default.cssTransition()&&c)this.$el.addClass("transition-height").css({height:b}).one(m.default.transitionEndEventName(),f.bind(d,!0));else f(!1);return this},_findRowViewForTask:function(a){return h.default.find(this.taskRowViews,
{model:a})}});e.default=d;n.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-dialog.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list-dialog","module exports aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/feature/tasks/task-list/task-list-table".split(" "),function(m,e,g,n,p,q,r,t,u,v){function c(b){this.init.apply(this,arguments)}function k(b){var d={E:"bitbucket.internal.feature.tasks.dialog.action.edit",J:"bitbucket.internal.feature.tasks.dialog.action.moveNext",
K:"bitbucket.internal.feature.tasks.dialog.action.movePrevious",O:"bitbucket.internal.feature.tasks.dialog.action.open",SPACE:"bitbucket.internal.feature.tasks.dialog.action.transitionToNextState",DELETE:"bitbucket.internal.feature.tasks.dialog.action.delete"},a={69:"E",74:"J",75:"K",79:"O",32:"SPACE",46:"DELETE"}[b.keyCode];"TEXTAREA"!==b.target.nodeName&&a&&(h.default.trigger(d[a]),b.preventDefault())}Object.defineProperty(e,"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(g),f=
babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q);g=babelHelpers.interopRequireDefault(r);var y=babelHelpers.interopRequireDefault(t),l=babelHelpers.interopRequireDefault(u),z=babelHelpers.interopRequireDefault(v),A=g.default.rest().currentPullRequest().addPathComponents("tasks","count").build();c.prototype.init=function(b){x.default.bindAll(this,"openDialog","updateDialog","closeDialog","_updateTaskCounts");var d=bitbucket.internal.feature.tasks.taskList.dialog(),
a=(0,f.default)("#task-list-dialog");0<a.length&&a.remove();(0,f.default)(document.body).append(d);this._dialog=w.default.dialog2("#task-list-dialog");this._table=null;this._taskCollection=b;jQuery("#dialog-close-button").click(this.closeDialog);h.default.on("bitbucket.internal.feature.tasks.visit-task",this.closeDialog);this._dialog.on("show",function(){(0,f.default)(document).on("keydown",k)});this._dialog.on("hide",function(){(0,f.default)(document).off("keydown",k)})};c.prototype.updateDialog=
function(){this._table&&this._table.update()};c.prototype.openDialog=function(b){this._dialog.show();if(!this._table){var d=this._dialog.$el.find(".aui-dialog2-content"),a=this._dialog.$el.find("#task-list-dialog-list");this._table=new z.default(a,d,this._taskCollection,b);this._table.on("dataLoaded",this._updateTaskCounts.bind(this,b))}this._table.update()};c.prototype._updateTaskCounts=function(b,d){var a,c=new f.default.Deferred;if(d.isLastPage){a=this._taskCollection.groupBy("state");var e=a[l.default.OPEN];
a=a[l.default.RESOLVED];c.resolve({open:e?e.length:0,resolved:a?a.length:0})}else c=y.default.rest({url:A});c.done(function(a){h.default.trigger("bitbucket.internal.feature.pull-request-tasks.set-counts",null,{openTaskCount:a.open,resolvedTaskCount:a.resolved,pullRequestId:b.pullRequestId,repositoryId:b.repository.id,isReset:!0})})};c.prototype.closeDialog=function(){this._dialog.hide()};e.default=c;m.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-resources', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list.js' */
define("bitbucket/internal/feature/tasks/task-list/task-list","module exports jquery bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/tasks/model/task-collection bitbucket/internal/feature/tasks/task-list/task-list-dialog".split(" "),function(l,b,m,n,p,q,r){function f(a,c,b,e){a={projectKey:a,repository:c,pullRequestId:b};g.sourceEl=e;d||(d=new t.default(u.default.getCollection()),d._dialog.on("beforeShow",function(){h.default.trigger("bitbucket.internal.feature.tasks.list.opened",
null,g)}),d._dialog.on("close",function(){h.default.trigger("bitbucket.internal.feature.tasks.list.closed")}));d.openDialog(a)}Object.defineProperty(b,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),a=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q),t=babelHelpers.interopRequireDefault(r),d,g={};b.default={openTaskListDialogForCurrentPullRequest:function(){f(a.default.getProject(),a.default.getRepository(),a.default.getPullRequest().id)},
onReady:function(){(0,k.default)(document).on("click",".task-list-dialog-link",function(b){b.preventDefault();var c=(0,k.default)(b.currentTarget),d=c.data("project-key")||a.default.getProject().key,e=c.data("pull-request-id")||a.default.getPullRequest().id,c={id:c.data("repository-id")||a.default.getRepository().id,slug:c.data("repository-slug")||a.default.getRepository().slug};f(d,c,e,b.currentTarget)})}};l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-analytics-resources', location = '/static/bitbucket/internal/feature/tasks/task-analytics/task-analytics.js' */
define("bitbucket/internal/feature/tasks/task-analytics/task-analytics","module exports jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-collection bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/util/analytics".split(" "),function(w,n,p,x,y,z,A,B,C,D){function d(a,b){E.default.add("pullRequest.task."+a,b)}function g(a,b){var c;if(a){c=a.text.length;var h=a.id,d;d=a.createdDate;d=Date.now()-
d;c={"task.text.length":c,"task.id":h,"task.time.since.created":d}}h=(0,k.default)("#task-list-dialog");h.length&&"false"===h.attr("aria-hidden")?h=l.TASK_LIST:(h=(0,k.default)(".active-tab[data-module-key]").attr("data-module-key"),h=q.default.endsWith(h,"diff")?l.DIFF:q.default.endsWith(h,"commits")?l.COMMITS:l.ACTIVITY_STREAM);d=e.default.getPullRequest().id;var g=e.default.getRepository().id,f;f=m()?"author":r()?"reviewer":F()?"participant":"other";return k.default.extend({},{source:h,"pullRequest.id":d,
"repository.id":g,userRole:f},b,c)}function G(a){d("resolved."+f.taskTransitionAction(a.task),g(a.task))}function H(a){d("reopened."+f.taskTransitionAction(a.task),g(a.task))}function I(a){t=Date.now();var b="keyboard-shortcut";a&&a.sourceEl&&(b="link");d("list.opened."+f.genericAction(),g(null,{"source.secondary":b}))}function J(){var a="list.closed."+f.genericAction(),b;b=t;b=Date.now()-b;d(a,g(null,{age:b}))}function K(a){d("list.expandTask."+f.genericAction(),g(a.model.toJSON()))}function L(a){var b=
"gotoTask";"diff"===a.location&&(b="gotoFile");d("list."+b+"."+f.genericAction(),g(a.task))}function M(a){var b=a.toJSON(),c;b.anchor.type===u.default.Anchor.COMMENT&&(b.anchor.type!==u.default.Anchor.COMMENT?c=null:(c=(0,k.default)('.comment[data-id\x3d"'+b.anchor.id+'"]'),c={text:c.find("\x3e .content \x3e .message").text(),author:c.find("span[data-username]").attr("data-username")}),c={"is.comment.owner":c.author===e.default.getCurrentUser().name,"duplicates.comment":b.text.trim()===c.text.trim()});
d("created."+(a.prefilled?"prefilled.":"")+f.genericAction(),g(b,c))}function N(a){if(!a.isNew()){var b=a.getState()===O.default.RESOLVED;(m()||e.default.getCurrentUser().isAdmin||v(a.toJSON()))&&!b&&a.attributes.text!==a._previousAttributes.text&&d("edited."+f.taskAction(a.toJSON(),!0),g(a.toJSON()))}}function P(a){a.isNew()||d("deleted."+f.taskAction(a.toJSON(),!0),g(a.toJSON()))}function m(){return e.default.getCurrentUser().id===e.default.getPullRequest().author.user.id}function r(){var a=e.default.getPullRequest().reviewers;
return a.length&&a.some(function(a){return a.user.id===e.default.getCurrentUser().id})}function F(){var a=e.default.getPullRequest().participants;return a.length&&a.some(function(a){return a.user.id===e.default.getCurrentUser().id})}function v(a){return e.default.getCurrentUser().name===a.author.name}Object.defineProperty(n,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(p),q=babelHelpers.interopRequireDefault(x),Q=babelHelpers.interopRequireDefault(y),e=babelHelpers.interopRequireDefault(z),
u=babelHelpers.interopRequireDefault(A);p=babelHelpers.interopRequireDefault(B);var O=babelHelpers.interopRequireDefault(C),E=babelHelpers.interopRequireDefault(D),l={ACTIVITY_STREAM:"activity-stream",COMMITS:"commits-tab",DIFF:"diff-tab",TASK_LIST:"task-list"},R=p.default.getCollection(),t,f={Type:{other:"byOther",PRAuthor:"byPRAuthor",taskAuthor:"byTaskAuthor",admin:"byAdmin",reviewer:"byReviewer"},genericAction:function(){var a=this.Type.other;m()?a=this.Type.PRAuthor:r()&&(a=this.Type.reviewer);
return a},taskAction:function(a,b){var c=this.Type.other;b=!!b;e.default.getCurrentUser().isAdmin&&b&&(c=this.Type.admin);m()?c=this.Type.PRAuthor:v(a)&&(c=this.Type.taskAuthor);return c},taskTransitionAction:function(a){return this.taskAction(a,!1)}};n.default={init:function(){Q.default.chain().on("bitbucket.internal.feature.pull-request-tasks.resolved",G).on("bitbucket.internal.feature.pull-request-tasks.reopened",H).on("bitbucket.internal.feature.tasks.list.opened",I).on("bitbucket.internal.feature.tasks.list.closed",
J).on("bitbucket.internal.feature.tasks.list.expand",K).on("bitbucket.internal.feature.tasks.visit-task",L);R.on("change:id",M).on("change:text",N).on("destroy",P)}};w.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-analytics-resources', location = '/static/bitbucket/internal/feature/tasks/task-analytics/task-analytics-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/tasks/task-analytics/task-analytics").init()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:updating-section', location = '/static/bitbucket/internal/widget/updating-section/updating-section.js' */
define("bitbucket/internal/widget/updating-section/updating-section",["module","exports","jquery","lodash"],function(e,c,f,g){function b(a,b,d,c){this.init.apply(this,arguments)}Object.defineProperty(c,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(f),d=babelHelpers.interopRequireDefault(g);b.defaults={context:{},isVisibleProperty:null};b.prototype.init=function(a,c,e,f){this._$el=(0,h.default)(a);this._template=e;this._options=d.default.extend({},b.defaults,f);this._$placeholder=
this._$el.find(".replacement-placeholder");this._currentValue={};d.default.bindAll(this,"updateValue","updateVisibility");this._destroyCallbacks=[c.onValue(this.updateValue)];this._options.isVisibleProperty&&this._destroyCallbacks.push(this._options.isVisibleProperty.onValue(this.updateVisibility))};b.prototype.updateVisibility=function(a){this._$el.toggleClass("hidden",!a)};b.prototype.updateValue=function(a){a=d.default.extend({},a,this._options.context);d.default.isEqual(a,this._currentValue)||
(this._currentValue=a,a=this._template(a),this._$placeholder.stop().fadeOut(0).html(a).fadeIn())};b.prototype.destroy=function(){this._destroyCallbacks.forEach(Function.prototype.call,Function.prototype.call)};c.default=b;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:taskable-comment-resources', location = '/static/bitbucket/internal/feature/tasks/taskable-comment/taskable-comment.js' */
define("bitbucket/internal/feature/tasks/taskable-comment/taskable-comment","module exports jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/comments/comment-async-web-panel bitbucket/internal/feature/tasks/model/task bitbucket/internal/feature/tasks/model/task-collection bitbucket/internal/feature/tasks/task-list/comment-task-list-view".split(" "),function(r,k,f,t,u,v,w,x,y,z){Object.defineProperty(k,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f),
m=babelHelpers.interopRequireDefault(t);f=babelHelpers.interopRequireDefault(u);var h=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w),n=babelHelpers.interopRequireDefault(x),p=babelHelpers.interopRequireDefault(y),B=babelHelpers.interopRequireDefault(z),e=p.default.getCollection(),l={};f.default.on("bitbucket.internal.feature.tasks.createTask",function(d){var a=(0,g.default)(d),b=a.data("id");d="";var c=window.getSelection();if(c){var q=a.find(".message").get(0);g.default.contains(q,
c.anchorNode)&&(g.default.contains(q,c.focusNode)||a.find(".actions").is(c.focusNode))&&(d=n.default.sanitiseText(c.toString()),c.removeAllRanges())}b=l[b];(a=b.createTask(d))?e.add(a):d&&(a=b.getCurrentTask(),b=(b=b.getCurrentTaskText())?b.trim()+" ":"",a.setText(b+d))});f.default.on("bitbucket.internal.feature.comments.commentDeleted",function(d){var a=e.find(function(b){return b.getAnchor().id===d.id});a&&e.remove(a)});f.default.on("bitbucket.internal.comment.commentContainerDestroyed",function(d){var a=
d.find(".task").map(function(b,c){return+c.dataset.commentId});e.filter(function(b){return m.default.contains(a,b.getAnchor().id)&&b.isNew()}).forEach(function(b){return b.destroy()})});k.default={_commentTaskListViews:l,newTaskableCommentView:function(d){var a=d.comment,b=new p.default;m.default.each(a.tasks,function(c){var a=e.get(c.id);a||(a=new n.default(c),a.setPullRequestId(h.default.getPullRequest().id),a.setRepositoryId(h.default.getRepository().id),e.add(a));b.add(a)});return A.default.getWebPanelEl(function(c){var d=
(0,g.default)(bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder());c.replaceWith(d);c=(0,g.default)(d);c=new B.default({collection:b,el:c,comment:a,pullRequestId:h.default.getPullRequest().id,repositoryId:h.default.getRepository().id});c.render();l[a.id]=c})},isPullRequest:function(d){return!!d.pullRequest}};r.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:taskable-comment-resources', location = '/static/bitbucket/internal/feature/tasks/taskable-comment/taskable-comment.soy' */
// This file was automatically generated from taskable-comment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.taskableComment.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.taskableComment == 'undefined') { bitbucket.internal.feature.tasks.taskableComment = {}; }


bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder = function(opt_data, opt_ignored) {
  return '<ul class="task-list"></ul>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder.soyTemplateName = 'bitbucket.internal.feature.tasks.taskableComment.taskListPlaceholder';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-task-list', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'comment-task-list','moduleKey':'comment-task-list','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:comment-task-list','weight':100.0,'condition':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/taskable-comment/taskable-comment').isPullRequest), ctx); },'params':{},'location':'bitbucket.comments.extra','view':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/taskable-comment/taskable-comment').newTaskableCommentView), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/diff-comment-container.js' */
define("bitbucket/internal/feature/comments/diff-comment-container","module exports jquery lodash bitbucket/internal/feature/comments/comment-container bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/time-i18n-mappings".split(" "),function(k,b,e,l,m,n,p,q){Object.defineProperty(b,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e),h=babelHelpers.interopRequireDefault(l),d=babelHelpers.interopRequireDefault(m),g=babelHelpers.interopRequireDefault(n);
e=babelHelpers.interopRequireDefault(p);var r=babelHelpers.interopRequireDefault(q);g.default.on("bitbucket.internal.history.changestate",function(){});b.default=d.default.extend({rootCommentListSelector:".comment-list",initialize:function(){h.default.bindAll(this,"onResize","onWebPanelResize");this.$el.is(".comment-container")||this.setElement((0,f.default)(bitbucket.internal.feature.comments(f.default.extend({extraClasses:"comment-box",comments:this.options.collection&&this.options.collection.toJSON(),
customMapping:r.default.commentEditedAge,pullRequest:this.options.anchor.getPullRequest()},this.options.anchor.toJSON())))[0]);!this.isFileCommentContainer()&&this.options.context.diffView&&(this.toggleComment(this.options.showComments),this.options.context.diffView.addLineClass(this.options.lineHandle,"wrap","commented"));this.on("change",this.onResize);this.on("comment.saved",this.scrollIntoView);g.default.on("bitbucket.internal.webpanel.resize",this.onWebPanelResize);d.default.prototype.initialize.apply(this,
arguments)},closeCommentForm:function(a,c){if(!c||!c.doNotDestroy){var b=a.parent().parent();if(b.is(this.rootCommentListSelector)&&0===b.children(".comment").length)return this.deleteDraftComment(this.getDraftCommentFromForm(a)),this._unbindMarkupEditor(a),this.destroy()}return d.default.prototype.closeCommentForm.apply(this,arguments)},destroyIfEmpty:function(){var a=this.$(this.rootCommentListSelector);0!==a.children(".comment").length||a.find("textarea").val()||this.destroy()},destroy:function(a){d.default.prototype.destroy.apply(this,
arguments);this._widget&&(this._widget.clear(),this._widget=null);this.off("change",this.onResize);this.options.lineHandle&&this.options.context.diffView.removeLineClass(this.options.lineHandle,"wrap","commented");g.default.trigger("bitbucket.internal.comment.commentContainerDestroyed",null,this.$el);this.context.destroy(this,a)},focusCommentForm:e.default.lazyDefer(function(a){this.scrollToComment(a);a=a.find("textarea");this.isFileCommentContainer()?setTimeout(a.focus.bind(a),100):a.focus()}),onCommentDeleted:function(){this.destroyIfEmpty()},
onCommentEditorResize:function(){this.onResize()},onWebPanelResize:function(a){if("bitbucket.comments.extra"===a.location&&f.default.contains(this.$el.get(0),a.el))this.onResize()},onResize:function(){this._widget&&this._widget.changed();this.trigger("resize")},isFileCommentContainer:function(){return!!this.$el.closest(".file-comments").length},isActivityCommentContainer:function(){return!!this.$el.closest(".activity-item").length},scrollToComment:function(a){if(!this.isActivityCommentContainer()){var c=
a.offset().top-this.$el.offset().top;this.isFileCommentContainer()?this.options.context.diffView&&this.options.context.diffView.scrollToFileComments(c,a.height()):this.options.context.diffView.scrollToWidgetOffset(this.options.lineHandle,c,a.height())}},toggleComment:function(a){this.isFileCommentContainer()?this.options.context.trigger("fileCommentsResized"):a&&!this._widget?(this._widget=this.options.context.diffView.addLineWidget(this.options.lineHandle,this.el,{noHScroll:!0,coverGutter:!0,insertAt:0}),
a=h.default.throttle(function(){var a=this.getHeight();this._previousHeight!==a&&(this.changed(),this._previousHeight=a)},200),this._widget.onRedraw(a.bind(this._widget))):!a&&this._widget&&(this._widget.clear(),this._widget=null,this.el.parentElement.removeChild(this.el))}});k.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-model.js' */
define("bitbucket/internal/feature/comments/comment-model","module exports aui backbone backbone-brace lodash bitbucket/util/navbuilder".split(" "),function(k,e,c,l,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(c),q=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),r=babelHelpers.interopRequireDefault(p);c=f.default.Model.extend({namedAttributes:{anchor:null,attributes:null,author:null,
avatarSize:null,comments:null,tasks:null,createdDate:"number",html:"string",id:"number",isFocused:"boolean",isUnread:"boolean",parent:null,permittedOperations:null,properties:null,pullRequest:"object",text:"string",updatedDate:"number",version:"number"},validate:function(b){if(!b.text||!/\S/.test(b.text))return "Please enter some text"},url:function(){var b={avatarSize:this.get("avatarSize"),markup:!0};null!=this.get("version")&&(b.version=this.get("version"));var a=this.get("anchor");
a&&a.commitRange&&a.commitRange.sinceRevision&&(b.since=a.commitRange.sinceRevision.id);if(this.collection&&this.collection.urlBuilder)return a=this.collection.urlBuilder().withParams(b),this.isNew()||(a=a.addPathComponents(this.get("id"))),a.build();var c=r.default.parse(f.default.Model.prototype.url.apply(this,arguments));Object.keys(b).forEach(function(a){return c.addQueryParam(a,b[a])});return c.toString()},forEachCommentInThread:function(b){b(this);h.default.each(this.get("comments"),function(a){a.forEachCommentInThread(b)})},
sync:function(b,a,c){return q.default.sync(b,a,h.default.extend(c,{statusCode:{404:function(c,e,f,g,h){if((c=g&&g.errors&&g.errors.length&&g.errors[0])&&c.message&&/comment/i.test(c.message)){if("create"===b&&null!=a.get("parent"))return{title:"Comment not found",message:"The comment you are replying to no longer exists.",shouldReload:!0,fallbackUrl:void 0};if("update"===b)return{title:"Comment not found",
message:"The comment you are updating no longer exists.",shouldReload:!0,fallbackUrl:void 0}}}}}))}});f.default.Mixins.applyMixin(c,{namedAttributes:{comments:[c]}});e.default=c;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-async-web-panel.js' */
define("bitbucket/internal/feature/comments/comment-async-web-panel",["module","exports","jquery","bitbucket/util/events","bitbucket/internal/util/promise"],function(e,b,a,f,g){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var k=babelHelpers.interopRequireDefault(g),d=[document.documentElement];a.default.on("bitbucket.internal.page.pull-request.view.contextRequested",function(){d=[document.documentElement]});a.default.on("bitbucket.internal.feature.comments.commentContainerAdded",
function(a){d.push(a[0])});var c=0;b.default={getWebPanelEl:function(a){c++;var b="#async-web-panel-"+c;k.default.waitFor({predicate:function(){var a=(0,h.default)(b,d);return a.length?a:!1},name:"Async web panel "+c,interval:50}).then(a);return bitbucket.internal.feature.commentAsyncWebPanelPlaceholder({webPanelId:c})}};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-context.js' */
define("bitbucket/internal/feature/comments/comment-context","module exports backbone jquery lodash bitbucket/internal/feature/comments/comment-container bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(k,e,f,g,l,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});f=babelHelpers.interopRequireDefault(f);g=babelHelpers.interopRequireDefault(g);var c=babelHelpers.interopRequireDefault(l),q=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),
d=babelHelpers.interopRequireDefault(p);e.default=f.default.View.extend({initialize:function(){this._containers={};this.checkForNewContainers();var a=this;d.default.on("bitbucket.internal.feature.comments.commentAdded",this._commentAddedHandler=function(b,c){a.$el.find(c).length&&1===a.$el.find(".comment").length&&d.default.trigger("bitbucket.internal.feature.comments.firstCommentAdded",null,a.$el)});var b=this.getDrafts()||[];this.unrestoredDrafts=this.drafts=c.default.isArray(b)?b:[b];this.restoreDrafts()},
includesContainer:function(a){return c.default.has(this._containers,a)},registerContainer:function(a,b){var c=b.getId();this.includesContainer(c)||this._registerContainer(c,a,b)},_registerContainer:function(a,b,c){this._containers[a]=new q.default({name:a,context:this,el:b,anchor:c});return this._containers[a]},checkForNewContainers:function(){var a=this;c.default.forEach(this.findContainerElements(),function(b){a.registerContainer(b,a.getAnchor(b))})},findContainerElements:function(){return this.$(".comment-container")},
getAnchor:function(){return this.options.anchor},clarifyAmbiguousDraftProps:function(a){return c.default.omit(a,"text")},deleteDraftComment:function(a,b){b=c.default.isBoolean(b)?b:!0;var d=c.default.isEqual.bind(c.default,this.clarifyAmbiguousDraftProps(a));this.drafts=c.default.reject(this.drafts,c.default.compose(d,this.clarifyAmbiguousDraftProps.bind(this)));b&&this.saveDraftComments()},getDrafts:function(){return h.default.getSessionItem(this.getDraftsKey())},getDraftsKey:function(){return h.default.buildKey(["draft-comment",
this.options.anchor.getId()],"user")},restoreDrafts:g.default.noop,saveDraftComment:function(a){this.deleteDraftComment(a,!1);a.text&&this.drafts.push(a);this.saveDraftComments()},saveDraftComments:function(){h.default.setSessionItem(this.getDraftsKey(),this.drafts)},destroy:function(a,b){a?(a.remove(),delete this._containers[a.options.name],this.$el.has(".comment").length||b||d.default.trigger("bitbucket.internal.feature.comments.lastCommentDeleted",null,this.$el)):(c.default.invoke(this._containers,
"destroy",!0),this._containers=null,this._commentAddedHandler&&(d.default.off("bitbucket.internal.feature.comments.commentAdded",this._commentAddedHandler),delete this._commentAddedHandler))}});k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-container.js' */
define("bitbucket/internal/feature/comments/comment-container","module exports aui backbone jquery lib/jsuri lodash bitbucket/internal/feature/comments/comment-collection bitbucket/internal/feature/comments/comment-model bitbucket/internal/feature/comments/comment-tips bitbucket/internal/model/page-state bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/history bitbucket/internal/util/syntax-highlight bitbucket/internal/util/time-i18n-mappings bitbucket/internal/widget/aui/form/form bitbucket/internal/widget/confirm-dialog bitbucket/internal/widget/markup-editor/markup-editor".split(" "),
function(w,m,n,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N){Object.defineProperty(m,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(n);n=babelHelpers.interopRequireDefault(x);var e=babelHelpers.interopRequireDefault(y),O=babelHelpers.interopRequireDefault(z),k=babelHelpers.interopRequireDefault(A),P=babelHelpers.interopRequireDefault(B),q=babelHelpers.interopRequireDefault(C),r=babelHelpers.interopRequireDefault(D),h=babelHelpers.interopRequireDefault(E),Q=babelHelpers.interopRequireDefault(F),
f=babelHelpers.interopRequireDefault(G),t=babelHelpers.interopRequireDefault(H),R=babelHelpers.interopRequireDefault(I),u=babelHelpers.interopRequireDefault(J),S=babelHelpers.interopRequireDefault(K),p=babelHelpers.interopRequireDefault(L),T=babelHelpers.interopRequireDefault(M),v=babelHelpers.interopRequireDefault(N);m.default=n.default.View.extend({initialize:function(){k.default.bindAll(this,"onCommentEditorResize","onCommentFocused");this.anchor=this.anchor||this.options.anchor;this.rootCommentListSelector=
this.rootCommentListSelector||this.options.rootCommentListSelector;this.context=this.options.context;this.pullRequest=this.options.pullRequest||h.default.getPullRequest();this.urlBuilder=this.options.urlBuilder;this.collection||(this.collection=new P.default([],{anchor:this.anchor,urlBuilder:this.urlBuilder}));this.initDeleteButtons();this.$el.imagesLoaded(this.onImagesLoaded.bind(this));f.default.trigger("bitbucket.internal.feature.comments.commentContainerAdded",null,this.$el);this.updateDraftComment=
k.default.debounce(this.updateDraftComment,300);this.deleteDraftComment=k.default.debounce(this.deleteDraftComment,300);this.on("comment.saved",u.default.container.bind(null,this.$el));u.default.container(this.$el);f.default.once("bitbucket.internal.feature.pullRequestActivity.focused",this.onCommentFocused)},events:{"submit form":"onFormSubmit","click a.times":"onDateClicked","click .cancel":"onCancelClicked","click .reply":"onReplyClicked","click .edit":"onEditClicked","click .task-create":"onCreateTaskClicked",
"keydown form":"onFormKeydown","input textarea":"onTextareaInput","comment-child-added .comment ":"onChildrenChanged","comment-child-removed .comment ":"onChildrenChanged"},initDeleteButtons:function(a){this.createDeleteDialog().attachTo(".delete",null,this.el)},createDeleteDialog:function(){var a=this,b=new T.default({id:"delete-repository-dialog",titleText:"Delete comment",titleClass:"warning-header",panelContent:"\x3cp\x3e"+"Are you sure that you want to delete this comment?"+
"\x3c/p\x3e",submitText:"Delete",submitToHref:!1,focusSelector:".button-panel-cancel-link"});b.addConfirmListener(function(b,c,e){e();a.deleteComment(c.closest(".comment"))});return b},sendOverviewAnalyticsEvent:function(a,b,d){(0,e.default)(a).closest("#pull-request-activity")&&f.default.trigger("bitbucket.internal.feature.pullRequest."+b,null,d)},onFormSubmit:function(a){a.preventDefault();a.stopPropagation();this.submitCommentForm((0,e.default)(a.target))},
onDateClicked:function(a){a.preventDefault();a.stopPropagation();(0,e.default)(".comment.focused").removeClass("focused");a=(0,e.default)(a.target).closest("a");a.closest(".comment").addClass("focused");R.default.pushState(null,null,a.prop("href"))},onCancelClicked:function(a){a.preventDefault();a.stopPropagation();this.cancelCommentForm((0,e.default)(a.target).closest("form"))},onReplyClicked:function(a){a.originalEvent instanceof MouseEvent&&this.sendOverviewAnalyticsEvent(a.target,"overview.comment.reply.clicked");
a.preventDefault();a.stopPropagation();this.openReplyForm((0,e.default)(a.target).closest(".comment"))},onEditClicked:function(a){this.sendOverviewAnalyticsEvent(a.target,"overview.comment.edit.clicked");a.preventDefault();a.stopPropagation();this.openEditForm((0,e.default)(a.target).closest(".comment"))},onCreateTaskClicked:function(a){this.sendOverviewAnalyticsEvent(a.target,"overview.comment.task.clicked");a.preventDefault();a.stopPropagation();a=(0,e.default)(a.target).closest(".comment");f.default.trigger("bitbucket.internal.feature.tasks.createTask",
null,a)},onImagesLoaded:function(a){this.trigger("change")},onFormKeydown:function(a){Q.default.isCtrlEnter(a)&&(a.preventDefault(),a.stopPropagation(),(0,e.default)(a.target).closest("form").submit())},onTextareaInput:function(a){(0,e.default)(a.target).closest(".comment-container").is(this.el)&&this.updateDraftComment(a.target)},onChildrenChanged:function(a){if(a.target!==a.currentTarget){a.stopPropagation();a=(0,e.default)(a.currentTarget);var b=a.find("\x3e .content .task-list-row, \x3e .replies \x3e .comment").not(".pending-delete").length;
a.find("\x3e .content \x3e .actions \x3e li \x3e .delete").parent().toggleClass("hidden",!!b)}},onCommentFocused:function(a){var b=(new O.default(window.location)).getQueryParamValue("action"),d={"comment.id":this.getCommentJSON(a.closest(".comment")).id};"reply"===b?(a.find(".reply").first().click(),this.sendOverviewAnalyticsEvent(a,"comment.actions.reply",d)):"view"===b&&this.sendOverviewAnalyticsEvent(a,"comment.actions.view",d)},updateDraftComment:function(a){a=this.getDraftCommentFromForm((0,
e.default)(a).closest("form"));this.context&&this.context.saveDraftComment(a)},getDraftCommentFromForm:function(a){a=this.getCommentFormJSON(a);a.anchor&&delete a.anchor.commitRange;return e.default.extend({},a)},deleteDraftComment:function(a){this.context&&this.context.deleteDraftComment(a)},getRootCommentList:function(){var a=this.$(this.rootCommentListSelector);a.length||(a=this.$el);return a},render:function(){var a=bitbucket.internal.feature.comments(e.default.extend({comments:this.collection.toJSON(),
customMapping:S.default.commentEditedAge,pullRequest:this.options.anchor.getPullRequest()},this.anchor.toJSON()));this.$el.replaceWith(a);this.setElement(a[0])},_toJSON:function(a,b){var d=parseInt(a.parent().closest(".comment").attr("data-id"),10),c=parseInt(a.attr("data-id"),10),e=parseInt(a.attr("data-version"),10),f=this.anchor.toJSON();return{id:isNaN(c)?void 0:c,version:isNaN(e)?void 0:e,text:b,anchor:f,parent:isNaN(d)?void 0:{id:d}}},getCommentJSON:function(a){return this._toJSON(a,a.find("\x3e .content \x3e .message").attr("data-text"))},
getCommentFormJSON:function(a){var b=a.parent().is(".comment")?a.parent():a;return this._toJSON(b,a.find("textarea").val())},renderContentUpdate:function(a,b){a.children(".content").replaceWith(bitbucket.internal.feature.commentContent({pullRequest:this.pullRequest&&this.pullRequest.toJSON(),comment:b,hideDelete:!!a.find("\x3e .replies \x3e .comment").length}));a.attr("data-version",b.version).data("version",b.version);this.$el.imagesLoaded(this.onImagesLoaded.bind(this));this.scrollToComment(a);
this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentEdited",null,b,a)},insertCommentIntoList:function(a,b,d){for(var c=b.children(".comment:first");c.length&&!(parseInt(c.data("id"),10)>d.id);)c=c.next(".comment");c=c.length?c:b.children(".comment-form-container:last");c.length?a.insertBefore(c):b.append(a)},renderComment:function(a,b,d){var c;if(d&&(c=(0,e.default)('.comment[data-id\x3d"'+a.id+'"]')).length)return this.renderContentUpdate(c,a);a=e.default.extend({isNew:!0},
a);b=(c=b&&this.$("[data-id\x3d"+b+"]"))?c.children(".replies"):this.getRootCommentList();c=(0,e.default)(bitbucket.internal.feature.comment({pullRequest:this.pullRequest&&this.pullRequest.toJSON(),numOfAncestors:b.parents(".comment").length,extraClasses:this.getExtraCommentClasses(),comment:a}));this.insertCommentIntoList(c,b,a);setTimeout(k.default.bind(c.removeClass,c,"new"),5E3);this.scrollToComment(c);c.hide().fadeIn("slow");this.$el.imagesLoaded(this.onImagesLoaded.bind(this));this.trigger("change");
f.default.trigger("bitbucket.internal.feature.comments.commentAdded",null,a,c);c.trigger("comment-child-added")},getExtraCommentClasses:function(){return""},showErrorMessage:function(a,b){var d=this.find(".error");d.length||(d=(0,e.default)('\x3cdiv class\x3d"error"\x3e\x3c/div\x3e'),this.find(".comment-form-footer").before(d));d.text(b)},cancelCommentForm:function(a){this.closeCommentForm(a)},submitCommentForm:function(a){if(!p.default.isSubmissionPrevented(a)){var b=this,d=a.find(".comment-submit-spinner"),
c=this.getCommentFormJSON(a),f=null!=c.id,g=f&&this.collection.get(c.id),h=c.parent&&c.parent.id,l=g?this.collection.get(c.id):new q.default;l.on("invalid",this.showErrorMessage,a);l.set(e.default.extend(c,{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"})}),{validate:!0})&&(g||this.collection.push(l),a.addClass("submitting"),d.spin("medium"),p.default.preventSubmission(a),l.save().done(function(c){c.createdDate=Math.min(c.createdDate,(new Date).getTime());c.updatedDate=Math.min(c.updatedDate,
(new Date).getTime());b.closeCommentForm(a,{doNotDestroy:!0});b.renderComment(c,h,f);b.trigger("comment.saved")}).fail(function(){g||f||b.collection.remove(c.id)}).always(function(){d.spinStop();a.removeClass("submitting");p.default.allowSubmission(a)}));l.off("invalid",this.showErrorMessage)}},deleteComment:function(a){var b=this.getCommentJSON(a),d;this.collection.get(b)?d=this.collection.get(b.id):(d=new q.default(b),this.collection.push(d));var c=a.find("\x3e .content .delete"),e=c.height(),h=
c.width();c.height(e).width(h).css("vertical-align","middle").empty().spin("small");var k=this;d.destroy({wait:!0}).always(function(){c.spinStop()}).done(function(){a.addClass("pending-delete").fadeOut(function(){a.trigger("comment-child-removed").remove();k.onCommentDeleted();k.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentDeleted",null,b)})}).fail(function(){c.css("height","").css("width","").css("vertical-align","").text("Delete")})},
onCommentDeleted:function(){},onCommentEditorResize:e.default.noop,openEditForm:function(a){var b=this.getCommentJSON(a),b=(0,e.default)(bitbucket.internal.feature.commentForm(e.default.extend({tips:450<this.$el.width()?r.default.tips:[],currentUser:h.default.getCurrentUser()&&h.default.getCurrentUser().toJSON()},b))),d=a.find("\x3e .user-avatar, \x3e .content");d.detach();a.prepend(b).addClass("comment-form-container");b.data("originalContent",d);this._bindMarkupEditor(b);this.focusCommentForm(b);
this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentFormShown",null,b);return b},openReplyForm:function(a){a=a.children(".replies");return this.openCommentForm(a,{location:"top"})},openNewCommentForm:function(){return this.openCommentForm(this.getRootCommentList(),{location:"bottom"})},openCommentForm:function(a,b){var d=b&&"top"===b.location?"prependTo":"appendTo",c=a.children(".comment-form-container").not(".comment");c.length||(c=(0,e.default)(bitbucket.internal.feature.commentFormListItem({tips:450<
this.$el.width()?r.default.tips:[],currentUser:h.default.getCurrentUser()&&h.default.getCurrentUser().toJSON()}))[d](a),this._bindMarkupEditor(c.find("form")));d=c.find("form");this.focusCommentForm(d);this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentFormShown",null,d);return d},closeCommentForm:function(a){a.find(".error").remove();this.deleteDraftComment(this.getDraftCommentFromForm(a));this._unbindMarkupEditor(a);var b=a.data("originalContent"),d=a.parent();
b?(d.removeClass("comment-form-container"),a.replaceWith(b)):d.remove();this.trigger("change");f.default.trigger("bitbucket.internal.feature.comments.commentFormHidden",null,a)},focusCommentForm:t.default.lazyDefer(function(a){this.scrollToComment(a);a.find("textarea").focus()}),scrollToComment:e.default.noop,populateCommentFormFromDraft:function(a,b){(0,e.default)(a).find("textarea").val(b.text).addClass("restored").attr("title","This comment has been restored from an automatically saved draft.").trigger("input").one("click input",
function(){(0,e.default)(this).removeClass("restored").removeAttr("title")})},getCommentElById:function(a){return this.$(".comment[data-id\x3d"+a+"]")},restoreDraftComment:function(a){var b;if(a.id){var d=this.getCommentElById(a.id);if(d.length){if(parseInt(a.version,10)<parseInt(d.attr("data-version"),10))return this.context.deleteDraftComment(a),!0;b=this.openEditForm(d)}}else a.parent?(d=this.getCommentElById(a.parent.id),d.length&&(b=this.openReplyForm(d))):b=this.openNewCommentForm();b&&this.populateCommentFormFromDraft(b,
a);return!!b},_bindMarkupEditor:function(a){v.default.bindTo(a).on("resize",this.onCommentEditorResize)},_unbindMarkupEditor:function(a){v.default.unbindFrom(a)},destroy:function(){this.$("form").each(t.default.thisToParam(this._unbindMarkupEditor.bind(this)))}});w.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }


bitbucket.internal.feature.comments = function(opt_data, opt_ignored) {
  var output = '<div class="comment-container' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.line) ? ' data-line-number="' + soy.$$escapeHtml(opt_data.line) + '"' : '') + ((opt_data.lineType) ? ' data-line-type="' + soy.$$escapeHtml(opt_data.lineType) + '"' : '') + '><div class="panel"><ol class="comment-list">';
  if (opt_data.comments) {
    var commentList22 = opt_data.comments;
    var commentListLen22 = commentList22.length;
    for (var commentIndex22 = 0; commentIndex22 < commentListLen22; commentIndex22++) {
      var commentData22 = commentList22[commentIndex22];
      output += bitbucket.internal.feature.comment({comment: commentData22, customMapping: opt_data.customMapping, numOfAncestors: 0, pullRequest: opt_data.pullRequest});
    }
  }
  output += '</ol></div></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.comments.soyTemplateName = 'bitbucket.internal.feature.comments';
}


bitbucket.internal.feature.comment = function(opt_data, opt_ignored) {
  var output = '<li class="comment' + ((opt_data.comment.isNew) ? ' new' : '') + ((opt_data.comment.isUnread) ? ' unread' : '') + ((opt_data.comment.isFocused) ? ' focused' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-id="' + soy.$$escapeHtml(opt_data.comment.id) + '" data-version="' + soy.$$escapeHtml(opt_data.comment.version) + '">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.comment.author}) + bitbucket.internal.feature.commentContent(opt_data) + '<ol class="replies' + ((opt_data.numOfAncestors >= 7) ? ' no-indent' : '') + '">';
  if (opt_data.comment.comments) {
    var replyList64 = opt_data.comment.comments;
    var replyListLen64 = replyList64.length;
    for (var replyIndex64 = 0; replyIndex64 < replyListLen64; replyIndex64++) {
      var replyData64 = replyList64[replyIndex64];
      output += bitbucket.internal.feature.comment({comment: replyData64, customMapping: opt_data.customMapping, pullRequest: opt_data.pullRequest, numOfAncestors: opt_data.numOfAncestors + 1});
    }
  }
  output += '</ol></li>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.comment.soyTemplateName = 'bitbucket.internal.feature.comment';
}


bitbucket.internal.feature.commentContent = function(opt_data, opt_ignored) {
  var output = '<div class="content">';
  if (opt_data.comment.deleted) {
    output += soy.$$escapeHtml('This comment has been removed by the author.');
  } else {
    output += bitbucket.internal.widget.userLink({user: opt_data.comment.author, extraClasses: 'user-name'}) + '<div class="message ' + soy.$$escapeHtml(opt_data.comment.html ? 'markup' : 'plaintext') + '" data-text="' + soy.$$escapeHtml(opt_data.comment.text) + '">' + ((opt_data.comment.html) ? soy.$$filterNoAutoescape(opt_data.comment.html) : '<p>' + soy.$$escapeHtml(opt_data.comment.text) + '</p>') + '</div><ul class="actions"><li>' + bitbucket.internal.buttons.linkButton({content: '' + soy.$$escapeHtml('Reply'), extraClasses: 'reply'}) + '</li>' + ((opt_data.comment.permittedOperations.editable) ? '<li>' + bitbucket.internal.buttons.linkButton({content: '' + soy.$$escapeHtml('Edit'), extraClasses: 'edit'}) + '</li>' : '') + ((opt_data.comment.permittedOperations.deletable) ? '<li' + ((opt_data.hideDelete || (opt_data.comment.comments && opt_data.comment.comments.length || opt_data.comment.tasks && opt_data.comment.tasks.length)) ? ' class="hidden"' : '') + '>' + bitbucket.internal.buttons.linkButton({content: '' + soy.$$escapeHtml('Delete'), extraClasses: 'delete'}) + '</li>' : '');
    var itemList120 = WebFragments.getWebItems('bitbucket.comments.actions',{comment: opt_data.comment, pullRequest: opt_data.pullRequest});
    var itemListLen120 = itemList120.length;
    for (var itemIndex120 = 0; itemIndex120 < itemListLen120; itemIndex120++) {
      var itemData120 = itemList120[itemIndex120];
      output += '<li>' + bitbucket.internal.widget.webItem(itemData120) + '</li>';
    }
    output += '</ul><ul class="info">';
    var panelHtmlList126 = WebFragments.getWebPanels('bitbucket.comments.info',{comment: opt_data.comment, pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen126 = panelHtmlList126.length;
    for (var panelHtmlIndex126 = 0; panelHtmlIndex126 < panelHtmlListLen126; panelHtmlIndex126++) {
      var panelHtmlData126 = panelHtmlList126[panelHtmlIndex126];
      output += '<li>' + soy.$$escapeHtml(panelHtmlData126) + '</li>';
    }
    output += '<li>';
    if (opt_data.pullRequest) {
      var pullRequestCommentLink__soy134 = require('bitbucket/util/navbuilder').project(opt_data.pullRequest.toRef.repository.project.key).repo(opt_data.pullRequest.toRef.repository.slug).pullRequest(opt_data.pullRequest.id).overview().comment(opt_data.comment.id).withParams(opt_data.comment.id).build();
      output += '<a class="times" href="' + soy.$$escapeHtml(pullRequestCommentLink__soy134) + '">' + bitbucket.internal.feature.commentDate(opt_data) + '</a>';
    } else {
      output += '<span class="times">' + bitbucket.internal.feature.commentDate(opt_data) + '</span>';
    }
    output += '</li></ul><div class="extras">';
    var panelHtmlList149 = WebFragments.getWebPanels('bitbucket.comments.extra',{comment: opt_data.comment, pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen149 = panelHtmlList149.length;
    for (var panelHtmlIndex149 = 0; panelHtmlIndex149 < panelHtmlListLen149; panelHtmlIndex149++) {
      var panelHtmlData149 = panelHtmlList149[panelHtmlIndex149];
      output += soy.$$escapeHtml(panelHtmlData149);
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentContent.soyTemplateName = 'bitbucket.internal.feature.commentContent';
}


bitbucket.internal.feature.commentDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.comment.updatedDate - opt_data.comment.createdDate > 0) ? (require('bitbucket/internal/util/time').format(opt_data.comment.createdDate, 'shortAge') != require('bitbucket/internal/util/time').format(opt_data.comment.updatedDate, 'shortAge')) ? bitbucket.internal.feature.commentEditTimes({createdDateContent: '' + bitbucket.internal.widget.date.shortAge({date: opt_data.comment.createdDate}), updatedDateContent: '' + bitbucket.internal.widget.date.customAge({date: opt_data.comment.updatedDate, customMapping: opt_data.customMapping})}) : bitbucket.internal.widget.date.shortAge({date: opt_data.comment.createdDate, title: AJS.format('{0} (edited {1})',require('bitbucket/internal/util/time').format(opt_data.comment.createdDate, 'full'),require('bitbucket/internal/util/time').format(opt_data.comment.updatedDate, 'full'))}) : bitbucket.internal.widget.date.shortAge({date: opt_data.comment.createdDate}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentDate.soyTemplateName = 'bitbucket.internal.feature.commentDate';
}


bitbucket.internal.feature.commentEditTimes = function(opt_data, opt_ignored) {
  return soy.$$filterNoAutoescape(opt_data.createdDateContent) + ' (' + soy.$$filterNoAutoescape(opt_data.updatedDateContent) + ')';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentEditTimes.soyTemplateName = 'bitbucket.internal.feature.commentEditTimes';
}


bitbucket.internal.feature.commentFormListItem = function(opt_data, opt_ignored) {
  return '<li class="comment-form-container' + ((opt_data.isHidden) ? ' hidden' : '') + '">' + bitbucket.internal.feature.commentForm({id: opt_data.id, version: opt_data.version, text: opt_data.text, tips: opt_data.tips, currentUser: opt_data.currentUser, extraClasses: opt_data.extraFormClasses}) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentFormListItem.soyTemplateName = 'bitbucket.internal.feature.commentFormListItem';
}


bitbucket.internal.feature.commentForm = function(opt_data, opt_ignored) {
  return '<form' + ((opt_data.id) ? ' data-id="' + soy.$$escapeHtml(opt_data.id) + '" data-version="' + soy.$$escapeHtml(opt_data.version) + '"' : '') + ' class="new-comment-form' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.currentUser}) + '<div class="content">' + ((opt_data.text) ? '<input name="old_text" type="hidden" value="' + soy.$$escapeHtml(opt_data.text) + '" />' : '') + bitbucket.internal.widget.markupEditor.editor({text: opt_data.text, placeholderText: 'What do you want to say?', previewButtonTitle: 'View a preview of this comment', attachmentButtonTitle: 'Attach a file to this comment. You can also drag and drop a file to attach it.', attachmentButtonAccessibilityText: 'Attach file'}) + '<div class="comment-form-footer"><div class="buttons">' + bitbucket.internal.buttons.button({buttonText: opt_data.id ? 'Save' : 'Comment'}) + widget.aui.form.cancelButton({href: '#'}) + '</div>' + ((opt_data.tips.length) ? bitbucket.internal.feature.commentFormTip(opt_data) : '') + '</div></div></form>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentForm.soyTemplateName = 'bitbucket.internal.feature.commentForm';
}


bitbucket.internal.feature.commentFormTip = function(opt_data, opt_ignored) {
  return '<div class="tip"><span class="tip-label">' + soy.$$escapeHtml('Tip:') + ' </span>' + soy.$$filterNoAutoescape(opt_data.tips[Math.floor(Math.random() * opt_data.tips.length)]) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentFormTip.soyTemplateName = 'bitbucket.internal.feature.commentFormTip';
}


bitbucket.internal.feature.addCommentTrigger = function(opt_data, opt_ignored) {
  return '<button class="add-comment-trigger" title="' + soy.$$escapeHtml('Add a comment on this line.') + '">' + aui.icons.icon({useIconFont: true, icon: 'comment', accessibilityText: 'This line has a comment.'}) + aui.icons.icon({useIconFont: true, icon: 'add-comment', accessibilityText: 'Add a comment on this line.'}) + '</button>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.addCommentTrigger.soyTemplateName = 'bitbucket.internal.feature.addCommentTrigger';
}


bitbucket.internal.feature.dummyCommentTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var changeLocation__soy257 = opt_data.relevantContextLines ? AJS.format('Comments can only be added within {0} lines of a change',opt_data.relevantContextLines) : 'Comments can only be added near a change';
  output += '<div class="dummy-comment-trigger" title="' + soy.$$escapeHtml(changeLocation__soy257) + '" ></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.dummyCommentTrigger.soyTemplateName = 'bitbucket.internal.feature.dummyCommentTrigger';
}


bitbucket.internal.feature.fileComments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="file-comments">' + ((opt_data.comments && opt_data.comments.length > 0) ? bitbucket.internal.feature.comments(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileComments.soyTemplateName = 'bitbucket.internal.feature.fileComments';
}


bitbucket.internal.feature.commentAsyncWebPanelPlaceholder = function(opt_data, opt_ignored) {
  return '<div id="async-web-panel-' + soy.$$escapeHtml(opt_data.webPanelId) + '"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commentAsyncWebPanelPlaceholder.soyTemplateName = 'bitbucket.internal.feature.commentAsyncWebPanelPlaceholder';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/anchors.js' */
define("bitbucket/internal/feature/comments/anchors",["module","exports","jquery","bitbucket/util/navbuilder","bitbucket/internal/model/page-state"],function(h,e,k,l,m){function b(a){this._pullRequest=a?a.toJSON():f.default.getPullRequest().toJSON();this._projectKey=this._pullRequest.toRef.repository.project.key;this._repoSlug=this._pullRequest.toRef.repository.slug;this._pullRequestId=this._pullRequest.id}function c(a){this._path=a.getPath();this._srcPath=a.getSrcPath();this._commitRange=a.getCommitRange();
this._projectKey=(a.getRepository()||f.default).getProject().getKey();this._repoSlug=(a||f.default).getRepository().getSlug()}function d(a,n,b,c){this._diffAnchor=a;this._lineType=n;this._line=b;this._fileType=c}Object.defineProperty(e,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(k),g=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(m);b.prototype.getPullRequest=function(){return this._pullRequest};b.prototype.getId=function(){return"pullrequest-"+this._projectKey+
"-"+this._repoSlug+"-"+this._pullRequestId};b.prototype.toJSON=function(){};b.prototype.urlBuilder=function(){return g.default.rest().project(this._projectKey).repo(this._repoSlug).pullRequest(this._pullRequestId).comments()};c.prototype.getPullRequest=function(){return this._commitRange.getPullRequest()&&this._commitRange.getPullRequest().toJSON()};c.prototype.getId=function(){return"diff-"+this._projectKey+"-"+this._repoSlug+"-"+this._commitRange.getId()+"-"+this._path};c.prototype.toJSON=function(){var a=
{path:this._path.toString(),diffType:this._commitRange.getDiffType()};"EFFECTIVE"!==this._commitRange.getDiffType()&&(a.fromHash=this._commitRange.getSinceRevision().getId(),a.toHash=this._commitRange.getUntilRevision().getId());var b=this._srcPath&&this._srcPath.toString();b&&(a.srcPath=b);return a};c.prototype.urlBuilder=function(){var a=g.default.rest().project(this._projectKey).repo(this._repoSlug),b=this._commitRange.getPullRequest();return b?a.pullRequest(b.getId()).comments():a.commit(this._commitRange.getUntilRevision().getId()).comments()};
d.prototype.getPullRequest=function(){return this._diffAnchor.getPullRequest()};d.prototype.getId=function(){var a=this._fileType?this._fileType+"-":"";return"line-"+this._diffAnchor.getId()+"-"+a+this._lineType+"-"+this._line};d.prototype.toJSON=function(){var a=p.default.extend(this._diffAnchor.toJSON(),{line:this._line,lineType:this._lineType});this._fileType&&(a.fileType=this._fileType);return a};d.prototype.urlBuilder=function(){return this._diffAnchor.urlBuilder()};e.default={PullRequestAnchor:b,
DiffAnchor:c,LineAnchor:d};h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comment-collection.js' */
define("bitbucket/internal/feature/comments/comment-collection",["module","exports","backbone","bitbucket/internal/feature/comments/comment-model"],function(e,a,c,d){Object.defineProperty(a,"__esModule",{value:!0});c=babelHelpers.interopRequireDefault(c);d=babelHelpers.interopRequireDefault(d);a.default=c.default.Collection.extend({initialize:function(a,b){b=b||{};this.urlBuilder=b.urlBuilder||function(){return b.anchor.urlBuilder()}},model:d.default,url:function(){return this.urlBuilder().build()}});
e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/activity-comment-container.js' */
define("bitbucket/internal/feature/comments/activity-comment-container","module exports jquery lodash bitbucket/internal/feature/comments/comment-container bitbucket/internal/util/events".split(" "),function(e,b,d,f,g,h){Object.defineProperty(b,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(d);d=babelHelpers.interopRequireDefault(f);var c=babelHelpers.interopRequireDefault(g);babelHelpers.interopRequireDefault(h);b.default=c.default.extend({initialize:function(){c.default.prototype.initialize.apply(this,
arguments)},rootCommentListSelector:".pull-request-activity",events:d.default.extend({},c.default.prototype.events,{"focus .general-comment-form textarea":"onGeneralFormTextareaFocused"}),initDeleteButtons:function(){this.createDeleteDialog().attachTo(".general-comment-activity .delete",null,this.el)},insertCommentIntoList:function(a,b,d){if(b.is(this.rootCommentListSelector)){var e=b.children(":first");a.insertAfter(e)}else c.default.prototype.insertCommentIntoList.apply(this,arguments)},closeCommentForm:function(a){a.find(".error").remove();
a.is(".general-comment-form")?(this._unbindMarkupEditor(a),a.addClass("collapsed"),a.find("textarea").val("").removeClass("restored").removeAttr("title").blur(),this.deleteDraftComment(this.getDraftCommentFromForm(a))):c.default.prototype.closeCommentForm.apply(this,arguments)},getExtraCommentClasses:function(){return"general-comment-activity"},onGeneralFormTextareaFocused:function(a){a=(0,k.default)(a.target).closest(".general-comment-form");a.hasClass("collapsed")&&(this._bindMarkupEditor(a),a.removeClass("collapsed"))}});
e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/comments.js' */
define("bitbucket/internal/feature/comments/comments","module exports jquery bitbucket/internal/feature/comments/activity-comment-context bitbucket/internal/feature/comments/anchors bitbucket/internal/feature/comments/comment-tips bitbucket/internal/feature/comments/diff-comment-context".split(" "),function(k,e,f,l,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f),q=babelHelpers.interopRequireDefault(l),h=babelHelpers.interopRequireDefault(m);f=babelHelpers.interopRequireDefault(n);
var r=babelHelpers.interopRequireDefault(p),c={CREATE_NEW:"create-new",REPLY_ONLY:"reply-only",READ:"read",NONE:"none"};e.default=g.default.extend({bindContext:function(a,d,b){if(a.data("comment-context"))throw Error("Duplicate comment context registered.");b=g.default.extend({el:a[0],anchor:d,allowCommenting:b&&b.commentMode===c.CREATE_NEW,showComments:b&&(b.commentMode===c.READ||b.commentMode===c.CREATE_NEW||b.commentMode===c.REPLY_ONLY)},b);d=d instanceof h.default.DiffAnchor?new r.default(b):
new q.default(b);a.data("comment-context",d);return d},updateContext:function(a){(a=a.data("comment-context"))&&a.checkForNewContainers()},unbindContext:function(a){(a=a.data("comment-context"))&&a.destroy()},commentMode:c},h.default,f.default);k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/activity-comment-context.js' */
define("bitbucket/internal/feature/comments/activity-comment-context","module exports lodash bitbucket/internal/feature/comments/activity-comment-container bitbucket/internal/feature/comments/comment-context bitbucket/internal/util/events".split(" "),function(d,b,c,e,f,g){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(c),k=babelHelpers.interopRequireDefault(e);c=babelHelpers.interopRequireDefault(f);var l=babelHelpers.interopRequireDefault(g);b.default=c.default.extend({findContainerElements:function(){return[this.el]},
_registerContainer:function(a,b,c){this._containers[a]=new k.default({name:a,context:this,el:b,anchor:c});return this._containers[a]},getActivityCommentContainer:function(){return this._containers[this.getAnchor().getId()]},restoreDrafts:function(){if(this.unrestoredDrafts.length){var a=this.getActivityCommentContainer();this.unrestoredDrafts=h.default.reject(this.unrestoredDrafts,a.restoreDraftComment.bind(a));if(this.unrestoredDrafts.length)l.default.once("bitbucket.internal.feature.pullRequestActivity.dataLoaded",
this.restoreDrafts.bind(this))}}});d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:comments', location = '/static/bitbucket/internal/feature/comments/diff-comment-context.js' */
define("bitbucket/internal/feature/comments/diff-comment-context","module exports jquery lodash bitbucket/internal/feature/comments/anchors bitbucket/internal/feature/comments/comment-collection bitbucket/internal/feature/comments/comment-context bitbucket/internal/feature/comments/diff-comment-container bitbucket/internal/feature/file-content/diff-view-file-types bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/model/direction bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/shortcuts bitbucket/internal/util/time-i18n-mappings".split(" "),
function(w,m,n,x,y,z,A,B,C,D,E,F,G,H,I,J){Object.defineProperty(m,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(n),b=babelHelpers.interopRequireDefault(x);n=babelHelpers.interopRequireDefault(y);var K=babelHelpers.interopRequireDefault(z),l=babelHelpers.interopRequireDefault(A),t=babelHelpers.interopRequireDefault(B),u=babelHelpers.interopRequireDefault(C),L=babelHelpers.interopRequireDefault(D),p=babelHelpers.interopRequireDefault(E),v=babelHelpers.interopRequireDefault(F),q=
babelHelpers.interopRequireDefault(G),k=babelHelpers.interopRequireDefault(H),r=babelHelpers.interopRequireDefault(I),M=babelHelpers.interopRequireDefault(J),N=n.default.LineAnchor;m.default=l.default.extend({events:{"click .add-comment-trigger":"addCommentClicked","mouseenter .dummy-comment-trigger, .add-comment-trigger":"initTooltip"},initialize:function(){this._destroyables=[];b.default.bindAll(this,"onDiffChange","onFileCommentsResized","onCommentContainerDestroyed","onDiffViewOptionsChange");
this._initFileCommentButton=this._initFileCommentButton.bind(this,this.options.$toolbar);this._destroyables.push(q.default.chain().once("bitbucket.internal.feature.fileContent.requestHandled",this._initFileCommentButton));this.setDiffView(this.options.diffView);this._dvOptions=this.options.diffViewOptions||L.default;this._commentsById=this.options.lineComments&&b.default.indexBy(this.options.lineComments,k.default.dot("id"));this.$el.toggleClass("commentable",this.options.allowCommenting);this.toggleComments(!this._dvOptions.get("hideComments"));
this._dvOptions.on("change",this.onDiffViewOptionsChange);q.default.on("bitbucket.internal.comment.commentContainerDestroyed",this.onCommentContainerDestroyed);this.renderFileComments();l.default.prototype.initialize.apply(this,arguments);var a=this._getFileCommentContainer();a&&this._initializeFileCommentContainer(a)},_initFileCommentButton:function(a){a.find(".add-file-comment-trigger").on("click",this.addFileCommentClicked.bind(this)).tooltip({gravity:"ne"})},_initializeFileCommentContainer:function(a){a.on("resize",
this.onFileCommentsResized)},_getFileCommentContainer:function(){var a=this.options.anchor.getId();if(this.includesContainer(a))return this._containers[a]},_registerContainer:function(a,c,b){this._containers[a]=new t.default({anchor:b,context:this,el:c,name:a,urlBuilder:this.options.urlBuilder});return this._containers[a]},addFileCommentClicked:function(){this.forceShowingComments();this.addCommentContainerForFile().openNewCommentForm()},initTooltip:function(a){a=(0,g.default)(a.currentTarget);a.data("tooltip-inited")||
(a.data("tooltip-inited",!0),a.tooltip({gravity:"w",delayOut:200}).trigger("mouseenter"))},addCommentClicked:function(a){a.preventDefault();this.forceShowingComments();a=(0,g.default)(a.target).closest(".line");this.addCommentContainerForLine(a).openNewCommentForm()},forceShowingComments:function(){this._dvOptions.get("hideComments")&&this._dvOptions.set("hideComments",!1)},addCommentContainerForFile:function(){var a=this._getFileCommentContainer();if(a)return a;a=(0,g.default)(bitbucket.internal.feature.comments(this.options.anchor.toJSON()));
a.appendTo(this.$(".file-comments"));this.registerContainer(a[0],this.options.anchor);a=this._getFileCommentContainer();this._initializeFileCommentContainer(a);return a},addCommentContainerForLine:function(a,c){var b=this.getLineAnchor(a),d=a.lineType?a:this.diffView.getLineHandle(a),f=b.getId(),h=this.options.urlBuilder;this.includesContainer(f)||(this._containers[f]=new t.default({anchor:b,collection:c?new K.default(c,{anchor:b,urlBuilder:h}):void 0,context:this,lineHandle:d,name:f,showComments:!this._dvOptions.get("hideComments"),
urlBuilder:h}));return this._containers[f]},destroy:function(a){a||(this.diffView&&this.diffView.off("change",this.onDiffChange),this.$el.removeClass("commentable"),this._dvOptions.off("change",this.onDiffViewOptionsChange),this._dvOptions=null,q.default.off("bitbucket.internal.comment.commentContainerDestroyed",this.onCommentContainerDestroyed),b.default.invoke(this._destroyables,"destroy"),this._destroyables=null);l.default.prototype.destroy.apply(this,arguments)},findContainerElements:function(){return this.$(".line .comment-box, .file-comments \x3e .comment-container")},
getAnchor:function(a){return(0,g.default)(a).closest(".file-comments").length?this.options.anchor:this.getLineAnchor((0,g.default)(a).closest(".line"))},getGutterId:function(){return this.options.allowCommenting?"add-comment-trigger":null},getLineAnchor:function(a){a=a.lineType?a:this.diffView.getLineHandle(a);return new N(this.options.anchor,a.lineType,a.lineNumber,a.fileType)},renderFileComments:function(){var a=this.options.anchor.getPullRequest();this.$el.prepend(bitbucket.internal.feature.fileComments({comments:this.options.fileComments,
pullRequest:a,customMapping:M.default.commentEditedAge}))},addAnchoredComments:function(){function a(a){return b.default.chain(a).filter(function(a){return!(!a.anchor||!a.anchor.line)}).groupBy(function(a){return(a.anchor.fileType||"")+a.anchor.line}).value()}var c=this,e=this.diffView,d=this.options.lineComments;d&&d[0]&&!d[0].anchor||b.default.forEach(a(d),function(a){var b=a[0].anchor;(b=e.getLineHandle({fileType:b.fileType,lineType:b.lineType,lineNumber:b.line}))&&c.addCommentContainerForLine(b,
a)})},onFileCommentsResized:function(){this.trigger("fileCommentsResized")},onDiffChange:function(a){if("INITIAL"===a.type||"INSERT"===a.type){"INITIAL"===a.type&&this.addAnchoredComments();var c=this.diffView,e=this;a.eachLine(function(d){var f=d.line,h;h=!d.attributes.expanded&&"MARKER"!==d.line.conflictMarker&&e.options.allowCommenting&&"INITIAL"===a.type?bitbucket.internal.feature.addCommentTrigger():bitbucket.internal.feature.dummyCommentTrigger({relevantContextLines:e.options.relevantContextLines});
d.handles.FROM&&c.setGutterMarker(d.handles.FROM,e.getGutterId(),(0,g.default)(h)[0]);d.handles.TO&&d.handles.FROM!==d.handles.TO&&c.setGutterMarker(d.handles.TO,e.getGutterId(),(0,g.default)(h)[0]);f.commentIds&&(f=b.default.chain(f.commentIds).map(k.default.lookup(e._commentsById)).filter(b.default.identity).value(),f.length&&e.addCommentContainerForLine(d.handles.FROM||d.handles.TO,f));e.unrestoredDrafts.length&&"INITIAL"===a.type&&b.default.chain(d.handles).values().compact().uniq().forEach(e.restoreDraftsForLine.bind(e)).value()})}},
onCommentContainerDestroyed:function(a){var c=this._getFileCommentContainer();c&&a===c.$el&&b.default.defer(this.onFileCommentsResized.bind(this))},onDiffViewOptionsChange:function(a){"hideComments"===a.key&&this.toggleComments(!a.value)},restoreDraftsForLine:function(a){var b=g.default.extend({line:a.lineNumber,lineType:a.lineType},{fileType:a.fileType}),b=this.getUnrestoredDraftsForLine(b);b.length&&(a=this.addCommentContainerForLine(a),this._restoreDraftsToContainer(a,b),a.destroyIfEmpty())},_restoreDraftsToContainer:function(a,
c){b.default.forEach(c,a.restoreDraftComment.bind(a));this.unrestoredDrafts=b.default.difference(this.unrestoredDrafts,c)},restoreDrafts:function(){var a=this;this.options.allowCommenting||(this.unrestoredDrafts=b.default.filter(this.unrestoredDrafts,function(b){return(b.id||b.parent)&&(a.$el.is(".file-comment-activity")||b.anchor.line)}));this.restoreDraftFileComments()},restoreDraftFileComments:function(){var a=b.default.reject(this.unrestoredDrafts,k.default.dot("anchor.line"));a.length&&this._restoreDraftsToContainer(this.addCommentContainerForFile(),
a)},getUnrestoredDraftsForLine:function(a){var c=b.default.compose(k.default.partialRight(b.default.pick,"fileType","line","lineType"),this.unifyAnchorFileTypes);a=b.default.isEqual.bind(b.default,c(a));c=b.default.compose(a,c,k.default.dot("anchor"));return b.default.filter(this.unrestoredDrafts,c)},unifyAnchorFileTypes:function(a){var c=a.lineType===p.default.ADDED&&a.fileType===u.default.TO;return(a.lineType===p.default.CONTEXT||a.lineType===p.default.REMOVED)&&a.fileType===u.default.FROM||c?b.default.omit(a,
"fileType"):a},clarifyAmbiguousDraftProps:function(a){a=l.default.prototype.clarifyAmbiguousDraftProps.call(this,a);a.anchor=this.unifyAnchorFileTypes(a.anchor);return a},setDiffView:function(a){this.diffView&&this.diffView.off("internal-change",this.onDiffChange);if(this.diffView=a)this.diffView.on("internal-change",this.onDiffChange),this._destroyables.push({destroy:r.default.bind("addFileComment",this.addFileCommentClicked.bind(this))}),this._destroyables.push({destroy:r.default.bind("requestTertiaryNext",
a._scrollToComment.bind(a,v.default.DOWN))}),this._destroyables.push({destroy:r.default.bind("requestTertiaryPrevious",a._scrollToComment.bind(a,v.default.UP))})},toggleComments:function(a){this.$el.toggleClass("hide-comments",!a);b.default.invoke(this._containers,"toggleComment",a)}});w.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-badge', location = '/static/bitbucket/internal/feature/commit/commit-badge/commit-badge.soy' */
// This file was automatically generated from commit-badge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.commit.commitBadge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.commit == 'undefined') { bitbucket.internal.feature.commit = {}; }
if (typeof bitbucket.internal.feature.commit.commitBadge == 'undefined') { bitbucket.internal.feature.commit.commitBadge = {}; }


bitbucket.internal.feature.commit.commitBadge.oneline = function(opt_data, opt_ignored) {
  return '<div class="commit-badge-oneline">' + ((opt_data.withAvatar) ? bitbucket.internal.widget.avatar({person: opt_data.commit.author, size: 'small'}) : '') + bitbucket.internal.feature.commit.commitBadge.commitSummary({authorNameContent: '' + ((opt_data.linkAuthor == false) ? '<span class="commit-author" title="' + soy.$$escapeHtml(opt_data.commit.author.displayName || opt_data.commit.author.name) + '">' + soy.$$escapeHtml(soy.$$truncate(opt_data.commit.author.displayName || opt_data.commit.author.name, 100, true)) + '</span>' : bitbucket.internal.widget.userLink({user: opt_data.commit.author, extraClasses: 'commit-author'})), commitLinkContent: '' + bitbucket.internal.feature.commit.link(opt_data) + ((opt_data.commit.parents.length > 1) ? bitbucket.internal.widget.lozenge.merge({abbreviated: opt_data.abbreviatedMerge}) : '')}) + bitbucket.internal.widget.date.shortAge({date: opt_data.commit.authorTimestamp}) + ((opt_data.includeCommentCount && opt_data.commit.properties && opt_data.commit.properties.commentCount) ? bitbucket.internal.feature.commentCount({count: opt_data.commit.properties.commentCount, size: 'tiny'}) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.oneline.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.oneline';
}


bitbucket.internal.feature.commit.commitBadge.commitSummary = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0} committed {1}',opt_data.authorNameContent,opt_data.commitLinkContent));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.commitSummary.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.commitSummary';
}


bitbucket.internal.feature.commit.commitBadge.detailed = function(opt_data, opt_ignored) {
  return '<div class="commit-badge-detailed">' + bitbucket.internal.feature.commit.commitBadge.oneline({commit: opt_data.commit, repository: opt_data.repository, linkAuthor: opt_data.linkAuthor, abbreviatedMerge: true}) + '<div class="commit-message">' + soy.$$escapeHtml(soy.$$truncate(opt_data.commit.message, opt_data.maxMessageLength ? opt_data.maxMessageLength : 150, true)) + '</div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.detailed.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.detailed';
}


bitbucket.internal.feature.commit.commitBadge.message = function(opt_data, opt_ignored) {
  var output = '';
  var parsedCommitMessage__soy56 = require('bitbucket/internal/util/parse-commit-message').splitIntoSubjectAndBody(opt_data.commit.message);
  output += '<div class="commit-message"><span class="commit-message-subject">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy56.subject, 400, true)) + '</span>' + ((parsedCommitMessage__soy56.body.length > 0) ? '<span class="commit-message-body">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy56.body, 400, true)) + '</span>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.commit.commitBadge.message.soyTemplateName = 'bitbucket.internal.feature.commit.commitBadge.message';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-badge', location = '/static/bitbucket/internal/feature/commit/commit-badge/commit-badge.js' */
define("bitbucket/internal/feature/commit/commit-badge/commit-badge",["module","exports","jquery"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(c);a.default={create:function(a,b){return(0,d.default)(bitbucket.internal.feature.commit.commitBadge.oneline({commit:a,repository:b,withAvatar:!0}))}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-list', location = '/static/bitbucket/internal/feature/commit/commit-list/commit-list.soy' */
// This file was automatically generated from commit-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.commit.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.commit == 'undefined') { bitbucket.internal.widget.commit = {}; }


bitbucket.internal.widget.commit.commitList = function(opt_data, opt_ignored) {
  return '<ul class="commit-list">' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.commit.commitList.soyTemplateName = 'bitbucket.internal.widget.commit.commitList';
}


bitbucket.internal.widget.commit.commitListItem = function(opt_data, opt_ignored) {
  return '<li class="commit-list-item' + ((opt_data.isSelected) ? ' selected' : '') + ((opt_data.isFocused) ? ' focused' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.commit.commitListItem.soyTemplateName = 'bitbucket.internal.widget.commit.commitListItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-content-modes', location = '/static/bitbucket/internal/model/file-content-modes.js' */
define("bitbucket/internal/model/file-content-modes",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={SOURCE:"source",DIFF:"diff"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:keyboard-controller', location = '/static/bitbucket/internal/widget/keyboard-controller.js' */
define("bitbucket/internal/widget/keyboard-controller",["module","exports","aui","jquery"],function(x,r,B,C){function t(b,d){if(!(this instanceof t))return new t(b,d);var a=(0,e.default)(b),g;a.on("keydown",g=function(a){a.keyCode in d&&(d[a.keyCode](a)||a.preventDefault())});this.destroy=function(){a.off("keydown",g)};return this}function m(b,d){function a(a){a.focus().addClass(d.focusedClass)}d=e.default.extend({},m.defaults,d);var g={};g[v.default.keyCode.TAB]=function(g){var n=g.target,f=(0,e.default)("a:visible, :input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled, [tabindex]",
b).not("[tabindex\x3d-1]").filter(function(){return"hidden"!==(0,e.default)(this).css("visibility")}),p=f.last(),q=f.first();f.removeClass(d.focusedClass);if(g.shiftKey&&n===q[0]){if(!d.wrapAround)return!0;a(p)}else if(g.shiftKey||n!==p[0])g.shiftKey?a(f.eq(f.index(n)-1)):a(f.eq(f.index(n)+1));else{if(!d.wrapAround)return!0;a(q)}};return new t(b,g)}function y(b,d,a){function g(c){do{var b=c.find("\x3e:first-child"),e=c.next();c=b.length?b:e.length?e:c.parentsUntil(f[0]).next().first()}while(c.length&&
!c.is(a.itemSelector));return c}function r(c){do{var b=c.prev();if(b.length){for(;(c=b.find("\x3e:last-child")).length;)b=c;c=b}else c=c.parent(),c[0]===f[0]&&(c=(0,e.default)())}while(c.length&&!c.is(a.itemSelector));return c}function n(c){return function A(b){var d=(0,e.default)(a.itemSelector,f),k=d.filter(function(){return(0,e.default)(this).hasClass(a.focusedClass)}),l=!1,h;if(k.length)h=a.adjacentItems?k[c](a.itemSelector):"next"===c?g(k):r(k);else if("next"===c)h=d.first();else if(a.wrapAround)h=
d.last();else return;u=!0;if(!h.length){if("next"===c&&a.requestMore&&!m){if(!z){u=!1;if(h=a.requestMore()){z=!0;h.done(function(a){m=a;u||A(b)}).always(function(){u=z=!1});return}m=!0;A(b);return}u=!1;return}if(a.wrapAround)l=!0,h=d["next"===c?"first":"last"]();else{if(a.onFocusLastItem&&"next"===c)a.onFocusLastItem();return}}k.removeClass(a.focusedClass);h.addClass(a.focusedClass);d=h[c]();l=!l&&d.length?d:h;d=document.activeElement;a.focusIntoView&&d?(k=l.attr("tabindex"),l.attr("tabindex","0"),
l.focus(),d.focus(),null==k?l.removeAttr("tabindex"):l.attr("tabindex",k)):h[0].scrollIntoView(!1);q.fire(h,b)}}a=e.default.extend({},y.defaults,a);var f=(0,e.default)(d),p=e.default.Callbacks(),q=e.default.Callbacks();a.onSelect&&p.add(a.onSelect);a.onFocus&&q.add(a.onFocus);var m=!1,z=!1,u=!1,w={};d=w[v.default.keyCode.UP]=n("prev");var x=w[v.default.keyCode.DOWN]=n("next");w[v.default.keyCode.ENTER]=function(c){var b=(0,e.default)(a.itemSelector,f).filter(function(){return(0,e.default)(this).hasClass(a.focusedClass)});
b.length&&p.fire(b,c)};b=new t(b,w);b.setListElement=function(a){f=(0,e.default)(a)};b.blur=function(){(0,e.default)(a.itemSelector,f).removeClass(a.focusedClass)};b.focus=function(){q.add.apply(q,arguments);return this};b.select=function(){p.add.apply(p,arguments);return this};b.moveToNext=x;b.moveToPrev=d;return b}Object.defineProperty(r,"__esModule",{value:!0});var v=babelHelpers.interopRequireDefault(B),e=babelHelpers.interopRequireDefault(C);m.defaults={focusedClass:"item-focused",wrapAround:!0};
y.defaults={itemSelector:"li",focusedClass:"item-focused",wrapAround:!1,adjacentItems:!0,requestMore:void 0,onFocus:void 0,onSelect:void 0};r.default={KeyboardController:t,TabKeyboardController:m,ListKeyboardController:y};x.exports=r["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-selector', location = '/static/bitbucket/internal/feature/file-content/commit-selector/commit-selector.js' */
define("bitbucket/internal/feature/file-content/commit-selector/commit-selector","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/path bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/widget/keyboard-controller bitbucket/internal/widget/paged-scrollable".split(" "),function(v,h,k,w,x,y,z,A,B,C,D){function e(a){var b=this,d=a.id,c=this._$selectorButton=(0,f.default)(a.buttonEl);this._$selectorButtonText=c.find(".aui-button-label");this._id=
d;this._scrollPaneSelector="#inline-dialog-"+d+" .commit-selector";this._listSelector=this._scrollPaneSelector+" \x3e ul";this._scrollable=null;var e=!1,g=void 0,m=function(a){a.keyCode===l.default.keyCode.ESCAPE&&(b.hide(),a.preventDefault())},p=function(a){b.isButtonEnabled()&&b.show();a.preventDefault()},n=function(a){b.hide();a.preventDefault()},h=this._itemClicked=function(a){var d=(0,f.default)(a.currentTarget);if(!d.hasClass("disabled")){b.hide();var c=d.children("a").attr("data-id"),c=b._visibleCommits[c],
e=b._preloadItems[d.index()],m=e&&e.commitRange,g=null,n=null;c&&c.properties&&c.properties.change&&(g=c.properties.change.path?new q.default(c.properties.change.path):null,n=c.properties.change.srcPath?new q.default(c.properties.change.srcPath):null);(0,f.default)("li",b._listSelector).removeClass("selected");d.addClass("selected");b._renderButton(c,e);r.default.trigger("bitbucket.internal.feature.commitselector.itemSelected",b,{commitJSON:c,commitRangeJSON:m,pullRequest:b._pullRequest,path:g,sincePath:n})}a.preventDefault()},
k=function(){return b.hide()};this.resetDialog=function(){b.hide();b._scrollable&&b._scrollable.reset();(0,f.default)(document).off("keyup",m);g&&g.off("click","li.commit-list-item",h);e=!1};this._inlineDialog=l.default.InlineDialog(c,d,function(a,d,l){e?l():(e=!0,g=a.html(bitbucket.internal.feature.fileContent.commitSelector()),g.on("click","li.commit-list-item",h),l(),b._scrollable=b._createScrollable(),b._visibleCommits={},setTimeout(function(){a.find(".spinner-container").spin();b._scrollable.init()},
0),b._initialiseKeyboardNavigation(),b._initialiseMouseNavigation());c.off("click",p);c.on("click",n);(0,f.default)(document).on("keyup",m);(0,f.default)(window).on("scroll",k)},{hideDelay:null,width:483,noBind:!0,hideCallback:function(){(0,f.default)(window).off("scroll",k);(0,f.default)(document).off("keyup",m);c.off("click",n);c.on("click",p);(0,f.default)(document.activeElement).closest(b._scrollPaneSelector).length&&document.activeElement.blur()}});c.on("click",p);this._events=r.default.chain().on("bitbucket.internal.feature.commitselector.itemSelected",
this.hide).on("bitbucket.internal.page.*.revisionRefChanged",this.resetDialog).on("bitbucket.internal.page.*.pathChanged",this.resetDialog)}function E(a,b){F.default.forEach(a,function(a){b[a.id]=a})}Object.defineProperty(h,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(k),f=babelHelpers.interopRequireDefault(w),F=babelHelpers.interopRequireDefault(x),t=babelHelpers.interopRequireDefault(y),q=babelHelpers.interopRequireDefault(z),u=babelHelpers.interopRequireDefault(A),r=babelHelpers.interopRequireDefault(B);
k=babelHelpers.interopRequireDefault(C);var G=babelHelpers.interopRequireDefault(D),H=k.default.ListKeyboardController;e.prototype.init=function(a){this._commitRange=a.commitRange;this._followRenames=a.followRenames;this._headRevisionRef=a.headRevisionReference;this._itemTemplate=a.itemTemplate;this._itemTitle=a.itemTitle;this._itemUrl=a.itemUrl;this._itemExtraClasses=a.itemExtraClasses;this._mode=a.mode;this._path=a.path;this._preloadItems=a.preloadItems||[];this._pullRequest=a.pullRequest;this._selectedCommit=
a.selectedCommit;this._updateButton=a.updateButton;this._lastPageMessage=a.lastPageMessage||"No more history";this._includesMerge=a.includesMerge||!1;this._renderButton(a.selectedCommit,a.selectedItem)};e.prototype.destroy=function(){this.resetDialog();this._events.destroy();this._inlineDialog.remove();this._resultsKeyboardController&&(this._resultsKeyboardController.destroy(),this._resultsKeyboardController=null)};e.prototype.show=function(){this._inlineDialog.show()};
e.prototype.hide=function(){this._inlineDialog.hide()};e.prototype._createScrollable=function(){var a=new G.default(this._scrollPaneSelector,{bufferPixels:0,pageSize:25,paginationContext:"file-history",preventOverscroll:!0});a.requestData=this.requestData.bind(this);a.attachNewContent=this.attachNewContent.bind(this);var b=a.onFirstDataLoaded;a.onFirstDataLoaded=function(){return b.apply(this,arguments)};return a};e.prototype.requestData=function(a,b){this._inlineDialog.find(".spinner-container").spin();
var d=void 0,d=this._pullRequest?t.default.rest().currentRepo().pullRequest(this._pullRequest.id).commits().withParams({start:a,limit:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}):t.default.rest().currentRepo().commits().withParams({followRenames:this._followRenames,path:this._path.toString(),until:this._headRevisionRef.getId(),start:a,limit:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})});return u.default.rest({url:d.build()}).done(function(a){return 0<
a.size?a:u.default.rest({url:d.withParams({followRenames:!1}).build()})})};e.prototype._renderItem=function(a,b,d){return bitbucket.internal.widget.commit.commitListItem({content:this._itemTemplate({commit:a,href:this._itemUrl(a,this)}),isFocused:b,isSelected:d,extraClasses:this._itemExtraClasses&&this._itemExtraClasses(a).join(" "),title:this._itemTitle?this._itemTitle(a.displayId):""})};e.prototype.attachNewContent=function(a){var b=this;E(a.values,this._visibleCommits);var d=this._selectedCommit&&
this._selectedCommit.id,c=a.values.map(function(c){return b._renderItem(c,d===c.id&&0===a.start,d===c.id)}),e=this._preloadItems&&0===a.start?this._preloadItems.map(function(a){var c={href:a.href,icon:a.icon,messageHtml:a.messageHtml,size:a.size},d=["preload-item"];a.disabled&&d.push("disabled");b._itemExtraClasses&&(d=d.concat(b._itemExtraClasses(a)));return bitbucket.internal.widget.commit.commitListItem({isSelected:a.selected,extraClasses:d.join(" "),content:bitbucket.internal.feature.fileContent.commitSelectorUrlItem(c)})}):
null,g=(0,f.default)(this._listSelector);g.append(e).append(c);c=(0,f.default)(this._scrollPaneSelector).children(".spinner-container");c.spinStop();a.isLastPage&&(g.append(bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults({lastPageMessage:this._lastPageMessage})),c.remove())};e.prototype.isButtonEnabled=function(){return!this._$selectorButton.prop("disabled")};e.prototype.getSelectedCommit=function(){if(this._visibleCommits&&this._selectedCommit&&this._selectedCommit.id)return this._visibleCommits[this._selectedCommit.id]};
e.prototype.refreshCommit=function(a,b){var d=this._visibleCommits[a];if(d){var c=this._visibleCommits[a]=babelHelpers.extends({},d,b),d=(0,f.default)(this._listSelector).find(".commit-selector-item-message[data-id\x3d'"+a+"']").parent(),c=this._renderItem(c,d.hasClass("focused"),d.hasClass("selected"));d.replaceWith(c);return this._visibleCommits[a]}console.warn("Unable to refresh commit with id "+a)};e.prototype._initialiseKeyboardNavigation=function(){var a=this,b=(0,f.default)(a._scrollPaneSelector);
a._resultsKeyboardController&&a._resultsKeyboardController.destroy();a._resultsKeyboardController=new H(a._$selectorButton,a._listSelector,{focusedClass:"focused",itemSelector:"li.commit-list-item",adjacentItems:!0,requestMore:function(){var b=a._scrollable.loadAfter();return b&&b.then(function(a){return a.isLastPage})},onSelect:function(b){a._inlineDialog.is(":visible")?b.click():a._$selectorButton.click()},onFocusLastItem:function(){b.scrollTop(b[0].scrollHeight)}})};e.prototype._initialiseMouseNavigation=
function(){var a=(0,f.default)(this._listSelector);a.on("mouseenter","li",function(b){b=(0,f.default)(b.currentTarget);b.find(".focused").length||(a.find(".focused").removeClass("focused"),b.addClass("focused"))})};e.prototype._renderButton=function(a,b){if(this._updateButton)if(a)this._$selectorButton.children().first().replaceWith(bitbucket.internal.feature.fileContent.singleCommitIcon()),this._$selectorButtonText.text(a.message);else if(b)b.icon&&this._$selectorButton.children().first().replaceWith(b.icon),
this._$selectorButton.toggleClass("commit-selector-large","large"===b.size),this._$selectorButtonText.html(b.messageHtml);else throw Error("PreloadItems must provide a selectionContent HTML string to render into the dropdown button when they are selected");};h.default=e;v.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-selector', location = '/static/bitbucket/internal/feature/file-content/commit-selector/commit-selector.soy' */
// This file was automatically generated from commit-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.allCommitsIcon = function(opt_data, opt_ignored) {
  return '<img class="commit-icon" width="16" height="20" src="' + soy.$$escapeHtml('/s/837600433/a8ec8e6/1/1.0/_/download/resources/com.atlassian.bitbucket.server.bitbucket-web:commit-selector/icons/icon-all-changes.svg') + '" alt="' + soy.$$escapeHtml('A stack of all changes') + '" />';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.allCommitsIcon.soyTemplateName = 'bitbucket.internal.feature.fileContent.allCommitsIcon';
}


bitbucket.internal.feature.fileContent.commitSelector = function(opt_data, opt_ignored) {
  return '<div class="commit-selector">' + bitbucket.internal.widget.commit.commitList({content: ''}) + '<div class="spinner-container"/></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelector.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelector';
}


bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<li class="no-more-results">' + soy.$$escapeHtml(opt_data.lastPageMessage) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorNoMoreResults';
}


bitbucket.internal.feature.fileContent.commitSelectorItemAuthor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : '') + '" class="commit-selector-item-author" data-id="' + soy.$$escapeHtml(opt_data.commit.id) + '">' + ((opt_data.commit.message) ? bitbucket.internal.widget.avatar({person: opt_data.commit.author, size: 'small'}) + bitbucket.internal.feature.commit.commitBadge.detailed({commit: opt_data.commit, linkAuthor: false, maxMessageLength: 90, repository: opt_data.repository}) : '<span class="icon"></span>' + soy.$$escapeHtml(opt_data.commit.displayId)) + '</a>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorItemAuthor.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorItemAuthor';
}


bitbucket.internal.feature.fileContent.commitSelectorItemMessage = function(opt_data, opt_ignored) {
  return ((opt_data.beforeContent) ? soy.$$filterNoAutoescape(opt_data.beforeContent) : '') + '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : '') + '" class="commit-selector-item-message" data-id="' + soy.$$escapeHtml(opt_data.commit.id) + '">' + ((opt_data.commit.message) ? bitbucket.internal.feature.fileContent.singleCommitIcon(null) + '<div class="commit-selector-details' + ((opt_data.commit.message.length > 50) ? ' commit-preview-trigger" data-commit-message="' + soy.$$escapeHtml(opt_data.commit.message) + '" data-commit-preview-gravity="w' : '') + '">' + bitbucket.internal.feature.commit.commitBadge.message(opt_data) + bitbucket.internal.feature.commit.commitBadge.oneline({commit: opt_data.commit, withAvatar: true, linkAuthor: false, abbreviatedMerge: true, includeCommentCount: true}) + '</div>' : '<span class="icon"></span>' + soy.$$escapeHtml(opt_data.commit.displayId)) + '</a>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorItemMessage.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorItemMessage';
}


bitbucket.internal.feature.fileContent.commitSelectorUrlItem = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '" class="commit-selector-item-message' + ((! opt_data.size || opt_data.size == 'small') ? ' commit-selector-item-message-thin' : '') + '">' + ((opt_data.icon) ? soy.$$filterNoAutoescape(opt_data.icon) : bitbucket.internal.feature.fileContent.singleCommitIcon(null)) + '<div class="commit-selector-details">' + soy.$$filterNoAutoescape(opt_data.messageHtml) + '</div></a>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.commitSelectorUrlItem.soyTemplateName = 'bitbucket.internal.feature.fileContent.commitSelectorUrlItem';
}


bitbucket.internal.feature.fileContent.singleCommitIcon = function(opt_data, opt_ignored) {
  return '' + aui.icons.icon({extraClasses: 'commit-icon', icon: 'commit', iconFontSet: 'devtools', size: 'small', useIconFont: true});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.singleCommitIcon.soyTemplateName = 'bitbucket.internal.feature.fileContent.singleCommitIcon';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:content-tree-node-types', location = '/static/bitbucket/internal/model/content-tree-node-types.js' */
define("bitbucket/internal/model/content-tree-node-types",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={DIRECTORY:"DIRECTORY",FILE:"FILE",SUBMODULE:"SUBMODULE"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.plugins.atlassian-chaperone:internals', location = '/internals/syncing.js' */
var Chaperone={_internal:{}};Chaperone._internal.syncing=(function(){function a(c,d){return(d||AJS.$).ajax({url:AJS.contextPath()+"/rest/chaperone/1/chaperone/"+c})}function b(c,e,d){return(d||AJS.$).ajax({url:AJS.contextPath()+"/rest/chaperone/1/chaperone/"+c,type:"PUT",data:{json:e}})}return{syncToServer:b,syncFromServer:a}})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-chaperone:feature-discovery', location = '/feature-discovery/feature-discovery.js' */
(function(j,h,n,f,g){var l=f.syncFromServer;var i=f.syncToServer;var c=h.Callbacks();var k=n.once(function(){h(document).on("ajaxStop",function(){c.fire()})});var b=h.Callbacks();function m(){n.defer(b.fire)}var e=n.once(function(){h(window).on("scroll resize",m)});function a(p){var q=h.Deferred();function r(){var s=h(p);if(s.length){q.resolve(s);c.remove(r)}}c.add(r);r();return q}function d(t,v,q,s){var p=h.Callbacks();var r=h.Callbacks();var w=h.Callbacks();function u(x){var F;var H="feature-discovery-"+t+(v.id?"_"+v.id:"");function A(J){return function(){x.off(".chaperone");F.open=false;c.remove(z);b.remove(C);if(J){J.fire()}}}function z(){if(!x.is(":visible")){A()()}}var I=A(p);var E={};if(v.width){E.style="width: "+v.width+"px"}if(!x.attr("aria-controls")){x.attr("aria-controls",H);x.on("click.chaperone",A(w))}h(document.body).append(aui.inlineDialog2.inlineDialog2({id:H,content:chaperone.featureDiscovery.content({step:v,paging:q}),extraClasses:"feature-discovery-dialog "+H+(v.extraClasses?" "+v.extraClasses:""),persistent:!!v.persistent,alignment:v.alignment||(v.gravity||"s").replace(/[nswe]/g,function(J){return{n:"bottom middle",s:"top middle",e:"left middle",w:"right middle"}[J]}),extraAttributes:E}));F=document.getElementById(H);var G=h(F);var y=".feature-discovery-action";var D=".feature-discovery-next";var B=".feature-discovery-close";if(v.action&&v.action.click){G.on("click",y,v.action.click)}G.on("click",y,A(w));G.on("click",D,A(r));G.on("click",B,I);function C(){if(F._auiAlignment&&F._auiAlignment._auiTether){F._auiAlignment._auiTether.position()}}b.add(C);c.add(z);F.open=true}return{showWhenTargetVisible:function(){return a(v.selector).then(u)},on:function(x,y){switch(x){case"close":p.add(y);break;case"next":r.add(y);break;case"action":w.add(y);break}}}}function o(p){if(!p){return false}return Object.keys(p).every(function(q){return p[q].isDismissed})}g.registerFeature=function(r,p,q){q=q||{};var t=l(r).pipe(function(u){u=u||{};if(u.isAllDismissed||o(u.stepInfoById)){return h.Deferred().reject()}k();e();return u});function s(x,v,u){var w=v.stepInfoById[x.id||x.selector];switch(q.dismissalMode){case"progressive":w.isDismissed=true;i(r,JSON.stringify(v));break;default:if(u&&!v.isAllDismissed){v.isAllDismissed=true;i(r,JSON.stringify(v))}break}}n.reduce(p,function(v,u){return v.then(function(B){var H=B.stepInfoById=B.stepInfoById||{};var A=u.id||u.selector;var w=H[A]=H[A]||{};if(w.isDismissed){return v}var F=p.length;var z=n.indexOf(p,u);var x=z<F-1;var C=new d(r,u,{numSteps:F,stepIndex:z,hasNext:x},q);var G=h.Deferred();C.on("close",G.reject);C.on("next",n.bind(G.resolve,G,B));C.on("action",n.bind(G.resolve,G,B));var D=C.showWhenTargetVisible();var E=n.bind(s,null,u,B,!x);var y=n.bind(s,null,u,B,"all");if(u.once){D.then(E)}else{C.on("close",y);C.on("next",E);C.on("action",E)}return G})},t)};g.checkFeatureVisibility=function(){c.fire()};g.checkFeatureAlignment=function(){b.fire()}})(AJS,AJS.$,_,Chaperone._internal.syncing,Chaperone);;
;
/* module-key = 'com.atlassian.plugins.atlassian-chaperone:feature-discovery', location = '/feature-discovery/feature-discovery.soy' */
// This file was automatically generated from feature-discovery.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace chaperone.featureDiscovery.
 */

if (typeof chaperone == 'undefined') { var chaperone = {}; }
if (typeof chaperone.featureDiscovery == 'undefined') { chaperone.featureDiscovery = {}; }


chaperone.featureDiscovery.content = function(opt_data, opt_ignored) {
  return '' + ((opt_data.step.title) ? '<h2>' + soy.$$escapeHtml(opt_data.step.title) + '</h2>' : '') + ((opt_data.step.content) ? soy.$$filterNoAutoescape(opt_data.step.content) : '') + aui.form.form({action: '', content: '' + ((opt_data.step.action && opt_data.step.action.text) ? aui.buttons.button(soy.$$augmentMap(opt_data.step.action, {extraClasses: aui.renderExtraClasses(opt_data.step.action) + ' feature-discovery-action', extraAttributes: aui.renderExtraAttributes(opt_data.step.action) + ' type="button"'})) : '') + ((opt_data.paging && opt_data.paging.hasNext) ? aui.buttons.button({text: 'Next', type: opt_data.step.action && opt_data.step.action.text ? 'link' : null, extraClasses: 'feature-discovery-next', extraAttributes: {type: 'button'}}) : '') + aui.buttons.button(soy.$$augmentMap(opt_data.step.close, {text: opt_data.step.close && opt_data.step.close.text ? opt_data.step.close.text : 'Close', type: opt_data.step.action && opt_data.step.action.text || opt_data.paging && opt_data.paging.hasNext ? 'link' : null, extraClasses: aui.renderExtraClasses(opt_data.step.close) + ' feature-discovery-close', extraAttributes: aui.renderExtraAttributes(opt_data.step.close) + ' type="button"'})) + ((opt_data.step.moreInfo) ? aui.buttons.button(soy.$$augmentMap(opt_data.step.moreInfo, {text: opt_data.step.moreInfo.text ? opt_data.step.moreInfo.text : 'Learn more', type: 'link'})) : '') + ((opt_data.paging && opt_data.paging.numSteps > 1) ? '<span class="multi-step-trigger">' + soy.$$escapeHtml(AJS.format('{0}/{1}',opt_data.paging.stepIndex + 1,opt_data.paging.numSteps)) + '</span>' : '')});
};
if (goog.DEBUG) {
  chaperone.featureDiscovery.content.soyTemplateName = 'chaperone.featureDiscovery.content';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:chaperone-feature-discovery', location = '/static/lib/chaperone-AMD.js' */
define("chaperone",function(){return Chaperone});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-options', location = '/static/bitbucket/internal/feature/file-content/diff-view-options.js' */
define("bitbucket/internal/feature/file-content/diff-view-options","module exports jquery lodash bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(l,d,m,n,p,q){function a(){}Object.defineProperty(d,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(m),f=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q),k=f.default.once(function(){return g.default.buildKey(["diff-view","options"],
"user")});h.default.addLocalEventMixin(a.prototype);a.prototype.getOptions=f.default.memoize(function(){return f.default.extend({},this.defaults,g.default.getItem(k()))});a.prototype.defaults={ignoreWhitespace:!1,showWhitespaceCharacters:!1,hideComments:!1,hideEdiff:!1,diffType:"unified"};a.prototype.triggerUpdate=function(e,a){var b={key:e,value:a};this.trigger("change",b);h.default.trigger("bitbucket.internal.feature.fileContent.optionsChanged",null,b)};a.prototype.set=function(a,c,b){this.getOptions()[a]=
c;g.default.setItem(k(),this.getOptions());!1!==b&&this.triggerUpdate(a,c)};a.prototype.get=function(a){return this.getOptions()[a]};a.prototype.proxy=function(e){var c=this,b=new a;b.getOptions=function(){return r.default.extend({},c.getOptions(),e)};b.set=function(a,b,d){void 0===e[a]&&c.set(a,b,d)};b.destroy=h.default.chainWith(c).on("change",function(a){void 0===e[a.key]&&b.trigger("change",a)}).destroy;return b};d.default=new a;l.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-options-panel', location = '/static/bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel.soy' */
// This file was automatically generated from diff-view-options-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.diffViewOptionsPanel.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.diffViewOptionsPanel == 'undefined') { bitbucket.internal.feature.fileContent.diffViewOptionsPanel = {}; }


bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = bitbucket.internal.buttons.button({id: 'diff-options-dropdown-trigger', buttonText: '', extraClasses: 'aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'data-container=".diff-view-secondary-panel" aria-owns="diff-options-dropdown" aria-haspopup="true"', iconType: 'aui', iconText: 'Diff options', iconClass: 'aui-icon-small aui-iconfont-more'}) + '<div id="diff-options-dropdown-container">';
  var param14 = '<div id="diff-options-core">' + aui.dropdown2.section({extraClasses: 'binary-options', extraAttributes: {role: 'presentation'}, content: '<div role="group"><ul class="aui-list-truncate" role="presentation"><li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Ignore whitespace', extraAttributes: {'data-key': 'ignoreWhitespace', title: 'Ignore whitespace for all diffs. (Type \x27Shift + w\x27)'}, extraClasses: 'diff-options-ignore-whitespace'}) + '</li><li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Show whitespace characters', extraAttributes: {'data-key': 'showWhitespaceCharacters', title: 'Show whitespace characters (tab, space, newline)'}, extraClasses: 'diff-options-show-whitespace-characters'}) + '</li>' + ((!!(require('bitbucket/internal/model/page-state').getCurrentUser()) && opt_data.commentMode != 'none') ? '<li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Hide comments', extraAttributes: {'data-key': 'hideComments', title: 'Hide comments for all diffs. (Type \x27Shift + c\x27)'}, extraClasses: 'diff-options-hide-comments'}) + '</li>' : '') + '<li role="presentation">' + aui.dropdown2.menuCheckbox({text: 'Hide e-diff', extraAttributes: {'data-key': 'hideEdiff', title: 'Hide e-diff for all diffs. (Type \x27Shift + e\x27)'}, extraClasses: 'diff-options-hide-ediff'}) + '</li></ul></div>'}) + aui.dropdown2.itemGroup({extraClasses: 'diff-type-options', isTruncated: true, items: [{itemType: 'radio', isChecked: true, text: 'Unified diff', extraAttributes: {'data-key': 'diffType', 'data-value': 'unified', title: 'Show diffs in one continuous column. (Type \x27Shift + d\x27)'}}, {itemType: 'radio', isDisabled: true, text: 'Side-by-side diff', extraAttributes: {'data-key': 'diffType', 'data-value': 'side-by-side', 'data-file-type-compatibility': 'Side-by-side diff is not available for added or deleted files', title: 'Show diffs split into two columns. (Type \x27Shift + d\x27)'}}]}) + '</div>';
  var param51 = '';
  var webItemsDiffViewOptions__soy52 = WebFragments.getWebItems('bitbucket.file-content.diff-view.options',{displayType: opt_data.displayType, fileChange: opt_data.fileChange});
  if (webItemsDiffViewOptions__soy52.length > 0) {
    param51 += '<ul>';
    var itemList56 = webItemsDiffViewOptions__soy52;
    var itemListLen56 = itemList56.length;
    for (var itemIndex56 = 0; itemIndex56 < itemListLen56; itemIndex56++) {
      var itemData56 = itemList56[itemIndex56];
      param51 += '<li>' + bitbucket.internal.widget.webItemDropdownItem(itemData56) + '</li>';
    }
    param51 += '</ul>';
  }
  param14 += aui.dropdown2.section({id: 'diff-options-pluggable', content: param51});
  output += aui.dropdown2.contents({id: 'diff-options-dropdown', extraClasses: 'aui-style-default diff-options-dropdown', content: param14});
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-options-panel', location = '/static/bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel.js' */
define("bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel","module exports aui chaperone jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/shortcuts".split(" "),function(m,b,a,h,n,p,q,r,t){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,e){function f(c){"false"===a.find("#diff-options-dropdown").attr("aria-hidden")&&a.find(u).trigger("aui-button-invoke")}function b(c){f();e.set(c,!e.get(c))}
var d=[];d.push(g.default.bind("requestIgnoreWhitespace",b.bind(null,"ignoreWhitespace")));d.push(g.default.bind("requestHideComments",b.bind(null,"hideComments")));d.push(g.default.bind("requestHideEdiff",b.bind(null,"hideEdiff")));d.push(g.default.bind("changeDiffTypeRequested",function(){f();e.set("diffType","unified"===e.get("diffType")?"side-by-side":"unified")}));d.push(k.default.chainWith(a).on("aui-dropdown2-item-check aui-dropdown2-item-uncheck","#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio",
function(c){f();var a=(0,l.default)(this),b=a.attr("data-key"),d=a.attr("data-value");c="aui-dropdown2-item-check"===c.type;!c&&a.hasClass("aui-dropdown2-radio")||e.set(b,d||c)}).on("aui-dropdown2-show","#diff-options-dropdown",function(a){(0,l.default)(this).find("#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio").each(function(){var a=(0,l.default)(this),b=a.attr("data-key"),c=a.attr("data-value"),c=(b=e.get(b))&&(b===c||!0===b);a.toggleClass("aui-dropdown2-checked checked",
c).attr("aria-checked",c)});d.push(k.default.chain().on("window.scroll.throttled",f).destroy)}).on("aui-dropdown2-hide","#diff-options-dropdown",function(a){k.default.off("window.scroll.throttled",f)}).destroy);return{destroy:v.default.partial(w.default.applyAll,d)}};a=babelHelpers.interopRequireDefault(a);h=babelHelpers.interopRequireDefault(h);var l=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),k=babelHelpers.interopRequireDefault(q),w=babelHelpers.interopRequireDefault(r),
g=babelHelpers.interopRequireDefault(t),u="#diff-options-dropdown-trigger";h.default.registerFeature("side-by-side-diff-discovery",[{id:"side-by-side-diff-discovery",selector:".diff-view-options",title:"Diff view options",content:a.default.escapeHtml("Check out other ways to view code diffs in this menu"),width:330,alignment:"bottom right",once:!0}]);m.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:require-amd-context', location = '/static/bitbucket/internal/util/require-amd-context.js' */
define("bitbucket/internal/util/require-amd-context",["module","exports","jquery"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b){return WRM.require("wrc!"+a).pipe(function(){var a=d.default.Deferred();require(b,function(){a.resolve.apply(a,arguments)});return a.promise()})};var d=babelHelpers.interopRequireDefault(c);b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:binary-view', location = '/static/bitbucket/internal/feature/file-content/binary-view/binary-view.soy' */
// This file was automatically generated from binary-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.binaryView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.binaryView == 'undefined') { bitbucket.internal.feature.fileContent.binaryView = {}; }


bitbucket.internal.feature.fileContent.binaryView.container = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="binary-container">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.container.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.container';
}


bitbucket.internal.feature.fileContent.binaryView.cell = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="' + soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses + ' ' : '') + 'binary">' + ((opt_data.titleText) ? '<h5>' + soy.$$escapeHtml(opt_data.titleText) + '</h5>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.cell.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.cell';
}


bitbucket.internal.feature.fileContent.binaryView.old = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.cell({extraClasses: 'since-revision', titleText: 'Old', content: opt_data.content});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.old.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.old';
}


bitbucket.internal.feature.fileContent.binaryView.new = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.cell({extraClasses: 'until-revision', titleText: 'New', content: opt_data.content});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.new.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.new';
}


bitbucket.internal.feature.fileContent.binaryView.image = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.src) + '"' + ((opt_data.extraClasses) ? 'class="' + aui.renderExtraClasses(opt_data) + '"' : '') + ((opt_data.extraAttributes) ? ' ' + aui.renderExtraAttributes(opt_data) : '') + '/>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.image.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.image';
}


bitbucket.internal.feature.fileContent.binaryView.unrenderable = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="unrenderable-file' + ((opt_data.extraClasses) ? ' ' + aui.renderExtraClasses(opt_data) : '') + '"><div class="download-image"></div><h3>' + ((opt_data.title) ? soy.$$escapeHtml(opt_data.title) : soy.$$escapeHtml('Download to view this file')) + '</h3>' + ((opt_data.descriptionContent) ? '<div class="description">' + soy.$$filterNoAutoescape(opt_data.descriptionContent) + '</div>' : '') + ((opt_data.downloadUrl) ? bitbucket.internal.buttons.button({isPrimary: true, extraClasses: 'download-file-button', href: opt_data.downloadUrl, buttonText: 'Download file'}) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.binaryView.unrenderable.soyTemplateName = 'bitbucket.internal.feature.fileContent.binaryView.unrenderable';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:binary-view', location = '/static/bitbucket/internal/feature/file-content/binary-view/binary-view.js' */
define("bitbucket/internal/feature/file-content/binary-view/binary-view","module exports aui jquery lodash bitbucket/util/navbuilder".split(" "),function(e,c,f,g,h,k){function l(b){return{$elem:(0,d.default)(bitbucket.internal.feature.fileContent.binaryView.unrenderable({downloadUrl:b,descriptionContent:"This file can\u0027t be viewed in your browser."})),type:"link"}}function a(b,a){return{$elem:(0,d.default)(bitbucket.internal.feature.fileContent.binaryView.image({src:b,
extraAttributes:{"data-ext":a.extension.toLowerCase()}})),type:"image"}}Object.defineProperty(c,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(f),d=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),q={png:a,jpg:a,jpeg:a,bmp:a,ico:a,gif:a,svg:a},r=["svg"];c.default={getRenderedBinary:function(b,a){var c=b.extension&&b.extension.toLowerCase(),d;d=p.default.currentRepo().raw().path(b.components).at(a).build();return(q[c]||
l)(d,b)},treatTextAsBinary:function(a){return a&&0<=n.default.indexOf(r,a)}};e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:focus-message', location = '/static/bitbucket/internal/widget/focus-message/focus-message.soy' */
// This file was automatically generated from focus-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.focusMessage.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.focusMessage == 'undefined') { bitbucket.internal.widget.focusMessage = {}; }


bitbucket.internal.widget.focusMessage.message = function(opt_data, opt_ignored) {
  return '<div class="focus-message' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.iconClass) ? '<div class="focus-message-icon aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + soy.$$escapeHtml(opt_data.accessibilityText ? opt_data.accessibilityText : '') + '</div>' : '') + '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' + ((opt_data.text) ? '<p>' + soy.$$escapeHtml(opt_data.text) + '</p>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.focusMessage.message.soyTemplateName = 'bitbucket.internal.widget.focusMessage.message';
}


bitbucket.internal.widget.focusMessage.error = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.focusMessage.message({title: opt_data.title, text: opt_data.text, content: opt_data.content, extraClasses: opt_data.extraClasses, iconClass: 'icon-skull'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.focusMessage.error.soyTemplateName = 'bitbucket.internal.widget.focusMessage.error';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:content-message', location = '/static/bitbucket/internal/feature/file-content/content-message/content-message.soy' */
// This file was automatically generated from content-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.contentMessage.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.contentMessage == 'undefined') { bitbucket.internal.feature.fileContent.contentMessage = {}; }


bitbucket.internal.feature.fileContent.contentMessage.emptyFile = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.focusMessage.message({extraClasses: 'content-view source-view empty-file', iconClass: 'icon-empty-file', accessibilityText: 'Empty file', title: 'This file is empty'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.emptyFile.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.emptyFile';
}


bitbucket.internal.feature.fileContent.contentMessage.error = function(opt_data, opt_ignored) {
  return '<div class="content-message-container">' + aui.message.warning({extraClasses: 'content-message', content: '' + soy.$$escapeHtml(opt_data.message)}) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.error.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.error';
}


bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="content-message-container">' + aui.message.warning({extraClasses: 'content-message', content: '' + ((opt_data.filePath && opt_data.revisionId) ? soy.$$escapeHtml('The diff for this file is too large to render. You can still retrieve it manually with the following Git command.') + '<p class="scm-command">' + ((opt_data.parentRevisionId) ? 'git diff -C -M ' + soy.$$escapeHtml(opt_data.parentRevisionId) + ' ' + soy.$$escapeHtml(opt_data.revisionId) + ' -- "' + soy.$$escapeHtml(opt_data.filePath) + '"' : 'git log -p ' + soy.$$escapeHtml(opt_data.revisionId) + ' -- "' + soy.$$escapeHtml(opt_data.filePath) + '"') + '</p>' : '<p>' + soy.$$escapeHtml('The diff for this file is too large to render') + '</p>' + ((opt_data.sideBySideDiffEnabled) ? '<p>' + soy.$$escapeHtml('It might be possible to view this diff using unified diff. You can switch to unified diff via the options menu.') + '</p>' : ''))}) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff';
}


bitbucket.internal.feature.fileContent.contentMessage.emptyDiff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param54 = '';
  switch (opt_data.fileChangeType) {
    case 'ADD':
      param54 += soy.$$filterNoAutoescape('The added file is empty');
      break;
    case 'DELETE':
      param54 += soy.$$filterNoAutoescape('The removed file is empty');
      break;
    default:
      param54 += soy.$$filterNoAutoescape('The contents for this file have not changed');
  }
  var output = '' + bitbucket.internal.widget.focusMessage.message({extraClasses: 'content-view diff-view empty-file', iconClass: 'icon-empty-file', accessibilityText: 'No diff', title: param54, content: '' + ((opt_data.whitespace == 'IGNORE_ALL' && opt_data.fileChangeType == 'MODIFY') ? soy.$$escapeHtml('Or at least there are no visible changes. You may see more by disabling \x27Ignore whitespace\x27') : '')});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.emptyDiff.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.emptyDiff';
}


bitbucket.internal.feature.fileContent.contentMessage.conflict = function(opt_data, opt_ignored) {
  var output = '<div class="diff-conflict-message-container">';
  var param73 = '';
  if (opt_data.messageContent) {
    param73 += soy.$$filterNoAutoescape(opt_data.messageContent);
  } else {
    switch (opt_data.nodeType) {
      case 'SUBMODULE':
        param73 += soy.$$escapeHtml('This submodule is in a conflicted state. You will need to resolve the conflict manually before you can merge this pull request.');
        break;
      default:
        param73 += soy.$$escapeHtml('This file is in a conflicted state. You will need to resolve the conflict manually before you can merge this pull request.');
    }
  }
  output += aui.message.warning({titleContent: opt_data.titleContent, content: param73});
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.contentMessage.conflict.soyTemplateName = 'bitbucket.internal.feature.fileContent.contentMessage.conflict';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:content-message', location = '/static/bitbucket/internal/feature/file-content/content-message/content-message.js' */
define("bitbucket/internal/feature/file-content/content-message/content-message",["module","exports","aui","lodash","bitbucket/internal/util/events"],function(h,d,k,l,m){Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(l),g=babelHelpers.interopRequireDefault(m);d.default={renderConflict:function(c,b){c.append(bitbucket.internal.feature.fileContent.contentMessage.conflict({titleContent:f.default.escapeHtml(b.getConflict().getConflictMessage()),
nodeType:b.getNodeType()}))},renderEmptyDiff:function(c,b,a){c.append(bitbucket.internal.feature.fileContent.contentMessage.emptyDiff({fileChangeType:a.getType(),whitespace:b.whitespace}));var e=a.getCommitRange().getSinceRevision();a=a.getCommitRange().getUntilRevision();g.default.trigger("bitbucket.internal.feature.fileContent.emptyDiffShown",{containerEl:c.get(0),sourcePath:b.source,sinceRevision:e&&e.toJSON(),destinationPath:b.destination,untilRevision:a&&a.toJSON()})},renderEmptyFile:function(c,
b,a){c.append(bitbucket.internal.feature.fileContent.contentMessage.emptyFile());a=a.commitRange.untilRevision;g.default.trigger("bitbucket.internal.feature.fileContent.emptyFileShown",{containerEl:c.get(0),path:b.path,commit:a})},renderErrors:function(c,b){var a=b&&b.errors&&b.errors.length?b.errors:[{message:"An unknown error has occurred"}];c.append(n.default.map(a,bitbucket.internal.feature.fileContent.contentMessage.error).join(""))},renderTooLargeDiff:function(c,
b,a,e){a=a.getCommitRange();var d=a.getPullRequest();c.append(bitbucket.internal.feature.fileContent.contentMessage.tooLargeDiff({filePath:b.destination?b.destination.toString:b.source.toString,revisionId:!d&&a.getUntilRevision()&&a.getUntilRevision().getId(),parentRevisionId:!d&&a.getSinceRevision()&&a.getSinceRevision().getId(),sideBySideDiffEnabled:e}))}};h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-diff', location = '/static/bitbucket/internal/feature/file-content/request-diff.js' */
define("bitbucket/internal/feature/file-content/request-diff","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/model/path bitbucket/internal/util/ajax bitbucket/internal/util/deprecation".split(" "),function(q,f,r,t,u,v,w,x,y){function z(c,a){if(h.default.isArray(a.diffs)&&a.diffs.length){var b=l.default.find(a.diffs,function(a){return a.destination?a.destination.toString===(new m.default(c.path)).toString():c.srcPath?
a.source.toString===(new m.default(c.srcPath)).toString():!1})||a.diffs[0];a=l.default.assign({diff:b},a,b);Object.keys(b).forEach(function(b){n.default.prop(a,b,b,"diff."+b,"4.5","5.0")});delete a.diffs}return a}function A(c){var a=B.default.rest().project(c.repository.project.key).repo(c.repository.slug),b=c.commitRange.pullRequest;return(b?a.pullRequest(b.id):a.commit(c.commitRange)).diff(c)}Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(r),l=babelHelpers.interopRequireDefault(t),
B=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),m=babelHelpers.interopRequireDefault(w),p=babelHelpers.interopRequireDefault(x),n=babelHelpers.interopRequireDefault(y),g={};f.default=function(c,a){var b=c.toJSON?c.toJSON():c;if(b.diff){var d=h.default.extend({lineComments:a.lineComments||[],fileComments:a.fileComments||[]},b.diff),f=h.default.extend({diff:d,fromHash:b.diff.properties&&b.diff.properties.fromHash,toHash:b.diff.properties&&b.diff.properties.toHash},d);
Object.keys(d).forEach(function(a){n.default.prop(f,a,a,"diff."+a,"4.5","5.0")});return h.default.Deferred().resolve(f)}a=a||{};var d=a.hasOwnProperty("ignoreWhitespace")?a.ignoreWhitespace:C.default.get("ignoreWhitespace"),k=isNaN(Number(a.contextLines))?-1:Math.floor(a.contextLines),e=(a.diffUrlBuilder||A)(b).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:a.avatarSize||"medium"}),markup:!0,whitespace:d?"ignore-all":"",contextLines:k,withComments:a.withComments,autoSrcPath:a.autoSrcPath}).build();
if(g.hasOwnProperty(e)&&"rejected"!==g[e].state())return g[e];d=p.default.rest({url:e,statusCode:a.statusCode||p.default.ignore404WithinRepository()});k=d.then(function(a){if(a.errors&&a.errors.length)return h.default.Deferred().rejectWith(this,[this,null,null,a]);a=z(b,a);setTimeout(function(){delete g[e]});return a});g[e]=k.promise(d);return g[e]};q.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:object-util', location = '/static/bitbucket/internal/util/object.js' */
define("bitbucket/internal/util/object",["module","exports","lodash"],function(h,b,k){function g(c){return c}function l(c){return"object"===("undefined"===typeof c?"undefined":babelHelpers.typeof(c))?JSON.stringify(c):String(c)}Object.defineProperty(b,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(k),n=Object.prototype.hasOwnProperty;b.default={uniqueFromArray:function(c,f,a){var e,d,p=f.length,b=a?l:g;return m.default.uniq(c,function(a){e=0;for(d="";e<p;e++)d+=b(a[f[e]]);return d})},
freeze:Object.freeze||g,deepFreeze:Object.freeze?function f(a,e){if(null!==a&&"object"===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))){var d=Object.isFrozen(a);d||Object.freeze(a);if(!d||e)for(var b in a)n.call(a,b)&&f(a[b])}return a}:g,inherits:function(b,a){b.prototype=Object.create(a.prototype);Object.defineProperty(b.prototype,"constructor",{value:b,configurable:!0,writable:!0,enumerable:!1})}};h.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web-api:file-handlers', location = '/static/bitbucket/internal/util/handler-registry.js' */
define("bitbucket/internal/util/handler-registry",["module","exports","jquery","lodash"],function(n,c,p,q){function b(){this.handlers=[]}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(p),e=babelHelpers.interopRequireDefault(q);b.prototype.register=function(a){if(!e.default.isFunction(a.handle))throw Error("Handler must have a handle function");a.weight="number"!==typeof a.weight||isNaN(a.weight)?1E3:a.weight;this.handlers.push(a);this.handlers=e.default.sortBy(this.handlers,
function(a){return a.weight});var k=this;return function(){var b=k.handlers.indexOf(a);0<=b&&k.handlers.splice(b,1)}};b.prototype._handle=function(a){function b(a){if(h)return f.reject(Error("Handling aborted."));if(a<l.length)return d=l[a].handle(e)||g.default.Deferred().reject(),g.default.when(d).done(function(a){f.resolve(a||{},m)}).fail(function(c){c&&m.push(c);b(a+1)});f.reject(Error("No registered handlers were able to handle file"))}var c=a.useDefaultHandler,e=babelHelpers.objectWithoutProperties(a,
["useDefaultHandler"]),f=g.default.Deferred(),h,d,l=c?this.handlers.filter(function(a){return a.builtIn}):this.handlers,m=[];b(0);return f.promise({abort:function(){!h&&d&&d.abort&&d.abort();h=!0}})};b.prototype._clear=function(){this.handlers=[]};c.default=b;n.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web-api:file-handlers', location = '/static/bitbucket/feature/files/file-handlers.js' */
define("bitbucket/feature/files/file-handlers",["module","exports","bitbucket/internal/util/handler-registry","bitbucket/internal/util/object"],function(d,b,a,c){Object.defineProperty(b,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);c=babelHelpers.interopRequireDefault(c);a=new a.default;a.builtInHandlers={ERROR:"error",DIRECTORY:"directory",SOURCE_TEXT:"source-text",SOURCE_EMPTY:"source-empty",SOURCE_IMAGE:"source-image",SOURCE_BINARY:"source-binary",DIFF_TEXT_SIDE_BY_SIDE:"diff-text-side-by-side",
DIFF_TEXT_UNIFIED:"diff-text-unified",DIFF_EMPTY:"diff-empty",DIFF_TOO_LARGE:"diff-too-large",DIFF_IMAGE:"diff-image",DIFF_BINARY:"diff-binary"};c.default.freeze(a.builtInHandlers);b.default=a;d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:resemblejs', location = '/static/bower/resemblejs/resemble.js' */
(function(v){function p(k,b){return(Math.abs(k.r-b.r)+Math.abs(k.g-b.g)+Math.abs(k.b-b.b))/3}var A=1,c={red:255,green:0,blue:255,alpha:255},w={flat:function(k,b){return{r:c.red,g:c.green,b:c.blue,a:c.alpha}},movement:function(k,b){return{r:(c.red/255*b.r+c.red)/2,g:(c.green/255*b.g+c.green)/2,b:(c.blue/255*b.b+c.blue)/2,a:b.a}},flatDifferenceIntensity:function(k,b){return{r:c.red,g:c.green,b:c.blue,a:p(k,b)}},movementDifferenceIntensity:function(k,b){var t=p(k,b)/255*.8;return{r:c.red/255*(1-t)*b.r+
t*c.red,g:c.green/255*(1-t)*b.g+t*c.green,b:c.blue/255*(1-t)*b.b+t*c.blue,a:b.a}}},I=w.flat,B=1200,N=/^https?:\/\//,O=new RegExp("^https?://"+document.domain);v.resemble=function(k){function b(){var a=x.length,d;for(d=0;d<a;d++)if("function"===typeof x[d])x[d](l)}function c(a,d,e){var f,m;for(f=0;f<a;f++)for(m=0;m<d;m++)e(f,m)}function w(a,d,e){var f=0,m=0,k=0,E=0,g=0;c(e,d,function(e,b){var c=4*(e*d+b),h=a[c],C=a[c+1],c=a[c+2];f++;m+=h/255*100;k+=C/255*100;E+=c/255*100;g+=(.3*h+.59*C+.11*c)/255*
100});l.red=Math.floor(m/f);l.green=Math.floor(k/f);l.blue=Math.floor(E/f);l.brightness=Math.floor(g/f);b()}function F(a,d){var e,f=new Image;N.test(a)&&!O.test(a)&&f.setAttribute("crossorigin","anonymous");f.onload=function(){var a=document.createElement("canvas"),e=f.width,c=f.height;a.width=e;a.height=c;a.getContext("2d").drawImage(f,0,0,e,c);a=a.getContext("2d").getImageData(0,0,e,c);g.push(a);d(a,e,c)};if("string"===typeof a){if(f.src=a,f.complete)f.onload()}else"undefined"!==typeof a.data&&
"number"===typeof a.width&&"number"===typeof a.height?(g.push(a),d(a,a.width,a.height)):(e=new FileReader,e.onload=function(a){f.src=a.target.result},e.readAsDataURL(a))}function u(a,d,e){var f=Math.abs(a-d);return"undefined"===typeof a||"undefined"===typeof d?!1:a===d?!0:f<h[e]?!0:!1}function v(a,d){var e=u(a.a,d.a,"alpha");return u(a.brightness,d.brightness,"minBrightness")&&e}function p(a,d,e){a/=255;d/=255;e/=255;var f=Math.max(a,d,e),m=Math.min(a,d,e),c;if(f==m)c=0;else{m=f-m;switch(f){case a:c=
(d-e)/m+(d<e?6:0);break;case d:c=(e-a)/m+2;break;case e:c=(a-d)/m+4}c/=6}return c}function J(a,d,e,f,c,k){var b,g,l,n=0,q=0,r=0;a.h=p(a.r,a.g,a.b);for(g=-1;1>=g;g++)for(l=-1;1>=l;l++)if(0!==g||0!==l)if(b=4*((f+l)*k+(c+g)),b=G(d,b,e),null!==b){y(b);b.h=p(b.r,b.g,b.b);Math.abs(a.brightness-b.brightness)>h.maxBrightness&&n++;var C=a.g===b.g,P=a.b===b.b;a.r===b.r&&C&&P&&r++;.3<Math.abs(b.h-a.h)&&q++;if(1<q||1<n)return!0}return 2>r?!0:!1}function H(a,d,e,f){e=I(e,f);a[d]=e.r;a[d+1]=e.g;a[d+2]=e.b;a[d+
3]=e.a}function K(a,d,e){a[d]=e.brightness;a[d+1]=e.brightness;a[d+2]=e.brightness;a[d+3]=e.a*A}function G(a,d,e){var f,c;e=a[d];return"undefined"!==typeof e?(f=a[d+1],c=a[d+2],a=a[d+3],a={r:e,g:f,b:c,a:a}):null}function y(a){a.brightness=.3*a.r+.59*a.g+.11*a.b}function Q(a,d,e,f){var b=document.createElement("canvas"),g=a.data,k=d.data;b.width=e;b.height=f;var h=b.getContext("2d"),p=h.createImageData(e,f),n=p.data,q=0;a=Date.now();var r;B&&z&&(e>B||f>B)&&(r=6);c(f,e,function(a,f){if(!r||0!==a%r&&
0!==f%r){var d=4*(a*e+f),b=G(g,d,1),c=G(k,d,2);if(null!==b&&null!==c)if(D)y(b),y(c),v(b,c)?K(n,d,c):(H(n,d,b,c),q++);else{var h=u(b.r,c.r,"red"),m=u(b.g,c.g,"green"),l=u(b.b,c.b,"blue"),p=u(b.a,c.a,"alpha");h&&m&&l&&p?(n[d]=b.r,n[d+1]=b.g,n[d+2]=b.b,n[d+3]=b.a*A):z&&(y(b),y(c),J(b,g,1,a,f,e)||J(c,k,2,a,f,e))?v(b,c)?K(n,d,c):(H(n,d,b,c),q++):(H(n,d,b,c),q++)}}});l.misMatchPercentage=(q/(f*e)*100).toFixed(2);l.analysisTime=Date.now()-a;l.getImageDataUrl=function(a){var d=0;a&&(h.font="12px sans-serif",
d=h.measureText(a).width+4,d>b.width&&(b.width=d),b.height+=22,h.fillStyle="#666",h.fillRect(0,0,b.width,18),h.fillStyle="#fff",h.fillRect(0,18,b.width,4),h.fillStyle="#fff",h.textBaseline="top",h.font="12px sans-serif",h.fillText(a,2,1),d=22);h.putImageData(p,0,d);return b.toDataURL("image/png")}}function L(a,d,b){var c;return a.height<b||a.width<d?(c=document.createElement("canvas"),c.width=d,c.height=b,c=c.getContext("2d"),c.putImageData(a,0,0),c.getImageData(0,0,d,b)):a}function R(a,d){function c(){var a,
d;2===g.length&&(a=g[0].width>g[1].width?g[0].width:g[1].width,d=g[0].height>g[1].height?g[0].height:g[1].height,l.isSameDimensions=g[0].width===g[1].width&&g[0].height===g[1].height?!0:!1,l.dimensionDifference={width:g[0].width-g[1].width,height:g[0].height-g[1].height},Q(L(g[0],a,d),L(g[1],a,d),a,d),b())}g=[];F(a,c);F(d,c)}function M(a){var d,b="function"===typeof a;b||(d=a);var c={ignoreNothing:function(){h.red=16;h.green=16;h.blue=16;h.alpha=16;h.minBrightness=16;h.maxBrightness=240;D=z=!1;b&&
a();return c},ignoreAntialiasing:function(){h.red=32;h.green=32;h.blue=32;h.alpha=32;h.minBrightness=64;h.maxBrightness=96;z=!0;D=!1;b&&a();return c},ignoreColors:function(){h.alpha=16;h.minBrightness=16;h.maxBrightness=240;z=!1;D=!0;b&&a();return c},repaint:function(){b&&a();return c},onComplete:function(a){x.push(a);a=function(){R(k,d)};a();return M(a)}};return c}var l={},g=[],x=[],h={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},z=!1,D=!1;return{onComplete:function(a){x.push(a);
F(k,function(a,b,c){w(a.data,b,c)})},compareTo:function(a){return M(a)}}};v.resemble.outputSettings=function(k){var b;if(k.errorColor)for(b in k.errorColor)c[b]=void 0===k.errorColor[b]?c[b]:k.errorColor[b];k.errorType&&w[k.errorType]&&(I=w[k.errorType]);A=isNaN(Number(k.transparency))?A:k.transparency;void 0!==k.largeImageThreshold&&(B=k.largeImageThreshold);return this}})(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:resemblejs', location = '/static/lib/resemblejs/resemble-AMD.js' */
define("resemble",function(){return resemble});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-modes.js' */
define("bitbucket/internal/bbui/image-differ/image-differ-modes",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={TWO_UP:"two-up",BLEND:"blend",SPLIT:"split",PIXEL_DIFF:"pixeldiff"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-toolbar.soy' */
// This file was automatically generated from image-differ-toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.imageDiffer.toolbar.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.imageDiffer == 'undefined') { bitbucket.internal.component.imageDiffer = {}; }
if (typeof bitbucket.internal.component.imageDiffer.toolbar == 'undefined') { bitbucket.internal.component.imageDiffer.toolbar = {}; }


bitbucket.internal.component.imageDiffer.toolbar.main = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({content: '' + aui.toolbar2.item({item: 'primary', extraClasses: 'image-differ-toggle', content: '' + bitbucket.internal.component.imageDiffer.toolbar.toggleButtons(null)}), extraClasses: 'image-differ-toolbar'});
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.toolbar.main.soyTemplateName = 'bitbucket.internal.component.imageDiffer.toolbar.main';
}


bitbucket.internal.component.imageDiffer.toolbar.toggleButtons = function(opt_data, opt_ignored) {
  return '' + aui.buttons.buttons({content: '' + aui.buttons.button({extraClasses: 'image-differ-two-up', isPressed: true, text: 'Two-up', extraAttributes: {title: 'Compare images alongside each other'}}) + aui.buttons.button({extraClasses: 'image-differ-blend', isDisabled: true, text: 'Blend', extraAttributes: {title: 'Blend mode image diff is not available because images are not of the same dimension', 'data-enabled-title': 'Compare the image changes by fading in the differences'}}) + aui.buttons.button({extraClasses: 'image-differ-split', isDisabled: true, text: 'Split', extraAttributes: {title: 'Split mode image diff is not available because images are not of the same dimension', 'data-enabled-title': 'Compare the image changes by moving your mouse cursor left or right over the image'}}) + aui.buttons.button({extraClasses: 'image-differ-pixeldiff', isDisabled: true, text: 'Pixel diff', extraAttributes: {title: 'Pixel diff mode image diff is not available because images are not of the same dimension', 'data-enabled-title': 'Compare the image changes by seeing which pixels have changed'}})});
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.toolbar.toggleButtons.soyTemplateName = 'bitbucket.internal.component.imageDiffer.toolbar.toggleButtons';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-mode.js' */
define("bitbucket/internal/bbui/image-differ/image-differ-mode",["module","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(b,c){babelHelpers.classCallCheck(this,a);b&&(this.setup=b);c&&(this.destroy=c)}babelHelpers.createClass(a,[{key:"setup",value:function(){}},{key:"destroy",value:function(){}}]);return a}();a.default=e;d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ-toolbar.js' */
define("bitbucket/internal/bbui/image-differ/image-differ-toolbar","module exports jquery lodash ../widget/widget ./image-differ-modes".split(" "),function(n,c,b,p,q,g){Object.defineProperty(c,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(b),r=babelHelpers.interopRequireDefault(p);b=babelHelpers.interopRequireDefault(q);var h=babelHelpers.interopRequireDefault(g);g=function(c){function d(c){babelHelpers.classCallCheck(this,d);var e=babelHelpers.possibleConstructorReturn(this,(d.__proto__||
Object.getPrototypeOf(d)).call(this));e._$toolbar=(0,k.default)(c);e._$toggle=e._$toolbar.find(".image-differ-toggle");return e}babelHelpers.inherits(d,c);babelHelpers.createClass(d,[{key:"init",value:function(c){var e=this,d={};r.default.values(h.default).forEach(function(a){var b=-1!==c.indexOf(a),f=e._$toggle.find(".image-differ-"+a);f.attr("aria-disabled",!b).prop("disabled",!b);b&&(f.attr("data-enabled-title")&&f.attr("data-disabled-title",f.attr("title")),f.attr("data-mode",a),f.attr("title",
f.attr("data-enabled-title")),d[a]=f)});if(-1!==c.indexOf(h.default.BLEND)){var b=function(){var a=document.createElement("input");a.setAttribute("type","range");return"range"===a.type}(),g=d[h.default.BLEND];g.attr("aria-disabled",!b).prop("disabled",!b);b||g.attr("title",g.attr("data-disabled-title"))}var l=function(a){var b=e._mode;e._mode=a;e.trigger("modeChanged",{newMode:a,oldMode:b})},m=this._$toggle.find(".aui-button");m.on("click",function(a){a.preventDefault();a=(0,k.default)(a.target);
if("true"!==a.attr("aria-disabled")&&"true"!==a.attr("aria-pressed")){var b=a.attr("data-mode");m.attr("aria-pressed","false");a.attr("aria-pressed","true");l(b)}}).tooltip({gravity:"s"});l(h.default.TWO_UP)}},{key:"getMode",value:function(){return this._mode}},{key:"destroy",value:function(){this._$toolbar&&(this._$toolbar.remove(),this._$toolbar=null);this._$toggle=null}}]);return d}(b.default);c.default=g;n.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ.js' */
define("bitbucket/internal/bbui/image-differ/image-differ",["exports","jquery","./differ","./image-differ-toolbar"],function(a,h,k,l){Object.defineProperty(a,"__esModule",{value:!0});a.Toolbar=a.Differ=a.init=void 0;var d=babelHelpers.interopRequireDefault(h),e=babelHelpers.interopRequireDefault(k),f=babelHelpers.interopRequireDefault(l);a.init=function(a){a=(0,d.default)(a);var c=new f.default((0,d.default)(bitbucket.internal.component.imageDiffer.toolbar.main()).prependTo(a)),b=new e.default(a);
c.on("modeChanged",function(a){return b.setMode(a.newMode)});var g=new d.default.Deferred;b.init().done(function(a){c&&c.init(a);g.resolve({on:b.on.bind(b),enabledModes:a,_differ:b,_toolbar:c,destroy:function(){b.destroy();b=null;c.destroy();c=null}})});return g};a.Differ=e.default;a.Toolbar=f.default});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/differ.js' */
define("bitbucket/internal/bbui/image-differ/differ","module exports jquery lodash resemble ../widget/widget ./image-differ-mode ./image-differ-modes".split(" "),function(t,m,n,u,v,w,p,x){function h(d){var c=(0,e.default)(d);if(c.data("natural-size"))return e.default.Deferred().resolve(c.data("natural-size"));if(d.naturalWidth)return d={width:d.naturalWidth,height:d.naturalHeight},c.data("natural-size",d),e.default.Deferred().resolve(d);var a=new Image,b=e.default.Deferred();d=g.default.once(function(){var d=
{width:a.width,height:a.height};c.data("natural-size",d);b.resolve(d)});a.onload=d;a.src=c.attr("src");a.complete&&d();return b}function k(d,c){var a=d.data("margin_border_padding");null==a&&(a=d.outerWidth(!0)-d.width(),d.data("margin_border_padding",a));return c-a}function q(d){var c=document.createElement("canvas"),a=c.getContext("2d");return h(d).then(function(b){c.height=b.height;c.width=b.width;a.drawImage(d[0],0,0);return a.getImageData(0,0,c.width,c.height)})}Object.defineProperty(m,"__esModule",
{value:!0});var e=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(u),r=babelHelpers.interopRequireDefault(v);n=babelHelpers.interopRequireDefault(w);var l=babelHelpers.interopRequireDefault(p),f=babelHelpers.interopRequireDefault(x);p=function(d){function c(a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));b._$container=(0,e.default)(a);return b}babelHelpers.inherits(c,d);babelHelpers.createClass(c,
[{key:"init",value:function(){var a=this,b=this._$imgs=this._$container.find("img");this._$sinceImg=b.eq(0);this._$untilImg=b.eq(1);this._$untilRevision=this._$untilImg.parent();this._$sinceRevision=this._$sinceImg.parent();this._$revisions=this._$untilRevision.add(this._$sinceRevision);this._$untilRevisionLabel=this._$untilRevision.find("h5");this._$sinceRevisionLabel=this._$sinceRevision.find("h5");this._setupDiffModes();this.setMode(f.default.TWO_UP);var d=e.default.Deferred(),c=[f.default.TWO_UP],
y=g.default.chain(f.default).values().difference(c).value();e.default.when(h(this._$sinceImg),h(this._$untilImg)).done(function(b,e){a.enabledModes=b.width===e.width&&b.height===e.height&&0<b.width?c.concat(y):c;d.resolve(a.enabledModes)}).fail(function(){d.reject()});return d}},{key:"destroy",value:function(){this.modes&&this._mode&&this.modes[this._mode].destroy();this._mode=null}},{key:"setMode",value:function(a){this._mode!==a&&(this._onDiffModeChanged(a,this._mode),this._mode=a)}},{key:"_onDiffModeChanged",
value:function(a,b){this._$container.removeClass(g.default.values(f.default).join(" ")).addClass(a);b&&this.modes[b].destroy();a&&this.modes[a].setup();this.trigger("modeChanged",{newMode:a,oldMode:b})}},{key:"_setupDiffModes",value:function(){var a=this;this.modes={};this.modes[f.default.TWO_UP]=new l.default;this.modes[f.default.BLEND]=new l.default(function(){var b=(0,e.default)(bitbucket.internal.component.imageDiffer.opacitySlider());a._$container.children(".since-revision").before(b);b.on("input change",
'input[type\x3d"range"]',function(b){a._$untilImg.css("opacity",parseFloat((0,e.default)(b.target).val()))})},function(){var b=a._$container.children(".opacity-slider-container");b.off("input change");b.remove();a._$untilImg.css("opacity","")});this.modes[f.default.SPLIT]=new l.default(function(){h(a._$imgs).done(function(b){a._$untilImg.wrap(bitbucket.internal.component.imageDiffer.imageContainer());a._$revisions.wrapAll(bitbucket.internal.component.imageDiffer.splitContainer());a._$untilRevisionImageContainer=
a._$untilImg.parent();a._$splitContainer=a._$container.find(".split-container");var d=void 0,c=function(){var c=a._$untilRevisionImageContainer,e=a._$splitContainer,f=k(a._$container,a._$container.parent().width()),e=k(e,f),e=k(a._$sinceRevision,e),f=k(a._$sinceImg,e),g=Math.min(b.width,f);a._$imgs.width(g);a._$imgs.height(Math.floor(g/b.width*b.height));c.height(a._$imgs.outerHeight(!0));c=g+(e-f);a._$revisions.width(c);a._$untilRevision.css("margin-left",-c);d=a._$sinceImg.outerWidth(!0)};a._onResize=
g.default.debounce(c,200);(0,e.default)(window).on("resize",a._onResize);c();50>b.width?(a._$untilRevisionLabel.css("margin-left","-50px"),a._$sinceRevisionLabel.css("margin-right","-50px")):100>b.width&&(a._$untilRevisionLabel.css("margin-left",-b.width),a._$sinceRevisionLabel.css("margin-right",-b.width));var f=function(b){a._$untilRevisionImageContainer.css("width",Math.min(b.pageX-b.data.offset.left,d))};a._$splitContainer.hover(function(){a._$revisions.on("mousemove",{offset:a._$untilRevision.offset()},
f)},function(){a._$revisions.off("mousemove",f)})})},function(){a._$imgs.css({width:"",height:""});a._$revisions.css("width","");a._$untilRevision.css("margin-left","");a._$untilRevisionLabel.add(a._$sinceRevisionLabel).css({marginLeft:"",marginRight:""});a._$untilImg.unwrap();a._$untilRevisionImageContainer.remove();delete a._$untilRevisionImageContainer;a._$revisions.unwrap();a._$splitContainer.remove();delete a._$splitContainer;a._onResize&&((0,e.default)(window).off("resize",a._onResize),delete a._onResize)});
this.modes[f.default.PIXEL_DIFF]=new l.default(function(){a._$revisions.wrapAll(bitbucket.internal.component.imageDiffer.pixelDiffContainer());a._$pixelDiffContainer=a._$container.find(".pixeldiff-container");if(a._$pixelDiffImg)a._$pixelDiffContainer.append(a._$pixelDiffImg);else{var b=(0,e.default)(bitbucket.internal.component.imageDiffer.spinner());a._$pixelDiffContainer.append(b);b.spin("large");g.default.defer(function(){var c=q(a._$sinceImg),d=q(a._$untilImg);e.default.when(c,d).then(function(a,
b){r.default.outputSettings({errorColor:{red:208,green:68,blue:55},errorType:"flat",transparency:.1});var c=e.default.Deferred();(0,r.default)(a).compareTo(b).onComplete(function(a){return c.resolve(a)});return c}).done(function(b){a._$pixelDiffImg=(0,e.default)(bitbucket.internal.component.imageDiffer.pixelDiffImage({imageSrc:b.getImageDataUrl()}));a._$pixelDiffContainer.append(a._$pixelDiffImg)}).always(function(){b.remove()})})}},function(){a._$pixelDiffImg&&a._$pixelDiffImg.remove();a._$revisions.unwrap();
a._$pixelDiffContainer.remove();delete a._$pixelDiffContainer})}}]);return c}(n.default);m.default=p;t.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:image-differ', location = '/static/bitbucket/internal/bbui/image-differ/image-differ.soy' */
// This file was automatically generated from image-differ.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.imageDiffer.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.imageDiffer == 'undefined') { bitbucket.internal.component.imageDiffer = {}; }


bitbucket.internal.component.imageDiffer.imageContainer = function(opt_data, opt_ignored) {
  return '<div class="image-container" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.imageContainer.soyTemplateName = 'bitbucket.internal.component.imageDiffer.imageContainer';
}


bitbucket.internal.component.imageDiffer.splitContainer = function(opt_data, opt_ignored) {
  return '<div class="split-container" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.splitContainer.soyTemplateName = 'bitbucket.internal.component.imageDiffer.splitContainer';
}


bitbucket.internal.component.imageDiffer.pixelDiffContainer = function(opt_data, opt_ignored) {
  return '<div class="pixeldiff-container" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.pixelDiffContainer.soyTemplateName = 'bitbucket.internal.component.imageDiffer.pixelDiffContainer';
}


bitbucket.internal.component.imageDiffer.pixelDiffImage = function(opt_data, opt_ignored) {
  return '<div class="pixeldiff binary"><img src="' + soy.$$escapeHtml(opt_data.imageSrc) + '" /></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.pixelDiffImage.soyTemplateName = 'bitbucket.internal.component.imageDiffer.pixelDiffImage';
}


bitbucket.internal.component.imageDiffer.opacitySlider = function(opt_data, opt_ignored) {
  return '<div class="opacity-slider-container"><input type="range" min="0" max="1" step="0.01" value="1" /></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.opacitySlider.soyTemplateName = 'bitbucket.internal.component.imageDiffer.opacitySlider';
}


bitbucket.internal.component.imageDiffer.spinner = function(opt_data, opt_ignored) {
  return '<div class="spinner" />';
};
if (goog.DEBUG) {
  bitbucket.internal.component.imageDiffer.spinner.soyTemplateName = 'bitbucket.internal.component.imageDiffer.spinner';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:binary-diff-view', location = '/static/bitbucket/internal/feature/file-content/binary-diff-view/binary-diff-view.js' */
define("bitbucket/internal/feature/file-content/binary-diff-view/binary-diff-view","module exports jquery bitbucket/internal/bbui/image-differ/image-differ bitbucket/internal/feature/file-content/binary-view/binary-view bitbucket/internal/model/file-change bitbucket/internal/util/events".split(" "),function(k,d,l,m,n,p,q){function c(a,b){this._init(a,b)}function h(a,b){if(a&&b)return r.default.getRenderedBinary(a,b.getId())}Object.defineProperty(d,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(l),
r=babelHelpers.interopRequireDefault(n),t=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q);c.prototype.isDiffingImages=function(){return this._isDiffingImages};c.prototype._init=function(a,b){var e=(new t.default(b.fileChange)).getCommitRange(),f=e.getUntilRevision(),e=e.getSinceRevision();this._$container=(0,g.default)(bitbucket.internal.feature.fileContent.binaryView.container()).appendTo(b.$container);var c=h(a.source,e),d=h(a.destination,f);this._renderBinaryDiff(c,
d).done(function(){b.$container.addClass("fully-loaded")});f={containerEl:this._$container.get(0),sourcePath:a.source,sourceType:c&&c.type,sinceRevision:e&&e.toJSON(),destinationPath:a.destination,destinationType:d&&d.type,untilRevision:f&&f.toJSON()};u.default.trigger("bitbucket.internal.feature.fileContent.binaryDiffShown",null,f)};c.prototype._renderBinaryDiff=function(a,b){var c=this;a&&(0,g.default)(bitbucket.internal.feature.fileContent.binaryView.old({})).append(a.$elem).appendTo(this._$container);
b&&(0,g.default)(bitbucket.internal.feature.fileContent.binaryView.new({})).append(b.$elem).appendTo(this._$container);return(this._isDiffingImages=a&&b&&a.type===b.type&&"image"===a.type)?(0,m.init)(this._$container).done(function(a){c.imageDiff=a}):g.default.Deferred().resolve()};c.prototype.destroy=function(){this.imageDiff&&(this.imageDiff.destroy(),this.imageDiff=null);this._$container&&(this._$container.remove(),this._$container=null)};d.default=c;k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-line-info', location = '/static/bitbucket/internal/feature/file-content/diff-line-info.js' */
define("bitbucket/internal/feature/file-content/diff-line-info",["module","exports","lodash","bitbucket/internal/feature/file-content/diff-view-segment-types"],function(p,m,q,r){function n(d,g,a,e,k,b,f){this.lineType=d;this.lineNumber=g;this.line=a;this.segment=e;this.hunk=k;this.diff=b;this.handles={FROM:null,TO:null,all:[]};this.attributes=f}Object.defineProperty(m,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(q),h=babelHelpers.interopRequireDefault(r),t={ADDED:"destination",
REMOVED:"source",CONTEXT:"source"};n.prototype._setHandle=function(d,g){this.handles[d]=g;this.handles.all.push(g);this.handles.all=c.default.uniq(this.handles.all)};m.default={convertToLineInfos:function(d,g){return c.default.chain(d.hunks).map(function(a){return c.default.map(a.segments,function(e,k){var b;var f=a.segments;b=g.relevantContextLines;var d=f[k-1],f=f[k+1];if(e.type!==h.default.CONTEXT)b=null;else{var c=0,l=e.lines.length;!d||d.type!==h.default.ADDED&&d.type!==h.default.REMOVED||(c=
b);!f||f.type!==h.default.ADDED&&f.type!==h.default.REMOVED||(l-=b);b=l>c?{start:c-1,end:l}:null}return{hunk:a,segment:e,expandedRange:b}})}).flatten().map(function(a){var e=a.segment;return c.default.map(e.lines,function(c,b){return new n(e.type,c[t[e.type]],c,e,a.hunk,d,{expanded:a.expandedRange&&b<a.expandedRange.end&&b>a.expandedRange.start})})}).flatten().value()}};p.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:array-util', location = '/static/bitbucket/internal/util/array.js' */
define("bitbucket/internal/util/array",["module","exports","lodash","bitbucket/internal/util/function"],function(l,d,a,e){function f(a){return function(c){for(var b=0;b<c.length;b++)if(a(c[b],b,c))return b;return-1}}function g(a){return function(c){var b=f(a)(c);return-1===b?[]:c.slice(b)}}function h(a){return function(c){var b=f(a)(c);return-1===b?c:c.slice(0,b)}}Object.defineProperty(d,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);var k=babelHelpers.interopRequireDefault(e);e=
a.default.compose(g,k.default.not);a=a.default.compose(h,k.default.not);d.default={skipWhile:e,takeWhile:a,findIndex:f,skipUntil:g,takeUntil:h};l.exports=d["default"]});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/curl-config.js' */
(function(){if(!window.WRM){window.WRM={}}window.curl={apiContext:WRM,defineContext:WRM}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-0.7.3.js' */
(function(a){var P="0.7.3",u="curl",p="define",G,v,g,d=a.document,l=d&&(d.head||d.getElementsByTagName("head")[0]),V=l&&l.getElementsByTagName("base")[0]||null,i={},N={},c={},A="addEventListener" in a?{}:{loaded:1,complete:1},m={},b=m.toString,y,k={},f={},h=false,O,t=/\?|\.js\b/,e=/^\/|^[^:]+:\/\//,L=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,E=/\/\*[\s\S]*?\*\/|(?:[^\\])\/\/.*?[\n\r]/g,C=/require\s*\(\s*["']([^"']+)["']\s*\)|(?:[^\\]?)(["'])/g,M,x;function Q(){}function D(X,W){return b.call(X).indexOf("[object "+W)==0}function B(X){var W;X.path=J(X.path||X.location||"");W=X.main||"./main";if(!n(W)){W="./"+W}X.main=s(W,X.name+"/");X.config=X.config;return X}function n(W){return W.charAt(0)=="."}function j(W){return e.test(W)}function o(X,W){return J(X)+"/"+W}function J(W){return W&&W.charAt(W.length-1)=="/"?W.substr(0,W.length-1):W}function s(ab,X){var ac,W,Z,Y,aa;ac=1;W=ab;if(n(W)){Y=true;W=W.replace(L,function(ad,ae,af,ag){if(af){ac++}return ag||""})}if(Y){Z=X.split("/");aa=Z.length-ac;if(aa<0){return ab}Z.splice(aa,ac);return Z.concat(W||[]).join("/")}else{return W}}function S(X){var W=X.indexOf("!");return{resourceId:X.substr(W+1),pluginId:W>=0&&X.substr(0,W)}}function U(){}function z(X,W){U.prototype=X||m;var Z=new U();U.prototype=m;for(var Y in W){Z[Y]=W[Y]}return Z}function F(){var X,aa,W;X=this;aa=[];function ab(ac,ad,ae){aa.push([ac,ad,ae])}function Y(ag,ad){var af,ac,ae=0;while((af=aa[ae++])){ac=af[ag];if(ac){ac(ad)}}}W=function Z(ad,ac){ab=ad?function(ae,af){ae&&ae(ac)}:function(ae,af){af&&af(ac)};W=Q;Y(ad?0:1,ac);Y=Q;aa=y};this.then=function(ac,ad,ae){ab(ac,ad,ae);return X};this.resolve=function(ac){X.resolved=ac;W(true,ac)};this.reject=function(ac){X.rejected=ac;W(false,ac)};this.progress=function(ac){Y(2,ac)}}function r(W){return W instanceof F}function H(W,Z,X,Y){if(r(W)){return W.then(Z,X,Y)}else{return Z(W)}}function q(Y,X,Z){var W;return function(){if(--Y>=0&&X){W=X.apply(y,arguments)}if(Y==0&&Z){Z(W)}return W}}x={toAbsId:function(ab,aa,W){var Y,X,Z;Y=s(ab,aa);if(n(Y)){return Y}Z=S(Y);X=Z.pluginId;Y=X||Z.resourceId;if(Y in W.pathMap){Y=W.pathMap[Y].main||Y}if(X){if(X.indexOf("/")<0&&!(X in W.pathMap)){Y=o(W.pluginPath,X)}Y=Y+"!"+Z.resourceId}return Y},createContext:function(W,X,ab,aa){var Z;Z=new F();Z.id=X||"";Z.isPreload=aa;Z.depNames=ab;Z.config=W;function ad(ae){return x.toAbsId(ae,Z.id,W)}function ac(ae){return x.resolvePathInfo(ad(ae),W).url}function Y(ag,ak,af){var ae,aj,ai,ah;ae=ak&&function(){ak.apply(y,arguments[0])};if(D(ag,"String")){if(ae){throw new Error("require(id, callback) not allowed")}aj=ad(ag);ai=k[aj];if(!(aj in k)){throw new Error("Module not resolved: "+aj)}ah=r(ai)&&ai.exports;return ah||ai}else{H(x.getDeps(x.createContext(W,Z.id,ag,aa)),ae,af)}}Z.require=Y;Y.toUrl=ac;Z.toAbsId=ad;return Z},createResourceDef:function(W,ad,ab){var aa,X,Z;aa=x.createContext(W,ad,y,ab);X=aa.resolve;Z=q(1,function(af){aa.deps=af;try{return x.executeDefFunc(aa)}catch(ae){aa.reject(ae)}});aa.resolve=function Y(ae){H(ab||h,function(){X((k[aa.id]=f[aa.url]=Z(ae)))})};aa.exportsReady=function ac(ae){H(ab||h,function(){if(aa.exports){Z(ae);aa.progress(N)}})};return aa},createPluginDef:function(W,aa,Z,Y){var X;X=x.createContext(W,Z,y,Y);return X},getCjsRequire:function(W){return W.require},getCjsExports:function(W){return W.exports||(W.exports={})},getCjsModule:function(X){var W=X.module;if(!W){W=X.module={id:X.id,uri:x.getDefUrl(X),exports:x.getCjsExports(X),config:function(){return X.config}};W.exports=W.exports}return W},getDefUrl:function(W){return W.url||(W.url=x.checkToAddJsExt(W.require.toUrl(W.id),W.config))},setApi:function(W){var Y,Z,X,aa,ab,ac;Y=u;Z=p;X=aa=a;ab=" already exists";if(W){ac=W.overwriteApi||W.overwriteApi;Y=W.apiName||W.apiName||Y;X=W.apiContext||W.apiContext||X;Z=W.defineName||W.defineName||Z;aa=W.defineContext||W.defineContext||aa;if(v&&D(v,"Function")){a[u]=v}v=null;if(g&&D(g,"Function")){a[p]=g}g=null;if(!ac){if(X[Y]&&X[Y]!=K){throw new Error(Y+ab)}if(aa[Z]&&aa[Z]!=I){throw new Error(Z+ab)}}}X[Y]=K;aa[Z]=I},config:function(aa){var ab,Z,W,X;if("baseUrl" in aa){aa.baseUrl=aa.baseUrl}if("main" in aa){aa.main=aa.main}if("preloads" in aa){aa.preloads=aa.preloads}if("pluginPath" in aa){aa.pluginPath=aa.pluginPath}if("dontAddFileExt" in aa||aa.dontAddFileExt){aa.dontAddFileExt=new RegExp(aa.dontAddFileExt||aa.dontAddFileExt)}ab=G;Z=z(ab,aa);Z.pathMap=z(ab.pathMap);W=aa.plugins||{};Z.plugins=z(ab.plugins);Z.paths=z(ab.paths,aa.paths);Z.packages=z(ab.packages,aa.packages);Z.pathList=[];function ac(af,am){var ah,aj,al,ak,an,ai;for(var ag in af){al=af[ag];if(D(al,"String")){al={path:af[ag]}}al.name=al.name||ag;an=Z;ak=S(J(al.name));ah=ak.resourceId;aj=ak.pluginId;if(aj){an=W[aj];if(!an){an=W[aj]=z(Z);an.pathMap=z(Z.pathMap);an.pathList=[]}delete af[ag]}if(am){ai=B(al);if(ai.config){ai.config=z(Z,ai.config)}}else{ai={path:J(al.path)}}ai.specificity=ah.split("/").length;if(ah){an.pathMap[ah]=ai;an.pathList.push(ah)}else{an.baseUrl=x.resolveUrl(al.path,Z)}}}function ad(af){var ag=af.pathMap;af.pathRx=new RegExp("^("+af.pathList.sort(function(ai,ah){return ag[ah].specificity-ag[ai].specificity}).join("|").replace(/\/|\./g,"\\$&")+")(?=\\/|$)");delete af.pathList}ac(aa.packages,true);ac(aa.paths,false);for(X in W){var Y=x.toAbsId(X+"!","",Z);Z.plugins[Y.substr(0,Y.length-1)]=W[X]}W=Z.plugins;for(X in W){W[X]=z(Z,W[X]);var ae=W[X].pathList;if(ae){W[X].pathList=ae.concat(Z.pathList);ad(W[X])}}for(X in ab.pathMap){if(!Z.pathMap.hasOwnProperty(X)){Z.pathList.push(X)}}ad(Z);return Z},checkPreloads:function(W){var X;X=W&&W.preloads;if(X&&X.length>0){H(h,function(){h=x.getDeps(x.createContext(G,y,X,true))})}},resolvePathInfo:function(Z,X){var Y,ab,aa,W;Y=X.pathMap;if(!j(Z)){aa=Z.replace(X.pathRx,function(ac){ab=Y[ac]||{};W=ab.config;return ab.path||""})}else{aa=Z}return{config:W||G,url:x.resolveUrl(aa,X)}},resolveUrl:function(Y,W){var X=W.baseUrl;return X&&!j(Y)?o(X,Y):Y},checkToAddJsExt:function(X,W){return X+((W||G).dontAddFileExt.test(X)?"":".js")},loadScript:function(Z,ab,X){var Y=d.createElement("script");function aa(ac){ac=ac||a.event;if(ac.type=="load"||A[Y.readyState]){delete c[Z.id];Y.onload=Y.onreadystatechange=Y.onerror="";ab()}}function W(ac){X(new Error("Syntax or http error: "+Z.url))}Y.onload=Y.onreadystatechange=aa;Y.onerror=W;Y.type=Z.mimetype||"text/javascript";Y.charset="utf-8";Y.async=!Z.order;Y.src=Z.url;c[Z.id]=Y;l.insertBefore(Y,V);return Y},extractCjsDeps:function(X){var Y,W=[],Z;Y=typeof X=="string"?X:X.toSource?X.toSource():X.toString();Y.replace(E,"").replace(C,function(aa,ac,ab){if(ab){Z=Z==ab?y:Z}else{if(!Z){W.push(ac)}}return""});return W},fixArgs:function(X){var ac,aa,Y,ab,W,Z;W=X.length;Y=X[W-1];ab=D(Y,"Function")?Y.length:-1;if(W==2){if(D(X[0],"Array")){aa=X[0]}else{ac=X[0]}}else{if(W==3){ac=X[0];aa=X[1]}}if(!aa&&ab>0){Z=true;aa=["require","exports","module"].slice(0,ab).concat(x.extractCjsDeps(Y))}return{id:ac,deps:aa||[],res:ab>=0?Y:function(){return Y},cjs:Z}},executeDefFunc:function(Y){var X,W;W=Y.cjs?Y.exports:y;X=Y.res.apply(W,Y.deps);if(X===y&&Y.exports){X=Y.module?(Y.exports=Y.module.exports):Y.exports}return X},defineResource:function(X,W){X.res=W.res;X.cjs=W.cjs;X.depNames=W.deps;x.getDeps(X)},getDeps:function(X){var ab,af,ai,ad,ag,aa,W,aj,ah;ai=[];af=X.depNames;ad=af.length;if(af.length==0){Y()}function ae(am,ak,al){ai[ak]=am;if(al){aj(am,ak)}}aj=q(ad,ae,ac);ah=q(ad,ae,Y);for(ab=0;ab<ad;ab++){W=af[ab];if(W in M){ah(M[W](X),ab,true);if(X.exports){X.progress(i)}}else{if(!W){ah(y,ab,true)}else{Z(W,ab)}}}return X;function Z(am,al){var an,ak,ap,ao;an=q(1,function(aq){ak(aq);ah(aq,al)});ak=q(1,function(aq){aj(aq,al)});ap=x.fetchDep(am,X);ao=r(ap)&&ap.exports;if(ao){ak(ao)}H(ap,an,X.reject,X.exports&&function(aq){if(ap.exports){if(aq==i){ak(ap.exports)}else{if(aq==N){an(ap.exports)}}}})}function Y(){X.resolve(ai)}function ac(){X.exportsReady&&X.exportsReady(ai)}},fetchResDef:function(W){x.getDefUrl(W);x.loadScript(W,function(){var X=O;O=y;if(W.useNet!==false){if(!X||X.ex){W.reject(new Error(((X&&X.ex)||"define() missing or duplicated: "+W.url)))}else{x.defineResource(W,X)}}},W.reject);return W},fetchDep:function(ai,X){var W,Z,ae,ab,ah,ad,aa,aj,af,Y,ac,ag;W=X.toAbsId;Z=X.isPreload;ae=X.config||G;ab=S(W(ai));aj=ab.resourceId;ah=ab.pluginId||aj;af=x.resolvePathInfo(ah,ae);if(ab.pluginId){ad=ah}else{ad=af.config.moduleLoader||af.config.moduleLoader;if(ad){aj=ah;ah=ad;af=x.resolvePathInfo(ad,ae)}}if(ah in k){Y=k[ah]}else{if(af.url in f){Y=k[ah]=f[af.url]}else{Y=x.createResourceDef(af.config,ah,Z);Y.url=x.checkToAddJsExt(af.url,af.config);k[ah]=f[af.url]=Y;x.fetchResDef(Y)}}if(ah==ad){ac=new F();ag=ae.plugins[ad]||ae;H(Y,function(am){var ao,ak,an;an=am.dynamic;if("normalize" in am){aj=am.normalize(aj,W,Y.config)||""}else{aj=W(aj)}ak=ad+"!"+aj;ao=k[ak];if(!(ak in k)){ao=x.createPluginDef(ag,ak,aj,Z);if(!an){k[ak]=ao}var al=function(ap){ao.resolve(ap);if(!an){k[ak]=ap}};al.resolve=al;al.reject=al.error=ao.reject;am.load(aj,ao.require,al,ag)}if(ac!=ao){H(ao,ac.resolve,ac.reject,ac.progress)}},ac.reject)}return ac||Y},getCurrentDefName:function(){var W;if(!D(a.opera,"Opera")){for(var X in c){if(c[X].readyState=="interactive"){W=X;break}}}return W}};M={require:x.getCjsRequire,exports:x.getCjsExports,module:x.getCjsModule};function K(){var X=[].slice.call(arguments),W;if(D(X[0],"Object")){W=X.shift();R(W)}return new w(X[0],X[1],X[2])}function R(W){if(W){x.setApi(W);G=x.config(W);x.checkPreloads(W);if("main" in W){setTimeout(function(){var X;X=x.createContext(G,y,[].concat(W.main));x.getDeps(X)},0)}}}function w(Y,ab,X,aa){var Z,W;W=x.createContext(G,y,[].concat(Y));this["then"]=Z=function(ac,ad){H(W,function(ae){if(ac){ac.apply(y,ae)}},function(ae){if(ad){ad(ae)}else{throw ae}});return this};this["next"]=function(ae,ac,ad){return new w(ae,ac,ad,W)};this["config"]=R;if(ab||X){Z(ab,X)}H(aa,function(){x.getDeps(W)})}K.version=P;K.config=R;function T(W){var Z,X,Y;Z=W.id;if(Z==y){if(O!==y){O={ex:"Multiple anonymous defines in url"}}else{if(!(Z=x.getCurrentDefName())){O=W}}}if(Z!=y){X=k[Z];if(!(Z in k)){Y=x.resolvePathInfo(Z,G);X=x.createResourceDef(Y.config,Z);k[Z]=X}if(!r(X)){throw new Error("duplicate define: "+Z)}X.useNet=false;x.defineResource(X,W)}}function I(){var W=x.fixArgs(arguments);T(W)}I.amd={plugins:true,jQuery:true,curl:P};G={baseUrl:"",pluginPath:"curl/plugin",dontAddFileExt:t,paths:{},packages:{},plugins:{},pathMap:{},pathRx:/$^/};v=a[u];g=a[p];if(!v||D(v,"Function")){x.setApi()}else{a[u]=y;R(v)}k[u]=K;k["curl/_privileged"]={core:x,cache:k,config:function(){return G},_define:T,_curl:K,Promise:F}}(this.window||(typeof global!="undefined"&&global)||this));;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-css-0.7.3.js' */
(function(B){var z="createElement",s="parentNode",f=B.setTimeout,H=B.document,k,x=H&&H.createStyleSheet&&!(H.documentMode>=10),v=[],u=[],C=[],i=12,F,g="HTTP or network error.",l={};if(H){k=H.head||H.getElementsByTagName("head")[0];if(x){F=c}else{F=t}}function q(J,I){l[J]=l[J]||I}function y(){var I;I=H[z]("link");I.rel="stylesheet";I.type="text/css";return I}function r(J,I){J.onload=function(){q("load",true);I()}}function n(J,I){J.onerror=function(){q("error",true);I()}}function c(K,I,M){var L;C.push({url:K,cb:I,eb:function J(){M(new Error(g))}});L=h();if(L){m(L)}}function m(K){var J,I;J=C.shift();I=K.styleSheet;if(J){K.onload=function(){J.cb(J.ss);m(K)};K.onerror=function(){J.eb();m(K)};J.ss=I.imports[I.addImport(J.url)]}else{e(K);G(K)}}function G(I){u.push(I)}function h(){var I;I=u.shift();if(!I&&v.length<i){I=H.createElement("style");v.push(I);k.appendChild(I)}return I}function b(L){var K,J,M;if(!L.href||!o()){return false}K=false;try{J=L.sheet;if(J){M=J.cssRules;K=M===null;if(!K&&M){J.insertRule("-curl-css-test {}",0);J.deleteRule(0);K=true}}}catch(I){K=Object.prototype.toString.call(window.opera)!="[object Opera]"&&/security|denied/i.test(I.message)}return K}function e(I){I.onload=I.onerror=j}function w(I){return I.onload==j||!I.onload}function E(J,K,I){if(l.load){return}if(b(J)){I(J.sheet)}else{if(!w(J)){f(function(){E(J,K,I)},K)}}}function A(J,K,I){if(l.error){return}}function p(J,L,I){function K(){if(w(J)){return}e(J);I(J.sheet)}r(J,K);E(J,L,K)}function D(K,L,I){function J(){if(w(K)){return}e(K);I(new Error(g))}n(K,J);A(K,L,J)}function t(J,I,K,M){var L;L=y();p(L,M,I);D(L,M,K);L.href=J;k.appendChild(L)}function d(I){function J(){if(o()){I()}else{f(J,10)}}J()}function o(){return !H.readyState||H.readyState=="complete"}function a(I,J){return I.lastIndexOf(".")<=I.lastIndexOf("/")?I+"."+J:I}function j(){}WRM.define("curl/plugin/css",{normalize:function(N,J){var L,M;if(!N){return N}L=[N];M=[];for(var K=0,I=L.length;K<I;K++){M.push(J(L[K]))}return M.join(",")},load:function(R,L,U,K){var Q,J,V,S,M,O;Q=[];J=[R||""];V=K.cssWatchPeriod||50;S=K.cssNoWait;M=J.length;function N(W){if(J.length>1){Q.push(W)}if(--M==0){U(J.length==1?W:Q)}}function P(X){var W;W=U.reject||function(Y){throw Y};W(X)}for(O=0;O<J.length;O++){R=J[O];var I,T;I=a(L.toUrl(R),"css");if(S){T=y();T.href=I;k.appendChild(T);N(T.sheet||T.styleSheet)}else{F(I,N,P,V)}}},"plugin-builder":"./builder/css",pluginBuilder:"./builder/css"})})(this);;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-js-0.7.3.js' */
(function(b,c,a){WRM.define("curl/plugin/js",["curl/_privileged"],function(m){var f={},j=[],h=c&&c.createElement("script").async==true,l,k,g;l=m.Promise;function i(n,o){return n.lastIndexOf(".")<=n.lastIndexOf("/")?n+"."+o:n}function e(o,u,q){var v,s,p;v=new Date().valueOf()+(o.timeoutMsec||300000);function n(){s=true;if(o.exports){o.resolved=a(o.exports)}if(!o.exports||o.resolved){u(p)}else{q()}}function r(w){s=true;q(w)}function t(){if(!s){if(v<new Date()){q()}else{setTimeout(t,10)}}}if(q&&o.exports){setTimeout(t,10)}p=m.core.loadScript(o,n,r)}function d(n,o){e(n,function(){var p=j.shift();k=j.length>0;if(p){d.apply(null,p)}o.resolve(n.resolved||true)},function(p){o.reject(p)})}return{dynamic:true,normalize:function(q,p,o){var n=q.indexOf("!");return n>=0?p(q.substr(0,n))+q.substr(n):p(q)},load:function(o,r,w,q){var s,t,u,v,n,p,y;s=o.indexOf("!order")>0;t=o.indexOf("!exports=");u=t>0&&o.substr(t+9);v="prefetch" in q?q.prefetch:true;o=s||t>0?o.substr(0,o.indexOf("!")):o;n=i(r.toUrl(o),"js");function x(z){(w.error||function(A){throw A})(z)}if(n in f){if(f[n] instanceof l){f[n].then(w,x)}else{w(f[n])}}else{p={name:o,url:n,order:s,exports:u,timeoutMsec:q.timeout};f[n]=y=new l();y.then(function(z){f[n]=z;w(z)},x);if(s&&!h&&k){j.push([p,y]);if(v){p.mimetype="text/cache";e(p,function(z){z&&z.parentNode.removeChild(z)},function(){});p.mimetype=""}}else{k=k||s;d(p,y)}}}}})}(this,this.document,function(){try{return eval(arguments[0])}catch(ex){return}}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/jquery.js' */
WRM.define("wrm/jquery",function(){return AJS.$});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/underscore.js' */
WRM.define("wrm/_",function(){var a={filter:function(f,d){var b=[];for(var c=0;c<f.length;++c){var e=f[c];if(d(e)){b.push(e)}}return b},map:function(d,c){var e=[];for(var b=0;b<d.length;++b){e.push(c(d[b]))}return e},each:function(d,c){if(d.length===+d.length){for(var b=0;b<d.length;++b){c(d[b])}}else{for(var e in d){if(d.hasOwnProperty(e)){c(d[e],e)}}}},bind:function(c,b){return function(){c.apply(b,Array.prototype.slice.call(arguments))}},isArray:function(b){return Object.prototype.toString.call(b)=="[object Array]"},isUndefined:function(b){return b===void 0},isNull:function(b){return b===null}};return a});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/builder.js' */
WRM.define("wrm/builder",function(){var a=function(){this.wrmKeyAttribute="data-wrm-key";this.wrmBatchTypeAttribute="data-wrm-batch-type"};a.prototype={initialize:function(c){var b=c.querySelectorAll("script[data-wrm-key][data-wrm-batch-type]"),d=c.querySelectorAll("link[data-wrm-key][data-wrm-batch-type]"),e={modules:[],contexts:[]};this._inspectTagArray(b,e);this._inspectTagArray(d,e);return e},_inspectTagArray:function(e,b){for(var d=0;d<e.length;d++){var c=e[d];this.addResource(c.getAttribute(this.wrmKeyAttribute),c.getAttribute(this.wrmBatchTypeAttribute),b)}},addResource:function(g,e,b){var f=g.split(",");for(var d=0;d<f.length;d++){var c=f[d];if(c[0]==="-"){continue}if(e==="resource"){this._addToLoadedList(b.modules,c)}else{if(e==="context"){this._addToLoadedList(b.contexts,c)}else{AJS.log("Unknown batch type: "+e)}}}},_addToLoadedList:function(c,b){if(c.indexOf(b)!==-1){return}c.push(b)}};return a});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/context-path.js' */
WRM.define("wrm/context-path",function(){return AJS.contextPath});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/ie-only-filter.js' */
WRM.define("wrm/ie-only-filter",["wrm/jquery","wrm/_"],function(c,a){function b(d){var e=c.browser.msie;return a.filter(d,function(f){return f.ieOnly?e:true})}return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/conditional-comment-filter.js' */
WRM.define("wrm/conditional-comment-filter",["wrm/jquery","wrm/_"],function(c,a){function b(e){var f=c.browser.msie;var d=c.browser.version;return a.filter(e,function(h){var g=h.conditionalComment;if(!g){return true}if(!f||d>9){return false}g=g.toLowerCase();switch(g){case"ie":return true;case"lt ie 9":return d<9;case"lte ie 9":return d<=9;case"ie 9":return d==9;case"gt ie 9":return d>9;case"gte ie 9":return d>=9;case"lt ie 8":return d<8;case"lte ie 8":return d<=8;case"ie 8":return d==8;case"gt ie 8":return d>8;case"gte ie 8":return d>=8;default:AJS.log("Cannot parse conditional comment "+g);return false}})}return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/require-handler.js' */
WRM.define("wrm/require-handler",["wrm/jquery","wrm/_","wrm/builder","wrm/context-path","wrm/conditional-comment-filter","wrm/ie-only-filter"],function(d,i,j,e,h,a){var g=/^wr!(.*)$/,c=/^wrc!(.*)$/,f=/^.+!/;var b=function(){this._requireCache={};this._requestedResources={contexts:[],webResources:[]};this._requestInFlight=false;this._requestWaiting=false};b.prototype={require:function(o,k){if(!i.isArray(o)){o=[o]}if(!this._requireCache.hasOwnProperty(o)){var l=d.Deferred();function m(){this._resolveAsync(o).then(l.resolve,l.reject)}var n=window.WRM&&window.WRM.InOrderLoader;if(n!==undefined){n.registerAllResolvedCallback(m.bind(this))}else{m.call(this)}this._requireCache[o]=l.promise()}var p=this._requireCache[o];if(k){p.done(function(){k.apply(this,arguments)})}return p},_resolveAsync:function(m){this._addToRequestedResources(m);var k=d.Deferred();var l=this;if(this._requestInFlight===false){this._requestInFlight=this._getScriptsForResources().done(this._processResourceResponse.bind(this,k,m))}else{if(this._requestWaiting===false){this._requestWaiting=k;this._requestInFlight.done(function(){l._requestInFlight=l._getScriptsForResources().done(l._processResourceResponse.bind(l,k,m));l._requestWaiting=false})}else{return this._requestWaiting.promise()}}return k.promise()},_processResourceResponse:function(t,l,o){this._requestInFlight=false;var r=this;if(o.unparsedData){window.WRM._unparsedData||(window.WRM._unparsedData={});i.each(o.unparsedData,function(v,u){window.WRM._unparsedData[u]=v});window.WRM._dataArrived()}if(o.unparsedErrors){window.WRM._unparsedErrors||(window.WRM._unparsedErrors={});i.each(o.unparsedErrors,function(v,u){window.WRM._unparsedErrors[u]=v});window.WRM._dataArrived()}var m=[];var p=[];var s=this._filter(o.resources);for(var q=0;q<s.length;++q){var n=s[q];var k=n.url;this._builder.addResource(n.key,n.batchType,this._loadedResources);if(n.resourceType==="JAVASCRIPT"){if(!this._isJSInInitLoad(k)){m.push("js!"+k+"!order")}}else{if(n.resourceType==="CSS"){if(!this._isCSSInInitLoad(k)){if(n.media&&"all"!==n.media){p.push(n)}else{m.push("css!"+k)}}}else{AJS.log("Unknown resource type required: "+k)}}}AJS.log("Downloading resources:\n"+m.join("\n"));WRM.curl(m,function(){i.each(p,function(v){r._loadCssImmediate(v)});var u=i.map(l,function(){return window});t.resolveWith(r,u)},function(){t.rejectWith(r,arguments)})},_loadCssImmediate:function(l){AJS.log("WARN: asynchronously loading a CSS resource containing a media query: "+l.url);var k='<link rel="stylesheet" type="text/css" href="'+l.url+'" media="'+l.media+'" />';d(k).appendTo("head")},_getScriptsForResources:function(){if(!this._builder){this._builder=new j();this._loadedResources=this._builder.initialize(document)}else{this._updateLoadedResourcesFromDom()}var k=d.Deferred();d.ajax({url:e()+"/rest/webResources/1.0/resources",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({r:this._requestedResources.webResources,c:this._requestedResources.contexts,xc:this._loadedResources.contexts,xr:this._loadedResources.modules}),success:k.resolve,error:k.reject});this._requestedResources.webResources=[];this._requestedResources.contexts=[];return k.promise()},_updateLoadedResourcesFromDom:function(){function l(m,n){i.each(m,function(o){if(n.indexOf(o)===-1){n.push(o)}})}var k=this._builder.initialize(document);l(k.modules,this._loadedResources.modules);l(k.contexts,this._loadedResources.contexts)},_addToRequestedResources:function(l){var k=this;i.each(l,function(n){var m;if(m=n.match(g)){k._requestedResources.webResources.push(m[1])}else{if(m=n.match(c)){k._requestedResources.contexts.push(m[1])}else{k._requestedResources.webResources.push(n.replace(f,""))}}})},_isJSInInitLoad:function(k){return d("script[src='"+k+"']").length>0},_isCSSInInitLoad:function(k){return d("link[href='"+k+"']").length>0},_filter:function(l){if(!this._filters){this._filters=[h,a]}var k=l;i.each(this._filters,function(m){k=m(k)});return k}};return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/index.js' */
WRM.curl(["wrm/require-handler"],function(b){var a;WRM.require=function(d,c){if(!a){a=new b()}return a.require(d,c)};if(typeof define==="function"){define("wrm/require",[],function(){return WRM.require})}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:mixin-util', location = '/static/bitbucket/internal/util/mixin.js' */
define("bitbucket/internal/util/mixin",["module","exports","lodash"],function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(d);a.default=function(){var a=[].slice.call(arguments);return{into:function(b){return c.default.extend.apply(c.default,[b].concat(a))}}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/text-view.js' */
define("bitbucket/internal/feature/file-content/text-view/text-view","module exports jquery lodash bitbucket/internal/bbui/widget/widget bitbucket/internal/feature/file-content/stash-codemirror/stash-codemirror bitbucket/internal/feature/file-content/text-view/common-modes bitbucket/internal/feature/file-content/text-view/text-view-api bitbucket/internal/feature/file-content/text-view/text-view-scrolling bitbucket/internal/util/determine-language bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/horizontal-keyboard-scrolling bitbucket/internal/util/object bitbucket/internal/util/performance".split(" "),
function(t,k,l,u,v,w,x,y,z,A,B,C,D,E,F){function e(a,b){m.default.call(this,b);var d=this;n.default.setupAPI(this);this._internalLines={ADDED:{},REMOVED:{},CONTEXT:{}};this._editors=[];this._gutters=[];this._$container=a;this._$fileToolbar=this._$container.siblings(".file-toolbar");this._$container.addClass("text-view");this.registerGutter("CodeMirror-linewidget",{weight:0});this._addDestroyable(function(){d._$container.removeClass("text-view");d._editors.forEach(function(c){c.destroy()});d._editors=
null;d._gutters=null;d._$container=null});this._addDestroyable(p.default.chain().on("bitbucket.internal.feature.sidebar.*",this.refresh))}function G(a){var b=a.view;a.eachLine(function(d){d.handles.all.forEach(function(c){b.addLineClass(c,"wrap","line")})})}Object.defineProperty(k,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(u),m=babelHelpers.interopRequireDefault(v),q=babelHelpers.interopRequireDefault(w),H=babelHelpers.interopRequireDefault(x),
n=babelHelpers.interopRequireDefault(y);l=babelHelpers.interopRequireDefault(z);var I=babelHelpers.interopRequireDefault(A),p=babelHelpers.interopRequireDefault(B);babelHelpers.interopRequireDefault(C);var r=babelHelpers.interopRequireDefault(D),g=babelHelpers.interopRequireDefault(E),J=babelHelpers.interopRequireDefault(F);g.default.inherits(e,m.default);n.default.mixInto(e.prototype);l.default.mixInto(e.prototype);e.defaults={focusPoint:.2};e.DEFAULT_LINE_ENDING=q.default.DEFAULT_LINE_ENDING;e.prototype.init=
function(){p.default.trigger("bitbucket.internal.feature.fileContent.textViewInitializing",null,this._api,this._options);r.default.init()};e.prototype.markText=function(a,b,d,c){var e=this;return a.handles.all.map(function(a){var f=e._editorForHandle(a);a=f.getLineNumber(a._handle);return f.markText({line:a+b.lineOffset,ch:b.ch},{line:a+d.lineOffset,ch:d.ch},{className:c.className})})};e.prototype.refresh=f.default.debounce(function(){f.default.invoke(this._editors,"refresh");this.trigger("resize")},
50);e.prototype._createEditor=function(a,b){a=a||{};var d=new q.default(b&&b.length?b[0]:this._$container[0],h.default.extend({},a,{attachScroll:this._options.attachScroll,autoResizing:this._options.autoResizing,gutters:this._getGutters(a.gutterFilter),scrollStyle:this._options.scrollStyle,value:""}));d._gutterFilter=a.gutterFilter;this._editors.push(d);r.default.setEditors(this._editors);this._$firstEditor||(this._$firstEditor=(0,h.default)(d.getWrapperElement()));return d};e.prototype._editorForHandle=
function(a){throw Error("TextView implementation must define _editorForHandle.");};e.prototype._editorInnerOffset=function(){return this._$firstEditor[0].getBoundingClientRect().top-this._$container[0].getBoundingClientRect().top};e.prototype._getChangeAttributes=function(){return{}};e.prototype._getGutters=function(a){var b=this._gutters;a&&(b=b.filter(a));b=b.sort(function(a,c){return a.weight-c.weight});return f.default.chain(b).pluck("name").uniq().value()};e.prototype._modify=function(a,b,d){var c=
this,e=[].slice.call(arguments);f.default.forEach(d,function(a){c._internalLines[a.lineType||"CONTEXT"][a.lineNumber]=a});this.operation(function(){c._acceptModification.apply(c,e);c.trigger("internal.acceptedModification",e);var b=h.default.extend({type:a,linesAdded:d.length,eachLine:function(a){var b=(c._options.asyncDiffModifications?J.default.frameBatchedMap(a,{min:500,initial:200},c.operation.bind(c)):function(b){var c=h.default.Deferred();c.resolve(b.map(a));return c})(d);c._addDestroyable(b.reject.bind(b));
return b.promise()},view:c._api},c._getChangeAttributes.apply(c,e));f.default.chain(d).pluck("handles").values().flatten().compact().forEach(g.default.freeze).value();f.default.chain(d).pluck("handle").compact().forEach(g.default.freeze).value();f.default.chain(d).pluck("line").compact().forEach(g.default.freeze).value();g.default.deepFreeze(d,!1);g.default.deepFreeze(b,!1);G(b);"INITIAL"===a&&c.trigger("internal-load",b);c.trigger("internal-change",b);c.refresh()})};e.prototype._highlight=function(a){this._editors&&
this._editors.forEach(function(b){b._highlight(a)})};e.prototype._syntaxHighlighting=function(a,b,d){var c=I.default.fromFileInfo({firstLine:b,path:a});(c.wrmKey?WRM.require("wr!"+c.wrmKey):c.builtIn&&-1===H.default.indexOf(c.mode)?WRM.require("wr!com.atlassian.bitbucket.server.bitbucket-highlight:"+c.mode):h.default.Deferred().resolve()).done(function(){d.setOption("mode",c.mime)})};e.prototype._whenOpDone=function(a){this._opCallbacks?this._opCallbacks.push(a):a()};k.default=e;t.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/text-view-scrolling.js' */
define("bitbucket/internal/feature/file-content/text-view/text-view-scrolling",["module","exports","jquery","bitbucket/internal/feature/file-content/text-view/request-window-scrolls","bitbucket/internal/util/mixin"],function(h,f,g,k,l){Object.defineProperty(f,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(k);g=babelHelpers.interopRequireDefault(l);f.default={mixInto:(0,g.default)({scrollHandleIntoFocus:function(a){var b=this._editorForHandle(a),
c=b.getScrollInfo();a=c.height>c.clientHeight?b.heightAtLine(a._handle.lineNo(),"local"):0;this._scrollToFocusedOffset(a,c,b)},scrollHandleIntoView:function(a){var b=this._editorForHandle(a);b.lastLine()===a._handle.lineNo()?b.scrollTo(null,b.heightAtLine(b.lastLine()+1)):b.scrollIntoView(a._handle.lineNo()+1)},scrollToFileComments:function(a,b){var c=this._editors[0],e=c.getScrollInfo(),d=(0,m.default)("#page").offset().top;null!=b&&a>d&&a+b<d+e.clientHeight||this._scrollToFocusedOffset(a-this._editorInnerOffset(),
e,c)},scrollToTop:function(){this._scrollToSourcePosition(null,0)},scrollToWidgetOffset:function(a,b,c){var e=this._editorForHandle(a),d=e.getScrollInfo();if(d.height>d.clientHeight){if(a=e.heightAtLine(a._handle.lineNo(),"local"),b=Math.max(0,a+b),null!=c&&(a=b-d.top,0<=a&&a<d.clientHeight-c))return}else b=0;this._scrollToFocusedOffset(b,d,e)},_requestWindowScrolls:function(a){var b=this;return(0,n.default)(this,a).done(function(a){b._scrollToSourcePosition=function(e,d){a.scroll(e,null!=d?Math.max(0,
d+b._editorInnerOffset()):null)}}).fail(function(a){b._scrollToSourcePosition=function(a,b){throw Error("Not implemented");}})},_scrollToFocusedOffset:function(a,b,c){c.getInputField().blur();this._scrollToSourcePosition(null,a-b.clientHeight*this._options.focusPoint)},_scrollToSourcePosition:function(){throw Error("_scrollToSourcePosition can't be called until _requestWindowScrolls returns.");}}).into};h.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/text-view-api.js' */
define("bitbucket/internal/feature/file-content/text-view/text-view-api","module exports jquery lodash bitbucket/internal/util/array bitbucket/internal/util/function bitbucket/internal/util/mixin bitbucket/internal/util/object".split(" "),function(p,h,k,q,r,t,u,f){function v(a){a.classList.add("bitbucket-gutter-marker");return a}Object.defineProperty(h,"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(k),e=babelHelpers.interopRequireDefault(q),x=babelHelpers.interopRequireDefault(r),
g=babelHelpers.interopRequireDefault(t);k=babelHelpers.interopRequireDefault(u);var y=babelHelpers.interopRequireDefault(f);f={addLineClass:function(a,b,d){this._editorForHandle(a).addLineClass(a._handle,b,d);return a},addLineWidget:function(a,b,d){var c=this._editorForHandle(a).addLineWidget(a._handle,b,d),l=this;l.trigger("widgetAdded");return{clear:function(){c.off("redraw");c.clear();l.trigger("widgetCleared")},changed:function(){c.changed();l.trigger("widgetChanged")},onRedraw:function(a){c.on("redraw",
a)},getHeight:function(){return c.height}}},getLine:function(a){return a._handle.text},getLineHandle:function(a){a&&null==a.lineNumber&&(a=(0,w.default)(a),a.is(".line-locator")||(a=a.closest(".line").find(".line-locator")),a={fileType:a.attr("data-file-type"),lineType:a.attr("data-line-type"),lineNumber:a.attr("data-line-number")});var b=a&&this._internalLines[a.lineType||"CONTEXT"][a.lineNumber]&&this._internalLines[a.lineType||"CONTEXT"][a.lineNumber].handles;return b&&(b[a.fileType]||b.all[0])},
operation:function(a){if(this._editors){a=this._editors.reduce(function(a,b){return b.operation.bind(b,a)},g.default.arity(a.bind(null),0));try{return this._inOp||(this._opCallbacks=[],this._inOp=0),this._inOp++,a()}finally{if(this._inOp--,!this._inOp){try{g.default.applyAll(this._opCallbacks)}catch(b){setTimeout(function(){throw b;},0)}this._opCallbacks=null}}}},registerGutter:function(a,b){b=b||{};if(this._editors){this._gutters.push({name:a,weight:b.weight||0,fileType:b.fileType});this._gutters=
y.default.uniqueFromArray(this._gutters,["name","fileType"]).sort(function(a,b){return a.weight-b.weight||a.name.localeCompare(b.name)});var d=this;this._editors.forEach(function(a){var b=d._getGutters(a._gutterFilter);e.default.isEqual(a.getOption("gutters"),b)||a.setOption("gutters",b)})}},clearGutter:function(a){this._editors.forEach(function(b){b.clearGutter(a)})},removeLineClass:function(a,b,d){this._editorForHandle(a).removeLineClass(a._handle,b,d);return a},setGutterMarker:function(a,b,d){this._editorForHandle(a).setGutterMarker(a._handle,
b,v(d));return a},addContainerClass:function(a){this._$container.addClass(a);this.refresh()},removeContainerClass:function(a){this._$container.removeClass(a);this.refresh()}};var z=Object.keys(f),n={destroy:0,load:1,change:1};h.default={mixInto:(0,k.default)(f).into,setupAPI:function(a){var b={};a._api={};var d=[a].concat(z);e.default.bindAll.apply(e.default,d);e.default.extend(a._api,{on:function(c,d){if(e.default.has(n,c)){b[c]||(b[c]=[]);var m=g.default.arity(d.bind(a._api),n[c]);b[c].push({f:d,
wrappedF:m});a.on(c,m)}},off:function(c,d){if(b[c]){var e=x.default.findIndex(g.default.dotEq("f",d))(b[c]||[]);-1!==e&&(a.off(c,b[c][e].wrappedF),b[c].splice(e,1))}}},e.default.pick.apply(e.default,d))}};p.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/common-modes.js' */
(function(a){"object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"===("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?exports.commonModes=a():define("bitbucket/internal/feature/file-content/text-view/common-modes",[],a)})(function(){return"clike commonlisp css htmlmixed javascript markdown perl php python ruby sass shell sql vbscript xml yaml".split(" ")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/attach-simple-scroll-behavior.js' */
define("bitbucket/internal/feature/file-content/text-view/attach-simple-scroll-behavior",["module","exports","jquery"],function(g,a,h){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b,d){return b?a._requestWindowScrolls({scrollSizing:function(){return b.getScrollInfo()},scroll:function(a,c){b.scrollTo(null,c)},resize:function(e,c){var b=d.data("height"),f=d.data("width");c!==b&&(d.height(c),d.data("height",c));e!==f&&d.data("width",e);c===b&&e===f||a.refresh()},onSizeChange:function(b){a.on("resize",
b)}}):k.default.Deferred().reject()};var k=babelHelpers.interopRequireDefault(h);g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:text-view', location = '/static/bitbucket/internal/feature/file-content/text-view/request-window-scrolls.js' */
define("bitbucket/internal/feature/file-content/text-view/request-window-scrolls","module exports bacon jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/performance bitbucket/internal/util/region-scroll-forwarder bitbucket/internal/util/request-page-scrolling bitbucket/internal/util/scroll".split(" "),function(g,c,h,t,u,v,w,x,y,z){Object.defineProperty(c,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),A=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),
l=babelHelpers.interopRequireDefault(v),C=babelHelpers.interopRequireDefault(w),D=babelHelpers.interopRequireDefault(x),E=babelHelpers.interopRequireDefault(y),F=babelHelpers.interopRequireDefault(z);c.default=function(a,d){return(0,E.default)().done(function(e){function c(a){if(a.wheelDeltaX&&a.wheelDeltaY){if(Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)){var b=d.scrollSizing();d.scroll(b.left-a.wheelDeltaX*f,null)}else m.scrollTop(m.scrollTop()+a.wheelDeltaY*f);a.stopImmediatePropagation();a.preventDefault()}}
var n=new k.default.Bus,b=a._$container.addClass("full-window-scrolling"),g=b.closest(".file-content"),p,h=F.default.fakeScroll(b[0]),b=k.default.mergeAll(["bitbucket.internal.feature.sidebar.expandEnd","bitbucket.internal.feature.sidebar.collapseEnd","bitbucket.internal.feature.commit.difftree.collapseAnimationFinished","bitbucket.internal.layout.body.resize"].map(l.default.events).concat(l.default.getWindowSizeProperty().toEventStream())).toProperty();a._addDestroyable(e);a._addDestroyable(b.scan(0,
function(a,b){return b&&b.hasOwnProperty("width")&&b.hasOwnProperty("height")&&b||a}).filter(B.default.identity).onValue(function(b){p=b.height-a._$fileToolbar.outerHeight();d.resize(a._$container.width(),p)}));b=C.default.enqueueCapped(a._whenOpDone.bind(a),function(){a._$container&&e.refresh()});d.onSizeChange(b);a.on("widgetAdded",b);a.on("widgetChanged",b);a.on("widgetCleared",b);a.on("internal-change",b);if(a._options.commentContext)a._options.commentContext.on("fileCommentsResized",b);b=new D.default(n,
[{id:"file-comments-and-messages",getHeight:function(){return a._editorInnerOffset()||0},setScrollTop:function(a){h(0,a)}},{id:"editors",getHeight:function(){return Infinity},setScrollTop:function(a){d.scroll(null,a)}}]);a._addDestroyable(b);if(a._options.commentContext)a._options.commentContext.on("fileCommentsResized",b.heightsChanged.bind(b));e.setTarget({scrollSizing:function(){var b=d.scrollSizing();return{height:b.height+a._editorInnerOffset(),clientHeight:b.clientHeight}},offset:function(){return g.offset()},
scroll:function(a,b){null!=b&&n.push({top:b})}});var b=/Chrome\//.test(window.navigator.userAgent),q=/Apple Computer/.test(window.navigator.vendor),r=a._$container[0],m=(0,A.default)(window),f=1;b?f=-.7:q&&(f=-1/3);if(b||q)r.addEventListener("mousewheel",c,!0),e.destroyables.push({destroy:function(){r.removeEventListener("mousewheel",c,!0)}})})};g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:direction-enum', location = '/static/bitbucket/internal/model/direction.js' */
define("bitbucket/internal/model/direction",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={UP:"UP",DOWN:"DOWN"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:region-scroll-forwarder', location = '/static/bitbucket/internal/util/region-scroll-forwarder.js' */
define("bitbucket/internal/util/region-scroll-forwarder","module exports bacon jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/function".split(" "),function(g,f,u,v,w,x,y){Object.defineProperty(f,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(u),z=babelHelpers.interopRequireDefault(v),d=babelHelpers.interopRequireDefault(w),q=babelHelpers.interopRequireDefault(x),r=babelHelpers.interopRequireDefault(y);f.default=function(f,c){function t(a,b){d.default.chain(a).filter(function(b,
a,c){return!d.default.some(c.slice(0,a),function(a){return b.groupId&&b.groupId===a.groupId})}).forEach(function(a){a.setScrollTop("bottom"===b(a)?a.getCachedHeight():0)}).value()}var m=new p.default.Bus;c=c.map(function(a){var b=null;return z.default.extend({},a,{getCachedHeight:function(){null==b&&(b=a.getHeight());return b},invalidateCache:function(){b=null}})});var e;f.subscribe(function(a){if(a.isInitial()){var b=a.value().top,l=0,e;d.default.forEach(c,function(a){var c=a.getCachedHeight(),d=
l+c>=b;!e&&d?(e=a,a.setScrollTop(b-l)):a.setScrollTop(d?0:c);l+=c})}})();var n=f.takeUntil(m).slidingWindow(2,2).map(r.default.spread(function(a,b){var e=0,f,g=b.top-a.top,h,k=0;d.default.some(c,function(c){var d=c.getCachedHeight();!h&&k+d>=b.top&&(h=c,e=k);!f&&k+d>=a.top&&(f=c);k+=d;return h&&f});if(!h)throw Error("No forwardee handles "+b.top);return{scrollInfo:b,localTop:b.top-e,diff:g,forwardTo:h,previousRegion:f}})),g=n.onValue(function(a){e=a;var b=a.previousRegion;if(b!==a.forwardTo){var b=
q.default.toArray(q.default.takeBetween(p.default.fromArray(c),{start:b,end:a.forwardTo,startInclusive:!0,endInclusive:!1})),d=0<a.diff;t(d?b.reverse():b,r.default.constant(d?"bottom":"top"))}a.forwardTo.setScrollTop(a.localTop)});return{regionChanges:n.map(".forwardTo").skipDuplicates(),forwardingInfo:n,heightsChanged:function(){d.default.invoke(c,"invalidateCache");if(e){var a=d.default.indexOf(c,e.forwardTo);t(d.default.reject(c,function(a){return a===e.forwardTo||a.groupId&&a.groupId===e.forwardTo.groupId}),
function(b){return d.default.indexOf(c,b)<a?"bottom":"top"});e.forwardTo.setScrollTop(Math.min(e.localTop,e.forwardTo.getCachedHeight()))}},destroy:function(){g();m.push(!0);m.end()}}};g.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:page-scrolling-manager', location = '/static/bitbucket/internal/layout/page-scrolling-manager.js' */
define("bitbucket/internal/layout/page-scrolling-manager","module exports aui bacon jquery lodash bitbucket/internal/util/bacon bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/region-scroll-forwarder bitbucket/internal/util/scroll".split(" "),function(w,e,C,D,E,F,G,H,I,J,K){function z(b){var c=b.offset().top,g=0;b.prevAll(".aui-message").each(function(b,c){g+=c.offsetHeight});return c-g}function L(){function c(a){var p=null,b=a;h.takeUntil(f).onValue(function(a){b=
a});a=new M.default(m.default.getWindowScrollProperty(),[{id:"pre",groupId:"outside",setScrollTop:function(a){null===p&&(p=e.offset().top);x(null,a);t.$wrapper.css("top",Math.max(0,a-p));t.$wrapper.hasClass("aui-is-docked")&&0!==a||t.reflow()},getHeight:function(){var a=b.offset().top,p=z(n,r);return a-p}},{id:"in",groupId:"inside",setScrollTop:function(a){b.scroll(null,a)},getHeight:function(){return Infinity}}]);y.takeUntil(f).onValue(a,"heightsChanged");return a}var l=(0,b.default)(window),g=document.body,
r=(0,b.default)(g),n=(0,b.default)("#page"),k=n[0],e=(0,b.default)(".aui-sidebar"),t=A.default.sidebar(e),v=g.style.height;r.addClass("scrolling-forwarded");var f=new d.default.Bus,u=new d.default.Bus,q=new d.default.Bus,h=new d.default.Bus,y=h.sampledBy(d.default.mergeAll(h,u,d.default.interval(1E3).takeUntil(f),m.default.getWindowSizeProperty().changes())).filter(function(a){return!!a}).takeUntil(f).map(".offset").map(function(a){var b=z(n);return{top:Math.round(a.top-b)}}).skipDuplicates(function(a,
b){return a.top===b.top}).toProperty(),B=h.sampledBy(d.default.mergeAll(h,u)).filter(function(a){return!!a}).takeUntil(f).map(".scrollSizing").skipDuplicates(function(a,b){return a.height===b.height&&a.clientHeight===b.clientHeight}).toProperty();d.default.combineWith(function(a,b,c){return a.top+Math.max(b.height,b.clientHeight)+(c.height-b.clientHeight)},y,B,m.default.getWindowSizeProperty()).takeUntil(f).onValue(function(a){r.height(a);N.default.trigger("bitbucket.internal.layout.body.resize")});
var x=O.default.fakeScroll(k);m.default.getWindowScrollProperty().takeUntil(f).onValue(function(a){x(a.left,null)});d.default.combineAsArray(q,y.sampledBy(q),B.sampledBy(q)).map(P.default.spread(function(a,b,c){return{scrollTop:null!=a.scrollTop?b.top+Math.max(0,Math.min(a.scrollTop,c.height-c.clientHeight)):null}})).onValue(function(a){null!=a.scrollTop&&l.scrollTop(a.scrollTop)});var w=h.onValue(function(a){f.onValue(c(a),"destroy");w()});return{setTarget:function(a){h.push(a)},scroll:function(a,
b){q.push({scrollTop:b})},refresh:function(){u.push(!0)},destroyables:[],destroy:function(){Q.default.invoke(this.destroyables,"destroy");this.destroyables=[];r.removeClass("scrolling-forwarded");x(0,0);t.$wrapper.css("top","");g.style.height=v||null;q.end();f.push(!0);f.end();u.end();h.end()}}}Object.defineProperty(e,"__esModule",{value:!0});var A=babelHelpers.interopRequireDefault(C),d=babelHelpers.interopRequireDefault(D),b=babelHelpers.interopRequireDefault(E),Q=babelHelpers.interopRequireDefault(F),
m=babelHelpers.interopRequireDefault(G),N=babelHelpers.interopRequireDefault(H),P=babelHelpers.interopRequireDefault(I),M=babelHelpers.interopRequireDefault(J),O=babelHelpers.interopRequireDefault(K),v=(0,b.default)(window),k=!1,l,c;e.default={_requestScrollControl:function(){function d(){v.scrollTop(Math.min(l,e.offset().top-(0,b.default)("#page").offset().top))}var e;if(!k)return b.default.Deferred().reject({reason:"NOT_ACCEPTING"});if(c)return b.default.Deferred().reject({reason:"CONTROL_TAKEN"});
(0,b.default)("#footer").hide();c=L();c.setTarget=function(b){return function(k){var n=b.apply(this,arguments);e=k;var m=!c;null==l||m||(d(),l=null);return n}}(c.setTarget);c.destroy=function(g){return function(){e&&(l=v.scrollTop(),d());(0,b.default)("#footer").show();c=null;return g.apply(this,arguments)}}(c.destroy);return b.default.Deferred().resolve(c)},acceptScrollForwardingRequests:function(){if(k)throw Error("acceptScrollForwardingRequests has already been called. It must be unregistered before it can be called again.");
k=!0;l=null;return function(){c&&(A.default.log("Scroll control is not yet destroyed. Ongoing scroll requests will be ignored."),c.scrollTo=b.default.noop,c.destroy());k=!1}}};w.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-page-scrolling', location = '/static/bitbucket/internal/util/request-page-scrolling.js' */
define("bitbucket/internal/util/request-page-scrolling",["module","exports","bitbucket/internal/layout/page-scrolling-manager"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return d.default._requestScrollControl()};var d=babelHelpers.interopRequireDefault(c);b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:button-trigger', location = '/static/bitbucket/internal/widget/button-trigger/button-trigger.js' */
define("bitbucket/internal/widget/button-trigger/button-trigger",["module","exports","jquery","lodash"],function(f,c,g,h){function b(a,b){this._opts=d.default.extend({},k,b);this._$trigger=(0,d.default)(a).on(this._opts.triggerEvent,e.default.bind(this.triggerClicked,this))}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h),k={triggerEvent:"click",stopEvent:!0,triggerHandler:function(a,b){throw Error("triggerHandler must be implemented");
}};b.prototype.setTriggerDisabled=function(a){a=void 0===a?!0:!!a;this._$trigger.prop("disabled",a).attr("aria-disabled",a)};b.prototype.isTriggerDisabled=function(){return"true"===this._$trigger.attr("aria-disabled")};b.prototype.setTriggerActive=function(a){this._$trigger.attr("aria-pressed",void 0===a?!0:!!a)};b.prototype.isTriggerActive=function(){return"true"===this._$trigger.attr("aria-pressed")};b.prototype.triggerClicked=function(a){var b=this.isTriggerActive();this.isTriggerDisabled()||this._opts.triggerHandler.apply(this,
[!b].concat(e.default.toArray(arguments)));if(this._opts.stopEvent)return a&&a.stopPropagation&&a.stopPropagation(),!1};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:css-util', location = '/static/bitbucket/internal/util/css.js' */
define("bitbucket/internal/util/css",["module","exports","bitbucket/internal/util/function"],function(f,b,g){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(g),c=[],e=function(){var a=document.createElement("style");a.appendChild(document.createTextNode(""));document.head.appendChild(a);return a.sheet}(),d={chain:function(){var a=[];return{appendRule:function(c){a.push(d.appendRule(c));return this},destroy:function(){h.default.applyAll(a);a=[]}}},appendRule:function(a){var b=
{},d=c.length;c.push(b);e.insertRule(a,d);return function(){var a=c.indexOf(b);-1!==a&&(e.deleteRule(a),c.splice(a,1))}},__sheet:e};b.default=d;f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/blame-source.js' */
define("bitbucket/internal/feature/file-content/file-blame/blame-source","module exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/util/property".split(" "),function(e,c,f,g,h,k,l){function b(a){this._fileChange=a;this._optionsPromise=d.default.Deferred();this._blamePromise=null}Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(f),m=babelHelpers.interopRequireDefault(g),n=babelHelpers.interopRequireDefault(h),p=babelHelpers.interopRequireDefault(k),
q=babelHelpers.interopRequireDefault(l);b.prototype.get=function(){this._blamePromise||(this._blamePromise=d.default.when(this._optionsPromise,q.default.getFromProvider("display.max.source.lines")).then(this._requestBlame.bind(this)));return this._blamePromise};b.prototype.initBlameOptions=function(a){this._optionsPromise.resolve(a)};b.prototype._calculateBlameWindowStart=function(a,b){return Math.max(0,Math.floor((a.firstLine+a.lastLine)/2)-b/2)};b.prototype._requestBlame=function(a,b){return p.default.rest({url:n.default.rest().currentRepo().browse().path(this._fileChange.path).at(this._fileChange.commitRange.untilRevision.id).build(),
data:{blame:!0,noContent:!0,start:a.haveWholeFile?a.firstLine-1:this._calculateBlameWindowStart(a,b),limit:a.haveWholeFile?a.lastLine-a.firstLine+1:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}}).then(m.default.identity)};c.default=b;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/blame-gutter.js' */
define("bitbucket/internal/feature/file-content/file-blame/blame-gutter","module exports jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/bbui/widget/widget bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/util/css bitbucket/internal/util/object".split(" "),function(t,l,u,v,w,x,y,z,A,B){function n(a){var b=p.default.getRepository(),d=p.default.getFilePath().components.join("/");a=a.map(function(c){var a={spannedLines:c.spannedLines,filePath:d,
repository:b,commit:h.default.extend({id:c.commitHash,displayId:c.displayCommitHash},c)},e=[];e[c.lineNumber]=(0,k.default)(bitbucket.internal.feature.fileContent.fileBlameGutterDetailed(a))[0];if(1===c.spannedLines)return{commitId:c.commitHash,els:e};var q=(0,k.default)(bitbucket.internal.feature.fileContent.fileBlameGutterSpan(a))[0];e.push(q);return{commitId:c.commitHash,els:e.concat(h.default.times(c.spannedLines-2,function(){return q.cloneNode(!0)}))}});var e=k.default.extend.apply(k.default,
[[]].concat(h.default.pluck(a,"els"))),e={byLine:e,byCommitId:{},all:h.default.compact(e)};h.default.transform(a,function(a,b){a[b.commitId]=a[b.commitId]?a[b.commitId].concat(h.default.compact(b.els)):h.default.compact(b.els)},e.byCommitId);return e}function C(a,b,d){var e=[];return d.eachLine(function(c){var d,g;switch(c.lineType){case void 0:d=a[c.lineNumber];g=c.handles.SOURCE;break;case m.default.ADDED:d=a[c.line.destination];g=c.handles.TO;break;case m.default.REMOVED:d=b[c.line.source];g=c.handles.FROM;
break;case m.default.CONTEXT:b?(d=b[c.line.source],g=c.handles.FROM):(d=a[c.line.destination],g=c.handles.TO)}e.push([g,"blame",d])}).then(function(){return e})}function f(a,b){r.default.call(this);this._enabled=!1;this._textView=a;this._requestBlame=b;this._pendingChanges=[];var d=this;this._textView.on("change",function(a){d._pendingChanges?d._pendingChanges.push(a):d._fillForChange(a)});this._textView.addContainerClass("blame-disabled");this._textView.registerGutter("blame",{weight:0})}Object.defineProperty(l,
"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(u),h=babelHelpers.interopRequireDefault(v),D=babelHelpers.interopRequireDefault(w),p=babelHelpers.interopRequireDefault(x),r=babelHelpers.interopRequireDefault(y),m=babelHelpers.interopRequireDefault(z),E=babelHelpers.interopRequireDefault(A);babelHelpers.interopRequireDefault(B).default.inherits(f,r.default);f.prototype.setEnabled=function(a){a=Boolean(a);var b;if(this._enabled!==a&&(this._enabled=a,this._enabled===a)){a?(this._textView.removeContainerClass("blame-disabled"),
b=this._fillGutter()):(this._textView.addContainerClass("blame-disabled"),b=k.default.Deferred().resolve());var d=this;b.done(function(){D.default.trigger("bitbucket.internal.feature.fileContent.fileBlameExpandedStateChanged",null,d._enabled)})}return b||k.default.Deferred().resolve()};f.prototype._addHoverBehavior=function(a){function b(a){if(a.target===this&&(a=this.getAttribute("data-commitid"),clearTimeout(g),f!==a)){c&&c();f=a;var b=e[a],d;500>b.length?(b.addClass("commitid-hovered"),d=b.removeClass.bind(b,
"commitid-hovered")):d=E.default.appendRule('.blame.bitbucket-gutter-marker[data-commitid\x3d"'+a+'"] {background-color: #f5f5f5;border-right-color: #3b73af;}');c=function(){d();c=f=null}}}function d(a){a.target===this&&c&&(g=setTimeout(function(){c&&c()},100))}var e=h.default.transform(a.byCommitId,function(a,b,c){a[c]=(0,k.default)(b)},{}),c,f,g;a.all.forEach(function(a){a.addEventListener("mouseenter",b);a.addEventListener("mouseleave",d)});this._addDestroyable(function(){c&&c()})};f.prototype._fillForChange=
function(a){var b=this;C(this._untilBlameElCache&&this._untilBlameElCache.byLine,this._sinceBlameElCache&&this._sinceBlameElCache.byLine,a).done(function(a){b._textView.operation(function(){a.forEach(function(a){a[2]&&b._textView.setGutterMarker.apply(b._textView,a)})})})};f.prototype._fillGutter=function(){if(this._gutterFilled)return k.default.Deferred().resolve();this._gutterFilled=!0;var a=this;return this._requestBlame.get().done(function(b,d){b&&(a._untilBlameElCache=n(b),a._addHoverBehavior(a._untilBlameElCache));
d&&(a._sinceBlameElCache=n(d),a._addHoverBehavior(a._sinceBlameElCache));a._textView.operation(function(){a._pendingChanges.forEach(a._fillForChange.bind(a))});a._pendingChanges=null})};l.default=f;t.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/blame-diff.js' */
define("bitbucket/internal/feature/file-content/file-blame/blame-diff","module exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/model/file-change-types bitbucket/internal/util/property".split(" "),function(m,f,n,p,q,r,t,u){function b(a){this._fileChange=a;this._optionsPromise=c.default.Deferred();this._blamePromise=null}Object.defineProperty(f,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),k=babelHelpers.interopRequireDefault(q),
l=babelHelpers.interopRequireDefault(r),d=babelHelpers.interopRequireDefault(t),v=babelHelpers.interopRequireDefault(u);b.prototype.get=function(){this._blamePromise||(this._blamePromise=c.default.when(this._optionsPromise,v.default.getFromProvider("display.max.source.lines")).then(this._requestBlame.bind(this)));return this._blamePromise};b.prototype.initBlameOptions=function(a){this._optionsPromise.resolve(a)};b.prototype._calculateBlameWindowStart=function(a,c){var e=g.default.chain([a.firstAddedLine,
a.firstRemovedLine]).compact().min().value()-1,d=Math.max(a.lastAddedLine,a.lastRemovedLine)-1;return Math.max(0,Math.floor((e+d)/2)-c/2)};b.prototype._requestBlame=function(a,b){var e=[],f=this._fileChange.type===d.default.MODIFY&&!a.firstAddedLine,h=this._fileChange.type===d.default.MODIFY&&!a.firstRemovedLine;this._fileChange.type===d.default.DELETE||f?e.push(c.default.Deferred().resolve()):e.push(l.default.rest({url:k.default.rest().currentRepo().browse().path(this._fileChange.path).at(a.until).build(),
data:{blame:!0,noContent:!0,start:h?this._calculateBlameWindowStart(a,b):a.firstAddedLine-1,limit:h?b:a.lastAddedLine-a.firstAddedLine+1,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}}).then(g.default.identity));this._fileChange.type===d.default.ADD||h?e.push(c.default.Deferred().resolve()):e.push(l.default.rest({url:k.default.rest().currentRepo().browse().path(this._fileChange.srcPath||this._fileChange.path).at(a.since).build(),data:{blame:!0,noContent:!0,start:this._fileChange.type===
d.default.DELETE?a.firstRemovedLine-1:this._calculateBlameWindowStart(a,b),limit:this._fileChange.type===d.default.DELETE?a.lastRemovedLine-a.firstRemovedLine+1:b,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}}).then(g.default.identity));return c.default.when.apply(c.default,e)};f.default=b;m.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/file-blame.js' */
define("bitbucket/internal/feature/file-content/file-blame/file-blame","module exports aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/file-blame/blame-diff bitbucket/internal/feature/file-content/file-blame/blame-gutter bitbucket/internal/feature/file-content/file-blame/blame-source bitbucket/internal/model/file-change-types bitbucket/internal/model/file-content-modes bitbucket/internal/util/analytics bitbucket/internal/util/promise bitbucket/internal/util/shortcuts bitbucket/internal/widget/button-trigger/button-trigger".split(" "),
function(r,f,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){function L(e,b){var a;if(e.type===k.default.ADD||e.type===k.default.DELETE)a=d.default.first(b.diff.hunks),a={firstAddedLine:a.destinationLine,lastAddedLine:a.destinationSpan,firstRemovedLine:a.sourceLine,lastRemovedLine:a.sourceSpan};else{var c=d.default.chain(b.diff.hunks).map("segments").flatten().reject(d.default.matchesProperty("type",g.default.CONTEXT)).groupBy("type").mapValues(function(a){return d.default.chain(a).map("lines").flatten().value()}).value();
a=c[g.default.ADDED]||[];c=c[g.default.REMOVED]||[];a={firstAddedLine:a.length&&d.default.first(a).destination,lastAddedLine:a.length&&d.default.last(a).destination,firstRemovedLine:c.length&&d.default.first(c).source,lastRemovedLine:c.length&&d.default.last(c).source}}a.since=b.fromHash;a.until=b.toHash;return a}function M(d,b){return{firstLine:b.firstLine,lastLine:b.firstLine+b.linesAdded-1,haveWholeFile:1===b.firstLine&&b.isLastPage}}Object.defineProperty(f,"__esModule",{value:!0});var u=babelHelpers.interopRequireDefault(w),
N=babelHelpers.interopRequireDefault(x),d=babelHelpers.interopRequireDefault(y),l=babelHelpers.interopRequireDefault(z),O=babelHelpers.interopRequireDefault(A),g=babelHelpers.interopRequireDefault(B),P=babelHelpers.interopRequireDefault(C),Q=babelHelpers.interopRequireDefault(D),R=babelHelpers.interopRequireDefault(E),k=babelHelpers.interopRequireDefault(F),m=babelHelpers.interopRequireDefault(G),S=babelHelpers.interopRequireDefault(H),T=babelHelpers.interopRequireDefault(I),U=babelHelpers.interopRequireDefault(J),
V=babelHelpers.interopRequireDefault(K),W={"/browse":"source-view","/diff":"diff-to-previous","/commits/":"commit","/compare":"compare-branch","/pull-requests?create":"create-pullrequest","/pull-requests":"pullrequest"};f.default={init:function(){function e(b,a){function c(a){h.initBlameOptions(f(e,a))}var e=a.fileChange,n=a.$toolbar.find(".file-blame"),h,f,p,g="";a.contentMode===m.default.SOURCE?g="Show blame for this file":a.contentMode===m.default.DIFF&&
(g="Show blame for this diff");n.attr("disabled",!1).attr("aria-disabled",!1).attr("title",g);var k=d.default.once(function(a){var b=O.default.currentRepo().buildAbsolute(),c=d.default.find(W,function(a,c){return d.default.startsWith(location.href,b+c)?a:!1});S.default.add("blame.shown",{type:a,source:c})});if(n.length){if(a.contentMode===m.default.SOURCE)h=new R.default(e),p="bitbucket.internal.feature.fileContent.sourceViewContentLoaded",f=M;else if(a.contentMode===
m.default.DIFF)h=new P.default(e),p="bitbucket.internal.feature.fileContent.diffViewDataLoaded",f=L;else return;l.default.on(p,c);var q=new Q.default(b,h),v=(0,N.default)('\x3cdiv class\x3d"blame-spinner"\x3e\x3c/div\x3e'),t=new V.default(n,{stopEvent:!1,triggerHandler:function(){this.setTriggerActive(!this.isTriggerActive());T.default.spinner(v.insertBefore(n),q.setEnabled(this.isTriggerActive()));k(a.contentMode)}}),r=U.default.bind("showBlame",t.triggerClicked.bind(t));b.on("destroy",function(){r();
v.remove();l.default.off(p,c);d.default.isFunction(q.destroy)&&q.destroy();h=t=q=null})}}l.default.on("bitbucket.internal.feature.fileContent.textViewInitializing",e);return{destroy:function(){l.default.off("bitbucket.internal.feature.fileContent.textViewInitializing",e)}}}};r.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/file-blame-init.js' */
require(["bitbucket/internal/feature/file-content/file-blame/file-blame"],function(a){a.init()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-blame', location = '/static/bitbucket/internal/feature/file-content/file-blame/file-blame.soy' */
// This file was automatically generated from file-blame.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.fileBlameGutterDetailed = function(opt_data, opt_ignored) {
  return '<div class="blame" data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '" data-span="' + soy.$$escapeHtml(opt_data.spannedLines) + '">' + bitbucket.internal.widget.avatar({person: opt_data.commit.author, size: 'xsmall'}) + bitbucket.internal.widget.userLink({user: opt_data.commit.author, extraClasses: 'blame-author secondary-link'}) + bitbucket.internal.feature.commit.link(opt_data) + '<div class="blame-timestamp" title="' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.commit.authorTimestamp, 'full')) + '">' + soy.$$escapeHtml(require('bitbucket/internal/util/time').format(opt_data.commit.authorTimestamp, 'short')) + '</div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileBlameGutterDetailed.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileBlameGutterDetailed';
}


bitbucket.internal.feature.fileContent.fileBlameGutterSpan = function(opt_data, opt_ignored) {
  return '<div class="blame" data-commitid="' + soy.$$escapeHtml(opt_data.commit.id) + '" title="' + soy.$$escapeHtml(opt_data.commit.author.displayName || opt_data.commit.author.name) + '">&nbsp;</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileBlameGutterSpan.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileBlameGutterSpan';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:ediff', location = '/static/bitbucket/internal/bbui/ediff/ediff.js' */
define("bitbucket/internal/bbui/ediff/ediff",["exports"],function(m){function w(h){var d=[],f=void 0;for(t.lastIndex=0;f=t.exec(h);)d.push({start:f.index,value:f[0],end:t.lastIndex});return d}function u(h){var d=h.comparableValue,f=void 0;"string"!==typeof d&&(f=d=h.value,x.lastIndex=0,x.test(f)&&(0===h.start&&(f="\n"+f),-1!==f.indexOf("\n")&&(d=f.replace(C,"\n"))),h.comparableValue=d);return d}function y(h,d,f,b,k){for(var l=f;l<f+b;l++){var c=d.length-1,e=d.length&&d[c],a=h[l];e&&e.end===a.start?
d[c]={start:e.start,end:a.end,type:e.type}:d.push({start:a.start,end:a.end,type:k})}}function z(h,d){var f=[];if(0!==h.length||0!==d.length){var b;a:{b=h.length;var k=d.length,l=b+k+1,c=1+2*l,e=(c+1)/2,a=[];a.length=c;a[e+1]={i:0,j:-1,prev:null,snake:!0};for(c=0;c<l;c++){for(var q=-c;q<=c;q+=2){var m=e+q,n=m+1,r=m-1,g=void 0,p=void 0;q===-c||q!==c&&a[r].i<a[n].i?(p=a[n].i,g=a[n]):(p=a[r].i+1,g=a[r]);a[r]=null;for(var n=p-q,r=p,t=n;g&&0!==g.i&&0!==g.j&&!g.snake&&g.prev;)g=g.prev;for(g={i:r,j:t,prev:g};p<
b&&n<k&&u(h[p])===u(d[n]);)p++,n++;p>g.i&&(g={i:p,j:n,prev:g,snake:!0});a[m]=g;if(p>=b&&n>=k){b=a[m];break a}}a[e+c-1]=null}throw Error("could not find a diff path");}b.snake&&(b=b.prev);for(;b&&b.prev&&0<=b.prev.j;){if(b.snake)throw Error("bad diffpath: found snake when looking for diff");a=b.i;e=b.j;b=b.prev;k=b.i;l=b.j;a-=k;e-=l;f.unshift({from:k,fromCount:a,to:l,toCount:e,type:0===a&&A||0===e&&B||v});b.snake&&(b=b.prev)}}b=[];k=[];l=f.length;e=void 0;for(e=0;e<l;e++)a=f[e],c=a.type,c!==v&&c!==
B||y(h,b,a.from,a.fromCount,c),c!==v&&c!==A||y(d,k,a.to,a.toCount,c);return{originalRegions:b,revisedRegions:k}}Object.defineProperty(m,"__esModule",{value:!0});m.tokenizeString=w;m.getTokensComparableValue=u;m.diff=z;var t=/\w+|\s+|./gim,C=/\n[ \u00a0\t\r]+/mg,x=/\s/m,A="add",B="delete",v="change";m.default={tokenizeString:w,getTokensComparableValue:u,diff:z}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ediff', location = '/static/bitbucket/internal/feature/file-content/ediff/ediff-markers.js' */
define("bitbucket/internal/feature/file-content/ediff/ediff-markers","module exports bacon jquery lodash bitbucket/internal/bbui/ediff/ediff bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/util/bacon bitbucket/internal/util/function".split(" "),function(t,k,u,v,w,x,y,z,A){function B(a,c){var h=l.default.fromBinder(function(b){c.eachLine(b).done(d.default.partial(b,new l.default.End));return C.default.noop});n(h).onValue(function(b){a.markText(b.line,b.from,b.to,
b.options)})}function n(a){var c=e.default.dot("0.line.conflictMarker");return D.default.split(a,e.default.dot("segment")).slidingWindow(2,2).filter(e.default.partialRight(d.default.every,e.default.not(c))).filter(e.default.spread(function(a,b){return a[0].segment.type===p.default.REMOVED&&b[0].segment.type===p.default.ADDED})).flatMap(e.default.spread(function(a,b){function c(b,a){return l.default.fromArray(a).map(function(a){return d.default.extend({},a,{line:b[a.line]})})}var g=E(a[0].segment,
b[0].segment);return c(a,g.from).merge(c(b,g.to))}))}function E(a,c){function h(a){a=d.default.pluck(a.lines,"line").join("\n");return{text:a,tokens:q.default.tokenizeString(a)}}var b=h(c),f=h(a);if(!(750>b.tokens.length&&750>f.tokens.length))return{to:[],from:[]};var g=q.default.diff(f.tokens,b.tokens);return{from:d.default.map(g.originalRegions,d.default.partial(r,f.text)),to:d.default.map(g.revisedRegions,d.default.partial(r,b.text))}}function r(a,c){var d=a.slice(0,c.start),b=a.slice(c.start,
c.end),f=d.lastIndexOf("\n")+1,g=b.lastIndexOf("\n")+1,e=c.start-f,f=c.end-(g?g+c.start:f),d=d.split("\n").length-1,b=b.split("\n").length-1;return{line:d,from:{lineOffset:0,ch:e},to:{lineOffset:b,ch:f},options:{className:"ediff-"+c.type}}}function F(a){a.off("internal-change",m)}Object.defineProperty(k,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),d=babelHelpers.interopRequireDefault(w),q=babelHelpers.interopRequireDefault(x),p=babelHelpers.interopRequireDefault(y),
D=babelHelpers.interopRequireDefault(z),e=babelHelpers.interopRequireDefault(A),m;k.default={init:function(a){m=d.default.partial(B,a.diffView);a.diffView.on("internal-change",m);return{destroy:d.default.partial(F,a.diffView)}},_convertLinesToMarkers:n};t.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view', location = '/static/bitbucket/internal/feature/file-content/diff-view/diff-view.soy' */
// This file was automatically generated from diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.diffView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.diffView == 'undefined') { bitbucket.internal.feature.fileContent.diffView = {}; }


bitbucket.internal.feature.fileContent.diffView.editor = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="diff-editor' + ((opt_data.editorClass) ? ' ' + soy.$$escapeHtml(opt_data.editorClass) : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffView.editor.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffView.editor';
}


bitbucket.internal.feature.fileContent.diffView.lineNumber = function(opt_data, opt_ignored) {
  return '<div class="line-number"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffView.lineNumber.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffView.lineNumber';
}


bitbucket.internal.feature.fileContent.diffView.lineNumberMarker = function(opt_data, opt_ignored) {
  return '<div class="line-number-marker line-locator" data-file-type="" data-line-type="" data-line-number=""></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffView.lineNumberMarker.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffView.lineNumberMarker';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view', location = '/static/bitbucket/internal/feature/file-content/diff-view/diff-view.js' */
define("bitbucket/internal/feature/file-content/diff-view/diff-view","module exports jquery lodash bitbucket/internal/feature/comments/anchors bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/ediff/ediff-markers bitbucket/internal/feature/file-content/text-view/text-view bitbucket/internal/model/direction bitbucket/internal/util/array bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/navigator bitbucket/internal/util/object bitbucket/internal/util/shortcuts".split(" "),
function(L,y,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z){function aa(a,b){return a.concat(b).sort(function(a,b){var e=f.default.first(a.lines),C=f.default.first(b.lines),k=f.default.last(a.lines),d=f.default.last(b.lines);return e.destination-C.destination||e.source-C.source||k.destination-d.destination||k.source-d.source})}function ba(a,b){var c=[];return b.eachLine(function(a){var b=a.line,d=a.handles.FROM,k=a.handles.TO,f=D.clone(),g=D.clone();f.addClass("line-number-from");g.addClass("line-number-to");f.html(a.lineType!==
v?b.source:"\x26nbsp;");g.html(a.lineType!==w?b.destination:"\x26nbsp;");c.push([d||k,"line-number-from",f[0]]);c.push([k||d,"line-number-to",g[0]]);a.handles.all.forEach(function(b){var e=ca.clone();e.attr("data-file-type",b.fileType);e.attr("data-line-type",a.lineType);e.attr("data-line-number",a.lineNumber);e.html(b.lineType===v?"+":b.lineType===w?"-":"\x26nbsp;");c.push([b,"line-number-marker",e[0]])})}).done(function(){a.operation(function(){c.forEach(function(b){a.setGutterMarker.apply(a,b)})});
a._$container.addClass("fully-loaded diff-api-ready");var h=da(b);ea(a,h);"INITIAL"===b.type&&fa(a,h)})}function E(a,b,c,h){var e=x[a];a!==A&&(e+=" modified");if(!0===h||!0===c)e+=" expanded";e+=b?" conflict conflict-"+b.toLowerCase():"";return e+(c?" new":"")}function ga(a,b){var c="INSERT"===b.type,h=[];b.eachLine(function(b){var d=E(b.lineType,b.line.conflictMarker,c,b.attributes.expanded);b.handles.all.forEach(function(b){a.addLineClass(b,"wrap",d);c&&h.push(b)})}).done(function(){h.length&&ha(a,
h)})}function ha(a,b){setTimeout(function(){a._editor&&a.operation(function(){f.default.each(b,function(b,h){a.removeLineClass(b,"wrap","new")})})},1500)}function da(a){a=g.default.extend({},a);delete a.fileChange;return F.default.freeze(a)}function ea(a,b){a.trigger("change",b);l.default.trigger("bitbucket.internal.feature.fileContent.diffViewContentChanged",null,b)}function fa(a,b){a.trigger("load",b);l.default.trigger("bitbucket.internal.feature.fileContent.diffViewContentLoaded",null,b)}function d(a,
b){p.default.call(this,b.$container,b);this._data=a;this._scrollingReady=g.default.Deferred()}function G(a,b,c){var h;void 0!==c._line&&(b=b[c._lineType][c._line].handles,h=b[c._fileType]||b.FROM||b.TO);return{anchor:c,handle:h,offset:h?a.heightAtLine(h._handle.lineNo(),"local"):0}}function H(a,b,c,h){var e=this;this._currAnimationPromise||(this._currAnimationPromise={});this._currAnimationPromise[a]&&f.default.invoke(this._currAnimationPromise[a],"abort");this._currAnimationPromise[a]=h.map(function(h){function d(a,
b){var c=a?"addLineClass":"removeLineClass";u.operation(function(){z.forEach(function(a){u[c](a._handle,"wrap",b)})})}var z=h.handles,u=h.editor;if(!z||!z.length)return g.default.Deferred().reject().promise({abort:g.default.noop});var l=!1,n=g.default.Deferred(),m=g.default.Deferred();n.done(m.resolve.bind(m));var B=f.default.once(function(){u.off("scroll",B);l||(e._$container&&e._$container.attr("data-last-updated",(new Date).getTime()),d(!0,b),n.always(d.bind(null,!1,b)),d(!0,a),m.always(d.bind(null,
!1,a)),setTimeout(m.resolve.bind(m),c))});u.on("scroll",B);setTimeout(B,100);return n.promise({abort:function(){l=!0;n.resolve()}})})}Object.defineProperty(y,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(M),f=babelHelpers.interopRequireDefault(N),ia=babelHelpers.interopRequireDefault(O),I=babelHelpers.interopRequireDefault(P),q=babelHelpers.interopRequireDefault(Q),ja=babelHelpers.interopRequireDefault(R),p=babelHelpers.interopRequireDefault(S),r=babelHelpers.interopRequireDefault(T),
ka=babelHelpers.interopRequireDefault(U),l=babelHelpers.interopRequireDefault(V),t=babelHelpers.interopRequireDefault(W),J=babelHelpers.interopRequireDefault(X),F=babelHelpers.interopRequireDefault(Y),K=babelHelpers.interopRequireDefault(Z),v=q.default.ADDED,w=q.default.REMOVED,A=q.default.CONTEXT,D=(0,g.default)(bitbucket.internal.feature.fileContent.diffView.lineNumber()),ca=(0,g.default)(bitbucket.internal.feature.fileContent.diffView.lineNumberMarker()),x={};x[v]="added";x[w]="removed";x[A]="context";
F.default.inherits(d,p.default);d.defaults=p.default.defaults;d.contentChangeType={INITIAL:"INITIAL",INSERT:"INSERT"};d.prototype.init=function(){p.default.prototype.init.call(this);var a=this._options.diffViewOptions||I.default,b=!J.default.isIE()||11<=J.default.majorVersion();this.registerGutter("line-number-marker",{weight:1E3});this._$container.addClass("diff-type-"+this._options.fileChange.type).toggleClass("hide-ediff",a.get("hideEdiff")).toggleClass("show-whitespace-characters",a.get("showWhitespaceCharacters")).toggleClass("animated",
b);this._editors.map(function(b){return b.setOption("showWhiteSpaceCharacters",a.get("showWhitespaceCharacters"))});(0,g.default)("html").toggleClass("no-cssanimations",!b);var c=this;l.default.trigger("bitbucket.internal.feature.fileContent.diffViewDataLoaded",null,this._data);this.on("internal-change",function(a){ba(c,a).done(function(){c._selectLine(c._options.anchor);var a=c._options.fileChange.search;a&&c._highlight(a)})});this._addDestroyable(ja.default.init({diffView:this}));this._addDestroyable(l.default.chainWith((0,
g.default)(window)).on("scroll",function(){c._expectFocusScroll||c._invalidateFocus();c._expectFocusScroll=!1}));this._addDestroyable(l.default.chainWith(a).on("change",function(a){"hideEdiff"===a.key?c._$container.toggleClass("hide-ediff",a.value):"showWhitespaceCharacters"===a.key&&(c._$container.toggleClass("show-whitespace-characters",a.value),c._editors.map(function(b){return b.setOption("showWhiteSpaceCharacters",a.value)}))}));this.on("internal.acceptedModification",t.default.spread(function(a,
b,c){ga(this,{type:a,eachLine:function(a){return g.default.Deferred().resolve(f.default.map(c,a))}})}));this._options.attachScroll?f.default.defer(function(){c._attachScrollBehavior().then(c._scrollingReady.resolve.bind(c._scrollingReady),c._scrollingReady.reject.bind(c._scrollingReady))}):this._scrollingReady.resolve();this._addDestroyable(l.default.chain().on("bitbucket.internal.feature.diffView.lineChange",this._selectLine.bind(this)).on("bitbucket.internal.feature.diffView.highlightSearch",this._highlight.bind(this)));
this._addDestroyable(K.default.bind("requestSecondaryNext",this._scrollToChange.bind(this,r.default.DOWN)));this._addDestroyable(K.default.bind("requestSecondaryPrevious",this._scrollToChange.bind(this,r.default.UP)))};d.prototype._findNextChange=function(a,b,c){function d(a){return Boolean(a.lines[0].conflictMarker)||e._options.combineLinkedSegments&&a&&a.type!==q.default.CONTEXT}var e=this,f=!1,k=-1;null==a&&(c=r.default.DOWN,f=!0);var g,l=b.length;for(g=0;g<l;g++){var p=c===r.default.DOWN?g:l-
g-1,n=b[p];if(f){var m=b[p-1];if(!(!n||n.type===q.default.CONTEXT||Boolean(n.lines[0].conflictMarker)&&m&&Boolean(m.lines[0].conflictMarker)||e._options.combineLinkedSegments&&m&&m&&m.type!==q.default.CONTEXT)){k=p;break}}else n===a&&(f=!0)}if(-1<k){a=k;for(k+=1;k<b.length&&d(b[k]);)k++;return b.slice(a,k)}return null};d.prototype._selectLine=function(a){a&&(a=this.getLineHandleFromNumber(a.no,a.type))&&(this.scrollHandleIntoFocus(a),this._markLinesFocused([{editor:this._editorForHandle(a),handles:[a]}]))};
d.prototype._scrollToChange=function(a){var b=this._focusedSegments&&this._focusedSegments[0];b||(b=this._$fileToolbar.outerHeight(),b=this._$container[0].getBoundingClientRect().top-b,b=this._getFocusSegment(b));if(a=this._findNextChange(b,this._allSegments,a))this._setFocusSegment(a),this._expectFocusScroll=!0,this._focusedSegments=a};d.prototype._scrollToComment=function(a){I.default.set("hideComments",!1);var b=f.default.chain(this._options.commentContext._containers).pluck("anchor").filter(function(a){return a instanceof
ia.default.LineAnchor}).uniq(t.default.invoke("getId")).value();if(a=this._findNextAnchor(a,b,this._focusedComment))this._expectFocusScroll=!0,this._focusedComment=a,a.handle?(this._highlightCommentForLine(a.handle),this.scrollHandleIntoFocus(a.handle)):this._scrollToSourcePosition(null,-this._editorInnerOffset())};d.prototype._invalidateFocus=function(){this._focusedComment=this._focusedSegments=null};d.prototype._findNextAnchorInEditor=function(a,b,c,d){if(0===b.length)return null;b=f.default.sortBy(b,
t.default.dot("_line"));if(d){var e=ka.default.findIndex(t.default.propEqual(f.default.pick(d.anchor,"_line","_lineType","_fileType")))(b);if(-1!==e)return(c=b[e+(c===r.default.UP?-1:1)])&&G(a,this._internalLines,c)}var g;d?g=d.offset:(d=this._$fileToolbar.outerHeight(),d=this._$container[0].getBoundingClientRect().top-d,e=a.getScrollInfo(),g=e.top+this._options.focusPoint*e.clientHeight-d);a=b.map(G.bind(null,a,this._internalLines));return c===r.default.UP?f.default.find(a.reverse(),function(a){return a.offset<
g}):f.default.find(a,function(a){return a.offset>g})};d.prototype._highlightCommentForLine=function(a){this._markLineCommentsFocused([{editor:this._editorForHandle(a),handles:[a]}])};d.prototype.getLineHandleFromNumber=function(a,b){var c="TO"===b?this._internalLines[v][a]:this._internalLines[w][a];return(c=(c=c||f.default.find(this._internalLines[A],t.default.dotEq("TO"===b?"line.destination":"line.source",a)))&&c.handles)&&(c[b]||c.all[0])};d.prototype._acceptModification=function(){throw Error("DiffView implementation must define this.");
};d._combineTexts=function(a){return f.default.chain(a).pluck("line").pluck("line").value().join(p.default.DEFAULT_LINE_ENDING)};d.prototype._getChangeAttributes=function(a,b){return{diff:b,fileChange:this._options.fileChange}};d.prototype._getLineClasses=E;d.prototype._modifyDiff=function(a,b,c){var d=[].slice.call(arguments,3);this._allSegments=aa(this._allSegments||[],f.default.chain(b.hunks).pluck("segments").flatten(!0).value());this._modify.apply(this,[a,b,c].concat(d))};d.prototype._markLinesFocused=
f.default.partial(H,"line-focused","last-focus",1E3);d.prototype._markLineCommentsFocused=f.default.partial(H,"line-comment-focused","last-comment-focus",1E3);y.default=d;L.exports=y["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:math', location = '/static/bitbucket/internal/util/math.js' */
define("bitbucket/internal/util/math",["module","exports","lodash"],function(h,c,k){function f(a){return function(b){return Math.min(a,b)}}function g(a){return function(b){return Math.max(a,b)}}function d(a,b){if(!(this instanceof d))return new d(a,b);this.x=a;this.y=b}function e(a,b){if(!(this instanceof e))return new e(a,b);this.width=a;this.height=b}Object.defineProperty(c,"__esModule",{value:!0});var l=babelHelpers.interopRequireDefault(k);c.default={add:function(a,b){return a+b},clamp:function(a,
b){return l.default.compose(g(a),f(b))},greaterThan:function(a,b){return a>b},highPass:g,isNegative:function(a){return 0>a},isPositive:function(a){return 0<a},lowPass:f,lessThan:function(a,b){return a<b},multiply:function(a,b){return a*b},Point:d,Size:e};h.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-hunk-map', location = '/static/bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map.js' */
define("bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map","module exports jquery lodash bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/scroll".split(" "),function(k,e,l,m,n,p,q){function a(b,g,a){this.init.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(l),h=babelHelpers.interopRequireDefault(m),t=babelHelpers.interopRequireDefault(n),d=babelHelpers.interopRequireDefault(p),u=
babelHelpers.interopRequireDefault(q),f={CONTEXT:"#ffffff",ADDED:"#97f295",REMOVED:"#ffb6ba",CONFLICT:"#FFF986"};a.prototype.init=function(b,g,a){this.regions=g;this.options=c.default.extend({},a);this.$hunkMap=(0,c.default)(bitbucket.internal.feature.fileContent.diffHunkMap()).appendTo(b);this.hunkMapWidth=this.$hunkMap.width();this.$indicator=(0,c.default)(bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator()).appendTo(this.$hunkMap);this.indicatorScroll=u.default.fakeScroll(this.$indicator[0],
{withDocument:!0});this.addCanvas(d.default.Size(this.hunkMapWidth,this.$hunkMap.height()));this.redraw();if("function"===typeof this.options.scrollToFn)this.$hunkMap.on("click",this._hunkMapClicked.bind(this,this.options.scrollToFn))};a.prototype.setIndicator=function(){var b=this.hunkMapHeight/this.totalHeight*this.hunkMapHeight,a=0===this.hunkMapHeight||b===this.hunkMapHeight;this.$indicator.toggleClass("hidden",a);a||this.$indicator.height(b)};a.prototype.diffScrolled=function(b){this.indicatorScroll(0,
b.top/b.height*this.hunkMapHeight)};a.prototype._hunkMapClicked=function(b,a){var r=a.pageY-this.$hunkMap.offset().top;b(r/this.hunkMapHeight)};a.prototype.mapHeights=function(){var b=h.default.invoke(this.regions,"getHeight"),a=this;this.totalHeight=b.reduce(d.default.add,0);this.hunkMapHeight=Math.min(this.$hunkMap.height(),this.totalHeight);h.default.chain(this.regions).zip(b).forEach(t.default.spread(function(b,c){b.fraction=c/a.totalHeight})).value()};a.prototype.addHunkToMap=function(b,a){if(0===
a.fraction)return b;var c=this.getHunkHeight(a);this.setFillStyle(a._seg.lines[0].conflictMarker?f.CONFLICT:f[a._seg.type]||f.CONTEXT);this.drawHunk(d.default.Point(0,b),d.default.Size(this.hunkMapWidth,c));return b+c};a.prototype.getHunkHeight=function(a){return Math.max(a.fraction*this.hunkMapHeight,1)};a.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.hunkMapWidth,this.hunkMapHeight)};a.prototype.draw=function(){this.$canvas.attr("height",this.hunkMapHeight);this.regions.reduce(this.addHunkToMap.bind(this),
0);this.setIndicator()};a.prototype.redraw=function(){this.clear();this.mapHeights();this.draw()};a.prototype.addCanvas=function(a){this.$canvas=(0,c.default)(bitbucket.internal.feature.fileContent.diffHunkMapCanvas({size:a})).appendTo(this.$hunkMap);this.canvasContext=this.$canvas[0].getContext("2d")};a.prototype.setFillStyle=function(a){this.canvasContext.fillStyle=a};a.prototype.drawHunk=function(a,c){this.canvasContext.fillRect(a.x,a.y,c.width,c.height)};a.prototype.destroy=function(){this.$hunkMap.remove()};
e.default=a;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-hunk-map', location = '/static/bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map.soy' */
// This file was automatically generated from diff-hunk-map.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.diffHunkMap = function(opt_data, opt_ignored) {
  return '<div class="diff-hunk-map"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffHunkMap.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffHunkMap';
}


bitbucket.internal.feature.fileContent.diffHunkMapCanvas = function(opt_data, opt_ignored) {
  return '<canvas width="' + soy.$$escapeHtml(opt_data.size.width) + '" height="' + soy.$$escapeHtml(opt_data.size.height) + '"></canvas>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffHunkMapCanvas.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffHunkMapCanvas';
}


bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator = function(opt_data, opt_ignored) {
  return '<div class="viewport-indicator hidden"></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator.soyTemplateName = 'bitbucket.internal.feature.fileContent.diffHunkMapViewportIndicator';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:line-handle', location = '/static/bitbucket/internal/feature/file-content/line-handle.js' */
define("bitbucket/internal/feature/file-content/line-handle",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b,d,c){this.fileType=a;this.lineType=b;this.lineNumber=d;this._handle=c;c._stashHandle=this};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:synchronized-scroll', location = '/static/bitbucket/internal/util/synchronized-scroll.js' */
define("bitbucket/internal/util/synchronized-scroll","module exports lodash bitbucket/internal/model/direction bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/performance".split(" "),function(F,t,G,H,I,J,K){function k(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._el=a;this._programmatic=!1;return this}function l(a,b){if(!(this instanceof l))return new l(a,b);this._el=b;this._parentScrollable=a;if(!this._parentScrollable._el)throw Error("Regions can't (yet) be created for custom Scrollables. We would need to solve the API problem of where to put a function to get the offset relative to the top of the scrollable.");
return this}function x(a,b){return b}function y(a,b){return a.scrollHeight-a.clientHeight-b}function z(a){return a.scrollHeight-a.clientHeight-a.scrollTop}function L(a,b,c,d,e,h){var A=b.scrollTop!==a.scrollTop,k=b.scrollLeft!==a.scrollLeft;c=f.default.filter(c,function(a){return A&&a.canScrollVertically||k&&a.canScrollHorizontally});if(!c.length)return[];if(!A)return f.default.map(c,function(a){return u(a,null,b.scrollLeft)});var q=b.scrollTop>a.scrollTop?m.default.DOWN:m.default.UP,r=c.concat(b),
p=f.default.filter(r,n.default.dot("canScrollVertically")),l=n.default.binary(Math.max),r=f.default.chain(p).pluck("topness").reduce(l,0).value()*(q===m.default.UP?1:0),p=f.default.chain(p).pluck("bottomness").reduce(l,0).value()*(q===m.default.UP?0:1),g=M(r*r,p*p,q),p=g[1],r=g[2];d=0<g[0]?N(h,b,c,d,e):[];e=0<p?f.default.map(c,q===m.default.UP?B(a,b,C,x):D(a,b,C,x)):[];a=0<r?f.default.map(c,q===m.default.DOWN?B(a,b,z,y):D(a,b,z,y)):[];return f.default.chain(c).zip(f.default.zip(d,e,a)).map(n.default.spread(function(a,
c){var d=a.scrollLeft!==b.scrollLeft;if(!a.canScrollVertically)return u(a,null,d&&a.canScrollHorizontally?b.scrollLeft:null);var h=c.map(n.default.defaultValue(0)).map(v.default.clamp(0,a.scrollHeight)),h=f.default.chain(f.default.zip(h,g)).map(O).reduce(v.default.add,0).value(),e=0<(q===m.default.UP?-1:1)*(h-a.scrollTop);return e||d?u(a,e?h:null,d?b.scrollLeft:null):null})).filter(f.default.identity).value()}function M(a,b,c){var d=Math.max(a,b),e=Math.min(a,b),h=(1-d)*e/(1+e);a=a>b||a===b&&c===
m.default.UP;return[(1-d)/(1+e),a?d:h,a?h:d]}function u(a,b,c){return{scrollable:a.scrollable,scrollTop:b,scrollLeft:c}}function B(a,b,c,d){a=Math.max(c(a),1);var e=(a-c(b))/a;return function(a){var b=Math.max(c(a),1),b=b-e*b;1>b&&(b=0);return d(a,b)}}function D(a,b,c,d){a=c(a);var e=c(b)-a;return function(a){var b=c(a)+e;return d(a,b)}}function N(a,b,c,d,e){var h=b.clientHeight*a;b=d(b.scrollable);var g=P(h,b);b=c.map(function(a){return a.canScrollVertically?E(e(g.region,a.scrollable)):null});var k=
Math.max(0,Math.min(1,(g.offsetTop+g.height-h)/g.height));return f.default.zip(b,c).map(n.default.spread(function(b,c){return c.canScrollVertically?Math.max(0,c.scrollTop+b.offsetTop-(k*b.height+c.clientHeight*a-b.height)):null}))}function P(a,b){var c;f.default.some(b,function(b){b=E(b);var e=b.offsetTop,h=b.height;return a>e&&a<=e+h?(c=b,!0):!1});return c}function E(a){return{region:a,offsetTop:a.getOffsetTop(),height:a.getHeight()}}function g(a){var b=a.getScrollInfo(),b={scrollable:a,clientWidth:b.clientWidth,
clientHeight:b.clientHeight,scrollWidth:b.width,scrollHeight:b.height,scrollTop:b.top,scrollLeft:b.left,canScrollHorizontally:b.clientWidth<b.width,canScrollVertically:b.clientHeight<b.height};a=b.clientHeight/2;b.topness=a?Math.max(0,(a-b.scrollTop)/a):0;b.bottomness=a?Math.max(0,1-(b.scrollHeight-(b.scrollTop+b.clientHeight))/a):0;return b}function w(a){a=f.default.extend({},w.defaults,a);var b=g(a.self),c,d=Q.default.enqueueCapped(requestAnimationFrame,function(){var e=g(a.self),d=f.default.map(a.others,
g),d=L(c,e,d,a.getRegions,a.getLinkedRegion,a.focusHeightFraction);b=e;d.length&&a.executeCommands(d)});return{handle:function(){a.self.getAndUnsetProgrammaticScrollMarker()?b=g(a.self):(c=b,d())},reset:function(){b=g(a.self)}}}Object.defineProperty(t,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(G),m=babelHelpers.interopRequireDefault(H),n=babelHelpers.interopRequireDefault(I),v=babelHelpers.interopRequireDefault(J),Q=babelHelpers.interopRequireDefault(K),O=n.default.spread(v.default.multiply);
k.prototype.getScrollInfo=function(){return{top:this._el.scrollTop,left:this._el.scrollLeft,width:this._el.scrollWidth,height:this._el.scrollHeight,clientWidth:this._el.clientWidth,clientHeight:this._el.clientHeight}};k.prototype.scrollTo=function(a,b){null!=b&&(this._programmatic=!0,this._el.scrollTop=b);null!=a&&(this._programmatic=!0,this._el.scrollLeft=a)};k.prototype.getAndUnsetProgrammaticScrollMarker=function(){var a=this._programmatic;this._programmatic=!1;return a};l.prototype.getHeight=
function(){return this._el.offsetHeight};l.prototype.getOffsetTop=function(){return this._el.getBoundingClientRect().top-this._parentScrollable._el.getBoundingClientRect().top};var C=n.default.dot("scrollTop");w.defaults={self:null,others:null,getRegions:null,getLinkedRegion:null,focusHeightFraction:.5,executeCommands:function(a){f.default.forEach(a,function(a){a.scrollable.scrollTo(a.scrollLeft,a.scrollTop)})}};t.default={getScrollHandler:w,createScrollable:k,createRegion:l};F.exports=t["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:svg-util', location = '/static/bitbucket/internal/util/svg.js' */
define("bitbucket/internal/util/svg",["module","exports","lodash"],function(d,c,f){function a(){this._buffer=[]}Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f);a.prototype.moveTo=function(e,b){this._buffer.push("M",e,b);return this};a.prototype.curve=function(e,b,a,c,h,d){this._buffer.push("C",e,b,a,c,h,d);return this};a.prototype.lineTo=function(a,b){this._buffer.push("L",a,b);return this};a.prototype.close=function(){this._buffer.push("Z");return this};
a.prototype.build=function(){return this._buffer.join(" ")};c.default={svgNS:"http://www.w3.org/2000/svg",createElement:function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);g.default.forEach(b||[],function(a,b){c.setAttribute(b,a)});return c},PathBuilder:a};d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:side-by-side-diff-view', location = '/static/bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view.soy' */
// This file was automatically generated from side-by-side-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.sideBySideDiffView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.sideBySideDiffView == 'undefined') { bitbucket.internal.feature.fileContent.sideBySideDiffView = {}; }


bitbucket.internal.feature.fileContent.sideBySideDiffView.layout = function(opt_data, opt_ignored) {
  return bitbucket.internal.feature.fileContent.diffView.editor({editorClass: 'side-by-side-diff-editor-from'}) + '<div class="segment-connector-column" ></div>' + bitbucket.internal.feature.fileContent.diffView.editor({editorClass: 'side-by-side-diff-editor-to'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.sideBySideDiffView.layout.soyTemplateName = 'bitbucket.internal.feature.fileContent.sideBySideDiffView.layout';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:side-by-side-diff-view', location = '/static/bitbucket/internal/feature/file-content/side-by-side-diff-view/synchronized-scroll.js' */
define("bitbucket/internal/feature/file-content/side-by-side-diff-view/synchronized-scroll","module exports jquery lodash bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/synchronized-scroll".split(" "),function(z,y,A,B,C,D,E,F,G){function H(a){function c(){d&&(d.end=f,d.from.end=b,d.to.end=g,m.push(d))}var d=null,f=0,b=0,g=0,m=[];e.default.forEach(a,function(a){d&&a.segment===
d.segment||(c(),d={segment:a.segment,lineInfos:[],start:f,end:-1,from:{start:b,end:-1,lineInfos:[]},to:{start:g,end:-1,lineInfos:[]}});f++;d.lineInfos.push(a);a.segment.type!==v.default.ADDED&&(b++,d.from.lineInfos.push(a));a.segment.type!==v.default.REMOVED&&(g++,d.to.lineInfos.push(a))});c();return m}function q(a,c){this._id=a;this._editor=c;this._programmatic=!1}function u(a,c,d,e,b,g){this._editor=a;this._startIndex=c;this._endIndex=d;this._numLines=d-c;this._id=e;this._seg=b;this._cachedInfo=
null;this._lineInfos=g}function I(a,c){var d,f,b;return{_linkedRegions:a,_seg:a[0]._seg,_id:"combined_"+e.default.pluck(a,"_id").join("_"),_scrollable:b,_setCombinedScrollable:function(a){this._scrollable=b=a},getHeight:function(){null==d&&(d=a.map(function(a){return a.getHeight()}).reduce(l.default.binary(Math.max),0));return d},_getOffset:function(){null==f&&(f=c());return f},getOffsetTop:function(){return this._getOffset()-b._getScrollTop()},_invalidateCache:function(){f=d=null}}}function J(a,
c){function d(a){g=w.default.clamp(0,c.getScrollHeight()-c.getClientHeight())(a)}this._id=a;var e=l.default.constant(0);c=x.default.extend({initialScrollTop:0,getClientHeight:e,getScrollHeight:e},c);var b=!1,g=c.initialScrollTop,m,p=x.default.Callbacks();this._getScrollTop=function(){return w.default.clamp(0,c.getScrollHeight()-c.getClientHeight())(g)};this.scrollToNative=function(a,b){null!=b&&(d(b),m&&m(),p.fire(a,b,"native"))};this._setScrollHandler=function(a){m=a};this.getScrollInfo=function(){return{top:this._getScrollTop(),
left:0,height:c.getScrollHeight(),width:0,clientHeight:c.getClientHeight(),clientWidth:0}};this.scrollTo=function(a,c){null!=c&&(b=!0,d(c),p.fire(a,c,"sync"))};this.on=function(a,b){"scroll"===a&&p.add(b)};this.getAndUnsetProgrammaticScrollMarker=function(){var a=b;b=!1;return a}}function K(a,c,d,f,b){function g(a,b,c,d,e){return new u(a,b.start,b.end,e+"_"+b.start+"_"+b.end,c,d)}function m(a,b){var c=g(d,a.from,a.segment,a.from.lineInfos,"from"),e=g(f,b.to,b.segment,b.to.lineInfos,"to");h.push(c);
k.push(e)}function p(a){return e.default.invoke.bind(e.default,a,"_invalidateCache")}var h=[],k=[];c=H(c);var n=e.default.reduce(c,function(a,b){if(a&&b.segment.type===v.default.ADDED)return m(a,b),null;a&&m(a,a);if(b.segment.type===v.default.REMOVED)return b;m(b,b);return null},null);n&&m(n,n);var n=e.default.zip(h,k),q=e.default.compose(l.default.partialRight(e.default.reduce,w.default.add,0),l.default.partialRight(e.default.invoke,"getHeight"),e.default.take);b=b.includeCombinedRegions?e.default.reduce(n,
function(a,b,c){c=e.default.partial(q,a,c);a.push(I(b,c));return a},[]):[];var r={};b.length?e.default.chain(h).zip(k,b).forEach(l.default.spread(function(a,b,c){r[a._id]=[b,c];r[b._id]=[a,c];r[c._id]=[a,b]})).value():e.default.forEach(n,l.default.spread(function(a,b){r[a._id]=[b];r[b._id]=[a]}));d.on("change",p(h.concat(b)));f.on("change",p(k.concat(b)));var t=p(h.concat(k,b));(0,x.default)(window).on("resize",t);a.on("widgetAdded",t);a.on("widgetChanged",t);a.on("widgetCleared",t);a.on("internal.acceptedModification",
t);var M=L.default.chain().on("bitbucket.internal.feature.commit.difftree.collapseAnimationFinished",t);return{combinedSegments:c,fromRegions:h,toRegions:k,combinedRegions:b,linkedFromAndToRegions:n,linkedRegionsByRegionId:r,destroy:function(){M.destroy();(0,x.default)(window).off("resize",t)}}}function N(a,c,d,f,b,g){function m(a,b){var c=r(a)||[];return e.default.find(c,l.default.dotEq("_editor",b._editor))}function p(a){a.scrollable.scrollTo(a.scrollLeft,a.scrollTop)}function h(b){a.operation(e.default.forEach.bind(e.default,
b,p));a.trigger("sync-scroll")}function k(a,b,c){var d;c.includeHorizontal?d=h:(d=l.default.partialRight(e.default.map,l.default.unary(l.default.partialRight(e.default.omit,"scrollLeft"))),d=e.default.compose(h,d));return O.default.getScrollHandler({self:a,others:b,getRegions:q,getLinkedRegion:m,executeCommands:d,focusHeightFraction:c.focusHeightFraction})}var n={};n[c._id]=b.fromRegions;n[d._id]=b.toRegions;f&&(n[f._id]=b.combinedRegions);var q=e.default.compose(l.default.lookup(n),l.default.dot("_id")),
r=e.default.compose(l.default.lookup(b.linkedRegionsByRegionId),l.default.dot("_id"));b={includeHorizontal:!0,focusHeightFraction:g.focusHeightFraction};b={fromHandler:k(c,e.default.compact([d,f]),b),toHandler:k(d,e.default.compact([c,f]),b)};f&&(b.combinedHandler=k(f,[c,d],{includeHorizontal:!1,focusHeightFraction:g.focusHeightFraction}));return b}Object.defineProperty(y,"__esModule",{value:!0});var x=babelHelpers.interopRequireDefault(A),e=babelHelpers.interopRequireDefault(B),v=babelHelpers.interopRequireDefault(C),
L=babelHelpers.interopRequireDefault(D),l=babelHelpers.interopRequireDefault(E),w=babelHelpers.interopRequireDefault(F),O=babelHelpers.interopRequireDefault(G);q.prototype.getScrollInfo=function(){return this._editor.getScrollInfo()};q.prototype.scrollTo=function(a,c){this._programmatic=this._programmatic||null!=a||null!=c;this._editor.scrollTo(a,c)};q.prototype.getAndUnsetProgrammaticScrollMarker=function(){var a=this._programmatic;this._programmatic=!1;return a};u.prototype.getHeight=function(){return this._getCachedInfo().height};
u.prototype.getOffsetTop=function(){return this._getCachedInfo().offsetTop-this._editor.getScrollInfo().top};u.prototype._getCachedInfo=function(){if(!this._cachedInfo){this._cachedInfo={height:0,offsetTop:this._editor.heightAtLine(this._startIndex,"local")};if(!this._numLines)return this._cachedInfo;var a=this._editor.heightAtLine(this._endIndex,"local");this._cachedInfo.height=a-this._cachedInfo.offsetTop}return this._cachedInfo};u.prototype._invalidateCache=function(){this._cachedInfo=null};y.default=
{setupScrolling:function(a,c,d,f,b){b=b||{};var g=K(a,c,d,f,{includeCombinedRegions:b.includeCombinedScrollable});c=new q("from",d);var m=new q("to",f),l=0,h;b.includeCombinedScrollable&&(h=new J("combined",{getScrollHeight:function(){return e.default.chain(g.combinedRegions).invoke("getHeight").reduce(w.default.add,0).value()},getClientHeight:function(){return l}}));var k=N(a,c,m,h,g,b);d.on("scroll",k.fromHandler.handle);f.on("scroll",k.toHandler.handle);b={combinedSegments:g.combinedSegments,combinedRegions:g.combinedRegions,
combinedScrollable:h,linkedFromAndToRegions:g.linkedFromAndToRegions,destroy:function(){d.off("scroll",k.fromHandler.handle);f.off("scroll",k.toHandler.handle);g.destroy()}};h&&(h._setScrollHandler(k.combinedHandler.handle),h.setClientHeight=function(a){l=h.clientHeight=a;k.combinedHandler.reset()},e.default.invoke(g.combinedRegions,"_setCombinedScrollable",h),b.combinedScrollable=h);c=e.default.invoke.bind(e.default,k,"reset");a.on("widgetCleared",c);a.on("widgetChanged",c);a.on("widgetAdded",c);
return b}};z.exports=y["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:side-by-side-diff-view', location = '/static/bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view.js' */
define("bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view","module exports jquery lodash bitbucket/internal/feature/file-content/diff-hunk-map/diff-hunk-map bitbucket/internal/feature/file-content/diff-line-info bitbucket/internal/feature/file-content/diff-view-file-types bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/diff-view/diff-view bitbucket/internal/feature/file-content/line-handle bitbucket/internal/feature/file-content/side-by-side-diff-view/synchronized-scroll bitbucket/internal/model/direction bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/math bitbucket/internal/util/object bitbucket/internal/util/performance bitbucket/internal/util/svg bitbucket/internal/feature/file-content/stash-codemirror/search".split(" "),
function(F,t,u,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){function h(a,b){b.combineLinkedSegments=!0;m.default.apply(this,arguments)}function V(a){var b=a&&a._seg;return b&&b.type!==n.default.CONTEXT&&0<a._numLines}function v(a){return a.conflicted||Boolean(a._seg.lines[0].conflictMarker)}function W(a){function b(a){if(!(this instanceof b))return new b(a);this._regions=[a];this.conflicted=!0;this.classesInfo={lineType:a._seg.type,conflictMarker:a._seg.lines[0].conflictMarker};this.getOffsetTop=function(){return this._regions[0].getOffsetTop()};
this.getHeight=function(){return g.default.chain(this._regions).invoke("getHeight").reduce(X.default.add).value()};this.push=function(a){this._regions.push(a)}}return a.reduce(function(a,c){var e=a.previous,f=e&&g.default.some(e,v),q=g.default.some(c,v);if(q&&f)return g.default.forEach(e,function(a,b){a.push(c[b])}),a;q&&(c=g.default.map(c,b));a.previous=c;a.regions.push(c);return a},{previous:null,regions:[]}).regions.filter(function(a){return a.some(l.default.or(V,v))})}function Y(a,b,d){function c(a,
b){if(a.region.classesInfo)return a.region.classesInfo;var c=a.region._lineInfos[0],d=b.region._lineInfos[0];return c?{conflictMarker:c.line.conflictMarker,lineType:c.lineType}:{conflictMarker:null,lineType:d.lineType}}var e,f=b.offsetHeight||parseFloat((e=window.getComputedStyle(b)).height);e=b.offsetWidth||parseFloat(e.width);var q=e+1,r=.4*e,y=.6*e;for(a=a.map(function(a){return a.map(function(a){var b=a.getOffsetTop(),c=b+a.getHeight();return{region:a,top:b+.5,bottom:c+.5,above:0>b,inside:0<c&&
b<f,below:c>f}})}).filter(function(a){return a.some(l.default.dot("inside"))||a.some(l.default.dot("above"))&&a.some(l.default.dot("below"))}).map(l.default.spread(function(a,b){var e=(new p.default.PathBuilder).moveTo(-1,a.top).curve(r,a.top,y,b.top,q,b.top).lineTo(q,b.bottom).curve(y,b.bottom,r,a.bottom,-1,a.bottom).close().build(),f;f=c(a,b);var h=c(b,a);f=d(f.lineType,f.conflictMarker,!1)+" "+d(h.lineType,h.conflictMarker,!1);f=g.default.unique(f.split(/\s+/)).join(" ");return{path:e,extraClasses:f}}));b.hasChildNodes();)b.removeChild(b.firstChild);
e=g.default.once(function(a){var b=[{"class":"removed",offset:"0%"},{"class":"removed",offset:"30%"},{"class":"added",offset:"70%"},{"class":"added",offset:"100%"}],b=g.default.map(b,p.default.createElement.bind(p.default,"stop"));return g.default.reduce(b,function(a,b){a.appendChild(b);return a},p.default.createElement("linearGradient",{id:a}))});a=a.map(function(a){var b={"class":"segment-connector "+a.extraClasses,d:a.path};a=a.extraClasses;-1!==a.indexOf("added")&&-1!==a.indexOf("removed")&&(b.fill=
"url(#added-and-removed-svg-gradient)");return p.default.createElement("path",b)}).concat(e("added-and-removed-svg-gradient")).reduce(function(a,b){a.appendChild(b);return a},document.createDocumentFragment());b.appendChild(a)}Object.defineProperty(t,"__esModule",{value:!0});var z=babelHelpers.interopRequireDefault(u),g=babelHelpers.interopRequireDefault(G),A=babelHelpers.interopRequireDefault(H),Z=babelHelpers.interopRequireDefault(I),k=babelHelpers.interopRequireDefault(J),n=babelHelpers.interopRequireDefault(K),
m=babelHelpers.interopRequireDefault(L),aa=babelHelpers.interopRequireDefault(M),ba=babelHelpers.interopRequireDefault(N),B=babelHelpers.interopRequireDefault(O),w=babelHelpers.interopRequireDefault(P),l=babelHelpers.interopRequireDefault(Q),X=babelHelpers.interopRequireDefault(R);u=babelHelpers.interopRequireDefault(S);var C=babelHelpers.interopRequireDefault(T),p=babelHelpers.interopRequireDefault(U),D=n.default.ADDED,ca=n.default.CONTEXT,E=n.default.REMOVED;u.default.inherits(h,m.default);h.defaults=
m.default.defaults;h.prototype.init=function(){var a=this;if(this._$container){this._$container.addClass("side-by-side-diff");this._$container.append(bitbucket.internal.feature.fileContent.sideBySideDiffView.layout());this.fromEditorEl=this._$container.find(".side-by-side-diff-editor-from");this.toEditorEl=this._$container.find(".side-by-side-diff-editor-to");var b=this._options.commentContext&&this._options.commentContext.getGutterId();b&&this.registerGutter(b,{weight:100});this.registerGutter("line-number-from",
{weight:200,fileType:k.default.FROM});this.registerGutter("line-number-to",{weight:200,fileType:k.default.TO});this._fromEditor=this._createEditor({gutterFilter:function(a){return!a.fileType||a.fileType===k.default.FROM}},this.fromEditorEl);this._toEditor=this._createEditor({gutterFilter:function(a){return!a.fileType||a.fileType===k.default.TO}},this.toEditorEl);var b=l.default.dot("hunks.0.segments.0")(this._data.diff),d=l.default.dot("hunks.0.segments.0.lines.0.line")(this._data.diff),c=l.default.dot("hunks.0.segments.1.lines.0.line")(this._data.diff),
e=b.type===D?c:d,f=l.default.dot("srcPath.name")(this._options.fileChange)?this._options.fileChange.srcPath.name:this._options.fileChange.path.name;this._syntaxHighlighting(f,e,this._fromEditor);this._syntaxHighlighting(this._options.fileChange.path.name,b.type===E&&c?c:d,this._toEditor);this._lineInfos=Z.default.convertToLineInfos(this._data.diff,this._options);this._scrollingReady.always(function(){a._fromEditor&&(a._modifyDiff("INITIAL",a._data.diff,a._lineInfos),a._setupFindScrollIntoViewFunction(a._fromEditor,
k.default.FROM),a._setupFindScrollIntoViewFunction(a._toEditor,k.default.TO))});this.on("internal-load",function(){this._syncScrollingInfo&&(this.setupHunkmaps(this._syncScrollingInfo.linkedFromAndToRegions),this._initSegmentLinking(this._syncScrollingInfo.linkedFromAndToRegions),this.on("internal-change",function r(){this._whenOpDone(this._scrollEditorToFirstChange.bind(this));this.off("internal-change",r)}))});b=this.refresh.bind(this);w.default.on("bitbucket.internal.feature.sidebar.expandEnd",
b);w.default.on("bitbucket.internal.feature.sidebar.collapseEnd",b);w.default.on("bitbucket.internal.feature.commit.difftree.collapseAnimationFinished",b);m.default.prototype.init.call(this)}};h.prototype.destroy=function(){m.default.prototype.destroy.call(this);this._toEditor=this._fromEditor=null};h.prototype._acceptModification=function(a,b,d){function c(a,b,c){var d;g.default.forEach(a,function(a,e){var g=b.getLineHandle(e);a._setHandle(c,new aa.default(c,a.lineType,a.lineNumber,g));d&&d.segment!==
a.segment&&d.lineType===n.default.CONTEXT&&a.lineType===n.default.CONTEXT&&b.addLineClass(g,"wrap","paired-with-change");d=a})}if("INITIAL"!==a)throw Error("Unrecognized change type: "+a);a=g.default.filter(d,function(a){return a.lineType!==D});d=g.default.filter(d,function(a){return a.lineType!==E});this._fromEditor.setValue(m.default._combineTexts(a));this._toEditor.setValue(m.default._combineTexts(d));c(a,this._fromEditor,k.default.FROM);c(d,this._toEditor,k.default.TO)};var x={};x[k.default.FROM]=
"_fromEditor";x[k.default.TO]="_toEditor";h.prototype._editorForHandle=function(a){return this[x[a.fileType]]};h.prototype._getFocusSegment=function(a){var b=this._fromEditor.getScrollInfo().clientHeight*this._options.focusPoint;if(a>b)return null;var d=b+this._syncScrollingInfo.combinedScrollable._getScrollTop()-a+1,d=Math.ceil(d);return(g.default.find(this._syncScrollingInfo.combinedRegions,function(a){return a._getOffset()<=d&&a._getOffset()+a.getHeight()>d})||g.default.last(this._syncScrollingInfo.combinedRegions))._seg};
h.prototype._setFocusSegment=function(a){function b(a,b){return g.default.compact(a.map(function(a){return a.handles[b]}))}var d=g.default.filter(this._syncScrollingInfo.combinedRegions,function(b){return g.default.contains(a,b._seg)}),c=this._fromEditor.getScrollInfo().clientHeight*this._options.focusPoint;this._scrollToSourcePosition(null,d[0]._getOffset()-c);var e=g.default.chain(d).pluck("_linkedRegions").flatten().pluck("_lineInfos").flatten().uniq().value(),f=this;this.operation(function(){f._markLinesFocused([{editor:f._fromEditor,
handles:b(e,k.default.FROM)},{editor:f._toEditor,handles:b(e,k.default.TO)}])})};h.prototype._findNextAnchor=function(a,b,d){var c=g.default.groupBy(b,l.default.dot("_fileType"));b=c.FROM&&this._findNextAnchorInEditor(this._fromEditor,c.FROM,a,d);d=c.TO&&this._findNextAnchorInEditor(this._toEditor,c.TO,a,d);return b&&d?a===B.default.UP&&d.offset<b.offset||a===B.default.DOWN&&d.offset>=b.offset?b:d:b||d||null};h.prototype.setupHunkmaps=function(a){function b(a,b,c){var f=a.getScrollInfo(),h=Math.max(0,
f.height*c-f.clientHeight*e);a=g.default.findIndex(b,function(a){var b=f.top+a.getOffsetTop();return b<=h&&b+a.getHeight()>h});b=b[a];a=d._syncScrollingInfo.combinedRegions[a];c=d._syncScrollingInfo.combinedScrollable.getScrollInfo();b=(h-(f.top+b.getOffsetTop()))/b.getHeight();b=c.top+a.getOffsetTop()+b*a.getHeight();d._scrollToSourcePosition(0,b)}var d=this,c=a.map(g.default.first);a=a.map(g.default.last);var e=this._options.focusPoint,f=new A.default(this.fromEditorEl,c,{scrollToFn:g.default.partial(b,
this._fromEditor,c)}),h=new A.default(this.toEditorEl,a,{scrollToFn:g.default.partial(b,this._toEditor,a)}),c=g.default.debounce(g.default.invoke.bind(g.default,[f,h],"redraw"),100);this._addDestroyable(f);this._addDestroyable(h);this.on("widgetAdded",c);this.on("widgetChanged",c);this.on("widgetCleared",c);this.on("resize",c);this._fromEditor.on("scroll",function(a){f.diffScrolled(a.getScrollInfo())});this._toEditor.on("scroll",function(a){h.diffScrolled(a.getScrollInfo())});this._addDestroyable(function(){d._fromEditor=
null;d._toEditor=null})};h.prototype._attachScrollBehavior=function(){var a=this,b=this._fromEditor,d=this._toEditor,c=this._lineInfos;if(!b)return z.default.Deferred().reject();var e=ba.default.setupScrolling(this,c,b,d,{includeCombinedScrollable:!0,focusHeightFraction:a._options.focusPoint});this._syncScrollingInfo=e;var f=a._$container.children(".diff-editor, .segment-connector-column"),g,b=this._requestWindowScrolls({scrollSizing:function(){return e.combinedScrollable.getScrollInfo()},scroll:function(a,
b){null!=b&&e.combinedScrollable.scrollToNative(null,b)},resize:function(b,c){g!==c&&(g=c,e.combinedScrollable.setClientHeight(c),f.height(c),a.refresh())},onSizeChange:function(b){a.on("resize",b)}});this._addDestroyable(e);return b};h.prototype._initSegmentLinking=function(a){var b=(0,z.default)(".segment-connector-column"),d=p.default.createElement("svg",{});b.append(d);var c=Y.bind(null,W(a),d,this._getLineClasses);a=C.default.enqueueCapped(requestAnimationFrame,function(){d.setAttribute("height",
b.height());d.setAttribute("width",b.width());c()});var e=C.default.enqueueCapped(requestAnimationFrame,c);this.on("sync-scroll",c);this.on("widgetAdded",e);this.on("widgetChanged",e);this.on("widgetCleared",e);this.on("resize",a);a()};h.prototype.scrollHandleIntoFocus=function(a){var b=this._editorForHandle(a),d=b.getScrollInfo(),c=a.fileType===k.default.FROM?0:1;a.lineType===ca&&a.fileType===k.default.TO&&(b=this._fromEditor,c=0);var e=g.default.findIndex(this._syncScrollingInfo.linkedFromAndToRegions,
function(b){return b[c]._startIndex<=a.lineNumber&&b[c]._endIndex>a.lineNumber}),f=this._syncScrollingInfo.linkedFromAndToRegions[e][c],e=this._syncScrollingInfo.combinedRegions[e],f=b.heightAtLine(a.lineNumber)-b.heightAtLine(f._startIndex),f=this._syncScrollingInfo.combinedScrollable.getScrollInfo().top+e.getOffsetTop()+f;this._scrollToFocusedOffset(f,d,b)};h.prototype._setupFindScrollIntoViewFunction=function(a,b){var d=this;a.setOption("scrollLineIntoViewFunc",function(a){d.scrollHandleIntoFocus(d.getLineHandleFromNumber(a.from.line,
b))})};h.prototype._scrollEditorToFirstChange=function(){var a=this._findNextChange(null,this._allSegments);a&&this._setFocusSegment(a)};t.default=h;F.exports=t["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-type', location = '/static/bitbucket/internal/feature/file-content/diff-view-type.js' */
define("bitbucket/internal/feature/file-content/diff-view-type",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var b=a.EFFECTIVE="EFFECTIVE",c=a.COMMON_ANCESTOR="COMMON_ANCESTOR";a.default={EFFECTIVE:b,COMMON_ANCESTOR:c}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:skipped-container', location = '/static/bitbucket/internal/feature/file-content/skipped-container/skipped-container.soy' */
// This file was automatically generated from skipped-container.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.skippedContainer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="skipped-container' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.hasContentAbove) ? '<div class="content-above"></div>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.canShowMore) ? '<div class="showmore" title="' + soy.$$escapeHtml(opt_data.showMoreTooltip) + '">' + ((opt_data.hasContentAbove && opt_data.hasContentBelow) ? '<span>' + soy.$$escapeHtml('Show more') + '</span>' : '') + '</div>' : '') + ((opt_data.hasContentBelow) ? '<div class="content-below"></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.skippedContainer.soyTemplateName = 'bitbucket.internal.feature.fileContent.skippedContainer';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-context', location = '/static/bitbucket/internal/feature/file-content/diff-view-context/diff-view-context-internal.js' */
define("bitbucket/internal/feature/file-content/diff-view-context/diff-view-context-internal","module exports jquery lodash bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/model/file-change-types bitbucket/internal/util/function".split(" "),function(r,m,t,u,v,w,x){Object.defineProperty(m,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(t),h=babelHelpers.interopRequireDefault(u),f=babelHelpers.interopRequireDefault(v),p=babelHelpers.interopRequireDefault(w),
y={destinationLine:1,destinationSpan:0,sourceLine:1,sourceSpan:0},q=babelHelpers.interopRequireDefault(x).default.eq(f.default.ADDED);m.default={getSeparatedHunkHtml:function(b,e,k){function d(a){return{line:g?a.destinationLine:a.sourceLine,span:g?a.destinationSpan:a.sourceSpan,isLastPage:a.isLastPage}}var c;a:switch(e){case p.default.ADD:c=f.default.ADDED;break a;case p.default.DELETE:c=f.default.REMOVED;break a;default:c=f.default.CONTEXT}var g=q(c);e=h.default.map(h.default.zip([y].concat(b),b.concat({})),
function(a){var b=d(a[0]),l=d(a[1]),z=1<l.line,e=0<b.span,b=b.line+b.span,l=l.line-1;g?a=0:(a=a[0],a=a.sourceLine+a.sourceSpan-(a.destinationLine+a.destinationSpan));return k(b,l,a,c,z,e)});return b[b.length-1].isLastPage?e.slice(0,e.length-1):e},fetchContext:function(b,e,k,d,c){function g(a,b,d){return a&&h.default.extend({},a,{lines:a.lines.slice(b,d)})}var a=isNaN(e)?c.maxLimit:e-b+1,f=function(c){return n.default.when(0===b?null:c(b,d+(e?0:1)),e?c(b+a-d,d):null).then(function(a,b){if(!b){var c=
a.lines.length>d;return{startSep:a.start+a.lines.length+(c?-1:0),contexts:c?[g(a,0,-1),null]:[a]}}return a?{startSep:a.start+d,endSep:b.start,contexts:[a,b]}:{startSep:0,endSep:b.start,contexts:[null,b]}})};return a<c.maxLimit?k(b,a).then(function(b){return a<=2*d?n.default.Deferred().resolve({startSep:0,endSep:0,contexts:[b]}):f(function(a){return n.default.Deferred().resolve({start:a,lines:b.lines})}).then(function(a){return h.default.extend({},a,{contexts:[g(a.contexts[0],0,d),g(a.contexts[1],
-d)]})})}):f(k)},toHunks:function(b,e){return function(f){var d=[];h.default.each(f.contexts,function(c){c&&d.push({segments:[{type:e,lines:h.default.map(c.lines,function(b){return{line:b.text}})}],sourceLine:c.start+1,destinationLine:c.start+1-b,isLastPage:c.isLastPage})});return d.length?d:""}},isAdded:q};r.exports=m["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-context', location = '/static/bitbucket/internal/feature/file-content/diff-view-context/diff-view-context.js' */
define("bitbucket/internal/feature/file-content/diff-view-context/diff-view-context","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/file-content/diff-view-context/diff-view-context-internal bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/model/file-change bitbucket/internal/util/ajax bitbucket/internal/util/dom-event bitbucket/internal/util/navigator".split(" "),function(f,h,d,a,k,l,u,v,w,x,y,z){function A(n,c,b,d,a,r){return a||r?
bitbucket.internal.feature.fileContent.hunkSeparator({tooltip:B,lineStart:n,lineEnd:c,destOffset:b,changeType:d,isBelow:a,isAbove:r}):""}Object.defineProperty(h,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var C=babelHelpers.interopRequireDefault(a),D=babelHelpers.interopRequireDefault(k),t=babelHelpers.interopRequireDefault(l),p=babelHelpers.interopRequireDefault(u),E=babelHelpers.interopRequireDefault(v),F=babelHelpers.interopRequireDefault(w),G=babelHelpers.interopRequireDefault(x),
H=babelHelpers.interopRequireDefault(y);a=babelHelpers.interopRequireDefault(z);var B=a.default.isMac()?"Click to reveal a few more lines\nCmd + Click to reveal them all":"Click to reveal a few more lines\nCtrl + Click to reveal them all";k=t.default.parse(location.href).getQueryParamValue("context");var g={maxLimit:a.default.isIE()?1E3:5E3,maxContext:k&&parseInt(k,10)||10};h.default={attachExpandContext:function(a,c){var b=c.fileChange,d=c.expansionCallback,k=c.diffViewType,b=new F.default(b);
return a.on("click",".skipped-container:not(.loading)",function(a){a.preventDefault();var e=(0,C.default)(a.currentTarget);e.addClass("loading");e.find(".showmore span").html("\x26nbsp;");var c=e.find(".showmore").spin("small"),h=e.data("change-type"),n=e.data("dest-offset");a=H.default.isCtrlish(a)?g.maxLimit-1:g.maxContext;var f=e.data("line-start")-1,l=e.data("line-end")-1;p.default.fetchContext(f,l,function(a,d){var q=a,f=b.getDiff()&&b.getDiff().properties||{},l=b.getCommitRange().getSinceRevision(),
g=b.getCommitRange().getUntilRevision(),m=void 0;p.default.isAdded(h)?m=f.toHash||g.getId():f.fromHash?m=f.fromHash:k===E.default.EFFECTIVE?m=l&&l.getId()||g.getParents()[0].getId():(m=g.getId(),q-=n);return G.default.rest({statusCode:{200:function(a,b,d,c){if(c&&c.message&&0<c.message.replace(/,/g,"").indexOf(" "+q+" "))return{promise:function(){return{lines:[]}}}}},url:t.default.rest().currentRepo().browse().path(b.getSrcPath()&&""!==b.getSrcPath().toString()?b.getSrcPath():b.getPath()).at(m).withParams({start:q,
limit:d}).build()}).then(function(b){b.start=a;return b}).always(function(){c.spinStop()}).fail(function(){e.removeClass("loading")})},a,g).then(p.default.toHunks(n,h)).then(D.default.bind(d,null,b,e))})},getSeparatedHunkHtml:function(a,c){return p.default.getSeparatedHunkHtml(a,c,A)}};f.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-view-context', location = '/static/bitbucket/internal/feature/file-content/diff-view-context/diff-view-context.soy' */
// This file was automatically generated from diff-view-context.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.hunkSeparator = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.skippedContainer({hasContentAbove: opt_data.isAbove, hasContentBelow: opt_data.isBelow, canShowMore: true, showMoreTooltip: opt_data.tooltip, extraAttributes: 'data-line-start="' + soy.$$escapeHtml(opt_data.lineStart) + '"' + ((opt_data.lineEnd) ? ' data-line-end="' + soy.$$escapeHtml(opt_data.lineEnd) + '"' : '') + ' data-dest-offset="' + soy.$$escapeHtml(opt_data.destOffset) + '" data-change-type="' + soy.$$escapeHtml(opt_data.changeType) + '" data-below="' + soy.$$escapeHtml(opt_data.isBelow) + '" data-above="' + soy.$$escapeHtml(opt_data.isAbove) + '"'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.hunkSeparator.soyTemplateName = 'bitbucket.internal.feature.fileContent.hunkSeparator';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:unified-diff-view', location = '/static/bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view.soy' */
// This file was automatically generated from unified-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.unifiedDiffView.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.unifiedDiffView == 'undefined') { bitbucket.internal.feature.fileContent.unifiedDiffView = {}; }


bitbucket.internal.feature.fileContent.unifiedDiffView.layout = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.diffView.editor(null);
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.unifiedDiffView.layout.soyTemplateName = 'bitbucket.internal.feature.fileContent.unifiedDiffView.layout';
}


bitbucket.internal.feature.fileContent.unifiedDiffView.lineNumbers = function(opt_data, opt_ignored) {
  return '<div class="diff-line-numbers" data-line-type="' + soy.$$escapeHtml(opt_data.lineType) + '" data-line-number="' + soy.$$escapeHtml(opt_data.lineNum) + '"><span class="from">' + soy.$$escapeHtml(opt_data.fromLine) + '</span><span class="to">' + soy.$$escapeHtml(opt_data.toLine) + '</span>' + ((opt_data.marker) ? '<span class="diff-change-marker">' + soy.$$escapeHtml(opt_data.marker) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.unifiedDiffView.lineNumbers.soyTemplateName = 'bitbucket.internal.feature.fileContent.unifiedDiffView.lineNumbers';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:unified-diff-view', location = '/static/bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view.js' */
define("bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view","module exports jquery lodash bitbucket/internal/feature/file-content/diff-line-info bitbucket/internal/feature/file-content/diff-view-context/diff-view-context bitbucket/internal/feature/file-content/diff-view-file-types bitbucket/internal/feature/file-content/diff-view-segment-types bitbucket/internal/feature/file-content/diff-view/diff-view bitbucket/internal/feature/file-content/line-handle bitbucket/internal/feature/file-content/text-view/attach-simple-scroll-behavior bitbucket/internal/model/file-change-types bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/object bitbucket/internal/feature/file-content/stash-codemirror/search".split(" "),
function(x,k,y,z,A,B,C,D,E,F,G,H,I,J,K){function L(a){var b=a.destinationLine,c=a.sourceLine;a.segments[0].lines=g.default.map(a.segments[0].lines,function(a){a.destination=b++;a.source=c++;return a});return a}function M(a,b){if(b.linesAdded){var c=b.diff,e=n.default.getSeparatedHunkHtml(c.hunks,a._options.fileChange.type),d,h=[],m,f;b.eachLine(function(a){var b=a.handles.FROM||a.handles.TO;a.hunk!==f&&(f=a.hunk,h.push(b));m=b}).done(function(){switch(b.type){case "INSERT":var f=a._editor.getLineNumber(h[0]._handle),
k=0===f,l=a._editor.lastLine()-b.linesAdded,f=f>l;1<c.hunks.length?(h.shift(),e.shift(),e.pop(),m=void 0):(k||(h.shift(),e.shift()),f?d=e.pop():(e.pop(),m=void 0));break;case "INITIAL":h.length===e.length-1&&(d=e.pop());break;default:throw Error("Unrecognized change type: "+b.type);}a.operation(function(){g.default.each(g.default.zip(e,h),p.default.spread(g.default.partial(q,a,!0)));d&&!a._isEntireFile()&&q(a,!1,d,m)})})}}function q(a,b,c,e){if(c){c=(0,r.default)(c);var d=a.addLineWidget(e,c[0],{coverGutter:!0,
noHScroll:!0,above:b});b&&a.addLineClass(e,"wrap","first-line-of-hunk");c.data("widget",d)}}function N(a){a&&a.clear()}function t(a,b){return{lineNumber:a===l.default.ADDED?b.destination:b.source,lineType:a}}function d(a,b){f.default.apply(this,arguments)}Object.defineProperty(k,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(y),g=babelHelpers.interopRequireDefault(z),u=babelHelpers.interopRequireDefault(A),n=babelHelpers.interopRequireDefault(B),v=babelHelpers.interopRequireDefault(C),
l=babelHelpers.interopRequireDefault(D),f=babelHelpers.interopRequireDefault(E),O=babelHelpers.interopRequireDefault(F),P=babelHelpers.interopRequireDefault(G),w=babelHelpers.interopRequireDefault(H),Q=babelHelpers.interopRequireDefault(I),p=babelHelpers.interopRequireDefault(J);babelHelpers.interopRequireDefault(K).default.inherits(d,f.default);d.defaults=f.default.defaults;d.prototype.init=function(){if(this._$container){var a=this;this._$container.addClass("unified-diff");this.on("internal-change",
g.default.partial(M,this));this._options.isExcerpt||n.default.attachExpandContext(this._$container,{fileChange:this._options.fileChange,expansionCallback:this._expandContextLines,diffViewType:this._options.diffViewType});this._$container.append(bitbucket.internal.feature.fileContent.unifiedDiffView.layout());var b=this._options.commentContext&&this._options.commentContext.getGutterId();b&&this.registerGutter(b,{weight:100});this.registerGutter("line-number-from",{weight:200});this.registerGutter("line-number-to",
{weight:300});this.registerGutter("gutter-border",{weight:1500});this._editor=this._createEditor({},this._$container.children(".diff-editor"));this._isEntireFile()&&(b=p.default.dot("hunks.0.segments.0.lines.0.line")(this._data.diff),this._syntaxHighlighting(this._options.fileChange.path.name,b,this._editor));this._addDestroyable(function(){a._editor=null});this._scrollingReady.always(function(){a._editor&&(a._editor.setOption("scrollLineIntoViewFunc",function(b){b=a._editor.getLineHandle(b.from.line)._stashHandle;
a.scrollHandleIntoFocus(b)}),a._modifyDiff("INITIAL",a._data.diff,u.default.convertToLineInfos(a._data.diff,a._options)))});f.default.prototype.init.call(this)}};d.prototype._acceptModification=function(a,b,c,e){e=e||0;var d=this._editor;b=f.default._combineTexts(c);switch(a){case "INITIAL":d.setValue(b);break;case "INSERT":d._insert(b,e,!0);break;default:throw Error("Unrecognized change type: "+a);}g.default.each(c,function(a,b){var c=new O.default(void 0,a.lineType,a.lineNumber,d.getLineHandle(b+
e));a.lineType!==l.default.ADDED&&a._setHandle(v.default.FROM,c);a.lineType!==l.default.REMOVED&&a._setHandle(v.default.TO,c)})};d.prototype._getFocusSegment=function(a){var b=this._editor,c=b.getScrollInfo();a=Math.ceil(c.clientHeight*this._options.focusPoint)-Math.floor(a);if(0>a)return null;c=Math.min(b.lastLine(),b.lineAtHeight(c.top+a+1,"local"));b=b.getLineHandle(c);return(b=this._internalLines[b._stashHandle.lineType][b._stashHandle.lineNumber])&&b.segment};d.prototype._setFocusSegment=function(a){var b=
a[0];this.scrollHandleIntoFocus(this.getLineHandle(t(b.type,b.lines[0])));a=g.default.chain(a).pluck("lines").flatten().map(t.bind(null,b.type)).map(this.getLineHandle).value();this._markLinesFocused([{editor:this._editor,handles:a}])};d.prototype._getFocusLine=function(){var a=this._editor,b=a.getScrollInfo(),c=this._$fileToolbar&&this._$fileToolbar.outerHeight(),c=this._$container[0].getBoundingClientRect().top-c,d=Math.ceil(b.clientHeight*this._options.focusPoint)-(this._editorInnerOffset()-Math.abs(c)),
c=0>=c?d:0,b=Math.min(a.lastLine(),a.lineAtHeight(b.top+c+1,"local"));return a.getLineHandle(b)._stashHandle};d.prototype._findNextAnchor=function(a,b,c){return this._findNextAnchorInEditor(this._editor,b,a,c)};d.prototype._attachScrollBehavior=function(){return this._$container?(0,P.default)(this,this._editor,this._$container.children(".diff-editor")):r.default.Deferred().reject()};d.prototype._editorForHandle=function(){return this._editor};d.prototype._isEntireFile=function(){return(this._options.fileChange.type===
w.default.ADD||this._options.fileChange.type===w.default.DELETE)&&!this._options.isExcerpt};d.prototype._expandContextLines=function(a,b,c){if(this._editor){var d=this.getLineHandle(b);a=this._editor.getLineNumber(d._handle);var f=this._editor.lastLine()===a?a+1:a;this.removeLineClass(d,"wrap","first-line-of-hunk");c.forEach(function(a){a.sourceSpan=a.destinationSpan=a.segments[0].lines.length;L(a)});c.length&&c[0].segments.length&&c[0].segments[0].lines.length&&(d={hunks:c},this._modifyDiff("INSERT",
d,u.default.convertToLineInfos(d,this._options),f));N(b.data("widget"));Q.default.trigger("bitbucket.internal.feature.fileContent.diffViewExpanded",null,{$context:b,hunk:c,at:a})}};k.default=d;x.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-handler', location = '/static/bitbucket/internal/feature/file-content/handlers/diff-handler-pre-init.js' */
require("bitbucket/feature/files/file-handlers").register({weight:5E3,builtIn:!0,handle:function(a){return require("bitbucket/internal/feature/file-content/handlers/diff-handler").handler.apply(this,arguments)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-handler', location = '/static/bitbucket/internal/feature/file-content/handlers/diff-handler.js' */
define("bitbucket/internal/feature/file-content/handlers/diff-handler","module exports jquery lodash bitbucket/feature/files/file-handlers bitbucket/util/navbuilder bitbucket/internal/feature/comments/comments bitbucket/internal/feature/file-content/binary-diff-view/binary-diff-view bitbucket/internal/feature/file-content/binary-view/binary-view bitbucket/internal/feature/file-content/content-message/content-message bitbucket/internal/feature/file-content/diff-view-options bitbucket/internal/feature/file-content/diff-view-options-panel/diff-view-options-panel bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal bitbucket/internal/feature/file-content/request-diff bitbucket/internal/feature/file-content/side-by-side-diff-view/side-by-side-diff-view bitbucket/internal/feature/file-content/unified-diff-view/unified-diff-view bitbucket/internal/model/file-change bitbucket/internal/model/file-change-types bitbucket/internal/model/file-content-modes bitbucket/internal/model/path bitbucket/internal/util/ajax bitbucket/internal/util/function bitbucket/internal/util/promise".split(" "),
function(A,g,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){function W(a,e,d){var f=a.$container,c=new l.default(a.fileChange);return a.commentMode!==n.default.commentMode.NONE?(e=d?q.default.groupBy(d.values,function(a){return a.anchor.line?"line":"file"}):{line:e.lineComments||[],file:e.fileComments||[]},n.default.bindContext(f,new n.default.DiffAnchor(c),{lineComments:e.line,fileComments:e.file,commentMode:a.commentMode,relevantContextLines:a.relevantContextLines,diffViewOptions:a.diffViewOptions,
$toolbar:a.$toolbar,urlBuilder:a.commentUrlBuilder})):null}function X(a,e,d,k){var c=e.diff,b=Y.default.builtInHandlers,m=a.$container,h=new l.default(a.fileChange);if(c&&(c.binary||Z.default.treatTextAsBinary(c.destination&&c.destination.extension)))return d=new aa.default(c,a),d.handlerID=d.isDiffingImages()?b.DIFF_IMAGE:b.DIFF_BINARY,d;if(!c||!c.hunks||!c.hunks.length)return r.default.renderEmptyDiff(m,e,h),{handlerID:b.DIFF_EMPTY,extraClasses:"empty-diff message-content"};if(c.hunks[c.hunks.length-
1].truncated)return r.default.renderTooLargeDiff(m,c,h,k),{handlerID:b.DIFF_TOO_LARGE,extraClasses:"too-large-diff message-content"};a=new (k?ba.default:ca.default)(e,f.default.extend({commentContext:d},a));d&&d.setDiffView(a);q.default.defer(a.init.bind(a));a.handlerID=k?b.DIFF_TEXT_SIDE_BY_SIDE:b.DIFF_TEXT_UNIFIED;return a}Object.defineProperty(g,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(B),q=babelHelpers.interopRequireDefault(C),Y=babelHelpers.interopRequireDefault(D),da=
babelHelpers.interopRequireDefault(E),n=babelHelpers.interopRequireDefault(F),aa=babelHelpers.interopRequireDefault(G),Z=babelHelpers.interopRequireDefault(H),r=babelHelpers.interopRequireDefault(I),x=babelHelpers.interopRequireDefault(J),ea=babelHelpers.interopRequireDefault(K),u=babelHelpers.interopRequireDefault(L),fa=babelHelpers.interopRequireDefault(M),ba=babelHelpers.interopRequireDefault(N),ca=babelHelpers.interopRequireDefault(O),l=babelHelpers.interopRequireDefault(P),t=babelHelpers.interopRequireDefault(Q),
ga=babelHelpers.interopRequireDefault(R),ha=babelHelpers.interopRequireDefault(S),y=babelHelpers.interopRequireDefault(T),ia=babelHelpers.interopRequireDefault(U),z=babelHelpers.interopRequireDefault(V);g.default={handler:function(a){function e(){return"side-by-side"===x.default.get("diffType")&&h}function d(a){var c=new l.default(a.fileChange),b=c.getRepository(),c=c.getCommitRange(),b=da.default.rest().project(b.getProject().getKey()).repo(b.getSlug()),b=(a.commentUrlBuilder?a.commentUrlBuilder():
c.getPullRequest()?b.pullRequest(c.getPullRequest().getId()).comments():b.commit(c).comments()).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:a.avatarSize||"medium"}),path:(new ha.default(a.fileChange.path)).toString(),markup:!0}).build();a=a.statusCode||y.default.ignore404WithinRepository();f.default.extend(a,{401:function(){return f.default.Deferred().resolve({start:0,size:0,values:[],isLastPage:!0,filter:null}).promise()}});a=y.default.rest({url:b,statusCode:a});return a.then(function(a){return a.errors&&
a.errors.length?f.default.Deferred().rejectWith(this,[this,null,null,a]):a}).promise(a)}if(a.contentMode!==ga.default.DIFF)return!1;var k=a.$container,c=(0,f.default)('.diff-type-options .aui-dropdown2-radio[data-value\x3d"side-by-side"]'),b=new l.default(a.fileChange),m=b.getType(),h=!(m===t.default.ADD||m===t.default.DELETE||a.isExcerpt);a.withComments=a.commentMode!==n.default.commentMode.NONE;e()&&(a.contextLines=u.default.infiniteContext,a.withComments=!1);var g=e()?d:f.default.noop,g=q.default.compact([(0,
fa.default)(b,a),g(a)]);return z.default.whenAbortable.apply(z.default,g).thenAbortable(function(d,g){var p=d.diff;b.getType()&&b.getType!==t.default.UNKNOWN||(b.setType(t.default.guessChangeTypeFromDiff(p)),a.fileChange=b.toJSON());d.hunks&&d.hunks.length&&0===d.hunks[0].sourceSpan?h=!1:m||(h=!u.default.isAddedOrRemoved(p));h?c.removeClass("aui-dropdown2-disabled").attr("aria-disabled",!1):h||c.tooltip({gravity:"e",delayIn:0,title:"data-file-type-compatibility"});var v=u.default.optionsOverride(x.default,
h,a.isExcerpt);a.relevantContextLines=a.relevantContextLines||10;a.diffViewOptions=v;b.getConflict()&&r.default.renderConflict(k,b);var l=new ea.default((0,f.default)(document),v),p=W(a,p||{},g),w=X(a,d,p,e());return{handlerID:w.handlerID,extraClasses:w.extraClasses,destroy:function(){n.default.unbindContext(a.$container);q.default.chain([w,l,v]).compact().filter(ia.default.dot("destroy")).invoke("destroy").value()}}},function(a,c,b,d){if("abort"===b)return f.default.Deferred().resolve();r.default.renderErrors(k,
d);return f.default.Deferred().resolve({extraClasses:"diff-error message-content"})})}};A.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:diff-handler', location = '/static/bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal.js' */
define("bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal",["module","exports","lodash","bitbucket/internal/feature/file-content/diff-view-segment-types"],function(f,c,g,h){Object.defineProperty(c,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(g),e=babelHelpers.interopRequireDefault(h);c.default={infiniteContext:1E4,isAddedOrRemoved:function(a){function b(b){return d.default.all(a&&a.hunks,function(a){return d.default.all(a.segments,function(a){return a.type===
b})})}return b(e.default.ADDED)||b(e.default.REMOVED)},optionsOverride:function(a,b,c){return a.proxy({diffType:b?void 0:"unified",hideComments:c?!1:void 0})}};f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-change-type-lozenge', location = '/static/bitbucket/internal/feature/file-content/file-change-type-lozenge/file-change-type-lozenge.soy' */
// This file was automatically generated from file-change-type-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.fileChangeTypeLozenge = function(opt_data, opt_ignored) {
  var param4 = 'change-type-lozenge change-type-' + soy.$$escapeHtml(opt_data.changeType) + ' ';
  switch (opt_data.changeType) {
    case 'ADD':
      param4 += 'aui-lozenge-success';
      break;
    case 'COPY':
      param4 += 'aui-lozenge-current';
      break;
    case 'DELETE':
      param4 += 'aui-lozenge-error';
      break;
    case 'MOVE':
    case 'RENAME':
      param4 += 'aui-lozenge-moved';
      break;
    default:
      param4 += 'aui-lozenge-complete';
  }
  var param19 = '';
  if (opt_data.previousPathContent) {
    switch (opt_data.changeType) {
      case 'MOVE':
        param19 += soy.$$filterNoAutoescape(AJS.format('{0} \x26rarr;\x3cbr\x3e{1}',opt_data.previousPathContent,opt_data.pathContent));
        break;
      case 'COPY':
        param19 += soy.$$filterNoAutoescape(AJS.format('{0} \x26rarr;\x3cbr\x3e{1}',opt_data.previousPathContent,opt_data.pathContent));
        break;
      case 'RENAME':
        param19 += soy.$$filterNoAutoescape(AJS.format('Renamed from \x27\x27{0}\x27\x27',opt_data.previousPathContent));
        break;
    }
  }
  var param32 = '';
  switch (opt_data.changeType) {
    case 'ADD':
      param32 += soy.$$escapeHtml('Added');
      break;
    case 'COPY':
      param32 += soy.$$escapeHtml('Copied');
      break;
    case 'DELETE':
      param32 += soy.$$escapeHtml('Deleted');
      break;
    case 'MOVE':
      param32 += soy.$$escapeHtml('Moved');
      break;
    case 'RENAME':
      param32 += soy.$$escapeHtml('Renamed');
      break;
    default:
      param32 += soy.$$escapeHtml('Modified');
  }
  var output = '' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: param4, tooltip: param19, text: param32});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileChangeTypeLozenge.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileChangeTypeLozenge';
}


bitbucket.internal.feature.fileContent.fileChangeModeLozenge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'change-mode-lozenge change-mode-' + soy.$$escapeHtml(opt_data.added ? 'added aui-lozenge-success' : 'removed aui-lozenge-error'), tooltip: '' + ((opt_data.added) ? soy.$$escapeHtml('This file is now executable') : soy.$$escapeHtml('This file is no longer executable')), text: '' + ((opt_data.added) ? soy.$$escapeHtml('+x') : soy.$$escapeHtml('-x'))});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.fileChangeModeLozenge.soyTemplateName = 'bitbucket.internal.feature.fileContent.fileChangeModeLozenge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-toolbar', location = '/static/bitbucket/internal/feature/file-toolbar/file-toolbar.soy' */
// This file was automatically generated from file-toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.file.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.file == 'undefined') { bitbucket.internal.feature.file = {}; }


bitbucket.internal.feature.file.fileToolbar = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="file-toolbar' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="secondary">' + ((opt_data.secondaryToolbarContent) ? soy.$$filterNoAutoescape(opt_data.secondaryToolbarContent) : '') + '</div><div class="primary">' + ((opt_data.fileIcon) ? aui.icons.icon({icon: 'file', size: 'small', useIconFont: true, iconFontSet: 'devtools'}) : '') + ((opt_data.icon) ? soy.$$filterNoAutoescape(opt_data.icon) : '') + ((opt_data.breadcrumbs) ? bitbucket.internal.widget.breadcrumbs.breadcrumbs({pathComponents: []}) : '') + ((opt_data.primaryToolbarContent) ? soy.$$filterNoAutoescape(opt_data.primaryToolbarContent) : '') + '</div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.file.fileToolbar.soyTemplateName = 'bitbucket.internal.feature.file.fileToolbar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:web-fragment-templates', location = '/static/bitbucket/internal/widget/web-fragment.soy' */
// This file was automatically generated from web-fragment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.webItem = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.url || opt_data.forceLink ? 'a' : 'span') + ((opt_data.url) ? ' href="' + soy.$$escapeHtml(opt_data.url) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + ((opt_data.styleClass) ? ' class="' + soy.$$escapeHtml(opt_data.styleClass) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + ((opt_data.pluginKey && opt_data.moduleKey) ? ' data-web-item-key="' + soy.$$escapeHtml(opt_data.pluginKey) + ':' + soy.$$escapeHtml(opt_data.moduleKey) + '"' : '') + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : (opt_data.params && opt_data.params['iconClass']) ? '<span class="aui-icon ' + soy.$$escapeHtml(opt_data.params['iconClass']) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : soy.$$escapeHtml(opt_data.linkText)) + '</' + soy.$$escapeHtml(opt_data.url || opt_data.forceLink ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItem.soyTemplateName = 'bitbucket.internal.widget.webItem';
}


bitbucket.internal.widget.webItemButton = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.buttons.button({buttonText: opt_data.linkText ? opt_data.linkText : '', id: opt_data.linkId, title: opt_data.tooltip, extraClasses: opt_data.styleClass && opt_data.extraClasses ? opt_data.styleClass + ' ' + opt_data.extraClasses : opt_data.styleClass ? opt_data.styleClass : opt_data.extraClasses, isDisabled: opt_data.params && opt_data.params['disabled'] == 'true', href: opt_data.url, iconType: opt_data.params['iconClass'] ? 'custom' : '', iconClass: opt_data.params['iconClass'], iconText: ! opt_data.linkText ? opt_data.tooltip : ''});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemButton.soyTemplateName = 'bitbucket.internal.widget.webItemButton';
}


bitbucket.internal.widget.webItemtabMenuItem = function(opt_data, opt_ignored) {
  return '' + widget.aui.tabMenuItem({id: opt_data.linkId, tooltip: opt_data.tooltip, text: opt_data.linkText, url: opt_data.url, extraClasses: opt_data.styleClass, isActive: opt_data.isActive});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemtabMenuItem.soyTemplateName = 'bitbucket.internal.widget.webItemtabMenuItem';
}


bitbucket.internal.widget.webItemDropdownItem = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.webItem(soy.$$augmentMap(opt_data, {forceLink: true}));
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemDropdownItem.soyTemplateName = 'bitbucket.internal.widget.webItemDropdownItem';
}


bitbucket.internal.widget.headerDropdownWebItems = function(opt_data, opt_ignored) {
  return '<li class="' + ((opt_data.isActive) ? 'selected' : '') + ((opt_data.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.styleClass) : '') + '"' + ((opt_data.tooltip) ? 'title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + ((opt_data.dropdownWebSections.length > 0) ? aui.dropdown2.trigger({menu: {id: opt_data.pluginKey + '-' + opt_data.moduleKey}, id: opt_data.linkId ? opt_data.linkId : '', text: opt_data.params['iconClass'] ? null : opt_data.linkText, extraClasses: opt_data.hideDropdownArrow ? 'aui-dropdown2-trigger-arrowless' : null, content: '' + ((opt_data.params['iconClass']) ? '<span class="aui-icon ' + soy.$$escapeHtml(opt_data.params['iconClass']) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : '')}) + aui.dropdown2.contents({id: opt_data.pluginKey + '-' + opt_data.moduleKey, extraClasses: 'aui-style-default', content: '' + bitbucket.internal.widget.headerDropdownWebSections({dropdownWebSections: opt_data.dropdownWebSections, locationPrefix: opt_data.moduleKey + '/'})}) : bitbucket.internal.widget.webItem(opt_data)) + '</li>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.headerDropdownWebItems.soyTemplateName = 'bitbucket.internal.widget.headerDropdownWebItems';
}


bitbucket.internal.widget.headerDropdownWebSections = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownWebSectionList116 = opt_data.dropdownWebSections;
  var dropdownWebSectionListLen116 = dropdownWebSectionList116.length;
  for (var dropdownWebSectionIndex116 = 0; dropdownWebSectionIndex116 < dropdownWebSectionListLen116; dropdownWebSectionIndex116++) {
    var dropdownWebSectionData116 = dropdownWebSectionList116[dropdownWebSectionIndex116];
    var param119 = '<ul class="aui-list-truncate" role="presentation">';
    var sectionItemList121 = WebFragments.getWebItems((opt_data.locationPrefix ? opt_data.locationPrefix : '') + dropdownWebSectionData116.key,opt_data.context ? opt_data.context : {});
    var sectionItemListLen121 = sectionItemList121.length;
    for (var sectionItemIndex121 = 0; sectionItemIndex121 < sectionItemListLen121; sectionItemIndex121++) {
      var sectionItemData121 = sectionItemList121[sectionItemIndex121];
      param119 += '<li role="presentation">' + bitbucket.internal.widget.webItem(sectionItemData121) + '</li>';
    }
    param119 += '</ul>';
    output += aui.dropdown2.section({extraClasses: dropdownWebSectionData116.key, label: dropdownWebSectionData116.labelText, content: param119});
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.headerDropdownWebSections.soyTemplateName = 'bitbucket.internal.widget.headerDropdownWebSections';
}


bitbucket.internal.widget.webFragmentButtons = function(opt_data, opt_ignored) {
  var output = '';
  var webFragmentList130 = opt_data.isReverse ? WebFragments.getWebFragments(opt_data.location,opt_data.context).reverse() : WebFragments.getWebFragments(opt_data.location,opt_data.context);
  var webFragmentListLen130 = webFragmentList130.length;
  for (var webFragmentIndex130 = 0; webFragmentIndex130 < webFragmentListLen130; webFragmentIndex130++) {
    var webFragmentData130 = webFragmentList130[webFragmentIndex130];
    switch (webFragmentData130.type) {
      case 'ITEM':
        output += bitbucket.internal.buttons.buttons({content: '' + bitbucket.internal.widget.webItemButton(webFragmentData130)});
        break;
      case 'SECTION':
        var param138 = '';
        var webItemList139 = opt_data.isReverse ? WebFragments.getWebItems(opt_data.location + '/' + webFragmentData130.key,opt_data.context).reverse() : WebFragments.getWebItems(opt_data.location + '/' + webFragmentData130.key,opt_data.context);
        var webItemListLen139 = webItemList139.length;
        for (var webItemIndex139 = 0; webItemIndex139 < webItemListLen139; webItemIndex139++) {
          var webItemData139 = webItemList139[webItemIndex139];
          param138 += bitbucket.internal.widget.webItemButton(webItemData139);
        }
        output += bitbucket.internal.buttons.buttons({extraClasses: webFragmentData130.styleClass, content: param138});
        break;
    }
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webFragmentButtons.soyTemplateName = 'bitbucket.internal.widget.webFragmentButtons';
}


bitbucket.internal.widget.webItemTabs = function(opt_data, opt_ignored) {
  var param145 = '' + ((opt_data.tabItemsContent) ? soy.$$filterNoAutoescape(opt_data.tabItemsContent) : '');
  var itemList150 = opt_data.webItems ? opt_data.webItems : WebFragments.getWebItems(opt_data.location,opt_data.context ? opt_data.context : null);
  var itemListLen150 = itemList150.length;
  for (var itemIndex150 = 0; itemIndex150 < itemListLen150; itemIndex150++) {
    var itemData150 = itemList150[itemIndex150];
    var param158 = '';
    var subPanelList159 = WebFragments.getWebPanels(itemData150.moduleKey + '.meta',opt_data.context ? opt_data.context : null).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var subPanelListLen159 = subPanelList159.length;
    for (var subPanelIndex159 = 0; subPanelIndex159 < subPanelListLen159; subPanelIndex159++) {
      var subPanelData159 = subPanelList159[subPanelIndex159];
      param158 += soy.$$escapeHtml(subPanelData159);
    }
    param145 += widget.aui.tabMenuItem({url: itemData150.url, text: itemData150.linkText, id: itemData150.linkId, extraLinkClasses: itemData150.styleClass, tooltip: itemData150.tooltip, isActive: opt_data.showFirstTab ? itemIndex150 == 0 : opt_data.activeTab ? itemData150.moduleKey == opt_data.activeTab : false, extraAttributes: {'data-module-key': itemData150.moduleKey}, extraLinkContent: param158});
  }
  var output = '' + widget.aui.tabChrome(soy.$$augmentMap(opt_data, {tabItemsContent: param145}));
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.webItemTabs.soyTemplateName = 'bitbucket.internal.widget.webItemTabs';
}


bitbucket.internal.widget.sidebarWebFragmentNavigation = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.primaryNavContent || opt_data.secondaryNavContent || opt_data.webFragments.length > 0) {
    var param172 = '<ul class="aui-nav">' + ((opt_data.primaryNavContent) ? soy.$$filterNoAutoescape(opt_data.primaryNavContent) : '');
    var fragmentList178 = opt_data.webFragments;
    var fragmentListLen178 = fragmentList178.length;
    for (var fragmentIndex178 = 0; fragmentIndex178 < fragmentListLen178; fragmentIndex178++) {
      var fragmentData178 = fragmentList178[fragmentIndex178];
      param172 += (fragmentData178.type == 'ITEM') ? bitbucket.internal.widget.sidebarNavItemWebItem({context: opt_data.context, isActive: fragmentData178.moduleKey == opt_data.activeNavItem, isTierOne: opt_data.isTierOne, webItem: fragmentData178}) : (fragmentData178.type == 'SECTION') ? bitbucket.internal.widget.sidebarNavWebSection({activeNavItem: opt_data.activeNavItem, context: opt_data.context, fragment: fragmentData178, isTierOne: opt_data.isTierOne}) : '';
    }
    param172 += '</ul>';
    output += widget.aui.sidebarNavGroup({extraClasses: opt_data.extraClasses, isTierOne: opt_data.isTierOne, isActions: opt_data.isActions, title: opt_data.title, navContent: param172, secondaryNavContent: '' + ((opt_data.secondaryNavContent) ? '<ul class="aui-nav">' + soy.$$filterNoAutoescape(opt_data.secondaryNavContent) + '</ul>' : '')});
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarWebFragmentNavigation.soyTemplateName = 'bitbucket.internal.widget.sidebarWebFragmentNavigation';
}


bitbucket.internal.widget.sidebarNavWebSection = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.sidebarNavSectionWithItems({activeNavItem: opt_data.activeNavItem, context: opt_data.context, heading: opt_data.fragment.labelText, isTierOne: opt_data.isTierOne, webItems: WebFragments.getWebItems(opt_data.fragment.location + '/' + opt_data.fragment.key,opt_data.context ? opt_data.context : null)});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarNavWebSection.soyTemplateName = 'bitbucket.internal.widget.sidebarNavWebSection';
}


bitbucket.internal.widget.sidebarNavSectionWithItems = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.webItems.length) {
    output += widget.aui.navHeading({text: opt_data.heading}) + '<ul class="aui-nav">';
    var webItemList215 = opt_data.webItems;
    var webItemListLen215 = webItemList215.length;
    for (var webItemIndex215 = 0; webItemIndex215 < webItemListLen215; webItemIndex215++) {
      var webItemData215 = webItemList215[webItemIndex215];
      output += bitbucket.internal.widget.sidebarNavItemWebItem({context: opt_data.context, isActive: webItemData215.moduleKey == opt_data.activeNavItem || webItemData215.linkId == opt_data.activeNavItem, isTierOne: opt_data.isTierOne, webItem: webItemData215});
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarNavSectionWithItems.soyTemplateName = 'bitbucket.internal.widget.sidebarNavSectionWithItems';
}


bitbucket.internal.widget.sidebarNavItemWebItem = function(opt_data, opt_ignored) {
  var param233 = '';
  if (opt_data.webItem.moduleKey) {
    var badgeContentList236 = WebFragments.getWebPanels(opt_data.webItem.moduleKey + '.badge',opt_data.context ? opt_data.context : null).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var badgeContentListLen236 = badgeContentList236.length;
    for (var badgeContentIndex236 = 0; badgeContentIndex236 < badgeContentListLen236; badgeContentIndex236++) {
      var badgeContentData236 = badgeContentList236[badgeContentIndex236];
      param233 += ' ' + soy.$$escapeHtml(badgeContentData236);
    }
  }
  var param240 = '';
  var actionLocation__soy241 = opt_data.webItem.params['actionLocation'];
  if (actionLocation__soy241) {
    var actions__soy244 = WebFragments.getWebItems(actionLocation__soy241,opt_data.context);
    param240 += (actions__soy244.length) ? bitbucket.internal.buttons.button({buttonText: '', extraClasses: 'actions-trigger aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'aria-owns="' + opt_data.webItem.linkId + '-actions-dialog' + '" aria-haspopup="true"', iconType: 'aui', iconText: 'More', iconClass: 'aui-icon-small aui-iconfont-more'}) : '';
  }
  var output = '' + widget.aui.sidebarNavItem({extraClasses: opt_data.webItem.styleClass, iconClass: opt_data.webItem.params['iconClass'], id: opt_data.webItem.linkId, webItemKey: opt_data.webItem.completeKey, isActive: opt_data.isActive, isTierOne: opt_data.isTierOne, text: opt_data.webItem.linkText, tooltip: opt_data.webItem.tooltip, url: opt_data.webItem.url, badgeContent: param233, actionContent: param240});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.sidebarNavItemWebItem.soyTemplateName = 'bitbucket.internal.widget.sidebarNavItemWebItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-content', location = '/static/bitbucket/internal/feature/file-content/file-content.js' */
define("bitbucket/internal/feature/file-content/file-content","module exports aui jquery lodash require bitbucket/feature/files/file-handlers bitbucket/util/navbuilder bitbucket/internal/bbui/ediff/ediff bitbucket/internal/feature/comments/comments bitbucket/internal/model/commit-range bitbucket/internal/model/content-tree-node-types bitbucket/internal/model/diff-type bitbucket/internal/model/file-change bitbucket/internal/model/file-change-types bitbucket/internal/model/file-content-modes bitbucket/internal/model/revision bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/promise".split(" "),
function(w,p,q,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N){function O(b,a){var d=l.default.currentRepo().raw().path(b);a&&!a.isDefault()&&(d=d.at(a.getId()));return d.build()}function c(b,a){var d=this;this._id=a||void 0;this._containerSelector=b;this.$self=(0,e.default)("#"+this._id);m.default.on("bitbucket.internal.feature.commitselector.itemSelected",function(a){var b=a.path,c=a.srcPath;a=new P.default(a.commitJSON);this===d.untilRevisionPicker&&m.default.trigger("bitbucket.internal.feature.filecontent.untilRevisionChanged",
d,a,b,c)});this._lastInitPromise=r.default.thenAbortable(e.default.Deferred().resolve())}function u(b,a,d){for(var f="",g=0,c=0;c<a.length;c++)var e=a[c],f=f+(h.default.escapeHtml(b.substring(g,e.start))+'\x3cspan class\x3d"'+d+'"\x3e'+h.default.escapeHtml(b.substring(e.start,e.end))+"\x3c/span\x3e"),g=e.end;g<b.length&&(f+=h.default.escapeHtml(b.substring(g)));return f}Object.defineProperty(p,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(q),e=babelHelpers.interopRequireDefault(x),
n=babelHelpers.interopRequireDefault(y),Q=babelHelpers.interopRequireDefault(z),R=babelHelpers.interopRequireDefault(A),l=babelHelpers.interopRequireDefault(B),t=babelHelpers.interopRequireDefault(C);q=babelHelpers.interopRequireDefault(D);var S=babelHelpers.interopRequireDefault(E),T=babelHelpers.interopRequireDefault(F),U=babelHelpers.interopRequireDefault(G),V=babelHelpers.interopRequireDefault(H),v=babelHelpers.interopRequireDefault(I),k=babelHelpers.interopRequireDefault(J),P=babelHelpers.interopRequireDefault(K),
W=babelHelpers.interopRequireDefault(L),m=babelHelpers.interopRequireDefault(M),r=babelHelpers.interopRequireDefault(N);c.commentMode=q.default.commentMode;c.diffPreset={contentMode:k.default.DIFF,untilRevisionPicker:!0,rawLink:!1,sourceLink:!1,modeToggle:!0,changeTypeLozenge:!1,changeModeLozenge:!1,breadcrumbs:!1,commentMode:c.commentMode.NONE};c.sourcePreset={contentMode:k.default.SOURCE,untilRevisionPicker:!0,rawLink:!0,sourceLink:!1,modeToggle:!0,changeTypeLozenge:!1,changeModeLozenge:!1,breadcrumbs:!1,
commentMode:c.commentMode.NONE};c.defaults={contentMode:k.default.SOURCE,untilRevisionPicker:!1,rawLink:!1,sourceLink:!1,modeToggle:!1,changeTypeLozenge:!1,changeModeLozenge:!1,fileIcon:!1,breadcrumbs:!1,scrollPaneSelector:void 0,commentMode:c.commentMode.REPLY_ONLY,pullRequestDiffLink:!1,toolbarWebFragmentLocationPrimary:null,toolbarWebFragmentLocationSecondary:null,asyncDiffModifications:!0,attachScroll:!0,scrollStyle:"fixed",useDefaultHandler:!1};c.prototype.initToolbarItems=function(b,a,d){var c=
(0,e.default)(this._containerSelector),g=a.getCommitRange().getUntilRevision();b=(0,e.default)(bitbucket.internal.feature.fileContent.main(e.default.extend({id:this._id,preloaded:!!a.getDiff(),sourceUrl:this._options.sourceUrl||this._options.modeToggle?l.default.currentRepo().browse().path(a.getPath()).at(b.getDisplayId()).until(g&&g.getId()).build():"",diffUrl:this._options.modeToggle?l.default.currentRepo().diff(a,b,this._options.headPath,d).at(b.getDisplayId()).build():"",fileChange:a.toJSON()},
this._options)));this.$self&&this.$self.remove();this.$self=b.appendTo(c);c=this.$toolbar=b.children(".file-toolbar");this.$contentView=b.children(".content-view");this._initCommands();this.$breadcrumbs=this._options.breadcrumbs?c.find(".breadcrumbs"):null;this.$changeTypeLozenge=this._options.changeTypeLozenge?c.find(".change-type-placeholder"):null;this.$changeModeLozenge=this._options.changeModeLozenge?c.find(".change-mode-placeholder"):null;this.$viewSource=this._options.sourceLink?c.find(".source-view-link").tooltip({gravity:"ne"}):
null;this._options.pullRequestDiffLink&&c.find(".pull-request-diff-outdated-lozenge").tooltip({gravity:"ne"})};c.prototype._initCommands=function(){var b=this.$contentView,a=this.$toolbar;"self"===this._options.scrollPaneSelector&&b.addClass("scroll-x");this.untilRevisionPicker&&this.untilRevisionPicker.destroy();this.untilRevisionPicker=this._options.untilRevisionPicker?new ((0,Q.default)("bitbucket/internal/feature/file-content/commit-selector/commit-selector",null))({buttonEl:a.find(".until-commit-button"),
id:"until-commit"}):null;this.$viewRaw=this._options.rawLink?a.find(".raw-view-link"):null;this.$modeToggle=this._options.modeToggle?a.find(".mode-toggle").tooltip({gravity:"ne"}):null};c.prototype.initForContent=function(b,a){a=a||{};var d=b.getCommitRange().getUntilRevision();this.$viewSource&&(b.getType()===v.default.DELETE||b.getNodeType()===T.default.SUBMODULE?this.$viewSource.addClass("hidden"):this.$viewSource.attr("href",l.default.currentRepo().browse().path(b.getPath()).at(d&&d.getId()).build()));
this.$viewRaw&&this.$viewRaw.attr("href",O(b.getPath(),d&&d.getRevisionReference()));this.untilRevisionPicker&&this.untilRevisionPicker.init({followRenames:a.followRenames,headRevisionReference:a.headRef,itemTemplate:bitbucket.internal.feature.fileContent.commitSelectorItemAuthor,itemTitle:function(a){return h.default.format("Click to view file at revision {0}",a)},itemUrl:function(b,c){var d=l.default.currentRepo(),e=b.properties&&b.properties.change;if(c._mode===k.default.DIFF)d=
d.diff(new V.default({commitRange:new S.default({untilRevision:b,diffType:U.default.COMMIT}),path:e&&e.path||c._path,srcPath:e&&e.srcPath||void 0}),c._headRevisionRef,c._path,!1);else{var f={until:b.id};e&&(e.path!==c._path.toString()&&(f.untilPath=e.path),e.srcPath?f.sincePath=e.srcPath:f.autoSincePath=!1);a.followRenames&&e||(f.autoSincePath=!1);d=d.browse().path(c._path).withParams(f)}return d.build()},mode:a.contentMode,path:a.headPath,selectedCommit:d&&d.toJSON()});this.$breadcrumbs&&this.$breadcrumbs.html(this.renderBreadCrumbs(b.getPath()));
this.$changeTypeLozenge&&this._initChangeTypeLozenge(b);this.$changeModeLozenge&&(d=this.getFileChangedModeLozenge(b))&&this.$changeModeLozenge.append((0,e.default)(d).tooltip());if(this.$modeToggle)this.$modeToggle.on("click","a:not(.active,.disabled)",function(a){W.default.openInSameTab(a)&&(a.preventDefault(),m.default.trigger("bitbucket.internal.feature.filecontent.requestedModeChange",this,(0,e.default)(this).hasClass("mode-diff")?k.default.DIFF:k.default.SOURCE))});var c={$toolbar:this.$toolbar,
$container:this.$contentView,asyncDiffModifications:this._options.asyncDiffModifications,attachScroll:this._options.attachScroll,autoResizing:this._options.autoResizing,contentMode:this._options.contentMode,commentMode:this._options.commentMode,diffUrlBuilder:this._options.diffUrlBuilder,fileChange:b.toJSON(),isExcerpt:!!this._options.isExcerpt,lineComments:this._options.lineComments,relevantContextLines:this._options.relevantContextLines,scrollStyle:this._options.scrollStyle,anchor:a.anchor,autoSrcPath:a.autoSrcPath,
commentUrlBuilder:a.commentUrlBuilder,diffViewType:a.diffViewType,useDefaultHandler:a.useDefaultHandler},d=(0,e.default)("\x3cdiv /\x3e").addClass("file-content-spinner").appendTo(this.$self);m.default.trigger("bitbucket.internal.feature.fileContent.handlerRequested",null,c);return r.default.spinner(d,R.default._handle(c).done(n.default.bind(function(a,b){this.renderErrors(b);this.handler=a;this.$self.addClass(a.extraClasses);var d={handlerID:a.handlerID,displayType:this._options.contentMode,fileChange:c.fileChange,
commentMode:this._options.commentMode};this._options.toolbarWebFragmentLocationPrimary&&this.$toolbar.children(".primary").append(bitbucket.internal.widget.webFragmentButtons({location:this._options.toolbarWebFragmentLocationPrimary,context:d}));this._options.toolbarWebFragmentLocationSecondary&&this.$toolbar.children(".secondary").prepend(bitbucket.internal.widget.webFragmentButtons({location:this._options.toolbarWebFragmentLocationSecondary,context:d,isReverse:!0}))},this)),"large",{zIndex:10}).done(function(a){return n.default.defer(function(){return m.default.trigger("bitbucket.internal.feature.fileContent.requestHandled",
null,c,a)})})};c.prototype.renderErrors=function(b){this.$self.parent().find(".file-content-errors").remove();0<b.length&&this.$self.before(bitbucket.internal.feature.fileContent.errors({errors:n.default.map(b,function(a){return a.message||a})}))};c.prototype.toggleToolbarDisable=function(b){this.$self.find(".file-toolbar .aui-button").toggleClass("disabled",b).prop("disabled",b).attr("aria-disabled",b)};c.prototype.renderBreadCrumbs=function(b){b=n.default.map(b.getComponents(),function(a){return{text:a}});
return bitbucket.internal.widget.breadcrumbs.crumbs({pathComponents:b,primaryLink:"COMMIT"!==this._options.diffType||this._options.pullRequestDiffCurrent?this._options.pullRequestDiffLinkUrl:null})};c.prototype.getFileChangedModeLozenge=function(b){var a=b.getSrcExecutable();b=b.getExecutable();var d=null;null==a&&!0===b||!1===a&&!0===b?d=!0:!0===a&&!1===b&&(d=!1);return null!==d?(0,e.default)(bitbucket.internal.feature.fileContent.fileChangeModeLozenge({added:d})):null};c.prototype.init=function(b,
a){var d=this._initInternal.bind(this,b,a);return this._lastInitPromise=this.reset().thenAbortable(d,d)};c.prototype._initInternal=function(b,a){a=this._options=e.default.extend({},c.defaults,a);var d=b.getCommitRange(),f=a.headRef||d.getUntilRevision()&&d.getUntilRevision().getRevisionReference();if(a.changeTypeLozenge&&!b.getType())throw Error("Change type is required to show the change type lozenge.");if(!d.getUntilRevision()&&(a.sourceLink||a.rawLink||a.untilRevisionPicker))throw Error("Revision info is required to show a link to the source or raw file, or a revision picker.");
this.initToolbarItems(f,b,a.autoSrcPath);return this.initForContent(b,{headPath:a.headPath||b.getPath(),headRef:f,anchor:a.anchor,contentMode:a.contentMode,followRenames:a.followRenames,autoSrcPath:a.autoSrcPath,commentUrlBuilder:a.commentUrlBuilder,diffViewType:a.diffViewType,useDefaultHandler:a.useDefaultHandler})};c.prototype.reset=function(){this._lastInitPromise&&this._lastInitPromise.abort();var b=this._resetInternal.bind(this);return r.default.thenAbortable(this._lastInitPromise.then(b,b))};
c.prototype._resetInternal=function(){this.handler&&(this.handler.extraClasses&&this.$self.removeClass(this.handler.extraClasses),n.default.isFunction(this.handler.destroy)&&this.handler.destroy(),delete this.handler);return e.default.Deferred().resolve()};c.prototype.destroy=function(){this.reset()};c.prototype._initChangeTypeLozenge=function(b){var a,d,c=b.getPath(),g=b.getSrcPath()||c;b.getType()===v.default.RENAME?(a=h.default.escapeHtml(g.getName()),d=h.default.escapeHtml(c.toString())):g&&(a=
g.toString(),c=c.toString(),d=t.default.diff(t.default.tokenizeString(a),t.default.tokenizeString(c)),a=u(a,d.originalRegions,"deleted"),d=u(c,d.revisedRegions,"added"));this.$changeTypeLozenge.append(bitbucket.internal.feature.fileContent.fileChangeTypeLozenge({changeType:b.getType(),previousPathContent:a,pathContent:d}));this.$changeTypeLozenge.find(".change-type-lozenge").tooltip({html:!0,className:"change-type-lozenge-tooltip",gravity:function(){var a=(0,e.default)(document).width()-(0,e.default)(this).offset().left-
(0,e.default)(this).width()/2,b=(0,e.default)(".tipsy").outerWidth();return a>b/2+10?"n":"ne"}})};p.default=c;w.exports=p["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:file-content', location = '/static/bitbucket/internal/feature/file-content/file-content.soy' */
// This file was automatically generated from file-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }


bitbucket.internal.feature.fileContent.main = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="file-content' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + bitbucket.internal.feature.file.fileToolbar({fileIcon: opt_data.fileIcon, breadcrumbs: false, primaryToolbarContent: '' + ((opt_data.modeToggle) ? bitbucket.internal.buttons.buttons({extraClasses: 'mode-toggle', content: '' + bitbucket.internal.buttons.button({extraClasses: 'mode-source', isPressed: opt_data.contentMode == 'source', href: opt_data.sourceUrl, buttonText: 'Source view', title: 'View the full source of this file'}) + bitbucket.internal.buttons.button({extraClasses: 'mode-diff', isPressed: opt_data.contentMode == 'diff', href: opt_data.diffUrl, buttonText: 'Diff to previous', title: 'View the changes made in this revision'})}) : '') + ((opt_data.untilRevisionPicker) ? bitbucket.internal.buttons.button({extraClasses: 'aui-dd-trigger until-commit-button', buttonText: 'History', title: 'View the history of this file'}) : '') + ((opt_data.breadcrumbs) ? bitbucket.internal.widget.breadcrumbs.breadcrumbs({pathComponents: []}) : '') + ((opt_data.changeTypeLozenge) ? '<div class="change-type-placeholder"></div>' : '') + ((opt_data.changeModeLozenge) ? '<div class="change-mode-placeholder"></div>' : ''), secondaryToolbarContent: '' + ((opt_data.sourceLink) ? bitbucket.internal.buttons.button({href: '#', extraClasses: 'aui-button-subtle source-view-link', title: 'View the full source of this file', iconType: 'custom', iconClass: 'aui-icon aui-icon-small aui-iconfont-devtools-file', iconText: 'View the full source of this file', buttonText: ''}) : '') + ((opt_data.rawLink) ? bitbucket.internal.buttons.button({href: '#', buttonText: 'Raw file', extraClasses: 'aui-button-link raw-view-link'}) : '') + ((opt_data.pullRequestDiffLink) ? (opt_data.pullRequestDiffCurrent == false) ? (opt_data.diffType == 'EFFECTIVE') ? bitbucket.internal.widget.lozenge.lozenge({text: 'Outdated', htmlElement: 'span', extraClasses: 'aui-lozenge-current aui-lozenge-subtle pull-request-diff-outdated-lozenge', tooltip: 'This diff has changed in more recent commits'}) : '' : '' : (opt_data.contentMode == 'diff') ? '<div class="diff-view-options">' + bitbucket.internal.feature.fileContent.diffViewOptionsPanel.main({commentMode: opt_data.commentMode, displayType: opt_data.contentMode, fileChange: opt_data.fileChange}) + '</div>' : '')}) + '<div class="content-view ' + soy.$$escapeHtml(opt_data.contentMode) + '-view' + ((opt_data.preloaded) ? ' fully-loaded' : '') + '"></div></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.main.soyTemplateName = 'bitbucket.internal.feature.fileContent.main';
}


bitbucket.internal.feature.fileContent.errors = function(opt_data, opt_ignored) {
  var output = '<div class="file-content-errors">';
  var errorList97 = opt_data.errors;
  var errorListLen97 = errorList97.length;
  for (var errorIndex97 = 0; errorIndex97 < errorListLen97; errorIndex97++) {
    var errorData97 = errorList97[errorIndex97];
    output += aui.message.warning({content: '' + soy.$$escapeHtml(errorData97), isCloseable: true});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.errors.soyTemplateName = 'bitbucket.internal.feature.fileContent.errors';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:parse-commit-message-util', location = '/static/bitbucket/internal/util/parse-commit-message.js' */
define("bitbucket/internal/util/parse-commit-message",["module","exports"],function(f,a){Object.defineProperty(a,"__esModule",{value:!0});var e=["\n\n","\n",". "];a.default={splitIntoSubjectAndBody:function(b){for(var c=0;c<e.length;c++){var a=e[c],d=b.indexOf(a);if(-1!==d)return c=b.substring(0,d).replace(/\n/g," ")+a.trim(),b=b.substring(d+a.length),this.subjectAndBody(c,b)}return this.subjectAndBody(b,"")},subjectAndBody:function(b,a){return{subject:b,body:a}}};f.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:project-avatar', location = '/static/bitbucket/internal/feature/project/project-avatar/project-avatar.soy' */
// This file was automatically generated from project-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.project.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.project == 'undefined') { bitbucket.internal.feature.project = {}; }


bitbucket.internal.feature.project.avatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({tagName: opt_data.tagName, size: opt_data.size, avatarImageUrl: opt_data.imageUrl ? opt_data.imageUrl : opt_data.project ? require('bitbucket/util/navbuilder')._avatarUrl(opt_data.project, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build() : '', accessibilityText: opt_data.project ? opt_data.project.name : '', title: opt_data.tooltip, badgeContent: opt_data.badgeContent, isProject: ! opt_data.standardAvatar && ! opt_data.project.owner, imageClasses: opt_data.imageClasses, extraClasses: (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.project.avatar.soyTemplateName = 'bitbucket.internal.feature.project.avatar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ref-lozenge', location = '/static/bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge.js' */
define("bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge",["jquery"],function(f){var d=babelHelpers.interopRequireDefault(f);(0,d.default)(".ref-lozenge").tooltip({live:!0,title:"data-ref-tooltip",hoverable:!0,gravity:function(){return d.default.fn.tipsy.autoNS.call(this)+d.default.fn.tipsy.autoWE.call(this)},delayIn:500,className:function(){var a=(0,d.default)(".tipsy"),c=a[0],b=a.prop("className"),e=/tipsy-[ns]?e/.test(b),b=/tipsy-s/.test(b),g=e?c.offsetWidth:void 0,f=b?c.offsetHeight:
void 0;a.addClass("ref-lozenge-tooltip");e&&(e=c.offsetWidth-g,g=parseFloat(a.css("left"),10),a.css("left",g-e+"px"));b&&(c=c.offsetHeight-f,b=parseFloat(a.css("top"),10),a.css("top",b-c+"px"));return"ref-lozenge-tooltip"}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ref-lozenge', location = '/static/bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge.soy' */
// This file was automatically generated from ref-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.refLozenge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.lozenge.htmlLozenge({extraClasses: (opt_data.extraClasses ? opt_data.extraClasses + ' ' : '') + 'ref-lozenge', monospace: true, htmlElement: 'span', content: ((opt_data.repository) ? '<span class="repository">' + bitbucket.internal.feature.project.avatar({size: 'xsmall', project: opt_data.repository.project, tagName: 'span'}) + '<span class="name">' + soy.$$escapeHtml(opt_data.repository.name) + '</span></span>' : '') + '<span class="ref ' + soy.$$escapeHtml(opt_data.ref.type && opt_data.ref.type.id ? opt_data.ref.type.id.toLowerCase() : 'branch') + '">' + aui.icons.icon({size: 'small', useIconFont: true, iconFontSet: 'devtools', icon: opt_data.ref.type && opt_data.ref.type.id && opt_data.ref.type.id.toLowerCase() == 'tag' ? 'tag' : 'branch-small'}) + '<span class="name" aria-label="' + ((opt_data.refAccessibilityText) ? soy.$$escapeHtml(opt_data.refAccessibilityText) : soy.$$escapeHtml(AJS.format('branch {0}',opt_data.ref.displayId))) + '">' + soy.$$escapeHtml(opt_data.ref.displayId) + '</span></span>', extraAttributes: {'data-ref-tooltip': opt_data.tooltip ? opt_data.tooltip : (opt_data.repository ? opt_data.repository.project.name + ' / ' + opt_data.repository.name + ' : ' : '') + opt_data.ref.displayId}});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.refLozenge.soyTemplateName = 'bitbucket.internal.feature.repository.refLozenge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:ref-lozenge', location = '/static/bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge-init.js' */
require("bitbucket/internal/feature/repository/ref-lozenge/ref-lozenge");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-activity', location = '/static/bitbucket/internal/feature/pull-request/activity/pull-request-activity.soy' */
// This file was automatically generated from pull-request-activity.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.activity = function(opt_data, opt_ignored) {
  return '<div class="pull-request-activity-content"><ol ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="pull-request-activity comment-container' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + bitbucket.internal.feature.commentFormListItem({tips: opt_data.commentTips, extraFormClasses: 'general-comment-form collapsed', currentUser: opt_data.currentUser}) + '</ol></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activity.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activity';
}


bitbucket.internal.feature.pullRequest.activityListItemContainer = function(opt_data, opt_ignored) {
  return '<li class="activity-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.isNew) ? ' new' : '') + ((opt_data.isFocused) ? ' focused' : '') + '"' + ((opt_data.id) ? ' data-activityid="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><div class="activity-item-content"><div class="avatar">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.user}) + '</div><div class="action"><p class="summary">' + soy.$$filterNoAutoescape(opt_data.summaryContent) + bitbucket.internal.widget.date.shortAge({date: opt_data.activityDate}) + ((opt_data.diffType == 'COMMIT' || opt_data.diffType == 'RANGE') ? bitbucket.internal.feature.pullRequest.commitOrRangeComment({commitId: opt_data.commitId, commentLink: opt_data.commentLink, current: opt_data.isCurrent, sinceId: opt_data.sinceId, diffType: opt_data.diffType}) : '') + ((! opt_data.isCurrent && (opt_data.diffType == 'COMMIT' || opt_data.diffType == 'RANGE')) ? '<span class="removed-lozenge-container">' + bitbucket.internal.widget.lozenge.lozenge({text: 'Removed', htmlElement: 'span', extraClasses: 'aui-lozenge aui-lozenge-subtle aui-lozenge-error ', tooltip: 'The commit this comment was added on has been removed from the pull request'}) + '</span>' : '') + '</p><div class="detail">' + ((opt_data.detailContent) ? soy.$$filterNoAutoescape(opt_data.detailContent) : '') + '</div></div></div></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityListItemContainer.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityListItemContainer';
}


bitbucket.internal.feature.pullRequest.activityListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.activity.action == 'COMMENTED') ? bitbucket.internal.feature.pullRequest.activityCommentListItem(soy.$$augmentMap(opt_data.activity, {currentUser: opt_data.currentUser, pullRequest: opt_data.pullRequest, commitId: opt_data.commitId, commentLink: opt_data.commentLink, customMapping: opt_data.customMapping, commentAnchor: opt_data.activity.commentAnchor})) : (opt_data.activity.action == 'APPROVED' || opt_data.activity.action == 'UNAPPROVED' || opt_data.activity.action == 'REVIEWED') ? bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem({user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, action: opt_data.activity.action, activityDate: opt_data.activity.createdDate}) : (opt_data.activity.action == 'RESCOPED') ? (opt_data.activity.added && opt_data.activity.added.total || opt_data.activity.removed && opt_data.activity.removed.total) ? bitbucket.internal.feature.pullRequest.activityRescopeListItem({user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, action: opt_data.activity.action, activityDate: opt_data.activity.createdDate, activityRepository: opt_data.pullRequest.toRef.repository, added: opt_data.activity.added, removed: opt_data.activity.removed, pullRequest: opt_data.pullRequest}) : '' : (opt_data.activity.action == 'UPDATED' && (opt_data.activity.addedReviewers || opt_data.activity.removedReviewers)) ? bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem({isNew: opt_data.isNew, user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, activityDate: opt_data.activity.createdDate, addedReviewers: opt_data.activity.addedReviewers, removedReviewers: opt_data.activity.removedReviewers}) : bitbucket.internal.feature.pullRequest.activityListItemContainer({isNew: opt_data.isNew, isFocused: opt_data.activity.isFocused, user: opt_data.activity.user, activityDate: opt_data.activity.createdDate, summaryContent: '' + bitbucket.internal.feature.pullRequest.activityActionString({activityAction: opt_data.activity.action, user: opt_data.activity.user, sourceBranchContent: '' + ((opt_data.activity.action == 'MERGED') ? bitbucket.internal.feature.repository.refLozenge({repository: opt_data.pullRequest.fromRef.repository.id == opt_data.pullRequest.toRef.repository.id ? null : opt_data.pullRequest.fromRef.repository, ref: opt_data.pullRequest.fromRef}) : ''), targetBranchContent: '' + ((opt_data.activity.action == 'MERGED') ? bitbucket.internal.feature.repository.refLozenge({ref: opt_data.pullRequest.toRef}) : ''), mergeCommitContent: '' + ((opt_data.activity.action == 'MERGED' && opt_data.activity.commit) ? bitbucket.internal.feature.commit.link({repository: opt_data.pullRequest.toRef.repository, commit: opt_data.activity.commit}) : ''), isSimpleMerge: opt_data.activity.simpleMerge})}) + '</li>');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityListItem';
}


bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.pullRequest.activityListItemContainer({user: opt_data.user, isFocused: opt_data.isFocused, activityDate: opt_data.activityDate, summaryContent: '' + bitbucket.internal.feature.pullRequest.activityActionString({activityAction: opt_data.action, user: opt_data.user})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityReviewerStatusChangeListItem';
}


bitbucket.internal.feature.pullRequest.activityRescopeListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.added.total || opt_data.removed.total) ? bitbucket.internal.feature.pullRequest.activityListItemContainer({user: opt_data.user, isFocused: opt_data.isFocused, activityDate: opt_data.activityDate, extraClasses: 'rescope', summaryContent: '' + bitbucket.internal.feature.pullRequest.activityActionString({activityAction: opt_data.action, user: opt_data.user, numCommitsAdded: opt_data.added.total, numCommitsRemoved: opt_data.removed.total}), detailContent: '' + ((opt_data.added.commits && opt_data.added.commits.length || opt_data.removed.commits && opt_data.removed.commits.length) ? bitbucket.internal.feature.pullRequest.rescopeCommitsTable({repository: opt_data.activityRepository, added: opt_data.added, removed: opt_data.removed, pullRequest: opt_data.pullRequest}) + ((0 < opt_data.added.total - (opt_data.added.commits ? opt_data.added.commits.length : 0) + (opt_data.removed.total - (opt_data.removed.commits ? opt_data.removed.commits.length : 0))) ? '<p class="more-commits">' + soy.$$filterNoAutoescape(AJS.format('\x26hellip;and {0} more.',opt_data.added.total - (opt_data.added.commits ? opt_data.added.commits.length : 0) + (opt_data.removed.total - (opt_data.removed.commits ? opt_data.removed.commits.length : 0)))) + '</p>' : '') : '')}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityRescopeListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityRescopeListItem';
}


bitbucket.internal.feature.pullRequest.rescopeActionStringImpl = function(opt_data, opt_ignored) {
  return '' + ((opt_data.numCommitsAdded && opt_data.numCommitsRemoved) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request by adding {2} {2,choice,1#commit|1\x3ccommits} and removing {3} {3,choice,1#commit|1\x3ccommits}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsAdded,opt_data.numCommitsRemoved)) : (opt_data.numCommitsAdded) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request by adding {2} {2,choice,1#commit|1\x3ccommits}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsAdded)) : (opt_data.numCommitsRemoved) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request by removing {2} {2,choice,1#commit|1\x3ccommits}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsRemoved)) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.rescopeActionStringImpl.soyTemplateName = 'bitbucket.internal.feature.pullRequest.rescopeActionStringImpl';
}


bitbucket.internal.feature.pullRequest.rescopeCommitsTable = function(opt_data, opt_ignored) {
  var param186 = '';
  if (opt_data.added.commits && opt_data.added.commits.length) {
    var commitList189 = opt_data.added.commits;
    var commitListLen189 = commitList189.length;
    for (var commitIndex189 = 0; commitIndex189 < commitListLen189; commitIndex189++) {
      var commitData189 = commitList189[commitIndex189];
      param186 += bitbucket.internal.feature.commits.commitsTableRow({commit: commitData189, cellsContent: bitbucket.internal.feature.commits.commitsTableCells({repository: opt_data.repository, commit: commitData189, pullRequest: opt_data.pullRequest}) + '<td class="status">' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'aui-lozenge-subtle aui-lozenge-success', text: 'ADDED'}) + '</td>'});
    }
  }
  if (opt_data.removed.commits && opt_data.removed.commits.length) {
    var commitList206 = opt_data.removed.commits;
    var commitListLen206 = commitList206.length;
    for (var commitIndex206 = 0; commitIndex206 < commitListLen206; commitIndex206++) {
      var commitData206 = commitList206[commitIndex206];
      param186 += bitbucket.internal.feature.commits.commitsTableRow({commit: commitData206, cellsContent: bitbucket.internal.feature.commits.commitsTableCells({repository: opt_data.repository, commit: commitData206}) + '<td class="status">' + bitbucket.internal.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'aui-lozenge-subtle aui-lozenge-error', text: 'REMOVED'}) + '</td>'});
    }
  }
  var output = '' + widget.aui.table({dataAttributes: {lastpage: true}, extraClasses: 'commits-table show-merges', content: param186});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.rescopeCommitsTable.soyTemplateName = 'bitbucket.internal.feature.pullRequest.rescopeCommitsTable';
}


bitbucket.internal.feature.pullRequest.activityCommentListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.commentAction == 'ADDED') ? (opt_data.commentAnchor) ? bitbucket.internal.feature.pullRequest.activityListItemContainer({extraClasses: opt_data.diff ? 'diff-comment-activity' : 'file-comment-activity', id: opt_data.id, user: opt_data.user, activityDate: opt_data.createdDate, isNew: false, isFocused: opt_data.isFocused, commentLink: opt_data.commentLink, commitId: opt_data.commitId, diffType: opt_data.commentAnchor.diffType, sinceId: opt_data.commentAnchor.fromHash, isCurrent: opt_data.commentAnchor ? ! opt_data.commentAnchor.orphaned : false, summaryContent: '' + bitbucket.internal.feature.pullRequest.activityCommentActionString({activityAction: opt_data.commentAction, user: opt_data.user}), detailContent: '' + ((opt_data.diff) ? '' : '<div class="file-comment-container">' + bitbucket.internal.feature.file.fileToolbar({fileIcon: true, breadcrumbs: true, secondaryToolbarContent: '' + ((opt_data.commentAnchor.orphaned) ? (opt_data.commentAnchor.diffType == 'COMMIT') ? bitbucket.internal.widget.lozenge.lozenge({text: 'Removed', htmlElement: 'span', extraClasses: 'aui-lozenge aui-lozenge-subtle aui-lozenge-error', tooltip: 'The commit this comment was added on has been removed from the pull request'}) : bitbucket.internal.widget.lozenge.lozenge({text: 'Outdated', htmlElement: 'span', extraClasses: 'aui-lozenge-current aui-lozenge-subtle pull-request-diff-outdated-lozenge', tooltip: 'This diff has changed in more recent commits'}) : '')}) + bitbucket.internal.feature.fileComments({comments: [opt_data.comment], pullRequest: opt_data.pullRequest, customMapping: opt_data.customMapping}) + '</div>')}) : bitbucket.internal.feature.comment({comment: opt_data.comment, pullRequest: opt_data.pullRequest, currentUser: opt_data.currentUser, numOfAncestors: 0, extraClasses: 'general-comment-activity'}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityCommentListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityCommentListItem';
}


bitbucket.internal.feature.pullRequest.activityCommentActionString = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.pullRequest.activityActionString(soy.$$augmentMap(opt_data, {activityAction: 'COMMENT_' + opt_data.activityAction}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityCommentActionString.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityCommentActionString';
}


bitbucket.internal.feature.pullRequest.activityActionString = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.pullRequest.activityActionStringImpl(soy.$$augmentMap(opt_data, {userDisplayNameContent: '' + bitbucket.internal.widget.userLink({user: opt_data.user, extraClasses: 'user-name'}), lozengeContent: '' + bitbucket.internal.widget.lozenge.pullRequestState({state: opt_data.activityAction, isActivityContext: true})}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityActionString.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityActionString';
}


bitbucket.internal.feature.pullRequest.activityActionStringImpl = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.activityAction) {
    case 'COMMENT_ADDED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} commented on a file',opt_data.userDisplayNameContent));
      break;
    case 'COMMENT_REPLIED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} replied to a comment',opt_data.userDisplayNameContent));
      break;
    case 'OPENED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'DECLINED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'MERGED':
      output += (opt_data.mergeCommitContent) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} {2} to {3} in commit {4}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.sourceBranchContent,opt_data.targetBranchContent,opt_data.mergeCommitContent)) : (opt_data.isSimpleMerge) ? soy.$$filterNoAutoescape(AJS.format('{0} {1} {2} to {3}',opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.sourceBranchContent,opt_data.targetBranchContent)) : soy.$$filterNoAutoescape(AJS.format('{0} remotely merged the pull request from {1} to {2}',opt_data.userDisplayNameContent,opt_data.sourceBranchContent,opt_data.targetBranchContent));
      break;
    case 'REOPENED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'RESCOPED':
      output += bitbucket.internal.feature.pullRequest.rescopeActionStringImpl(opt_data);
      break;
    case 'REVIEWERS_UPDATED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} updated the reviewers',opt_data.userDisplayNameContent));
      break;
    case 'REVIEWERS_UPDATED_ADDED_SELF':
      output += soy.$$filterNoAutoescape(AJS.format('{0} joined as a reviewer',opt_data.userDisplayNameContent));
      break;
    case 'REVIEWERS_UPDATED_REMOVED_SELF':
      output += soy.$$filterNoAutoescape(AJS.format('{0} is no longer a reviewer',opt_data.userDisplayNameContent));
      break;
    case 'UPDATED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} {1} the pull request',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'APPROVED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} marked the pull request as {1}',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'REVIEWED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} marked the pull request as {1}',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'UNAPPROVED':
      output += soy.$$filterNoAutoescape(AJS.format('{0} marked the pull request as {1}',opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    default:
      output += soy.$$escapeHtml(opt_data.activityAction);
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityActionStringImpl.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityActionStringImpl';
}


bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem = function(opt_data, opt_ignored) {
  var output = '';
  var isSingleUpdate__soy349 = opt_data.addedReviewers.length + opt_data.removedReviewers.length == 1;
  var isSelfAddedReviewer__soy350 = isSingleUpdate__soy349 && opt_data.addedReviewers[0] && opt_data.addedReviewers[0].id == opt_data.user.id;
  var isSelfRemovedReviewer__soy351 = isSingleUpdate__soy349 && opt_data.removedReviewers[0] && opt_data.removedReviewers[0].id == opt_data.user.id;
  output += bitbucket.internal.feature.pullRequest.activityListItemContainer({extraClasses: 'reviewers-updated-activity', user: opt_data.user, activityDate: opt_data.activityDate, isFocused: opt_data.isFocused, isNew: opt_data.isNew, summaryContent: '' + ((isSelfAddedReviewer__soy350) ? bitbucket.internal.feature.pullRequest.activityActionString({user: opt_data.user, activityAction: 'REVIEWERS_UPDATED_ADDED_SELF'}) : (isSelfRemovedReviewer__soy351) ? bitbucket.internal.feature.pullRequest.activityActionString({user: opt_data.user, activityAction: 'REVIEWERS_UPDATED_REMOVED_SELF'}) : bitbucket.internal.feature.pullRequest.activityActionString({activityAction: 'REVIEWERS_UPDATED', user: opt_data.user})), detailContent: '' + ((! (isSelfAddedReviewer__soy350 || isSelfRemovedReviewer__soy351)) ? bitbucket.internal.feature.pullRequest.updatedReviewers(opt_data) : '')});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem.soyTemplateName = 'bitbucket.internal.feature.pullRequest.activityReviewersUpdatedListItem';
}


bitbucket.internal.feature.pullRequest.updatedReviewers = function(opt_data, opt_ignored) {
  return '' + ((opt_data.addedReviewers.length) ? '<div class="reviewers">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'add-small', accessibilityText: AJS.format('Added {0} {0,choice,1#reviewer|1\x3creviewers}:',opt_data.addedReviewers.length)}) + bitbucket.internal.feature.pullRequest.reviewerList({reviewers: opt_data.addedReviewers}) + '</div>' : '') + ((opt_data.removedReviewers.length) ? '<div class="reviewers"><span class="removed-symbol">' + soy.$$escapeHtml(AJS.format('Removed {0} {0,choice,1#reviewer|1\x3creviewers}:',opt_data.removedReviewers.length)) + '</span>' + bitbucket.internal.feature.pullRequest.reviewerList({reviewers: opt_data.removedReviewers}) + '</div>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.updatedReviewers.soyTemplateName = 'bitbucket.internal.feature.pullRequest.updatedReviewers';
}


bitbucket.internal.feature.pullRequest.reviewerList = function(opt_data, opt_ignored) {
  var output = '';
  var reviewerList399 = opt_data.reviewers;
  var reviewerListLen399 = reviewerList399.length;
  for (var reviewerIndex399 = 0; reviewerIndex399 < reviewerListLen399; reviewerIndex399++) {
    var reviewerData399 = reviewerList399[reviewerIndex399];
    output += bitbucket.internal.widget.avatar({size: 'small', person: reviewerData399, tooltip: reviewerData399.displayName || reviewerData399.name, link: true});
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.reviewerList.soyTemplateName = 'bitbucket.internal.feature.pullRequest.reviewerList';
}


bitbucket.internal.feature.pullRequest.loadPreviousActivities = function(opt_data, opt_ignored) {
  return '<li class="activity-load-new"><a href="#">' + soy.$$escapeHtml('Load new activity') + '</a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.loadPreviousActivities.soyTemplateName = 'bitbucket.internal.feature.pullRequest.loadPreviousActivities';
}


bitbucket.internal.feature.pullRequest.commitOrRangeComment = function(opt_data, opt_ignored) {
  var output = '';
  var shortCommitId__soy411 = '' + soy.$$escapeHtml((opt_data.commitId).substring(0, 11));
  output += '<span class="comment-link"> ';
  if (opt_data.diffType == 'COMMIT') {
    output += (opt_data.current) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('in commit \x3ca href\x3d\x22{0}\x22 class\x3d\x22commitid\x22\x3e{1}\x3c/a\x3e',typeof (opt_data.commentLink) === 'number' ? opt_data.commentLink : soy.$$escapeHtml(opt_data.commentLink),typeof (shortCommitId__soy411) === 'number' ? shortCommitId__soy411 : soy.$$escapeHtml(shortCommitId__soy411)))) : soy.$$escapeHtml(AJS.format('in removed commit {0}',shortCommitId__soy411));
  } else if (opt_data.diffType == 'RANGE') {
    var shortSinceId__soy422 = '' + soy.$$escapeHtml((opt_data.sinceId).substring(0, 11));
    output += (opt_data.current) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('in commit range \x3ca href\x3d\x22{0}\x22\x3e{1}..{2}\x3c/a\x3e',typeof (opt_data.commentLink) === 'number' ? opt_data.commentLink : soy.$$escapeHtml(opt_data.commentLink),typeof (shortSinceId__soy422) === 'number' ? shortSinceId__soy422 : soy.$$escapeHtml(shortSinceId__soy422),typeof (shortCommitId__soy411) === 'number' ? shortCommitId__soy411 : soy.$$escapeHtml(shortCommitId__soy411)))) : soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('in removed commit range {0}..{1}',typeof (shortSinceId__soy422) === 'number' ? shortSinceId__soy422 : soy.$$escapeHtml(shortSinceId__soy422),typeof (shortCommitId__soy411) === 'number' ? shortCommitId__soy411 : soy.$$escapeHtml(shortCommitId__soy411))));
  }
  output += '</span>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commitOrRangeComment.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commitOrRangeComment';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-activity', location = '/static/bitbucket/internal/feature/pull-request/activity/pull-request-activity.js' */
define("bitbucket/internal/feature/pull-request/activity/pull-request-activity","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/enums bitbucket/internal/feature/comments/comments bitbucket/internal/feature/file-content/file-content bitbucket/internal/model/commit-range bitbucket/internal/model/diff-type bitbucket/internal/model/file-change bitbucket/internal/model/file-content-modes bitbucket/internal/model/page-state bitbucket/internal/model/path bitbucket/internal/model/path-and-line bitbucket/internal/model/revision bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/codemirror bitbucket/internal/util/events bitbucket/internal/util/history bitbucket/internal/util/scroll bitbucket/internal/util/syntax-highlight bitbucket/internal/widget/paged-scrollable".split(" "),
function(L,y,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ga,ha,ia){function ja(a){(this.execute?this:m.default.whenIType(a)).execute(function(){var a=(0,h.default)(".general-comment-form");D.default.scrollTo(a);a.find("textarea").focus()})}function ka(a){a.closest(".diff-comment-activity, .file-comment-activity").remove()}function E(a){var c=a.getPath();return(a=a.getDiff().hunks[0])?0!==a.sourceLine?new z.default(c,a.sourceLine,"FROM"):new z.default(c,a.destinationLine,"TO"):new z.default(c)}function F(a,
c){var b=n.default.currentPullRequest();if(a.commentAnchor&&a.commentAnchor&&(a.commentAnchor.diffType===la||a.commentAnchor.diffType===G))b=b.commit(a.commentAnchor.toHash),c&&(b=b.change(E(c).toString())),a.commentAnchor.diffType===G&&(b=b.withParams({since:a.commentAnchor.fromHash}));else if(a.commentAnchor)var d=c?E(c).toString():new H.default(a.commentAnchor.path),b=b.diff().change(d);return b.build()}function f(a,c,b,d,e){this._$container=(0,h.default)(a);this.pullRequest=c;this.pullRequestPathComponents=
{projectKey:l.default.getProject().getKey(),repoSlug:l.default.getRepository().getSlug(),pullRequestId:this.pullRequest.getId()};this.fromType=b;this.fromId=d;this.dataLoadedEvent="bitbucket.internal.feature.pullRequestActivity.dataLoaded";this._$spinner=(0,h.default)('\x3cdiv class\x3d"spinner"/\x3e').insertAfter(this._$container);w.default.call(this,e.scrollableElement||a,{pageSize:25,dataLoadedEvent:this.dataLoadedEvent,autoLoad:"next",paginationContext:"pull-request-activity"})}Object.defineProperty(y,
"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(M),h=babelHelpers.interopRequireDefault(N),k=babelHelpers.interopRequireDefault(O),n=babelHelpers.interopRequireDefault(P),A=babelHelpers.interopRequireDefault(Q),r=babelHelpers.interopRequireDefault(R),I=babelHelpers.interopRequireDefault(S),x=babelHelpers.interopRequireDefault(T),v=babelHelpers.interopRequireDefault(U),B=babelHelpers.interopRequireDefault(V),ma=babelHelpers.interopRequireDefault(W),l=babelHelpers.interopRequireDefault(X),
H=babelHelpers.interopRequireDefault(Y),z=babelHelpers.interopRequireDefault(Z),t=babelHelpers.interopRequireDefault(aa),J=babelHelpers.interopRequireDefault(ba),C=babelHelpers.interopRequireDefault(ca),na=babelHelpers.interopRequireDefault(da),p=babelHelpers.interopRequireDefault(ea),oa=babelHelpers.interopRequireDefault(fa),D=babelHelpers.interopRequireDefault(ga),pa=babelHelpers.interopRequireDefault(ha),w=babelHelpers.interopRequireDefault(ia),qa=v.default.EFFECTIVE,la=v.default.COMMIT,G=v.default.RANGE;
h.default.extend(f.prototype,w.default.prototype);f.prototype.init=function(a){this.renderedDiffFileContents=[];w.default.prototype.init.call(this,a);this._inited=!0;this.loadedRange.isEmpty()||(this.renderedDiffFileContents=this.renderedDiffFileContents.concat(f.renderDiffs(this._$container.children(".diff-comment-activity"),a.diffCommentData,this.pullRequest)));r.default.bindContext(this._$container,new r.default.PullRequestAnchor(this.pullRequest));var c=this;this._reviewerSelfHandler=function(b){var a=
"ADD_SELF"===b.action;c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:b.pullRequest,isNew:!0,activity:{action:"UPDATED",createdDate:new Date,user:b.user,addedReviewers:a?[b.user]:[],removedReviewers:a?[]:[b.user]}})};this._reviewerStatusHandler=function(b){b.oldState===A.default.ApprovalStatus.NEEDS_WORK&&b.newState===A.default.ApprovalStatus.UNAPPROVED||c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:b.pullRequest,activity:{action:b.newState===
A.default.ApprovalStatus.NEEDS_WORK?"REVIEWED":b.newState,createdDate:new Date,user:b.user}})};this._declineHandler=function(b){c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:b.pullRequest,activity:{action:"DECLINED",createdDate:b.pullRequest.updatedDate,user:b.user}})};this._pushStateIfDiffOrCommitUrl=function(b){var a=(0,h.default)(b.target).prop("href");if(k.default.startsWith(a,n.default.currentPullRequest().diff().buildAbsolute())||k.default.startsWith(a,n.default.currentPullRequest().commit("").buildAbsolute()+
"/"))b.preventDefault(),window.scrollTo(0,0),oa.default.pushState(null,"",a)};this._mergeHandler=function(b){c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:b.pullRequest,activity:{action:"MERGED",createdDate:b.pullRequest.updatedDate,user:b.user,simpleMerge:!0,commit:b.pullRequest.properties.mergeCommit}})};this._reopenedHandler=function(b){c.addNewActivity({currentUser:l.default.getCurrentUser().toJSON(),pullRequest:b.pullRequest,activity:{action:"REOPENED",createdDate:b.pullRequest.updatedDate,
user:b.user}})};this._destroyables=[];this._destroyables.push(p.default.chainWith((0,h.default)(document)).on("click",".pull-request-activity .activity-item a",this._pushStateIfDiffOrCommitUrl).on("click",".diff-comment-activity .breadcrumbs a,.rescope a.commitid,.actions button.delete,.comment-likes-button",function(b){var a,e=b.target.classList;e.contains("stub")?a="overview.comment.open":e.contains("commitid")?a="overview.commit.open":e.contains("delete")?a="overview.comment.delete.clicked":e.contains("comment-likes-button")&&
(a="overview.comment.like.clicked");(0,h.default)(b.target).closest("#pull-request-activity")&&p.default.trigger("bitbucket.internal.feature.pullRequest."+a)}));this._destroyables.push(p.default.chain().on("bitbucket.internal.feature.pullRequest.reopened",this._reopenedHandler).on("bitbucket.internal.feature.pullRequest.declined",this._declineHandler).on("bitbucket.internal.feature.pullRequest.merged",this._mergeHandler).on("bitbucket.internal.feature.pullRequest.reviewerStatus.changed",this._reviewerStatusHandler).on("bitbucket.internal.feature.comments.lastCommentDeleted",
ka).on("bitbucket.internal.keyboard.shortcuts.pullrequest.addCommentHandler",ja).on("bitbucket.internal.feature.pullRequest.self.added",this._reviewerSelfHandler).on("bitbucket.internal.feature.pullRequest.self.removed",this._reviewerSelfHandler))};f.prototype.reset=function(){k.default.invoke(this._destroyables,"destroy");k.default.chain(this.renderedDiffFileContents).pluck("inlineInfo").pluck("fileContent").invoke("destroy").value();delete this.renderedDiffFileContents;k.default.invoke(this.fileCommentContexts,
"destroy");delete this.fileCommentContexts;r.default.unbindContext(this._$container);w.default.prototype.reset.call(this);this.currentTime=void 0;this._inited=!1};f.prototype.checkCommentIsNew=function(a){a.isUnread=a.updatedDate>this.lastViewed&&(!l.default.getCurrentUser()||a.author.name!==l.default.getCurrentUser().getName());a.comments.length&&k.default.each(a.comments,k.default.bind(this.checkCommentIsNew,this))};f.prototype.checkCommentActivitiesAreNew=function(a){var c=this;k.default.each(a,
function(a){"COMMENTED"===a.action&&c.checkCommentIsNew(a.comment)})};f.prototype.requestData=function(a,c){var b=this,d=0!==a||k.default.isUndefined(this.fromType)||k.default.isUndefined(this.fromId)?{}:{fromType:this.fromType,fromId:this.fromId};this._$spinner.spin("large");return J.default.rest({url:n.default.rest().project(this.pullRequestPathComponents.projectKey).repo(this.pullRequestPathComponents.repoSlug).pullRequest(this.pullRequestPathComponents.pullRequestId).activities().withParams(h.default.extend(d,
{start:a,limit:c,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),markup:!0})).build(),statusCode:{404:function(a,c,u,d,ra){a=void 0;(d=k.default.get(d,["errors","0"],null))&&"com.atlassian.bitbucket.commit.NoSuchCommitException"===d.exceptionName?a={canClose:!0,fallbackTitle:"Back to Dashboard",fallbackUrl:n.default.dashboard().build(),message:d.message,shouldReload:!1,title:"Page not found"}:
(a={canClose:!1,fallbackTitle:"Ok",fallbackUrl:n.default.project(b.pullRequestPathComponents.projectKey).repo(b.pullRequestPathComponents.repoSlug).pullRequest(b.pullRequestPathComponents.pullRequestId).overview().build(),shouldReload:!1},"activity"===b.fromType?(a.message="The requested activity does not exist.",a.title="Activity not found"):
(a.message="The requested comment does not exist. It may have been deleted.",a.title="Comment not found"));return babelHelpers.extends({},ra,a)}}}).done(function(a,c,d){b.currentTime||(c=(new Date(d.getResponseHeader("Date"))).getTime(),d=C.default.buildKey("last-viewed","pull-request"),b.currentTime=isNaN(c)?(new Date).getTime():c,b.lastViewed=C.default.getItem(d)||b.currentTime,C.default.setItem(d,b.currentTime));b.checkCommentActivitiesAreNew(a.values)}).fail(function(){b._$spinner.spinStop()})};
f.prototype.attachContent=function(a,c){this._$container["html"===a?"append":a](c)};f.prototype.decorateForFocus=function(a){var c;if("activity"===this.fromType){var b=parseInt(this.fromId,10);k.default.some(a.values,function(a,d){return a.id===b?(a.isFocused=!0,c=b,!0):!1})}else{var d=parseInt(this.fromId,10),e=function u(a){return a.id===d?a.isFocused=!0:a.comments?k.default.some(a.comments,function(a){return u(a)}):!1};k.default.some(a.values,function(a,b){return a.comment&&e(a.comment)?(c=a.id,
!0):!1})}return c};f.prototype.onAttachFirstPermalinkPage=function(a,c){function b(){g.hide();u.spin("large");var a=d.loadedRange.pageBefore(d.options.pageSize);J.default.rest({url:n.default.rest().project(d.pullRequestPathComponents.projectKey).repo(d.pullRequestPathComponents.repoSlug).pullRequest(d.pullRequestPathComponents.pullRequestId).activities().withParams(h.default.extend(a,{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),markup:!0})).build()}).done(function(a,b,c){d.loadedRange.add(a.start,
a.size,a.isLastPage,a.nextPageStart);var h;k.default.any(a.values,function(a,b){if(a.id===f)return h=b,!0});b=a.values.slice(0,h);d.checkCommentActivitiesAreNew(b);d.attachActivities(b,function(a){e.after(a)});a.isFirstPage||d.loadedRange.reachedStart()?(g.unbind("click"),e.remove(),u.remove()):(f=K,K=a.previousPageStartId);p.default.trigger(d.dataLoadedEvent,d,a.start,a.limit,a)}).always(function(){u.spinStop();g.show()})}var d=this,e=(0,h.default)(bitbucket.internal.feature.pullRequest.loadPreviousActivities());
this.attachContent(c,e);var g=e.find("a"),u=e.append((0,h.default)('\x3cdiv class\x3d"spinner"/\x3e')),K=a.previousPageStartId,f=a.values[0].id;g.click(function(a){a.preventDefault();b()})};f.prototype.attachActivities=function(a,c){var b=this,d=0,e=(0,h.default)(k.default.map(a,function(a){var c=a.commentAnchor,c=c?new x.default({diffType:c.diffType,pullRequest:b.pullRequest,untilRevision:new t.default({id:c.toHash}),sinceRevision:c.fromHash?new t.default({id:c.fromHash}):void 0}):new x.default({pullRequest:b.pullRequest,
diffType:qa}),e=void 0;"COMMENTED"===a.action&&(e=c.getPullRequest().getToRef().getRepository(),c=a.diff?B.default.fromDiff(a.diff,c,e):null,e=F(a,c));a=bitbucket.internal.feature.pullRequest.activityListItem({activity:a,pullRequest:b.pullRequest.toJSON(),isNew:!1,commitId:a.commentAnchor&&a.commentAnchor.toHash,commentLink:e});d++;return a}).join(""));pa.default.container(e);var g=k.default.reduce(a,function(a,b){a[b.id]=b;return a},{});c(e);this.fileCommentContexts=f.addBreadcrumbsAndBindFileComments(e.filter(".file-comment-activity"),
g,this.pullRequest);e=f.renderDiffs(e.filter(".diff-comment-activity"),g,this.pullRequest);this.renderedDiffFileContents=this.renderedDiffFileContents.concat(e);this._$container.find(".pull-request-diff-outdated-lozenge").tooltip({gravity:"ne"});this._$container.find(".reviewers-updated-activity .aui-avatar img").tooltip({gravity:"n"});return e};f.prototype.attachNewContent=function(a,c){function b(a){if(d._inited)if(a=f?(0,h.default)(".comment.focused",a):(0,h.default)(".activity-item.focused",a),
a.length)D.default.scrollTo(a,{waitForImages:!0,cancelIfScrolled:!0,duration:400}),p.default.trigger("bitbucket.internal.feature.pullRequestActivity.focused",null,a);else if(f)p.default.once("bitbucket.internal.feature.comments.commentContainerAdded",b)}var d=this,e=(0,h.default)("#pull-request-activity \x3e li.comment-form-container"),g=!k.default.isUndefined(this.fromId)&&!k.default.isUndefined(this.fromType),f="comment"===this.fromType,e=0===e.siblings().length,l;g&&e&&(l=this.decorateForFocus(a));
if(g&&!a.isFirstPage&&e)this.onAttachFirstPermalinkPage(a,c);g=this.attachActivities(a.values,function(a){d.attachContent(c,a)});this._$spinner.spinStop();a.isLastPage&&this._$spinner.remove();null!=l&&((l=k.default.findWhere(g,{activityId:l}))?l.inlineInfo.initPromise.done(b.bind(null,null)):b())};f.renderDiffForComment=function(a,c,b){var d=c.commentAnchor;a=new I.default(a);var e=b.getToRef().getRepository(),g=!d.orphaned,f=d.diffType;b=new x.default({diffType:d.diffType,pullRequest:b,untilRevision:new t.default({id:d.toHash}),
sinceRevision:d.fromHash?new t.default({id:d.fromHash}):void 0});b=B.default.fromDiff(c.diff,b,e);c=a.init(b,{commentMode:I.default.commentMode.REPLY_ONLY,lineComments:[c.comment],asyncDiffModifications:!1,attachScroll:!1,autoResizing:!0,scrollStyle:"inline",isExcerpt:!0,contentMode:ma.default.DIFF,changeTypeLozenge:!1,changeModeLozenge:!1,fileIcon:!0,breadcrumbs:!0,scrollPaneSelector:"self",pullRequestDiffLink:!0,pullRequestDiffCurrent:g,diffType:f,pullRequestDiffLinkUrl:F(c,b),toolbarWebFragmentLocationPrimary:"bitbucket.pull-request.activity.diff.toolbar.primary",
toolbarWebFragmentLocationSecondary:"bitbucket.pull-request.activity.diff.toolbar.secondary"});return{fileContent:a,initPromise:c}};f.renderDiffs=function(a,c,b){var d=[];k.default.each(a,function(a){var b=Number(a.getAttribute("data-activityid"));d.push({activityId:b,el:a,data:c[b]})});return na.default.doInOperation(function(){return k.default.map(d,function(a){return{activityId:a.activityId,inlineInfo:f.renderDiffForComment((0,h.default)(a.el).find(".detail"),a.data,b)}})})};f.addBreadcrumbsAndBindFileComments=
function(a,c,b){var d=[];a.each(function(){var a=(0,h.default)(this),g=a.attr("data-activityid"),g=c[g].commentAnchor,f=new H.default(g.path),m=!(g&&g.orphaned),p=k.default.map(f.getComponents(),function(a){return{text:a}}),q=n.default.currentPullRequest();switch(g.diffType){case v.default.COMMIT:q=q.commit(g.toHash);break;case v.default.RANGE:q=q.commit(g.toHash).since(g.fromHash);break;default:q=q.diff()}a.find(".breadcrumbs").append(bitbucket.internal.widget.breadcrumbs.crumbs({pathComponents:p,
primaryLink:m?q.change(f).build():void 0}));g=new B.default({repository:l.default.getRepository(),commitRange:new x.default({diffType:g.diffType,pullRequest:b,untilRevision:new t.default({id:g.toHash}),sinceRevision:g.fromHash?new t.default({id:g.fromHash}):void 0}),path:f});a=r.default.bindContext(a,new r.default.DiffAnchor(g),{$toolbar:a.find(".file-toolbar"),commentMode:r.default.commentMode.REPLY_ONLY});d.push(a)});return d};f.prototype.addNewActivity=function(a){var c=(0,h.default)("#pull-request-activity .comment-form-container").first(),
b=(0,h.default)(bitbucket.internal.feature.pullRequest.activityListItem({currentUser:a.currentUser.name?a.currentUser:a.currentUser.toJSON(),activity:a.activity,pullRequest:a.pullRequest.id?a.pullRequest:a.pullRequest.toJSON(),isNew:!0})).hide().insertAfter(c).fadeIn("slow");setTimeout(function(){b.removeClass("new")},3E3)};f.prototype.handleErrors=h.default.noop;y.default=f;L.exports=y["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/react-with-addons.js' */
/**
 * React (with addons) v15.5.4
 *
 * Copyright 2013-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return o(n||e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return s[e]=t[n];return""}var i=e(39),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};i.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=o},{39:39}],2:[function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function o(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,function(e){return t[e]})}var i={escape:r,unescape:o};t.exports=i},{}],3:[function(e,t,n){"use strict";var r=e(18),o=e(23),i={linkState:function(e){return new r(this.state[e],o.createStateKeySetter(this,e))}};t.exports=i},{18:18,23:23}],4:[function(e,t,n){"use strict";var r=e(34),o=(e(42),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},s=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)},u=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=o,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||c,n.poolSize||(n.poolSize=10),n.release=u,n},l={addPoolingTo:p,oneArgumentPooler:o,twoArgumentPooler:i,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=l},{34:34,42:42}],5:[function(e,t,n){"use strict";var r=e(45),o=e(9),i=e(11),a=e(22),s=e(10),u=e(14),c=e(15),p=e(21),l=e(27),f=e(33),d=(e(44),c.createElement),h=c.createFactory,y=c.cloneElement,v=r,m={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:f},Component:i,PureComponent:a,createElement:d,cloneElement:y,isValidElement:c.isValidElement,PropTypes:p,createClass:s.createClass,createFactory:h,createMixin:function(e){return e},DOM:u,version:l,__spread:v};t.exports=m},{10:10,11:11,14:14,15:15,21:21,22:22,27:27,33:33,44:44,45:45,9:9}],6:[function(e,t,n){"use strict";function r(){if(!o){var t=e(29);o=t.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}return o}var o;n.getReactDOM=r},{29:29}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}}}var s=e(45),u=e(5),c=e(47),p=c(u.isValidElement),l=e(26),f=e(8),d=function(e){function t(){var n,i,a;r(this,t);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return n=i=o(this,e.call.apply(e,[this].concat(c))),i._wrapChild=function(e){return u.createElement(f,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},a=n,o(i,a)}return i(t,e),t.prototype.render=function(){return u.createElement(l,s({},this.props,{childFactory:this._wrapChild}))},t}(u.Component);d.displayName="ReactCSSTransitionGroup",d.propTypes={transitionName:f.propTypes.name,transitionAppear:p.bool,transitionEnter:p.bool,transitionLeave:p.bool,transitionAppearTimeout:a("Appear"),transitionEnterTimeout:a("Enter"),transitionLeaveTimeout:a("Leave")},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.exports=d},{26:26,45:45,47:47,5:5,8:8}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e(5),s=e(6),u=e(47),c=u(a.isValidElement),p=e(38),l=e(25),f=e(33),d=17,h=function(e){function t(){var n,i,a;r(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return n=i=o(this,e.call.apply(e,[this].concat(c))),i._isMounted=!1,i.transition=function(e,t,n){var r=s.getReactDOM().findDOMNode(i);if(!r)return void(t&&t());var o=i.props.name[e]||i.props.name+"-"+e,a=i.props.name[e+"Active"]||o+"-active",u=null,c=function(e){e&&e.target!==r||(clearTimeout(u),p.removeClass(r,o),p.removeClass(r,a),l.removeEndEventListener(r,c),t&&t())};p.addClass(r,o),i.queueClassAndNode(a,r),n?(u=setTimeout(c,n),i.transitionTimeouts.push(u)):l.addEndEventListener(r,c)},i.queueClassAndNode=function(e,t){i.classNameAndNodeQueue.push({className:e,node:t}),i.timeout||(i.timeout=setTimeout(i.flushClassNameAndNodeQueue,d))},i.flushClassNameAndNodeQueue=function(){i._isMounted&&i.classNameAndNodeQueue.forEach(function(e){p.addClass(e.node,e.className)}),i.classNameAndNodeQueue.length=0,i.timeout=null},i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},a=n,o(i,a)}return i(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentDidMount=function(){this._isMounted=!0},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.render=function(){return f(this.props.children)},t}(a.Component);h.propTypes={name:c.oneOfType([c.string,c.shape({enter:c.string,leave:c.string,active:c.string}),c.shape({enter:c.string,enterActive:c.string,leave:c.string,leaveActive:c.string,appear:c.string,appearActive:c.string})]).isRequired,appear:c.bool,enter:c.bool,leave:c.bool,appearTimeout:c.number,enterTimeout:c.number,leaveTimeout:c.number},t.exports=h},{25:25,33:33,38:38,47:47,5:5,6:6}],9:[function(e,t,n){"use strict";function r(e){return(""+e).replace(b,"$&/")}function o(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=o.getPooled(t,n);m(e,i,r),o.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var o=e.result,i=e.keyPrefix,a=e.func,s=e.context,u=a.call(s,t,e.count++);Array.isArray(u)?c(u,o,n,v.thatReturnsArgument):null!=u&&(y.isValidElement(u)&&(u=y.cloneAndReplaceKey(u,i+(!u.key||t&&t.key===u.key?"":r(u.key)+"/")+n)),o.push(u))}function c(e,t,n,o,i){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(t,a,o,i);m(e,u,c),s.release(c)}function p(e,t,n){if(null==e)return e;var r=[];return c(e,r,null,t,n),r}function l(e,t,n){return null}function f(e,t){return m(e,l,null)}function d(e){var t=[];return c(e,t,null,v.thatReturnsArgument),t}var h=e(4),y=e(15),v=e(40),m=e(36),E=h.twoArgumentPooler,g=h.fourArgumentPooler,b=/\/+/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(o,E),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,g);var _={forEach:a,map:p,mapIntoWithKeyPrefixInternal:c,count:f,toArray:d};t.exports=_},{15:15,36:36,4:4,40:40}],10:[function(e,t,n){"use strict";function r(e){return e}function o(e,t){var n=b.hasOwnProperty(t)?b[t]:null;w.hasOwnProperty(t)&&"OVERRIDE_BASE"!==n&&f("73",t),e&&"DEFINE_MANY"!==n&&"DEFINE_MANY_MERGED"!==n&&f("74",t)}function i(e,t){if(t){"function"==typeof t&&f("75"),y.isValidElement(t)&&f("76");var n=e.prototype,r=n.__reactAutoBindPairs;t.hasOwnProperty(E)&&_.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==E){var a=t[i],s=n.hasOwnProperty(i);if(o(s,i),_.hasOwnProperty(i))_[i](e,a);else{var p=b.hasOwnProperty(i),l="function"==typeof a,d=l&&!p&&!s&&!1!==t.autobind;if(d)r.push(i,a),n[i]=a;else if(s){var h=b[i];(!p||"DEFINE_MANY_MERGED"!==h&&"DEFINE_MANY"!==h)&&f("77",h,i),"DEFINE_MANY_MERGED"===h?n[i]=u(n[i],a):"DEFINE_MANY"===h&&(n[i]=c(n[i],a))}else n[i]=a}}}}function a(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var o=n in _;o&&f("78",n);var i=n in e;i&&f("79",n),e[n]=r}}}function s(e,t){e&&t&&"object"==typeof e&&"object"==typeof t||f("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]&&f("81",n),e[n]=t[n]);return e}function u(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return s(o,n),s(o,r),o}}function c(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function p(e,t){return t.bind(e)}function l(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=p(e,o)}}var f=e(34),d=e(45),h=e(11),y=e(15),v=(e(20),e(19)),m=e(41),E=(e(42),e(44),"mixins"),g=[],b={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=d({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=d({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=u(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=d({},e.propTypes,t)},statics:function(e,t){a(e,t)},autobind:function(){}},w={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},A=function(){};d(A.prototype,h.prototype,w);var T={createClass:function(e){var t=r(function(e,n,r){this.__reactAutoBindPairs.length&&l(this),this.props=e,this.context=n,this.refs=m,this.updater=r||v,this.state=null;var o=this.getInitialState?this.getInitialState():null;("object"!=typeof o||Array.isArray(o))&&f("82",t.displayName||"ReactCompositeComponent"),this.state=o});t.prototype=new A,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],g.forEach(i.bind(null,t)),i(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render||f("83");for(var n in b)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){g.push(e)}}};t.exports=T},{11:11,15:15,19:19,20:20,34:34,41:41,42:42,44:44,45:45}],11:[function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||i}var o=e(34),i=e(19),a=(e(30),e(41));e(42),e(44);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&o("85"),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};t.exports=r},{19:19,30:30,34:34,41:41,42:42,44:44}],12:[function(e,t,n){"use strict";var r=e(35),o={shouldComponentUpdate:function(e,t){return r(this,e,t)}};t.exports=o},{35:35}],13:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],14:[function(e,t,n){"use strict";var r=e(15),o=r.createFactory,i={a:o("a"),abbr:o("abbr"),address:o("address"),area:o("area"),article:o("article"),aside:o("aside"),audio:o("audio"),b:o("b"),base:o("base"),bdi:o("bdi"),bdo:o("bdo"),big:o("big"),blockquote:o("blockquote"),body:o("body"),br:o("br"),button:o("button"),canvas:o("canvas"),caption:o("caption"),cite:o("cite"),code:o("code"),col:o("col"),colgroup:o("colgroup"),data:o("data"),datalist:o("datalist"),dd:o("dd"),del:o("del"),details:o("details"),dfn:o("dfn"),dialog:o("dialog"),div:o("div"),dl:o("dl"),dt:o("dt"),em:o("em"),embed:o("embed"),fieldset:o("fieldset"),figcaption:o("figcaption"),figure:o("figure"),footer:o("footer"),form:o("form"),h1:o("h1"),h2:o("h2"),h3:o("h3"),h4:o("h4"),h5:o("h5"),h6:o("h6"),head:o("head"),header:o("header"),hgroup:o("hgroup"),hr:o("hr"),html:o("html"),i:o("i"),iframe:o("iframe"),img:o("img"),input:o("input"),ins:o("ins"),kbd:o("kbd"),keygen:o("keygen"),label:o("label"),legend:o("legend"),li:o("li"),link:o("link"),main:o("main"),map:o("map"),mark:o("mark"),menu:o("menu"),menuitem:o("menuitem"),meta:o("meta"),meter:o("meter"),nav:o("nav"),noscript:o("noscript"),object:o("object"),ol:o("ol"),optgroup:o("optgroup"),option:o("option"),output:o("output"),p:o("p"),param:o("param"),picture:o("picture"),pre:o("pre"),progress:o("progress"),q:o("q"),rp:o("rp"),rt:o("rt"),ruby:o("ruby"),s:o("s"),samp:o("samp"),script:o("script"),section:o("section"),select:o("select"),small:o("small"),source:o("source"),span:o("span"),strong:o("strong"),style:o("style"),sub:o("sub"),summary:o("summary"),sup:o("sup"),table:o("table"),tbody:o("tbody"),td:o("td"),textarea:o("textarea"),tfoot:o("tfoot"),th:o("th"),thead:o("thead"),time:o("time"),title:o("title"),tr:o("tr"),track:o("track"),u:o("u"),ul:o("ul"),var:o("var"),video:o("video"),wbr:o("wbr"),circle:o("circle"),clipPath:o("clipPath"),defs:o("defs"),ellipse:o("ellipse"),g:o("g"),image:o("image"),line:o("line"),linearGradient:o("linearGradient"),mask:o("mask"),path:o("path"),pattern:o("pattern"),polygon:o("polygon"),polyline:o("polyline"),radialGradient:o("radialGradient"),rect:o("rect"),stop:o("stop"),svg:o("svg"),text:o("text"),tspan:o("tspan")};t.exports=i},{15:15}],15:[function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function o(e){return void 0!==e.key}var i=e(45),a=e(13),s=(e(44),e(30),Object.prototype.hasOwnProperty),u=e(16),c={key:!0,ref:!0,__self:!0,__source:!0},p=function(e,t,n,r,o,i,a){return{$$typeof:u,type:e,key:t,ref:n,props:a,_owner:i}};p.createElement=function(e,t,n){var i,u={},l=null,f=null;if(null!=t){r(t)&&(f=t.ref),o(t)&&(l=""+t.key),void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(i in t)s.call(t,i)&&!c.hasOwnProperty(i)&&(u[i]=t[i])}var d=arguments.length-2;if(1===d)u.children=n;else if(d>1){for(var h=Array(d),y=0;y<d;y++)h[y]=arguments[y+2];u.children=h}if(e&&e.defaultProps){var v=e.defaultProps;for(i in v)void 0===u[i]&&(u[i]=v[i])}return p(e,l,f,0,0,a.current,u)},p.createFactory=function(e){var t=p.createElement.bind(null,e);return t.type=e,t},p.cloneAndReplaceKey=function(e,t){return p(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},p.cloneElement=function(e,t,n){var u,l=i({},e.props),f=e.key,d=e.ref,h=(e._self,e._source,e._owner);if(null!=t){r(t)&&(d=t.ref,h=a.current),o(t)&&(f=""+t.key);var y;e.type&&e.type.defaultProps&&(y=e.type.defaultProps);for(u in t)s.call(t,u)&&!c.hasOwnProperty(u)&&(void 0===t[u]&&void 0!==y?l[u]=y[u]:l[u]=t[u])}var v=arguments.length-2;if(1===v)l.children=n;else if(v>1){for(var m=Array(v),E=0;E<v;E++)m[E]=arguments[E+2];l.children=m}return p(e.type,f,d,0,0,h,l)},p.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},t.exports=p},{13:13,16:16,30:30,44:44,45:45}],16:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=r},{}],17:[function(e,t,n){"use strict";var r=e(34),o=e(9),i=e(15),a=e(40),s=(e(42),e(44),{create:function(e){if("object"!=typeof e||!e||Array.isArray(e))return e;if(i.isValidElement(e))return e;1===e.nodeType&&r("0");var t=[];for(var n in e)o.mapIntoWithKeyPrefixInternal(e[n],t,n,a.thatReturnsArgument);return t}});t.exports=s},{15:15,34:34,40:40,42:42,44:44,9:9}],18:[function(e,t,n){"use strict";function r(e,t){this.value=e,this.requestChange=t}function o(e){var t={value:void 0===e?i.PropTypes.any.isRequired:e.isRequired,requestChange:i.PropTypes.func.isRequired};return i.PropTypes.shape(t)}var i=e(5);r.PropTypes={link:o},t.exports=r},{5:5}],19:[function(e,t,n){"use strict";var r=(e(44),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});t.exports=r},{44:44}],20:[function(e,t,n){"use strict";var r={};t.exports=r},{}],21:[function(e,t,n){"use strict";var r=e(15),o=r.isValidElement,i=e(47);t.exports=i(o)},{15:15,47:47}],22:[function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=u,this.updater=n||s}function o(){}var i=e(45),a=e(11),s=e(19),u=e(41);o.prototype=a.prototype,r.prototype=new o,r.prototype.constructor=r,i(r.prototype,a.prototype),r.prototype.isPureReactComponent=!0,t.exports=r},{11:11,19:19,41:41,45:45}],23:[function(e,t,n){"use strict";function r(e,t){var n={};return function(r){n[t]=r,e.setState(n)}}var o={createStateSetter:function(e,t){return function(n,r,o,i,a,s){var u=t.call(e,n,r,o,i,a,s);u&&e.setState(u)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=r(e,t))}};o.Mixin={createStateSetter:function(e){return o.createStateSetter(this,e)},createStateKeySetter:function(e){return o.createStateKeySetter(this,e)}},t.exports=o},{}],24:[function(e,t,n){"use strict";var r=e(31),o={getChildMapping:function(e,t){return e?r(e):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var a,s={};for(var u in t){if(r.hasOwnProperty(u))for(a=0;a<r[u].length;a++){var c=r[u][a];s[r[u][a]]=n(c)}s[u]=n(u)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}};t.exports=o},{31:31}],25:[function(e,t,n){"use strict";function r(e,t,n){e.addEventListener(t,n,!1)}function o(e,t,n){e.removeEventListener(t,n,!1)}var i=e(39),a=e(1),s=[];i.canUseDOM&&function(){var e=a("animationend"),t=a("transitionend");e&&s.push(e),t&&s.push(t)}();var u={addEndEventListener:function(e,t){if(0===s.length)return void window.setTimeout(t,0);s.forEach(function(n){r(e,n,t)})},removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){o(e,n,t)})}};t.exports=u},{1:1,39:39}],26:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e(45),s=e(5),u=e(24),c=e(47),p=c(s.isValidElement),l=e(40),f=function(e){function t(){var n,i,s;r(this,t);for(var c=arguments.length,p=Array(c),l=0;l<c;l++)p[l]=arguments[l];return n=i=o(this,e.call.apply(e,[this].concat(p))),i.state={children:u.getChildMapping(i.props.children)},i.performAppear=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e)):i._handleDoneAppearing(e)},i._handleDoneAppearing=function(e){var t=i.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=u.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e)},i.performEnter=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e)):i._handleDoneEntering(e)},i._handleDoneEntering=function(e){var t=i.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=u.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e)},i.performLeave=function(e){i.currentlyTransitioningKeys[e]=!0;var t=i.refs[e];t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e)):i._handleDoneLeaving(e)},i._handleDoneLeaving=function(e){var t=i.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=u.getChildMapping(i.props.children);n&&n.hasOwnProperty(e)?i.performEnter(e):i.setState(function(t){var n=a({},t.children);return delete n[e],{children:n}})},s=n,o(i,s)}return i(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},t.prototype.componentWillReceiveProps=function(e){var t=u.getChildMapping(e.children),n=this.state.children;this.setState({children:u.mergeChildMappings(n,t)});var r;for(r in t){var o=n&&n.hasOwnProperty(r);!t[r]||o||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n){var i=t&&t.hasOwnProperty(r);!n[r]||i||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},t.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},t.prototype.render=function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(s.cloneElement(this.props.childFactory(n),{ref:t,key:t}))}var r=a({},this.props);return delete r.transitionLeave,delete r.transitionName,delete r.transitionAppear,delete r.transitionEnter,delete r.childFactory,delete r.transitionLeaveTimeout,delete r.transitionEnterTimeout,delete r.transitionAppearTimeout,delete r.component,s.createElement(this.props.component,r,e)},t}(s.Component);f.displayName="ReactTransitionGroup",f.propTypes={component:p.any,childFactory:p.func},f.defaultProps={component:"span",childFactory:l.thatReturnsArgument},t.exports=f},{24:24,40:40,45:45,47:47,5:5}],27:[function(e,t,n){"use strict";t.exports="15.5.4"},{}],28:[function(e,t,n){"use strict";var r=e(3),o=e(5),i=(e(6),e(12)),a=e(7),s=e(17),u=e(26),c=e(35),p=e(37);o.addons={CSSTransitionGroup:a,LinkedStateMixin:r,PureRenderMixin:i,TransitionGroup:u,createFragment:s.create,shallowCompare:c,update:p},t.exports=o},{12:12,17:17,26:26,3:3,35:35,37:37,5:5,6:6,7:7}],29:[function(e,t,n){"use strict";var r=e(45),o=e(28),i=r(o,{__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:null,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:e(13)}});t.exports=i},{13:13,28:28,45:45}],30:[function(e,t,n){"use strict";t.exports=!1},{}],31:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var o=e;void 0===o[n]&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return i(e,r,n),n}var i=(e(2),e(36));e(44);void 0!==n&&n.env,t.exports=o}).call(this,void 0)},{2:2,36:36,44:44}],32:[function(e,t,n){"use strict";function r(e){var t=e&&(o&&e[o]||e[i]);if("function"==typeof t)return t}var o="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=r},{}],33:[function(e,t,n){"use strict";function r(e){return i.isValidElement(e)||o("143"),e}var o=e(34),i=e(15);e(42);t.exports=r},{15:15,34:34,42:42}],34:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=r},{}],35:[function(e,t,n){"use strict";function r(e,t,n){return!o(e.props,t)||!o(e.state,n)}var o=e(43);t.exports=r},{43:43}],36:[function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?c.escape(e.key):t.toString(36)}function o(e,t,n,i){var f=typeof e;if("undefined"!==f&&"boolean"!==f||(e=null),null===e||"string"===f||"number"===f||"object"===f&&e.$$typeof===s)return n(i,e,""===t?p+r(e,0):t),1;var d,h,y=0,v=""===t?p:t+l;if(Array.isArray(e))for(var m=0;m<e.length;m++)d=e[m],h=v+r(d,m),y+=o(d,h,n,i);else{var E=u(e);if(E){var g,b=E.call(e);if(E!==e.entries)for(var _=0;!(g=b.next()).done;)d=g.value,h=v+r(d,_++),y+=o(d,h,n,i);else for(;!(g=b.next()).done;){var w=g.value;w&&(d=w[1],h=v+c.escape(w[0])+l+r(d,0),y+=o(d,h,n,i))}}else if("object"===f){var A=String(e);a("31","[object Object]"===A?"object with keys {"+Object.keys(e).join(", ")+"}":A,"")}}return y}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=e(34),s=(e(13),e(16)),u=e(32),c=(e(42),e(2)),p=(e(44),"."),l=":";t.exports=i},{13:13,16:16,2:2,32:32,34:34,42:42,44:44}],37:[function(e,t,n){"use strict";function r(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?s(new e.constructor,e):e}function o(e,t,n){Array.isArray(e)||a("1",n,e);var r=t[n];Array.isArray(r)||a("2",n,r)}function i(e,t){if("object"!=typeof t&&a("3",y.join(", "),f),u.call(t,f))return 1!==Object.keys(t).length&&a("4",f),t[f];var n=r(e);if(u.call(t,d)){var m=t[d];m&&"object"==typeof m||a("5",d,m),n&&"object"==typeof n||a("6",d,n),s(n,t[d])}u.call(t,c)&&(o(e,t,c),t[c].forEach(function(e){n.push(e)})),u.call(t,p)&&(o(e,t,p),t[p].forEach(function(e){n.unshift(e)})),u.call(t,l)&&(Array.isArray(e)||a("7",l,e),Array.isArray(t[l])||a("8",l,t[l]),t[l].forEach(function(e){Array.isArray(e)||a("8",l,t[l]),n.splice.apply(n,e)})),u.call(t,h)&&("function"!=typeof t[h]&&a("9",h,t[h]),n=t[h](n));for(var E in t)v.hasOwnProperty(E)&&v[E]||(n[E]=i(e[E],t[E]));return n}var a=e(34),s=e(45),u=(e(42),{}.hasOwnProperty),c="$push",p="$unshift",l="$splice",f="$set",d="$merge",h="$apply",y=[c,p,l,f,d,h],v={};y.forEach(function(e){v[e]=!0}),t.exports=i},{34:34,42:42,45:45}],38:[function(e,t,n){"use strict";function r(e,t){for(var n=e;n.parentNode;)n=n.parentNode;var r=n.querySelectorAll(t);return-1!==Array.prototype.indexOf.call(r,e)}var o=e(42),i={addClass:function(e,t){return/\s/.test(t)&&o(!1),t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return/\s/.test(t)&&o(!1),t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return/\s/.test(t)&&o(!1),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1},matchesSelector:function(e,t){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(t){return r(e,t)}).call(e,t)}};t.exports=i},{42:42}],39:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},{}],40:[function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],41:[function(e,t,n){"use strict";var r={};t.exports=r},{}],42:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){if(o(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[n,r,i,a,s,u],l=0;c=new Error(t.replace(/%s/g,function(){return p[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(e){};t.exports=r},{}],43:[function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=o},{}],44:[function(e,t,n){"use strict";var r=e(40),o=r;t.exports=o},{40:40}],45:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var p in n)i.call(n,p)&&(u[p]=n[p]);if(o){s=o(n);for(var l=0;l<s.length;l++)a.call(n,s[l])&&(u[s[l]]=n[s[l]])}}return u}},{}],46:[function(e,t,n){"use strict";function r(e,t,n,r,o){}t.exports=r},{42:42,44:44,49:49}],47:[function(e,t,n){"use strict";var r=e(48)
;t.exports=function(e){return r(e,!1)}},{48:48}],48:[function(e,t,n){"use strict";var r=e(40),o=e(42),i=(e(44),e(49)),a=e(46);t.exports=function(e,t){function n(e){var t=e&&(w&&e[w]||e[A]);if("function"==typeof t)return t}function s(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function c(e){function n(n,r,a,s,c,p,l){if(s=s||T,p=p||a,l!==i)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[a]?n?new u(null===r[a]?"The "+c+" `"+p+"` is marked as required in `"+s+"`, but its value is `null`.":"The "+c+" `"+p+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(r,a,s,c,p)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function p(e){function t(t,n,r,o,i,a){var s=t[n];if(g(s)!==e)return new u("Invalid "+o+" `"+i+"` of type `"+b(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return c(t)}function l(e){function t(t,n,r,o,a){if("function"!=typeof e)return new u("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new u("Invalid "+o+" `"+a+"` of type `"+g(s)+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<s.length;c++){var p=e(s,c,r,o,a+"["+c+"]",i);if(p instanceof Error)return p}return null}return c(t)}function f(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=e.name||T;return new u("Invalid "+o+" `"+i+"` of type `"+_(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return c(t)}function d(e){function t(t,n,r,o,i){for(var a=t[n],c=0;c<e.length;c++)if(s(a,e[c]))return null;return new u("Invalid "+o+" `"+i+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?c(t):r.thatReturnsNull}function h(e){function t(t,n,r,o,a){if("function"!=typeof e)return new u("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],c=g(s);if("object"!==c)return new u("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var p in s)if(s.hasOwnProperty(p)){var l=e(s,p,r,o,a+"."+p,i);if(l instanceof Error)return l}return null}return c(t)}function y(e){function t(t,n,r,o,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,o,a,i))return null}return new u("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")}return Array.isArray(e)?c(t):r.thatReturnsNull}function v(e){function t(t,n,r,o,a){var s=t[n],c=g(s);if("object"!==c)return new u("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var p in e){var l=e[p];if(l){var f=l(s,p,r,o,a+"."+p,i);if(f)return f}}return null}return c(t)}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!m(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!m(a[1]))return!1}return!0;default:return!1}}function E(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":E(t,e)?"symbol":t}function b(e){var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function _(e){return e.constructor&&e.constructor.name?e.constructor.name:T}var w="function"==typeof Symbol&&Symbol.iterator,A="@@iterator",T="<<anonymous>>",x={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return c(r.thatReturnsNull)}(),arrayOf:l,element:function(){function t(t,n,r,o,i){var a=t[n];if(!e(a)){return new u("Invalid "+o+" `"+i+"` of type `"+g(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return c(t)}(),instanceOf:f,node:function(){function e(e,t,n,r,o){return m(e[t])?null:new u("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return c(e)}(),objectOf:h,oneOf:d,oneOfType:y,shape:v};return u.prototype=Error.prototype,x.checkPropTypes=a,x.PropTypes=x,x}},{40:40,42:42,44:44,46:46,49:49}],49:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[29])(29)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/react-dom.js' */
/**
 * ReactDOM v15.5.4
 *
 * Copyright 2013-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ReactDOM=e(t.React)}}(function(e){return function(t){return function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};t.exports=r},{}],2:[function(e,t,n){"use strict";var r=e(33),o=e(131),i={focusDOMComponent:function(){o(r.getNodeFromInstance(this))}};t.exports=i},{131:131,33:33}],3:[function(e,t,n){"use strict";function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case"topCompositionStart":return T.compositionStart;case"topCompositionEnd":return T.compositionEnd;case"topCompositionUpdate":return T.compositionUpdate}}function i(e,t){return"topKeyDown"===e&&t.keyCode===y}function a(e,t){switch(e){case"topKeyUp":return-1!==g.indexOf(t.keyCode);case"topKeyDown":return t.keyCode!==y;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function s(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,r){var u,l;if(_?u=o(e):P?a(e,n)&&(u=T.compositionEnd):i(e,n)&&(u=T.compositionStart),!u)return null;E&&(P||u!==T.compositionStart?u===T.compositionEnd&&P&&(l=P.getData()):P=h.getPooled(r));var c=m.getPooled(u,t,n,r);if(l)c.data=l;else{var p=s(n);null!==p&&(c.data=p)}return d.accumulateTwoPhaseDispatches(c),c}function l(e,t){switch(e){case"topCompositionEnd":return s(t);case"topKeyPress":return t.which!==x?null:(k=!0,w);case"topTextInput":var n=t.data;return n===w&&k?null:n;default:return null}}function c(e,t){if(P){if("topCompositionEnd"===e||!_&&a(e,t)){var n=P.getData();return h.release(P),P=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!r(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return E?null:t.data;default:return null}}function p(e,t,n,r){var o;if(!(o=b?l(e,n):c(e,n)))return null;var i=v.getPooled(T.beforeInput,t,n,r);return i.data=o,d.accumulateTwoPhaseDispatches(i),i}var d=e(19),f=e(123),h=e(20),m=e(78),v=e(82),g=[9,13,27,32],y=229,_=f.canUseDOM&&"CompositionEvent"in window,C=null;f.canUseDOM&&"documentMode"in document&&(C=document.documentMode);var b=f.canUseDOM&&"TextEvent"in window&&!C&&!function(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}(),E=f.canUseDOM&&(!_||C&&C>8&&C<=11),x=32,w=String.fromCharCode(x),T={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},k=!1,P=null,S={eventTypes:T,extractEvents:function(e,t,n,r){return[u(e,t,n,r),p(e,t,n,r)]}};t.exports=S},{123:123,19:19,20:20,78:78,82:82}],4:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(e){i.forEach(function(t){o[r(t,e)]=o[e]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:o,shorthandPropertyExpansions:a};t.exports=s},{}],5:[function(e,t,n){"use strict";var r=e(4),o=e(123),i=(e(58),e(125),e(94)),a=e(136),s=e(140),u=(e(142),s(function(e){return a(e)})),l=!1,c="cssFloat";if(o.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(e){l=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];null!=o&&(n+=u(r)+":",n+=i(r,o,t)+";")}return n||null},setValueForStyles:function(e,t,n){var o=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=i(a,t[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)o[a]=s;else{var u=l&&r.shorthandPropertyExpansions[a];if(u)for(var p in u)o[p]="";else o[a]=""}}}};t.exports=d},{123:123,125:125,136:136,140:140,142:142,4:4,58:58,94:94}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(112),i=e(24),a=(e(137),function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function(e,t){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(t)},e.prototype.notifyAll=function(){var e=this._callbacks,t=this._contexts,n=this._arg;if(e&&t){e.length!==t.length&&o("24"),this._callbacks=null,this._contexts=null;for(var r=0;r<e.length;r++)e[r].call(t[r],n);e.length=0,t.length=0}},e.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function(){this.reset()},e}());t.exports=i.addPoolingTo(a)},{112:112,137:137,24:24}],7:[function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function o(e){var t=w.getPooled(S.change,M,e,T(e));C.accumulateTwoPhaseDispatches(t),x.batchedUpdates(i,t)}function i(e){_.enqueueEvents(e),_.processEventQueue(!1)}function a(e,t){N=e,M=t,N.attachEvent("onchange",o)}function s(){N&&(N.detachEvent("onchange",o),N=null,M=null)}function u(e,t){if("topChange"===e)return t}function l(e,t,n){"topFocus"===e?(s(),a(t,n)):"topBlur"===e&&s()}function c(e,t){N=e,M=t,I=e.value,O=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(N,"value",D),N.attachEvent?N.attachEvent("onpropertychange",d):N.addEventListener("propertychange",d,!1)}function p(){N&&(delete N.value,N.detachEvent?N.detachEvent("onpropertychange",d):N.removeEventListener("propertychange",d,!1),N=null,M=null,I=null,O=null)}function d(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==I&&(I=t,o(e))}}function f(e,t){if("topInput"===e)return t}function h(e,t,n){"topFocus"===e?(p(),c(t,n)):"topBlur"===e&&p()}function m(e,t){if(("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)&&N&&N.value!==I)return I=N.value,M}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t){if("topClick"===e)return t}function y(e,t){if(null!=e){var n=e._wrapperState||t._wrapperState;if(n&&n.controlled&&"number"===t.type){var r=""+t.value;t.getAttribute("value")!==r&&t.setAttribute("value",r)}}}var _=e(16),C=e(19),b=e(123),E=e(33),x=e(71),w=e(80),T=e(102),k=e(109),P=e(110),S={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},N=null,M=null,I=null,O=null,R=!1;b.canUseDOM&&(R=k("change")&&(!document.documentMode||document.documentMode>8));var A=!1;b.canUseDOM&&(A=k("input")&&(!document.documentMode||document.documentMode>11));var D={get:function(){return O.get.call(this)},set:function(e){I=""+e,O.set.call(this,e)}},L={eventTypes:S,extractEvents:function(e,t,n,o){var i,a,s=t?E.getNodeFromInstance(t):window;if(r(s)?R?i=u:a=l:P(s)?A?i=f:(i=m,a=h):v(s)&&(i=g),i){var c=i(e,t);if(c){var p=w.getPooled(S.change,c,n,o);return p.type="change",C.accumulateTwoPhaseDispatches(p),p}}a&&a(e,s,t),"topBlur"===e&&y(t,s)}};t.exports=L},{102:102,109:109,110:110,123:123,16:16,19:19,33:33,71:71,80:80}],8:[function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function o(e,t,n){c.insertTreeBefore(e,t,n)}function i(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):m(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],u(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var o=t;;){var i=o.nextSibling;if(m(e,o,r),o===n)break;o=i}}function u(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function l(e,t,n){var r=e.parentNode,o=e.nextSibling;o===t?n&&m(r,document.createTextNode(n),o):n?(h(o,n),u(r,o,t)):u(r,e,t)}var c=e(9),p=e(13),d=(e(33),e(58),e(93)),f=e(114),h=e(115),m=d(function(e,t,n){e.insertBefore(t,n)}),v=p.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:v,replaceDelimitedText:l,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case"INSERT_MARKUP":o(e,s.content,r(e,s.afterNode));break;case"MOVE_EXISTING":i(e,s.fromNode,r(e,s.afterNode));break;case"SET_MARKUP":f(e,s.content);break;case"TEXT_CONTENT":h(e,s.content);break;case"REMOVE_NODE":a(e,s.fromNode)}}}};t.exports=g},{114:114,115:115,13:13,33:33,58:58,9:9,93:93}],9:[function(e,t,n){"use strict";function r(e){if(h){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)m(t,n[r],null);else null!=e.html?p(t,e.html):null!=e.text&&f(t,e.text)}}function o(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function i(e,t){h?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){h?e.html=t:p(e.node,t)}function s(e,t){h?e.text=t:f(e.node,t)}function u(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:u}}var c=e(10),p=e(114),d=e(93),f=e(115),h="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),m=d(function(e,t,n){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});l.insertTreeBefore=m,l.replaceChildWithTree=o,l.queueChild=i,l.queueHTML=a,l.queueText=s,t.exports=l},{10:10,114:114,115:115,93:93}],10:[function(e,t,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=r},{}],11:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var o=e(112),i=(e(137),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var p in n){s.properties.hasOwnProperty(p)&&o("48",p);var d=p.toLowerCase(),f=n[p],h={attributeName:d,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:r(f,t.MUST_USE_PROPERTY),hasBooleanValue:r(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1||o("50",p),u.hasOwnProperty(p)){var m=u[p];h.attributeName=m}a.hasOwnProperty(p)&&(h.attributeNamespace=a[p]),l.hasOwnProperty(p)&&(h.propertyName=l[p]),c.hasOwnProperty(p)&&(h.mutationMethod=c[p]),s.properties[p]=h}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++)if((0,s._isCustomAttributeFunctions[t])(e))return!0;return!1},injection:i};t.exports=s},{112:112,137:137}],12:[function(e,t,n){"use strict";function r(e){return!!l.hasOwnProperty(e)||!u.hasOwnProperty(e)&&(s.test(e)?(l[e]=!0,!0):(u[e]=!0,!1))}function o(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var i=e(11),a=(e(33),e(58),e(111)),s=(e(142),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),u={},l={},c={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(i.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){if(o(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?r+'=""':r+"="+a(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var r=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else{if(o(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?e.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(i.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){r(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?e[o]=!1:e[o]=""}else e.removeAttribute(n.attributeName)}else i.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=c},{11:11,111:111,142:142,33:33,58:58}],13:[function(e,t,n){"use strict";var r=e(112),o=e(9),i=e(123),a=e(128),s=e(129),u=(e(137),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM||r("56"),t||r("57"),"HTML"===e.nodeName&&r("58"),"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else o.replaceChildWithTree(e,t)}});t.exports=u},{112:112,123:123,128:128,129:129,137:137,9:9}],14:[function(e,t,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];t.exports=r},{}],15:[function(e,t,n){"use strict";var r=e(19),o=e(33),i=e(84),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var u;if(s.window===s)u=s;else{var l=s.ownerDocument;u=l?l.defaultView||l.parentWindow:window}var c,p;if("topMouseOut"===e){c=t;var d=n.relatedTarget||n.toElement;p=d?o.getClosestInstanceFromNode(d):null}else c=null,p=t;if(c===p)return null;var f=null==c?u:o.getNodeFromInstance(c),h=null==p?u:o.getNodeFromInstance(p),m=i.getPooled(a.mouseLeave,c,n,s);m.type="mouseleave",m.target=f,m.relatedTarget=h;var v=i.getPooled(a.mouseEnter,p,n,s);return v.type="mouseenter",v.target=h,v.relatedTarget=f,r.accumulateEnterLeaveDispatches(m,v,c,p),[m,v]}};t.exports=s},{19:19,33:33,84:84}],16:[function(e,t,n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function o(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var i=e(112),a=e(17),s=e(18),u=e(50),l=e(91),c=e(98),p=(e(137),{}),d=null,f=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},h=function(e){return f(e,!0)},m=function(e){return f(e,!1)},v=function(e){return"."+e._rootNodeID},g={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n&&i("94",t,typeof n);var r=v(e);(p[t]||(p[t]={}))[r]=n;var o=a.registrationNameModules[t];o&&o.didPutListener&&o.didPutListener(e,t,n)},getListener:function(e,t){var n=p[t];if(o(t,e._currentElement.type,e._currentElement.props))return null;var r=v(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=p[t];r&&delete r[v(e)]},deleteAllListeners:function(e){var t=v(e);for(var n in p)if(p.hasOwnProperty(n)&&p[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete p[n][t]}},extractEvents:function(e,t,n,r){for(var o,i=a.plugins,s=0;s<i.length;s++){var u=i[s];if(u){var c=u.extractEvents(e,t,n,r);c&&(o=l(o,c))}}return o},enqueueEvents:function(e){e&&(d=l(d,e))},processEventQueue:function(e){var t=d;d=null,e?c(t,h):c(t,m),d&&i("95"),u.rethrowCaughtError()},__purge:function(){p={}},__getListenerBank:function(){return p}};t.exports=g},{112:112,137:137,17:17,18:18,50:50,91:91,98:98}],17:[function(e,t,n){"use strict";function r(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(n>-1||a("96",e),!l.plugins[n]){t.extractEvents||a("97",e),l.plugins[n]=t;var r=t.eventTypes;for(var i in r)o(r[i],t,i)||a("98",i,e)}}}function o(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)&&a("99",n),l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];i(s,t,n)}return!0}return!!e.registrationName&&(i(e.registrationName,t,n),!0)}function i(e,t,n){l.registrationNameModules[e]&&a("100",e),l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=e(112),s=(e(137),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s&&a("101"),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];u.hasOwnProperty(n)&&u[n]===o||(u[n]&&a("102",n),u[n]=o,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var o=l.registrationNameModules[n[r]];if(o)return o}}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=l},{112:112,137:137}],18:[function(e,t,n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function o(e){return"topMouseMove"===e||"topTouchMove"===e}function i(e){return"topMouseDown"===e||"topTouchStart"===e}function a(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=g.getNodeFromInstance(r),t?m.invokeGuardedCallbackWithCatch(o,n,e):m.invokeGuardedCallback(o,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)a(e,t,n[o],r[o]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&h("103"),e.currentTarget=t?g.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function p(e){return!!e._dispatchListeners}var d,f,h=e(112),m=e(50),v=(e(137),e(142),{injectComponentTree:function(e){d=e},injectTreeTraversal:function(e){f=e}}),g={isEndish:r,isMoveish:o,isStartish:i,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:p,getInstanceFromNode:function(e){return d.getInstanceFromNode(e)},getNodeFromInstance:function(e){return d.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,o){return f.traverseEnterLeave(e,t,n,r,o)},injection:v};t.exports=g},{112:112,137:137,142:142,50:50}],19:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function o(e,t,n){var o=r(e,n,t);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,o,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,o,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=g(e,r);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function l(e){v(e,i)}function c(e){v(e,a)}function p(e,t,n,r){h.traverseEnterLeave(n,r,s,e,t)}function d(e){v(e,u)}var f=e(16),h=e(18),m=e(91),v=e(98),g=(e(142),f.getListener),y={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:p};t.exports=y},{142:142,16:16,18:18,91:91,98:98}],20:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var o=e(143),i=e(24),a=e(106);o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,o=this.getText(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=o.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},{106:106,143:143,24:24}],21:[function(e,t,n){"use strict";var r=e(11),o=r.injection.MUST_USE_PROPERTY,i=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,as:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|i,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|i,muted:o|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,playsInline:i,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:o|i,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}};t.exports=l},{11:11}],22:[function(e,t,n){"use strict";function r(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function o(e){var t={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(/(=0|=2)/g,function(e){return t[e]})}var i={escape:r,unescape:o};t.exports=i},{}],23:[function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink&&s("87")}function o(e){r(e),(null!=e.value||null!=e.onChange)&&s("88")}function i(e){r(e),(null!=e.checked||null!=e.onChange)&&s("89")}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=e(112),u=e(64),l=e(145),c=e(120),p=l(c.isValidElement),d=(e(137),e(142),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:p.func},h={},m={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var o=f[r](t,r,e,"prop",null,u);o instanceof Error&&!(o.message in h)&&(h[o.message]=!0,a(n))}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};t.exports=m},{112:112,120:120,137:137,142:142,145:145,64:64}],24:[function(e,t,n){"use strict";var r=e(112),o=(e(137),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},s=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)},u=function(e){var t=this;e instanceof t||r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=o,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=u,n},p={addPoolingTo:c,oneArgumentPooler:o,twoArgumentPooler:i,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=p},{112:112,137:137}],25:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=f++,p[e[m]]={}),p[e[m]]}var o,i=e(143),a=e(17),s=e(51),u=e(90),l=e(107),c=e(109),p={},d=!1,f=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",
topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),v=i({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!v.ReactEventListener||!v.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),i=a.registrationNameDependencies[e],s=0;s<i.length;s++){var u=i[s];o.hasOwnProperty(u)&&o[u]||("topWheel"===u?c("wheel")?v.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):c("mousewheel")?v.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):v.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?c("scroll",!0)?v.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):v.ReactEventListener.trapBubbledEvent("topScroll","scroll",v.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(c("focus",!0)?(v.ReactEventListener.trapCapturedEvent("topFocus","focus",n),v.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):c("focusin")&&(v.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),v.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),o.topBlur=!0,o.topFocus=!0):h.hasOwnProperty(u)&&v.ReactEventListener.trapBubbledEvent(u,h[u],n),o[u]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===o&&(o=v.supportsEventPageXY()),!o&&!d){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),d=!0}}});t.exports=v},{107:107,109:109,143:143,17:17,51:51,90:90}],26:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){var o=void 0===e[n];null!=t&&o&&(e[n]=i(t,!0))}var o=e(66),i=e(108),a=(e(22),e(116)),s=e(117);e(142);void 0!==n&&n.env;var u={instantiateChildren:function(e,t,n,o){if(null==e)return null;var i={};return s(e,r,i),i},updateChildren:function(e,t,n,r,s,u,l,c,p){if(t||e){var d,f;for(d in t)if(t.hasOwnProperty(d)){f=e&&e[d];var h=f&&f._currentElement,m=t[d];if(null!=f&&a(h,m))o.receiveComponent(f,m,s,c),t[d]=f;else{f&&(r[d]=o.getHostNode(f),o.unmountComponent(f,!1));var v=i(m,!0);t[d]=v;var g=o.mountComponent(v,s,u,l,c,p);n.push(g)}}for(d in e)!e.hasOwnProperty(d)||t&&t.hasOwnProperty(d)||(f=e[d],r[d]=o.getHostNode(f),o.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];o.unmountComponent(r,t)}}};t.exports=u}).call(this,void 0)},{108:108,116:116,117:117,142:142,22:22,66:66}],27:[function(e,t,n){"use strict";var r=e(8),o=e(37),i={processChildrenUpdates:o.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=i},{37:37,8:8}],28:[function(e,t,n){"use strict";var r=e(112),o=(e(137),!1),i={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){o&&r("104"),i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,o=!0}}};t.exports=i},{112:112,137:137}],29:[function(e,t,n){"use strict";function r(e){}function o(e){return!(!e.prototype||!e.prototype.isReactComponent)}function i(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var a=e(112),s=e(143),u=e(120),l=e(28),c=e(119),p=e(50),d=e(57),f=(e(58),e(62)),h=e(66),m=e(130),v=(e(137),e(141)),g=e(116),y=(e(142),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=d.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var _=1,C={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,s){this._context=s,this._mountOrder=_++,this._hostParent=t,this._hostContainerInfo=n;var l,c=this._currentElement.props,p=this._processContext(s),f=this._currentElement.type,h=e.getUpdateQueue(),v=o(f),g=this._constructComponent(v,c,p,h);v||null!=g&&null!=g.render?i(f)?this._compositeType=y.PureClass:this._compositeType=y.ImpureClass:(l=g,null===g||!1===g||u.isValidElement(g)||a("105",f.displayName||f.name||"Component"),g=new r(f),this._compositeType=y.StatelessFunctional),g.props=c,g.context=p,g.refs=m,g.updater=h,this._instance=g,d.set(g,this);var C=g.state;void 0===C&&(g.state=C=null),("object"!=typeof C||Array.isArray(C))&&a("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var b;return b=g.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,s):this.performInitialMount(l,t,n,e,s),g.componentDidMount&&e.getReactMountReady().enqueue(g.componentDidMount,g),b},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var o=this._currentElement.type;return e?new o(t,n,r):o(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,o){var i,a=r.checkpoint();try{i=this.performInitialMount(e,t,n,r,o)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),i=this.performInitialMount(e,t,n,r,o)}return i},performInitialMount:function(e,t,n,r,o){var i=this._instance;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===e&&(e=this._renderValidatedComponent());var a=f.getType(e);this._renderedNodeType=a;var s=this._instantiateReactComponent(e,a!==f.EMPTY);return this._renderedComponent=s,h.mountComponent(s,r,t,n,this._processChildContext(o),0)},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return m;var r={};for(var o in n)r[o]=e[o];return r},_processContext:function(e){return this._maskContext(e)},_processChildContext:function(e){var t,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(t=r.getChildContext()),t){"object"!=typeof n.childContextTypes&&a("107",this.getName()||"ReactCompositeComponent");for(var o in t)o in n.childContextTypes||a("108",this.getName()||"ReactCompositeComponent",o);return s({},e,t)}return e},_checkContextTypes:function(e,t,n){},receiveComponent:function(e,t,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,r,e,o,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,o){var i=this._instance;null==i&&a("136",this.getName()||"ReactCompositeComponent");var s,u=!1;this._context===o?s=i.context:(s=this._processContext(o),u=!0);var l=t.props,c=n.props;t!==n&&(u=!0),u&&i.componentWillReceiveProps&&i.componentWillReceiveProps(c,s);var p=this._processPendingState(c,s),d=!0;this._pendingForceUpdate||(i.shouldComponentUpdate?d=i.shouldComponentUpdate(c,p,s):this._compositeType===y.PureClass&&(d=!v(l,c)||!v(i.state,p))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,p,s,e,o)):(this._currentElement=n,this._context=o,i.props=c,i.state=p,i.context=s)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var i=s({},o?r[0]:n.state),a=o?1:0;a<r.length;a++){var u=r[a];s(i,"function"==typeof u?u.call(n,i,e,t):u)}return i},_performComponentUpdate:function(e,t,n,r,o,i){var a,s,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(a=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,r),this._currentElement=e,this._context=i,l.props=t,l.state=n,l.context=r,this._updateRenderedComponent(o,i),c&&o.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,u),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,o=this._renderValidatedComponent();if(g(r,o))h.receiveComponent(n,o,e,this._processChildContext(t));else{var i=h.getHostNode(n);h.unmountComponent(n,!1);var a=f.getType(o);this._renderedNodeType=a;var s=this._instantiateReactComponent(o,a!==f.EMPTY);this._renderedComponent=s;var u=h.mountComponent(s,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),0);this._replaceNodeWithMarkup(i,u,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==y.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||!1===e||u.isValidElement(e)||a("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&a("110");var r=t.getPublicInstance();(n.refs===m?n.refs={}:n.refs)[e]=r},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===y.StatelessFunctional?null:e},_instantiateReactComponent:null};t.exports=C},{112:112,116:116,119:119,120:120,130:130,137:137,141:141,142:142,143:143,28:28,50:50,57:57,58:58,62:62,66:66}],30:[function(e,t,n){"use strict";var r=e(33),o=e(47),i=e(60),a=e(66),s=e(71),u=e(72),l=e(96),c=e(103),p=e(113);e(142);o.inject();var d={findDOMNode:l,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?r.getNodeFromInstance(e):null}},Mount:i,Reconciler:a});t.exports=d},{103:103,113:113,142:142,33:33,47:47,60:60,66:66,71:71,72:72,96:96}],31:[function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(e,t){t&&(Y[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&m("60"),"object"==typeof t.dangerouslySetInnerHTML&&B in t.dangerouslySetInnerHTML||m("61")),null!=t.style&&"object"!=typeof t.style&&m("62",r(e)))}function i(e,t,n,r){if(!(r instanceof R)){var o=e._hostContainerInfo,i=o._node&&o._node.nodeType===H,s=i?o._node:o._ownerDocument;F(t,s),r.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;x.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;S.postMountWrapper(e)}function u(){var e=this;I.postMountWrapper(e)}function l(){var e=this;N.postMountWrapper(e)}function c(){var e=this;e._rootNodeID||m("63");var t=U(e);switch(t||m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[T.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in q)q.hasOwnProperty(n)&&e._wrapperState.listeners.push(T.trapBubbledEvent(n,q[n],t));break;case"source":e._wrapperState.listeners=[T.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[T.trapBubbledEvent("topError","error",t),T.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[T.trapBubbledEvent("topReset","reset",t),T.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[T.trapBubbledEvent("topInvalid","invalid",t)]}}function p(){M.postUpdateWrapper(this)}function d(e){G.call(Q,e)||(X.test(e)||m("65",e),Q[e]=!0)}function f(e,t){return e.indexOf("-")>=0||null!=t.is}function h(e){var t=e.type;d(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=e(112),v=e(143),g=e(2),y=e(5),_=e(9),C=e(10),b=e(11),E=e(12),x=e(16),w=e(17),T=e(25),k=e(32),P=e(33),S=e(38),N=e(39),M=e(40),I=e(43),O=(e(58),e(61)),R=e(68),A=(e(129),e(95)),D=(e(137),e(109),e(141),e(118),e(142),k),L=x.deleteListener,U=P.getNodeFromInstance,F=T.listenTo,j=w.registrationNameModules,V={string:!0,number:!0},B="__html",W={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},H=11,q={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},K={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},z={listing:!0,pre:!0,textarea:!0},Y=v({menuitem:!0},K),X=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Q={},G={}.hasOwnProperty,$=1;h.displayName="ReactDOMComponent",h.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=$++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var i=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"input":S.mountWrapper(this,i,t),i=S.getHostProps(this,i),e.getReactMountReady().enqueue(c,this);break;case"option":N.mountWrapper(this,i,t),i=N.getHostProps(this,i);break;case"select":M.mountWrapper(this,i,t),i=M.getHostProps(this,i),e.getReactMountReady().enqueue(c,this);break;case"textarea":I.mountWrapper(this,i,t),i=I.getHostProps(this,i),e.getReactMountReady().enqueue(c,this)}o(this,i);var a,p;null!=t?(a=t._namespaceURI,p=t._tag):n._tag&&(a=n._namespaceURI,p=n._tag),(null==a||a===C.svg&&"foreignobject"===p)&&(a=C.html),a===C.html&&("svg"===this._tag?a=C.svg:"math"===this._tag&&(a=C.mathml)),this._namespaceURI=a;var d;if(e.useCreateElement){var f,h=n._ownerDocument;if(a===C.html)if("script"===this._tag){var m=h.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",f=m.removeChild(m.firstChild)}else f=i.is?h.createElement(this._currentElement.type,i.is):h.createElement(this._currentElement.type);else f=h.createElementNS(a,this._currentElement.type);P.precacheNode(this,f),this._flags|=D.hasCachedChildNodes,this._hostParent||E.setAttributeForRoot(f),this._updateDOMProperties(null,i,e);var y=_(f);this._createInitialChildren(e,i,r,y),d=y}else{var b=this._createOpenTagMarkupAndPutListeners(e,i),x=this._createContentMarkup(e,i,r);d=!x&&K[this._tag]?b+"/>":b+">"+x+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),i.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(u,this),i.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":case"button":i.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(l,this)}return d},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(null!=o)if(j.hasOwnProperty(r))o&&i(this,r,o,e);else{"style"===r&&(o&&(o=this._previousStyleCopy=v({},t.style)),o=y.createMarkupForStyles(o,this));var a=null;null!=this._tag&&f(this._tag,t)?W.hasOwnProperty(r)||(a=E.createMarkupForCustomAttribute(r,o)):a=E.createMarkupForProperty(r,o),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+E.createMarkupForRoot()),n+=" "+E.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(r=o.__html);else{var i=V[typeof t.children]?t.children:null,a=null!=i?null:t.children;if(null!=i)r=A(i);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return z[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var o=t.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&_.queueHTML(r,o.__html);else{var i=V[typeof t.children]?t.children:null,a=null!=i?null:t.children;if(null!=i)""!==i&&_.queueText(r,i);else if(null!=a)for(var s=this.mountChildren(a,e,n),u=0;u<s.length;u++)_.queueChild(r,s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var i=t.props,a=this._currentElement.props;switch(this._tag){case"input":i=S.getHostProps(this,i),a=S.getHostProps(this,a);break;case"option":i=N.getHostProps(this,i),a=N.getHostProps(this,a);break;case"select":i=M.getHostProps(this,i),a=M.getHostProps(this,a);break;case"textarea":i=I.getHostProps(this,i),a=I.getHostProps(this,a)}switch(o(this,a),this._updateDOMProperties(i,a,e),this._updateDOMChildren(i,a,e,r),this._tag){case"input":S.updateWrapper(this);break;case"textarea":I.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(p,this)}},_updateDOMProperties:function(e,t,n){var r,o,a;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if("style"===r){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(a=a||{},a[o]="");this._previousStyleCopy=null}else j.hasOwnProperty(r)?e[r]&&L(this,r):f(this._tag,e)?W.hasOwnProperty(r)||E.deleteValueForAttribute(U(this),r):(b.properties[r]||b.isCustomAttribute(r))&&E.deleteValueForProperty(U(this),r);for(r in t){var u=t[r],l="style"===r?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if("style"===r)if(u?u=this._previousStyleCopy=v({},u):this._previousStyleCopy=null,l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(a=a||{},a[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(a=a||{},a[o]=u[o])}else a=u;else if(j.hasOwnProperty(r))u?i(this,r,u,n):l&&L(this,r);else if(f(this._tag,t))W.hasOwnProperty(r)||E.setValueForAttribute(U(this),r,u);else if(b.properties[r]||b.isCustomAttribute(r)){var c=U(this);null!=u?E.setValueForProperty(c,r,u):E.deleteValueForProperty(c,r)}}a&&y.setValueForStyles(U(this),a,this)},_updateDOMChildren:function(e,t,n,r){var o=V[typeof e.children]?e.children:null,i=V[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=o?null:e.children,l=null!=i?null:t.children,c=null!=o||null!=a,p=null!=i||null!=s;null!=u&&null==l?this.updateChildren(null,n,r):c&&!p&&this.updateTextContent(""),null!=i?o!==i&&this.updateTextContent(""+i):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},getHostNode:function(){return U(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),P.uncacheNode(this),x.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return U(this)}},v(h.prototype,h.Mixin,O.Mixin),t.exports=h},{10:10,109:109,11:11,112:112,118:118,12:12,129:129,137:137,141:141,142:142,143:143,16:16,17:17,2:2,25:25,32:32,33:33,38:38,39:39,40:40,43:43,5:5,58:58,61:61,68:68,9:9,95:95}],32:[function(e,t,n){"use strict";var r={hasCachedChildNodes:1};t.exports=r},{}],33:[function(e,t,n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(h)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function o(e){for(var t;t=e._renderedComponent;)e=t;return e}function i(e,t){var n=o(e);n._hostNode=t,t[v]=n}function a(e){var t=e._hostNode;t&&(delete t[v],e._hostNode=null)}function s(e,t){if(!(e._flags&m.hasCachedChildNodes)){var n=e._renderedChildren,a=t.firstChild;e:for(var s in n)if(n.hasOwnProperty(s)){var u=n[s],l=o(u)._domID;if(0!==l){for(;null!==a;a=a.nextSibling)if(r(a,l)){i(u,a);continue e}p("32",l)}}e._flags|=m.hasCachedChildNodes}}function u(e){if(e[v])return e[v];for(var t=[];!e[v];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[v]);e=t.pop())n=r,t.length&&s(r,e);return n}function l(e){var t=u(e);return null!=t&&t._hostNode===e?t:null}function c(e){if(void 0===e._hostNode&&p("33"),e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent||p("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var p=e(112),d=e(11),f=e(32),h=(e(137),d.ID_ATTRIBUTE_NAME),m=f,v="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:u,getInstanceFromNode:l,getNodeFromInstance:c,precacheChildNodes:s,precacheNode:i,uncacheNode:a};t.exports=g},{11:11,112:112,137:137,32:32}],34:[function(e,t,n){"use strict";function r(e,t){return{_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===o?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null}}var o=(e(118),9);t.exports=r},{118:118}],35:[function(e,t,n){"use strict";var r=e(143),o=e(9),i=e(33),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var u=n._ownerDocument,l=u.createComment(s);return i.precacheNode(this,l),o(l)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),t.exports=a},{143:143,33:33,9:9}],36:[function(e,t,n){"use strict";var r={useCreateElement:!0,useFiber:!1};t.exports=r},{}],37:[function(e,t,n){"use strict";var r=e(8),o=e(33),i={dangerouslyProcessChildrenUpdates:function(e,t){var n=o.getNodeFromInstance(e);r.processUpdates(n,t)}};t.exports=i},{33:33,8:8}],38:[function(e,t,n){"use strict";function r(){this._rootNodeID&&d.updateWrapper(this)}function o(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function i(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);p.asap(r,this);var o=t.name;if("radio"===t.type&&null!=o){for(var i=c.getNodeFromInstance(this),s=i;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),d=0;d<u.length;d++){var f=u[d];if(f!==i&&f.form===i.form){var h=c.getInstanceFromNode(f);h||a("90"),p.asap(r,h)}}}return n}var a=e(112),s=e(143),u=e(12),l=e(23),c=e(33),p=e(71),d=(e(137),e(142),{getHostProps:function(e,t){var n=l.getValue(t),r=l.getChecked(t);return s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:i.bind(e),controlled:o(t)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&u.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var r=c.getNodeFromInstance(e),o=l.getValue(t);if(null!=o)if(0===o&&""===r.value)r.value="0";else if("number"===t.type){var i=parseFloat(r.value,10)||0;o!=i&&(r.value=""+o)}else o!=r.value&&(r.value=""+o);else null==t.value&&null!=t.defaultValue&&r.defaultValue!==""+t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=d},{112:112,12:12,137:137,142:142,143:143,23:23,33:33,71:71}],39:[function(e,t,n){"use strict";function r(e){var t="";return i.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:u||(u=!0))}),t}var o=e(143),i=e(120),a=e(33),s=e(40),u=(e(142),!1),l={mountWrapper:function(e,t,n){var o=null;if(null!=n){var i=n;"optgroup"===i._tag&&(i=i._hostParent),null!=i&&"select"===i._tag&&(o=s.getSelectValueContext(i))}var a=null;if(null!=o){var u;if(u=null!=t.value?t.value+"":r(t.children),a=!1,Array.isArray(o)){for(var l=0;l<o.length;l++)if(""+o[l]===u){a=!0;break}}else a=""+o===u}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;null!=t.value&&a.getNodeFromInstance(e).setAttribute("value",t.value)},getHostProps:function(e,t){var n=o({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var i=r(t.children);return i&&(n.children=i),n}};t.exports=l},{120:120,142:142,143:143,33:33,40:40}],40:[function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&o(this,Boolean(e.multiple),t)}}function o(e,t,n){var r,o,i=u.getNodeFromInstance(e).options;if(t){for(r={},o=0;o<n.length;o++)r[""+n[o]]=!0;for(o=0;o<i.length;o++){var a=r.hasOwnProperty(i[o].value);i[o].selected!==a&&(i[o].selected=a)}}else{for(r=""+n,o=0;o<i.length;o++)if(i[o].value===r)return void(i[o].selected=!0);i.length&&(i[0].selected=!0)}}function i(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),l.asap(r,this),n}var a=e(143),s=e(23),u=e(33),l=e(71),c=(e(142),!1),p={getHostProps:function(e,t){return a({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:i.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||c||(c=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=s.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,o(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?o(e,Boolean(t.multiple),t.defaultValue):o(e,Boolean(t.multiple),t.multiple?[]:""))}};t.exports=p},{142:142,143:143,23:23,33:33,71:71}],41:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function o(e){var t=document.selection,n=t.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var i=o.text.length;return{start:i,end:i+r}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,i=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=u?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var p=r(c.startContainer,c.startOffset,c.endContainer,c.endOffset),d=p?0:c.toString().length,f=d+l,h=document.createRange();h.setStart(n,o),h.setEnd(i,a);var m=h.collapsed;return{start:m?f:d,end:m?d:f}}function a(e,t){var n,r,o=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),o.moveToElementText(e),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,o=Math.min(t.start,r),i=void 0===t.end?o:Math.min(t.end,r);if(!n.extend&&o>i){var a=i;i=o,o=a}var s=l(e,o),u=l(e,i);if(s&&u){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(p),n.extend(u.node,u.offset)):(p.setEnd(u.node,u.offset),n.addRange(p))}}}var u=e(123),l=e(105),c=e(106),p=u.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?o:i,setOffsets:p?a:s};t.exports=d},{105:105,106:106,123:123}],42:[function(e,t,n){"use strict";var r=e(112),o=e(143),i=e(8),a=e(9),s=e(33),u=e(95),l=(e(137),e(118),function(e){this._currentElement=e,this._stringText=""+e,
this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});o(l.prototype,{mountComponent:function(e,t,n,r){var o=n._idCounter++,i=" react-text: "+o+" ";if(this._domID=o,this._hostParent=t,e.useCreateElement){var l=n._ownerDocument,c=l.createComment(i),p=l.createComment(" /react-text "),d=a(l.createDocumentFragment());return a.queueChild(d,a(c)),this._stringText&&a.queueChild(d,a(l.createTextNode(this._stringText))),a.queueChild(d,a(p)),s.precacheNode(this,c),this._closingComment=p,d}var f=u(this._stringText);return e.renderToStaticMarkup?f:"<!--"+i+"-->"+f+"<!-- /react-text -->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();i.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&r("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=l},{112:112,118:118,137:137,143:143,33:33,8:8,9:9,95:95}],43:[function(e,t,n){"use strict";function r(){this._rootNodeID&&c.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);return l.asap(r,this),n}var i=e(112),a=e(143),s=e(23),u=e(33),l=e(71),c=(e(137),e(142),{getHostProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=s.getValue(t),r=n;if(null==n){var a=t.defaultValue,u=t.children;null!=u&&(null!=a&&i("92"),Array.isArray(u)&&(u.length<=1||i("93"),u=u[0]),a=""+u),null==a&&(a=""),r=a}e._wrapperState={initialValue:""+r,listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}});t.exports=c},{112:112,137:137,142:142,143:143,23:23,33:33,71:71}],44:[function(e,t,n){"use strict";function r(e,t){"_hostNode"in e||u("33"),"_hostNode"in t||u("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var o=0,i=t;i;i=i._hostParent)o++;for(;n-o>0;)e=e._hostParent,n--;for(;o-n>0;)t=t._hostParent,o--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function o(e,t){"_hostNode"in e||u("35"),"_hostNode"in t||u("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function i(e){return"_hostNode"in e||u("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var o;for(o=r.length;o-- >0;)t(r[o],"captured",n);for(o=0;o<r.length;o++)t(r[o],"bubbled",n)}function s(e,t,n,o,i){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var u=[];t&&t!==a;)u.push(t),t=t._hostParent;var l;for(l=0;l<s.length;l++)n(s[l],"bubbled",o);for(l=u.length;l-- >0;)n(u[l],"captured",i)}var u=e(112);e(137);t.exports={isAncestor:o,getLowestCommonAncestor:r,getParentInstance:i,traverseTwoPhase:a,traverseEnterLeave:s}},{112:112,137:137}],45:[function(e,t,n){"use strict";var r=e(120),o=e(30),i=o;r.addons&&(r.__SECRET_INJECTED_REACT_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i),t.exports=i},{120:120,30:30}],46:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var o=e(143),i=e(71),a=e(89),s=e(129),u={initialize:s,close:function(){d.isBatchingUpdates=!1}},l={initialize:s,close:i.flushBatchedUpdates.bind(i)},c=[l,u];o(r.prototype,a,{getTransactionWrappers:function(){return c}});var p=new r,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,o,i){var a=d.isBatchingUpdates;return d.isBatchingUpdates=!0,a?e(t,n,r,o,i):p.perform(e,null,t,n,r,o,i)}};t.exports=d},{129:129,143:143,71:71,89:89}],47:[function(e,t,n){"use strict";function r(){x||(x=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(d),y.EventPluginUtils.injectTreeTraversal(h),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:E,EnterLeaveEventPlugin:u,ChangeEventPlugin:a,SelectEventPlugin:b,BeforeInputEventPlugin:i}),y.HostComponent.injectGenericComponentClass(p),y.HostComponent.injectTextComponentClass(m),y.DOMProperty.injectDOMPropertyConfig(o),y.DOMProperty.injectDOMPropertyConfig(l),y.DOMProperty.injectDOMPropertyConfig(C),y.EmptyComponent.injectEmptyComponentFactory(function(e){return new f(e)}),y.Updates.injectReconcileTransaction(_),y.Updates.injectBatchingStrategy(v),y.Component.injectEnvironment(c))}var o=e(1),i=e(3),a=e(7),s=e(14),u=e(15),l=e(21),c=e(27),p=e(31),d=e(33),f=e(35),h=e(44),m=e(42),v=e(46),g=e(52),y=e(55),_=e(65),C=e(73),b=e(74),E=e(75),x=!1;t.exports={inject:r}},{1:1,14:14,15:15,21:21,27:27,3:3,31:31,33:33,35:35,42:42,44:44,46:46,52:52,55:55,65:65,7:7,73:73,74:74,75:75}],48:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=r},{}],49:[function(e,t,n){"use strict";var r,o={injectEmptyComponentFactory:function(e){r=e}},i={create:function(e){return r(e)}};i.injection=o,t.exports=i},{}],50:[function(e,t,n){"use strict";function r(e,t,n){try{t(n)}catch(e){null===o&&(o=e)}}var o=null,i={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(o){var e=o;throw o=null,e}}};t.exports=i},{}],51:[function(e,t,n){"use strict";function r(e){o.enqueueEvents(e),o.processEventQueue(!1)}var o=e(16),i={handleTopLevel:function(e,t,n,i){r(o.extractEvents(e,t,n,i))}};t.exports=i},{16:16}],52:[function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=p.getNodeFromInstance(e),n=t.parentNode;return p.getClosestInstanceFromNode(n)}function o(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){var t=f(e.nativeEvent),n=p.getClosestInstanceFromNode(t),o=n;do{e.ancestors.push(o),o=o&&r(o)}while(o);for(var i=0;i<e.ancestors.length;i++)n=e.ancestors[i],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function a(e){e(h(window))}var s=e(143),u=e(122),l=e(123),c=e(24),p=e(33),d=e(71),f=e(102),h=e(134);s(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(o,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?u.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?u.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=o.getPooled(e,t);try{d.batchedUpdates(i,n)}finally{o.release(n)}}}};t.exports=m},{102:102,122:122,123:123,134:134,143:143,24:24,33:33,71:71}],53:[function(e,t,n){"use strict";var r={logTopLevelRenders:!1};t.exports=r},{}],54:[function(e,t,n){"use strict";function r(e){return s||a("111",e.type),new s(e)}function o(e){return new u(e)}function i(e){return e instanceof u}var a=e(112),s=(e(137),null),u=null,l={injectGenericComponentClass:function(e){s=e},injectTextComponentClass:function(e){u=e}},c={createInternalComponent:r,createInstanceForText:o,isTextComponent:i,injection:l};t.exports=c},{112:112,137:137}],55:[function(e,t,n){"use strict";var r=e(11),o=e(16),i=e(18),a=e(28),s=e(49),u=e(25),l=e(54),c=e(71),p={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:o.injection,EventPluginUtils:i.injection,EventEmitter:u.injection,HostComponent:l.injection,Updates:c.injection};t.exports=p},{11:11,16:16,18:18,25:25,28:28,49:49,54:54,71:71}],56:[function(e,t,n){"use strict";function r(e){return i(document.documentElement,e)}var o=e(41),i=e(126),a=e(131),s=e(132),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,o=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,o),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=o.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else o.setOffsets(e,t)}};t.exports=u},{126:126,131:131,132:132,41:41}],57:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],58:[function(e,t,n){"use strict";t.exports={debugTool:null}},{}],59:[function(e,t,n){"use strict";var r=e(92),o=/^<\!\-\-/,i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return o.test(e)?e:e.replace(/\/?>/," "+i.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(e)===n}};t.exports=i},{92:92}],60:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function o(e){return e?e.nodeType===A?e.documentElement:e.firstChild:null}function i(e){return e.getAttribute&&e.getAttribute(I)||""}function a(e,t,n,r,o){var i;if(b.logTopLevelRenders){var a=e._currentElement.props.child,s=a.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var u=w.mountComponent(e,n,null,_(e,t),o,0);i&&console.timeEnd(i),e._renderedComponent._topLevelWrapper=e,j._mountImageIntoNode(u,t,e,r,n)}function s(e,t,n,r){var o=k.ReactReconcileTransaction.getPooled(!n&&C.useCreateElement);o.perform(a,null,e,t,o,n,r),k.ReactReconcileTransaction.release(o)}function u(e,t,n){for(w.unmountComponent(e,n),t.nodeType===A&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function l(e){var t=o(e);if(t){var n=y.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==R&&e.nodeType!==A&&e.nodeType!==D)}function p(e){var t=o(e),n=t&&y.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function d(e){var t=p(e);return t?t._hostContainerInfo._topLevelWrapper:null}var f=e(112),h=e(9),m=e(11),v=e(120),g=e(25),y=(e(119),e(33)),_=e(34),C=e(36),b=e(53),E=e(57),x=(e(58),e(59)),w=e(66),T=e(70),k=e(71),P=e(130),S=e(108),N=(e(137),e(114)),M=e(116),I=(e(142),m.ID_ATTRIBUTE_NAME),O=m.ROOT_ATTRIBUTE_NAME,R=1,A=9,D=11,L={},U=1,F=function(){this.rootID=U++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props.child},F.isReactTopLevelWrapper=!0;var j={TopLevelWrapper:F,_instancesByReactRootID:L,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,o){return j.scrollMonitor(r,function(){T.enqueueElementInternal(e,t,n),o&&T.enqueueCallbackInternal(e,o)}),e},_renderNewRootComponent:function(e,t,n,r){c(t)||f("37"),g.ensureScrollValueMonitoring();var o=S(e,!1);k.batchedUpdates(s,o,t,n,r);var i=o._instance.rootID;return L[i]=o,o},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&E.has(e)||f("38"),j._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){T.validateCallback(r,"ReactDOM.render"),v.isValidElement(t)||f("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=v.createElement(F,{child:t});if(e){var u=E.get(e);a=u._processChildContext(u._context)}else a=P;var c=d(n);if(c){var p=c._currentElement,h=p.props.child;if(M(h,t)){var m=c._renderedComponent.getPublicInstance(),g=r&&function(){r.call(m)};return j._updateRootComponent(c,s,a,n,g),m}j.unmountComponentAtNode(n)}var y=o(n),_=y&&!!i(y),C=l(n),b=_&&!c&&!C,x=j._renderNewRootComponent(s,n,b,a)._renderedComponent.getPublicInstance();return r&&r.call(x),x},render:function(e,t,n){return j._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)||f("40");var t=d(e);return t?(delete L[t._instance.rootID],k.batchedUpdates(u,t,e,!1),!0):(l(e),1===e.nodeType&&e.hasAttribute(O),!1)},_mountImageIntoNode:function(e,t,n,i,a){if(c(t)||f("41"),i){var s=o(t);if(x.canReuseMarkup(e,s))return void y.precacheNode(n,s);var u=s.getAttribute(x.CHECKSUM_ATTR_NAME);s.removeAttribute(x.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(x.CHECKSUM_ATTR_NAME,u);var p=e,d=r(p,l),m=" (client) "+p.substring(d-20,d+20)+"\n (server) "+l.substring(d-20,d+20);t.nodeType===A&&f("42",m)}if(t.nodeType===A&&f("43"),a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);h.insertTreeBefore(t,e,null)}else N(t,e),y.precacheNode(n,t.firstChild)}};t.exports=j},{108:108,11:11,112:112,114:114,116:116,119:119,120:120,130:130,137:137,142:142,25:25,33:33,34:34,36:36,53:53,57:57,58:58,59:59,66:66,70:70,71:71,9:9}],61:[function(e,t,n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function o(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:d.getHostNode(e),toIndex:n,afterNode:t}}function i(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(e,t){return t&&(e=e||[],e.push(t)),e}function l(e,t){p.processChildrenUpdates(e,t)}var c=e(112),p=e(28),d=(e(57),e(58),e(119),e(66)),f=e(26),h=(e(129),e(97)),m=(e(137),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,o,i){var a;return a=h(t,0),f.updateChildren(e,a,n,r,o,this,this._hostContainerInfo,i,0),a},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var o=[],i=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=d.mountComponent(s,t,this,this._hostContainerInfo,n,0);s._mountIndex=i++,o.push(u)}return o},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");l(this,[s(e)])},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");l(this,[a(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,o={},i=[],a=this._reconcilerUpdateChildren(r,e,i,o,t,n);if(a||r){var s,c=null,p=0,f=0,h=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=r&&r[s],g=a[s];v===g?(c=u(c,this.moveChild(v,m,p,f)),f=Math.max(v._mountIndex,f),v._mountIndex=p):(v&&(f=Math.max(v._mountIndex,f)),c=u(c,this._mountChildAtIndex(g,i[h],m,p,t,n)),h++),p++,m=d.getHostNode(g)}for(s in o)o.hasOwnProperty(s)&&(c=u(c,this._unmountChild(r[s],o[s])));c&&l(this,c),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return o(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return i(e,t)},_mountChildAtIndex:function(e,t,n,r,o,i){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});t.exports=m},{112:112,119:119,129:129,137:137,26:26,28:28,57:57,58:58,66:66,97:97}],62:[function(e,t,n){"use strict";var r=e(112),o=e(120),i=(e(137),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?i.EMPTY:o.isValidElement(e)?"function"==typeof e.type?i.COMPOSITE:i.HOST:void r("26",e)}});t.exports=i},{112:112,120:120,137:137}],63:[function(e,t,n){"use strict";function r(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var o=e(112),i=(e(137),{addComponentAsRefTo:function(e,t,n){r(n)||o("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(n)||o("120");var i=n.getPublicInstance();i&&i.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});t.exports=i},{112:112,137:137}],64:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],65:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=e}var o=e(143),i=e(6),a=e(24),s=e(25),u=e(56),l=(e(58),e(89)),c=e(70),p={initialize:u.getSelectionInformation,close:u.restoreSelection},d={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[p,d,f],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};o(r.prototype,l,m),a.addPoolingTo(r),t.exports=r},{143:143,24:24,25:25,56:56,58:58,6:6,70:70,89:89}],66:[function(e,t,n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=e(67),i=(e(58),e(142),{mountComponent:function(e,t,n,o,i,a){var s=e.mountComponent(t,n,o,i,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){o.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,i){var a=e._currentElement;if(t!==a||i!==e._context){var s=o.shouldUpdateRefs(a,t);s&&o.detachRefs(e,a),e.receiveComponent(t,n,i),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});t.exports=i},{142:142,58:58,67:67}],67:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function o(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=e(63),a={};a.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var o=null,i=null;return null!==t&&"object"==typeof t&&(o=t.ref,i=t._owner),n!==o||"string"==typeof o&&i!==r},a.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&o(n,e,t._owner)}},t.exports=a},{63:63}],68:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var o=e(143),i=e(24),a=e(89),s=(e(58),e(69)),u=[],l={enqueue:function(){}},c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};o(r.prototype,a,c),i.addPoolingTo(r),t.exports=r},{143:143,24:24,58:58,69:69,89:89}],69:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e(70),i=(e(142),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()&&o.enqueueForceUpdate(e)},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()&&o.enqueueReplaceState(e,t)},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()&&o.enqueueSetState(e,t)},e}());t.exports=i},{142:142,70:70}],70:[function(e,t,n){"use strict";function r(e){u.enqueueUpdate(e)}function o(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function i(e,t){var n=s.get(e);return n||null}var a=e(112),s=(e(119),e(57)),u=(e(58),e(71)),l=(e(137),e(142),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var o=i(e);if(!o)return null;o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],r(o)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t,n){var o=i(e,"replaceState");o&&(o._pendingStateQueue=[t],o._pendingReplaceState=!0,void 0!==n&&null!==n&&(l.validateCallback(n,"replaceState"),o._pendingCallbacks?o._pendingCallbacks.push(n):o._pendingCallbacks=[n]),r(o))},enqueueSetState:function(e,t){var n=i(e,"setState");n&&((n._pendingStateQueue||(n._pendingStateQueue=[])).push(t),r(n))},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&a("122",t,o(e))}});t.exports=l},{112:112,119:119,137:137,142:142,57:57,58:58,71:71}],71:[function(e,t,n){"use strict";function r(){P.ReactReconcileTransaction&&b||c("123")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=P.ReactReconcileTransaction.getPooled(!0)}function i(e,t,n,o,i,a){return r(),b.batchedUpdates(e,t,n,o,i,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==g.length&&c("124",t,g.length),g.sort(a),y++;for(var n=0;n<t;n++){var r=g[n],o=r._pendingCallbacks;r._pendingCallbacks=null;var i;if(h.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),i="React update: "+s.getName(),console.time(i)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,y),i&&console.timeEnd(i),o)for(var u=0;u<o.length;u++)e.callbackQueue.enqueue(o[u],r.getPublicInstance())}}function u(e){if(r(),!b.isBatchingUpdates)return void b.batchedUpdates(u,e);g.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=y+1)}function l(e,t){b.isBatchingUpdates||c("125"),_.enqueue(e,t),C=!0}var c=e(112),p=e(143),d=e(6),f=e(24),h=e(53),m=e(66),v=e(89),g=(e(137),[]),y=0,_=d.getPooled(),C=!1,b=null,E={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),T()):g.length=0}},x={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[E,x];p(o.prototype,v,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,P.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return v.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(o);var T=function(){for(;g.length||C;){if(g.length){var e=o.getPooled();e.perform(s,null,e),o.release(e)}if(C){C=!1;var t=_;_=d.getPooled(),t.notifyAll(),d.release(t)}}},k={injectReconcileTransaction:function(e){e||c("126"),P.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||c("127"),"function"!=typeof e.batchedUpdates&&c("128"),"boolean"!=typeof e.isBatchingUpdates&&c("129"),b=e}},P={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:u,flushBatchedUpdates:T,injection:k,asap:l};t.exports=P},{112:112,137:137,143:143,24:24,53:53,6:6,66:66,89:89}],72:[function(e,t,n){"use strict";t.exports="15.5.4"},{}],73:[function(e,t,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(o).forEach(function(e){i.Properties[e]=0,o[e]&&(i.DOMAttributeNames[e]=o[e])}),t.exports=i},{}],74:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(e,t){if(y||null==m||m!==c())return null;var n=r(m);if(!g||!d(g,n)){g=n;var o=l.getPooled(h.select,v,e,t);return o.type="select",o.target=m,i.accumulateTwoPhaseDispatches(o),o}return null}var i=e(19),a=e(123),s=e(33),u=e(56),l=e(80),c=e(132),p=e(110),d=e(141),f=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,h={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,v=null,g=null,y=!1,_=!1,C={eventTypes:h,extractEvents:function(e,t,n,r){if(!_)return null;var i=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(p(i)||"true"===i.contentEditable)&&(m=i,v=t,g=null);break
;case"topBlur":m=null,v=null,g=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,o(n,r);case"topSelectionChange":if(f)break;case"topKeyDown":case"topKeyUp":return o(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(_=!0)}};t.exports=C},{110:110,123:123,132:132,141:141,19:19,33:33,56:56,80:80}],75:[function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}function o(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var i=e(112),a=e(122),s=e(19),u=e(33),l=e(76),c=e(77),p=e(80),d=e(81),f=e(83),h=e(84),m=e(79),v=e(85),g=e(86),y=e(87),_=e(88),C=e(129),b=e(99),E=(e(137),{}),x={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,o={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};E[e]=o,x[r]=o});var w={},T={eventTypes:E,extractEvents:function(e,t,n,r){var o=x[e];if(!o)return null;var a;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=p;break;case"topKeyPress":if(0===b(n))return null;case"topKeyDown":case"topKeyUp":a=f;break;case"topBlur":case"topFocus":a=d;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=h;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=v;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=l;break;case"topTransitionEnd":a=g;break;case"topScroll":a=y;break;case"topWheel":a=_;break;case"topCopy":case"topCut":case"topPaste":a=c}a||i("86",e);var u=a.getPooled(o,t,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(e,t,n){if("onClick"===t&&!o(e._tag)){var i=r(e),s=u.getNodeFromInstance(e);w[i]||(w[i]=a.listen(s,"click",C))}},willDeleteListener:function(e,t){if("onClick"===t&&!o(e._tag)){var n=r(e);w[n].remove(),delete w[n]}}};t.exports=T},{112:112,122:122,129:129,137:137,19:19,33:33,76:76,77:77,79:79,80:80,81:81,83:83,84:84,85:85,86:86,87:87,88:88,99:99}],76:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),i={animationName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),t.exports=r},{80:80}],77:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};o.augmentClass(r,i),t.exports=r},{80:80}],78:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),i={data:null};o.augmentClass(r,i),t.exports=r},{80:80}],79:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(84),i={dataTransfer:null};o.augmentClass(r,i),t.exports=r},{84:84}],80:[function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var o=this.constructor.Interface;for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];s?this[i]=s(n):"target"===i?this.target=r:this[i]=n[i]}var u=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=u?a.thatReturnsTrue:a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var o=e(143),i=e(24),a=e(129),s=(e(142),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;o(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=o({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.fourArgumentPooler)},i.addPoolingTo(r,i.fourArgumentPooler),t.exports=r},{129:129,142:142,143:143,24:24}],81:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),i={relatedTarget:null};o.augmentClass(r,i),t.exports=r},{87:87}],82:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),i={data:null};o.augmentClass(r,i),t.exports=r},{80:80}],83:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),i=e(99),a=e(100),s=e(101),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};o.augmentClass(r,u),t.exports=r},{100:100,101:101,87:87,99:99}],84:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),i=e(90),a=e(101),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};o.augmentClass(r,s),t.exports=r},{101:101,87:87,90:90}],85:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(87),i=e(101),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};o.augmentClass(r,a),t.exports=r},{101:101,87:87}],86:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),i={propertyName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),t.exports=r},{80:80}],87:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(80),i=e(102),a={view:function(e){if(e.view)return e.view;var t=i(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(r,a),t.exports=r},{102:102,80:80}],88:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e(84),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,i),t.exports=r},{84:84}],89:[function(e,t,n){"use strict";var r=e(112),o=(e(137),{}),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,o,i,a,s,u){this.isInTransaction()&&r("27");var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,o,i,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,a=t[n],s=this.wrapperInitData[n];try{i=!0,s!==o&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}};t.exports=i},{112:112,137:137}],90:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],91:[function(e,t,n){"use strict";function r(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var o=e(112);e(137);t.exports=r},{112:112,137:137}],92:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0,i=e.length,a=-4&i;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=o,n%=o}for(;r<i;r++)n+=t+=e.charCodeAt(r);return t%=o,n%=o,t|n<<16}var o=65521;t.exports=r},{}],93:[function(e,t,n){"use strict";var r=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e};t.exports=r},{}],94:[function(e,t,n){"use strict";function r(e,t,n){return null==t||"boolean"==typeof t||""===t?"":isNaN(t)||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var o=e(4),i=(e(142),o.isUnitlessNumber);t.exports=r},{142:142,4:4}],95:[function(e,t,n){"use strict";function r(e){var t=""+e,n=i.exec(t);if(!n)return t;var r,o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=r}return s!==a?o+t.substring(s,a):o}function o(e){return"boolean"==typeof e||"number"==typeof e?""+e:r(e)}var i=/["'&<>]/;t.exports=o},{}],96:[function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);if(t)return t=s(t),t?i.getNodeFromInstance(t):null;"function"==typeof e.render?o("44"):o("45",Object.keys(e))}var o=e(112),i=(e(119),e(33)),a=e(57),s=e(103);e(137),e(142);t.exports=r},{103:103,112:112,119:119,137:137,142:142,33:33,57:57}],97:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var o=e;void 0===o[n]&&null!=t&&(o[n]=t)}}function o(e,t){if(null==e)return e;var n={};return i(e,r,n),n}var i=(e(22),e(117));e(142);void 0!==n&&n.env,t.exports=o}).call(this,void 0)},{117:117,142:142,22:22}],98:[function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}t.exports=r},{}],99:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}t.exports=r},{}],100:[function(e,t,n){"use strict";function r(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=o(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var o=e(99),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{99:99}],101:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function o(e){return r}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=o},{}],102:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===o.COMPOSITE;)e=e._renderedComponent;return t===o.HOST?e._renderedComponent:t===o.EMPTY?null:void 0}var o=e(62);t.exports=r},{62:62}],104:[function(e,t,n){"use strict";function r(e){var t=e&&(o&&e[o]||e[i]);if("function"==typeof t)return t}var o="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=r},{}],105:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var n=r(e),i=0,a=0;n;){if(3===n.nodeType){if(a=i+n.textContent.length,i<=t&&a>=t)return{node:n,offset:t-i};i=a}n=r(o(n))}}t.exports=i},{}],106:[function(e,t,n){"use strict";function r(){return!i&&o.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var o=e(123),i=null;t.exports=r},{123:123}],107:[function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return s[e]=t[n];return""}var i=e(123),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};i.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=o},{123:123}],108:[function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if(null===e||!1===e)n=l.create(i);else if("object"==typeof e){var s=e,u=s.type;if("function"!=typeof u&&"string"!=typeof u){var d="";d+=r(s._owner),a("130",null==u?u:typeof u,d)}"string"==typeof s.type?n=c.createInternalComponent(s):o(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new p(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=e(112),s=e(143),u=e(29),l=e(49),c=e(54),p=(e(121),e(137),e(142),function(e){this.construct(e)});s(p.prototype,u,{_instantiateReactComponent:i}),t.exports=i},{112:112,121:121,137:137,142:142,143:143,29:29,49:49,54:54}],109:[function(e,t,n){"use strict";function r(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&o&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o,i=e(123);i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=r},{123:123}],110:[function(e,t,n){"use strict";function r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!o[e.type]:"textarea"===t}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],111:[function(e,t,n){"use strict";function r(e){return'"'+o(e)+'"'}var o=e(95);t.exports=r},{95:95}],112:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=r},{}],113:[function(e,t,n){"use strict";var r=e(60);t.exports=r.renderSubtreeIntoContainer},{60:60}],114:[function(e,t,n){"use strict";var r,o=e(123),i=e(10),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=e(93),l=u(function(e,t){if(e.namespaceURI!==i.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(o.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}t.exports=l},{10:10,123:123,93:93}],115:[function(e,t,n){"use strict";var r=e(123),o=e(95),i=e(114),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){if(3===e.nodeType)return void(e.nodeValue=t);i(e,o(t))})),t.exports=a},{114:114,123:123,95:95}],116:[function(e,t,n){"use strict";function r(e,t){var n=null===e||!1===e,r=null===t||!1===t;if(n||r)return n===r;var o=typeof e,i=typeof t;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}t.exports=r},{}],117:[function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function o(e,t,n,i){var d=typeof e;if("undefined"!==d&&"boolean"!==d||(e=null),null===e||"string"===d||"number"===d||"object"===d&&e.$$typeof===s)return n(i,e,""===t?c+r(e,0):t),1;var f,h,m=0,v=""===t?c:t+p;if(Array.isArray(e))for(var g=0;g<e.length;g++)f=e[g],h=v+r(f,g),m+=o(f,h,n,i);else{var y=u(e);if(y){var _,C=y.call(e);if(y!==e.entries)for(var b=0;!(_=C.next()).done;)f=_.value,h=v+r(f,b++),m+=o(f,h,n,i);else for(;!(_=C.next()).done;){var E=_.value;E&&(f=E[1],h=v+l.escape(E[0])+p+r(f,0),m+=o(f,h,n,i))}}else if("object"===d){var x=String(e);a("31","[object Object]"===x?"object with keys {"+Object.keys(e).join(", ")+"}":x,"")}}return m}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=e(112),s=(e(119),e(48)),u=e(104),l=(e(137),e(22)),c=(e(142),"."),p=":";t.exports=i},{104:104,112:112,119:119,137:137,142:142,22:22,48:48}],118:[function(e,t,n){"use strict";var r=(e(143),e(129)),o=(e(142),r);t.exports=o},{129:129,142:142,143:143}],119:[function(t,n,r){"use strict";var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n.exports=o.ReactCurrentOwner},{}],120:[function(t,n,r){"use strict";n.exports=e},{}],121:[function(t,n,r){"use strict";var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n.exports=o.getNextDebugID},{}],122:[function(e,t,n){"use strict";var r=e(129),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=o},{129:129}],123:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},{}],124:[function(e,t,n){"use strict";function r(e){return e.replace(o,function(e,t){return t.toUpperCase()})}var o=/-(.)/g;t.exports=r},{}],125:[function(e,t,n){"use strict";function r(e){return o(e.replace(i,"ms-"))}var o=e(124),i=/^-ms-/;t.exports=r},{124:124}],126:[function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=e(139);t.exports=r},{139:139}],127:[function(e,t,n){"use strict";function r(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&a(!1),"number"!=typeof t&&a(!1),0===t||t-1 in e||a(!1),"function"==typeof e.callee&&a(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function o(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return o(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=e(137);t.exports=i},{137:137}],128:[function(e,t,n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function o(e,t){var n=l;l||u(!1);var o=r(e),i=o&&s(o);if(i){n.innerHTML=i[1]+e+i[2];for(var c=i[0];c--;)n=n.lastChild}else n.innerHTML=e;var p=n.getElementsByTagName("script");p.length&&(t||u(!1),a(p).forEach(t));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}var i=e(123),a=e(127),s=e(133),u=e(137),l=i.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=o},{123:123,127:127,133:133,137:137}],129:[function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],130:[function(e,t,n){"use strict";var r={};t.exports=r},{}],131:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}t.exports=r},{}],132:[function(e,t,n){"use strict";function r(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}t.exports=r},{}],133:[function(e,t,n){"use strict";function r(e){return a||i(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||(a.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?d[e]:null}var o=e(123),i=e(137),a=o.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){d[e]=p,s[e]=!0}),t.exports=r},{123:123,137:137}],134:[function(e,t,n){"use strict";function r(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],135:[function(e,t,n){"use strict";function r(e){return e.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){return o(e).replace(i,"-ms-")}var o=e(135),i=/^ms-/;t.exports=r},{135:135}],137:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,u){if(o(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,s,u],p=0;l=new Error(t.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var o=function(e){};t.exports=r},{}],138:[function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=r},{}],139:[function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=e(138);t.exports=r},{138:138}],140:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=o},{}],142:[function(e,t,n){"use strict";var r=e(129),o=r;t.exports=o},{129:129}],143:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)i.call(n,c)&&(u[c]=n[c]);if(o){s=o(n);for(var p=0;p<s.length;p++)a.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},{}],144:[function(e,t,n){"use strict";function r(e,t,n,r,o){}t.exports=r},{137:137,142:142,147:147}],145:[function(e,t,n){"use strict";var r=e(146);t.exports=function(e){return r(e,!1)}},{146:146}],146:[function(e,t,n){"use strict";var r=e(129),o=e(137),i=(e(142),e(147)),a=e(144);t.exports=function(e,t){function n(e){var t=e&&(E&&e[E]||e[x]);if("function"==typeof t)return t}function s(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function l(e){function n(n,r,a,s,l,c,p){if(s=s||w,c=c||a,p!==i)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else;return null==r[a]?n?new u(null===r[a]?"The "+l+" `"+c+"` is marked as required in `"+s+"`, but its value is `null`.":"The "+l+" `"+c+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(r,a,s,l,c)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function c(e){function t(t,n,r,o,i,a){var s=t[n];if(_(s)!==e)return new u("Invalid "+o+" `"+i+"` of type `"+C(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return l(t)}function p(e){function t(t,n,r,o,a){if("function"!=typeof e)return new u("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new u("Invalid "+o+" `"+a+"` of type `"+_(s)+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<s.length;l++){var c=e(s,l,r,o,a+"["+l+"]",i);if(c instanceof Error)return c}return null}return l(t)}function d(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=e.name||w;return new u("Invalid "+o+" `"+i+"` of type `"+b(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return l(t)}function f(e){function t(t,n,r,o,i){for(var a=t[n],l=0;l<e.length;l++)if(s(a,e[l]))return null;return new u("Invalid "+o+" `"+i+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?l(t):r.thatReturnsNull}function h(e){function t(t,n,r,o,a){if("function"!=typeof e)return new u("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],l=_(s);if("object"!==l)return new u("Invalid "+o+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in s)if(s.hasOwnProperty(c)){var p=e(s,c,r,o,a+"."+c,i);if(p instanceof Error)return p}return null}return l(t)}function m(e){function t(t,n,r,o,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,o,a,i))return null}return new u("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")}return Array.isArray(e)?l(t):r.thatReturnsNull}function v(e){function t(t,n,r,o,a){var s=t[n],l=_(s);if("object"!==l)return new u("Invalid "+o+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var p=e[c];if(p){var d=p(s,c,r,o,a+"."+c,i);if(d)return d}}return null}return l(t)}function g(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(g);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!g(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!g(a[1]))return!1}return!0;default:return!1}}function y(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":y(t,e)?"symbol":t}function C(e){var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){return e.constructor&&e.constructor.name?e.constructor.name:w}var E="function"==typeof Symbol&&Symbol.iterator,x="@@iterator",w="<<anonymous>>",T={array:c("array"),bool:c("boolean"),func:c("function"),number:c("number"),object:c("object"),string:c("string"),symbol:c("symbol"),any:function(){return l(r.thatReturnsNull)}(),arrayOf:p,element:function(){function t(t,n,r,o,i){var a=t[n];if(!e(a)){return new u("Invalid "+o+" `"+i+"` of type `"+_(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return l(t)}(),instanceOf:d,node:function(){function e(e,t,n,r,o){return g(e[t])?null:new u("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return l(e)}(),objectOf:h,oneOf:f,oneOfType:m,shape:v}
;return u.prototype=Error.prototype,T.checkPropTypes=a,T.PropTypes=T,T}},{129:129,137:137,142:142,144:144,147:147}],147:[function(e,t,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[45])(45)}()}()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/react-AMD.js' */
define("react",function(){return window.React});define("react-dom",function(){return window.ReactDOM});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/prop-types.js' */
!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PropTypes=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){"use strict";var emptyFunction=require(4),invariant=require(5),ReactPropTypesSecret=require(3);module.exports=function(){function e(e,r,t,n,p,o){o!==ReactPropTypesSecret&&invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function r(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r};return t.checkPropTypes=emptyFunction,t.PropTypes=t,t}},{3:3,4:4,5:5}],2:[function(require,module){module.exports=require(1)()},{1:1}],3:[function(require,module){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],4:[function(require,module){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},{}],5:[function(require,module){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(validateFormat(format),!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}var validateFormat=function(){};module.exports=invariant},{}]},{},[2])(2)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react', location = '/static/lib/react/prop-types-AMD.js' */
define("prop-types",function(){return window.PropTypes});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:redux', location = '/static/lib/redux/redux.js' */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Redux=e():t.Redux=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var o=n(2),u=r(o),i=n(7),c=r(i),a=n(6),f=r(a),s=n(5),d=r(s),l=n(1),p=r(l),y=n(3);r(y);e.createStore=u["default"],e.combineReducers=c["default"],e.bindActionCreators=f["default"],e.applyMiddleware=d["default"],e.compose=p["default"]},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var r=e[e.length-1],o=e.slice(0,-1);return function(){return o.reduceRight(function(t,e){return e(t)},r.apply(void 0,arguments))}}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){function r(){b===h&&(b=h.slice())}function u(){return v}function c(t){if("function"!=typeof t)throw Error("Expected listener to be a function.");var e=!0;return r(),b.push(t),function(){if(e){e=!1,r();var n=b.indexOf(t);b.splice(n,1)}}}function s(t){if(!(0,i["default"])(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw Error("Reducers may not dispatch actions.");try{m=!0,v=y(v,t)}finally{m=!1}for(var e=h=b,n=0;e.length>n;n++)e[n]();return t}function d(t){if("function"!=typeof t)throw Error("Expected the nextReducer to be a function.");y=t,s({type:f.INIT})}function l(){var t,e=c;return t={subscribe:function(t){function n(){t.next&&t.next(u())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[a["default"]]=function(){return this},t}var p;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(o)(t,e)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var y=t,v=e,h=[],b=h,m=!1;return s({type:f.INIT}),p={dispatch:s,subscribe:c,getState:u,replaceReducer:d},p[a["default"]]=l,p}e.__esModule=!0,e.ActionTypes=void 0,e["default"]=o;var u=n(4),i=r(u),c=n(12),a=r(c),f=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw Error(t)}catch(e){}}e.__esModule=!0,e["default"]=n},function(t,e,n){function r(t){if(!i(t)||p.call(t)!=c||u(t))return!1;var e=o(t);if(null===e)return!0;var n=d.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}var o=n(8),u=n(9),i=n(11),c="[object Object]",a=Function.prototype,f=Object.prototype,s=a.toString,d=f.hasOwnProperty,l=s.call(Object),p=f.toString;t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return function(t){return function(n,r,o){var i=t(n,r,o),a=i.dispatch,f=[],s={getState:i.getState,dispatch:function(t){return a(t)}};return f=e.map(function(t){return t(s)}),a=c["default"].apply(void 0,f)(i.dispatch),u({},i,{dispatch:a})}}}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=o;var i=n(1),c=r(i)},function(t,e){"use strict";function n(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"==typeof t)return n(t,e);if("object"!=typeof t||null===t)throw Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),o={},u=0;r.length>u;u++){var i=r[u],c=t[i];"function"==typeof c&&(o[i]=n(c,e))}return o}e.__esModule=!0,e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=e&&e.type,r=n&&'"'+n+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function u(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:c.ActionTypes.INIT});if(void 0===r)throw Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:o}))throw Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+c.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function i(t){for(var e=Object.keys(t),n={},r=0;e.length>r;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var c,a=Object.keys(n);try{u(n)}catch(f){c=f}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(c)throw c;for(var r=!1,u={},i=0;a.length>i;i++){var f=a[i],s=n[f],d=t[f],l=s(d,e);if(void 0===l){var p=o(f,e);throw Error(p)}u[f]=l,r=r||l!==d}return r?u:t}}e.__esModule=!0,e["default"]=i;var c=n(2),a=n(4),f=(r(a),n(3));r(f)},function(t,e,n){var r=n(10),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e){function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){t.exports=n(13)},function(t,e,n){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),u=r(o),i=void 0;void 0!==t?i=t:"undefined"!=typeof window&&(i=window);var c=(0,u["default"])(i);e["default"]=c}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n}])});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:redux', location = '/static/lib/redux/redux-AMD.js' */
define("redux",function(){return window.Redux});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react-redux', location = '/static/lib/redux/react-redux.js' */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("redux")):"function"==typeof define&&define.amd?define(["exports","react","redux"],e):e(t.ReactRedux=t.ReactRedux||{},t.React,t.Redux)}(this,function(t,e,n){"use strict";function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function o(t){return function(){return t}}function i(t,e,n,r,o,i,s,u){if(U(e),!t){var p;if(void 0===e)p=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[n,r,o,i,s,u],c=0;p=Error(e.replace(/%s/g,function(){return a[c++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}}function s(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",r=arguments[1],o=r||n+"Subscription",i=function(t){function r(e,o){H(this,r);var i=Y(this,t.call(this,e,o));return i[n]=e.store,i}return L(r,t),r.prototype.getChildContext=function(){var t;return t={},t[n]=this[n],t[o]=null,t},r.prototype.render=function(){return e.Children.only(this.props.children)},r}(e.Component);return i.propTypes={store:A.isRequired,children:F.element.isRequired},i.childContextTypes=(t={},t[n]=A.isRequired,t[o]=k,t),i.displayName="Provider",i}function u(){var t=[],e=[];return{clear:function(){e=tt,t=tt},notify:function(){for(var n=t=e,r=0;n.length>r;r++)n[r]()},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==tt&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}function p(){}function a(t,e){var n={run:function(r){try{var o=t(e.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function c(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.getDisplayName,s=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,u=o.methodName,c=void 0===u?"connectAdvanced":u,d=o.renderCountProp,f=void 0===d?void 0:d,l=o.shouldHandleStateChanges,h=void 0===l||l,y=o.storeKey,b=void 0===y?"store":y,v=o.withRef,m=void 0!==v&&v,P=V(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),g=b+"Subscription",O=rt++,S=(n={},n[b]=A,n[g]=k,n),w=(r={},r[g]=k,r);return function(n){$("function"==typeof n,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(n));var r=n.displayName||n.name||"Component",o=s(r),i=K({},P,{getDisplayName:s,methodName:c,renderCountProp:f,shouldHandleStateChanges:h,storeKey:b,withRef:m,displayName:o,wrappedComponentName:r,WrappedComponent:n}),u=function(r){function s(t,e){H(this,s);var n=Y(this,r.call(this,t,e));return n.version=O,n.state={},n.renderCount=0,n.store=t[b]||e[b],n.propsMode=!!t[b],n.setWrappedInstance=n.setWrappedInstance.bind(n),$(n.store,'Could not find "'+b+'" in either the context or props of '+('"'+o+'". Either wrap the root component in a <Provider>, ')+('or explicitly pass "'+b+'" as a prop to "'+o+'".')),n.initSelector(),n.initSubscription(),n}return L(s,r),s.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[g]=e||this.context[g],t},s.prototype.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},s.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},s.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},s.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=p,this.store=null,this.selector.run=p,this.selector.shouldComponentUpdate=!1},s.prototype.getWrappedInstance=function(){return $(m,"To access the wrapped instance, you need to specify "+("{ withRef: true } in the options argument of the "+c+"() call.")),this.wrappedInstance},s.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},s.prototype.initSelector=function(){var e=t(this.store.dispatch,i);this.selector=a(e,this.store),this.selector.run(this.props)},s.prototype.initSubscription=function(){if(h){var t=(this.propsMode?this.props:this.context)[g];this.subscription=new nt(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},s.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(ot)):this.notifyNestedSubs()},s.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},s.prototype.isSubscribed=function(){return!!this.subscription&&this.subscription.isSubscribed()},s.prototype.addExtraProps=function(t){if(!(m||f||this.propsMode&&this.subscription))return t;var e=K({},t);return m&&(e.ref=this.setWrappedInstance),f&&(e[f]=this.renderCount++),this.propsMode&&this.subscription&&(e[g]=this.subscription),e},s.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return e.createElement(n,this.addExtraProps(t.props))},s}(e.Component);return u.WrappedComponent=n,u.displayName=o,u.childContextTypes=w,u.contextTypes=S,u.propTypes=S,Q(u,n)}}function d(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function f(t,e){if(d(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0;n.length>o;o++)if(!it.call(e,n[o])||!d(t[n[o]],e[n[o]]))return!1;return!0}function l(t){return function(e,n){function r(){return o}var o=t(e,n);return r.dependsOnOwnProps=!1,r}}function h(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?!!t.dependsOnOwnProps:1!==t.length}function y(t,e){return function(e,n){var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=h(t);var o=r(e,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=h(o),o=r(e,n)),o},r}}function b(t){return"function"==typeof t?y(t,"mapDispatchToProps"):void 0}function v(t){return t?void 0:l(function(t){return{dispatch:t}})}function m(t){return t&&"object"==typeof t?l(function(e){return n.bindActionCreators(t,e)}):void 0}function P(t){return"function"==typeof t?y(t,"mapStateToProps"):void 0}function g(t){return t?void 0:l(function(){return{}})}function O(t,e,n){return K({},n,t,e)}function S(t){return function(e,n){var r=n.pure,o=n.areMergedPropsEqual,i=!1,s=void 0;return function(e,n,u){var p=t(e,n,u);return i?r&&o(p,s)||(s=p):(i=!0,s=p),s}}}function w(t){return"function"==typeof t?S(t):void 0}function C(t){return t?void 0:function(){return O}}function T(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function E(t,e,n,r,o){function i(o,i){return h=o,y=i,b=t(h,y),v=e(r,y),m=n(b,v,y),l=!0,m}function s(){return b=t(h,y),e.dependsOnOwnProps&&(v=e(r,y)),m=n(b,v,y)}function u(){return t.dependsOnOwnProps&&(b=t(h,y)),e.dependsOnOwnProps&&(v=e(r,y)),m=n(b,v,y)}function p(){var e=t(h,y),r=!f(e,b);return b=e,r&&(m=n(b,v,y)),m}function a(t,e){var n=!d(e,y),r=!c(t,h);return h=t,y=e,n&&r?s():n?u():r?p():m}var c=o.areStatesEqual,d=o.areOwnPropsEqual,f=o.areStatePropsEqual,l=!1,h=void 0,y=void 0,b=void 0,v=void 0,m=void 0;return function(t,e){return l?a(t,e):i(t,e)}}function R(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,o=e.initMergeProps,i=V(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(t,i),u=r(t,i),p=o(t,i),a=i.pure?E:T;return a(s,u,p,t,i)}function x(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function q(t,e){return t===e}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?c:e,r=t.mapStateToPropsFactories,o=void 0===r?dt:r,i=t.mapDispatchToPropsFactories,s=void 0===i?ct:i,u=t.mergePropsFactories,p=void 0===u?ft:u,a=t.selectorFactory,d=void 0===a?R:a;return function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=i.pure,a=void 0===u||u,c=i.areStatesEqual,l=void 0===c?q:c,h=i.areOwnPropsEqual,y=void 0===h?f:h,b=i.areStatePropsEqual,v=void 0===b?f:b,m=i.areMergedPropsEqual,P=void 0===m?f:m,g=V(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),O=x(t,o,"mapStateToProps"),S=x(e,s,"mapDispatchToProps"),w=x(r,p,"mergeProps");return n(d,K({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:!!t,initMapStateToProps:O,initMapDispatchToProps:S,initMergeProps:w,pure:a,areStatesEqual:l,areOwnPropsEqual:y,areStatePropsEqual:v,areMergedPropsEqual:P},g))}}var j=function(){};j.thatReturns=o,j.thatReturnsFalse=o(!1),j.thatReturnsTrue=o(!0),j.thatReturnsNull=o(null),j.thatReturnsThis=function(){return this},j.thatReturnsArgument=function(t){return t};var M=j,U=function(t){},D=i,_="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I=_,W=function(){function t(t,e,n,r,o,i){i!==I&&D(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return n.checkPropTypes=M,n.PropTypes=n,n},F=r(function(t){t.exports=W()}),k=F.shape({trySubscribe:F.func.isRequired,tryUnsubscribe:F.func.isRequired,notifyNestedSubs:F.func.isRequired,isSubscribed:F.func.isRequired}),A=F.shape({subscribe:F.func.isRequired,dispatch:F.func.isRequired,getState:F.func.isRequired}),H=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},K=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},V=function(t,e){var n={};for(var r in t)e.indexOf(r)<0&&Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},B=s(),J={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},z={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},G="function"==typeof Object.getOwnPropertySymbols,Q=function(t,e,n){if("string"!=typeof e){var r=Object.getOwnPropertyNames(e);G&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var o=0;r.length>o;++o)if(!(J[r[o]]||z[r[o]]||n&&n[r[o]]))try{t[r[o]]=e[r[o]]}catch(t){}}return t},X="production",Z=function(t,e,n,r,o,i,s,u){if("production"!==X&&void 0===e)throw Error("invariant requires an error message argument");if(!t){var p;if(void 0===e)p=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[n,r,o,i,s,u],c=0;p=Error(e.replace(/%s/g,function(){return a[c++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}},$=Z,tt=null,et={notify:function(){}},nt=function(){function t(e,n,r){H(this,t),this.store=e,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=et}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return!!this.unsubscribe},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=u())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=et)},t}(),rt=0,ot={},it=Object.prototype.hasOwnProperty,st="object"==typeof global&&global&&global.Object===Object&&global,ut="object"==typeof self&&self&&self.Object===Object&&self,pt=(st||ut||Function("return this")(),Function.prototype),at=pt.toString,ct=(at.call(Object),[b,v,m]),dt=[P,g],ft=[w,C],lt=N();t.Provider=B,t.createProvider=s,t.connectAdvanced=c,t.connect=lt,Object.defineProperty(t,"__esModule",{value:!0})});
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:react-redux', location = '/static/lib/redux/react-redux-AMD.js' */
define("react-redux",function(){return window.ReactRedux});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/create-reducer.js' */
define("bitbucket/internal/bbui/utils/create-reducer",["module","exports"],function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,c){return function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a,b=arguments[1];return c[b.type]?c[b.type](d,b):d}};e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/pull-request-unique-id.js' */
define("bitbucket/internal/bbui/utils/pull-request-unique-id",["module","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){var b=a.toRef.repository;return[b.project.key,b.slug,a.id].join("::")};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/merge-state-with-rollback.js' */
define("bitbucket/internal/bbui/utils/merge-state-with-rollback",["module","exports"],function(e,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(c,d,a){var b=a.forward,e=a.back;a=a.commit;if(d.hasOwnProperty("meta")){if(!d.meta.isPending&&d.payload&&d.payload.error)return babelHelpers.extends({},c,e());if(d.meta.isPending)return babelHelpers.extends({},c,b())}else return c;return a?babelHelpers.extends({},c,a()):c};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/merge-object-in-array.js' */
define("bitbucket/internal/bbui/utils/merge-object-in-array",["module","exports","lodash"],function(e,b,f){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(c,a,b){a=d.default.findIndex(c,a);return-1===a?c:[].concat(babelHelpers.toConsumableArray(c.slice(0,a)),[d.default.assign({},c[a],b)],babelHelpers.toConsumableArray(c.slice(a+1)))};var d=babelHelpers.interopRequireDefault(f);e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/replace-state-with-rollback.js' */
define("bitbucket/internal/bbui/utils/replace-state-with-rollback",["module","exports"],function(g,d){Object.defineProperty(d,"__esModule",{value:!0});d.default=function(b,a,c){var d=c.forward,f=c.back;c=c.commit;if(!a.hasOwnProperty("meta"))return b;if(a.meta.isPending)return e[a.meta.actionId]=b,d();if(a.payload&&a.payload.error)return b=e[a.meta.actionId],delete e[a.meta.actionId],f?f(b):b;delete e[a.meta.actionId];return c?c():b};var e={};g.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/thunk-middleware.js' */
define("bitbucket/internal/bbui/utils/thunk-middleware",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){var b=a.dispatch,d=a.getState;return function(a){return function(c){return"function"===typeof c?c(b,d):a(c)}}};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:utils', location = '/static/bitbucket/internal/bbui/utils/promise-middleware.js' */
define("bitbucket/internal/bbui/utils/promise-middleware",["module","exports","lodash"],function(f,a,g){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){var c=a.dispatch;return function(a){return function(d){function b(a,c){var b=babelHelpers.extends({},d,{payload:a,meta:babelHelpers.extends({},e,{actionId:f,isPending:c})});delete b.meta.promise;return b}var e=d.meta;if(!e||!e.promise)return a(d);var f=Number((0,g.uniqueId)());c(b(d.payload,!0));return e.promise.then(function(a){return c(b(a,
!1))},function(a){return c(b({error:a},!1))})}}};f.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:redux-util', location = '/static/bitbucket/internal/util/redux.js' */
define("bitbucket/internal/util/redux",["exports","redux","bitbucket/internal/bbui/utils/promise-middleware","bitbucket/internal/bbui/utils/thunk-middleware"],function(a,b,c,e){Object.defineProperty(a,"__esModule",{value:!0});a.customCreateStore=function(a,c){return(0,b.createStore)((0,b.combineReducers)(a),c,(0,b.compose)(b.applyMiddleware.apply(void 0,d),window.devToolsExtension?window.devToolsExtension():function(a){return a}))};a=babelHelpers.interopRequireDefault(c);c=function(a){return function(c){return function(b){console.group(b.type);
console.log("dispatching",b);var d=c(b);console.log("next state",JSON.parse(JSON.stringify(a.getState())));console.groupEnd(b.type);return d}}};var d=[babelHelpers.interopRequireDefault(e).default,a.default];/[?&]dev=true($|&)/.test(window.location.search)&&d.push(c)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-analytics', location = '/static/bitbucket/internal/feature/pull-request/pull-request-analytics/pull-request-analytics.js' */
define("bitbucket/internal/feature/pull-request/pull-request-analytics/pull-request-analytics","module exports jquery bitbucket/util/events bitbucket/util/state bitbucket/internal/util/analytics".split(" "),function(d,c,e,h,k,l){function a(a){m.default.on(a,function(f){var c=a.substring(27);a.match(/comment.actions.reply|comment.actions.view/)&&(c=a.substring(39));var d=b.default.getPullRequest().id,e=b.default.getRepository().id,g;g=b.default.getCurrentUser().id===b.default.getPullRequest().author.user.id?
"author":n()?"reviewer":p()?"participant":"other";f=q.default.extend({},{"pullRequest.id":d,"repository.id":e,userRole:g},f);r.default.add(c,f,!0)})}function n(){var a=b.default.getPullRequest().reviewers;return a.length&&a.some(function(a){return a.user.id===b.default.getCurrentUser().id})}function p(){var a=b.default.getPullRequest().participants;return a.length&&a.some(function(a){return a.user.id===b.default.getCurrentUser().id})}Object.defineProperty(c,"__esModule",{value:!0});var q=babelHelpers.interopRequireDefault(e),
m=babelHelpers.interopRequireDefault(h),b=babelHelpers.interopRequireDefault(k),r=babelHelpers.interopRequireDefault(l);c.default={init:function(){a("bitbucket.internal.feature.pullRequest.comment.actions.reply");a("bitbucket.internal.feature.pullRequest.comment.actions.view");a("bitbucket.internal.feature.pullRequest.commit.open");a("bitbucket.internal.feature.pullRequest.commitDiff.view");a("bitbucket.internal.feature.pullRequest.diff.fileChange");a("bitbucket.internal.feature.pullRequest.effectiveDiff.view");
a("bitbucket.internal.feature.pullRequest.iterativeDiff.view");a("bitbucket.internal.feature.pullRequest.overview.comment.delete.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.edit.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.like.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.open");a("bitbucket.internal.feature.pullRequest.overview.comment.reply.clicked");a("bitbucket.internal.feature.pullRequest.overview.comment.task.clicked");
a("bitbucket.internal.feature.pullRequest.overview.commit.open");a("bitbucket.internal.feature.pullRequest.tab.commits");a("bitbucket.internal.feature.pullRequest.tab.diff");a("bitbucket.internal.feature.pullRequest.tab.overview")}};d.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-feature-discovery', location = '/static/bitbucket/internal/feature/pull-request/feature-discovery/pull-request-feature-dialog.soy' */
// This file was automatically generated from pull-request-feature-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.feature.discovery.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.feature == 'undefined') { bitbucket.internal.feature.pullRequest.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest.feature.discovery == 'undefined') { bitbucket.internal.feature.pullRequest.feature.discovery = {}; }


bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus = function(opt_data, opt_ignored) {
  return '<div class="feature-img"></div><h2>' + soy.$$escapeHtml('New reviewer status') + '</h2><h3 class="header-approve">' + soy.$$escapeHtml('Approved') + '</h3><p>' + soy.$$escapeHtml('Once you\x27re happy with the changes click approve (same as before).') + '</p><h3 class="header-needs-work">' + soy.$$escapeHtml('Needs work') + '</h3><p>' + soy.$$escapeHtml('Let the author know you reviewed their changes but don\x27t yet approve. Don\x27t forget to leave some comments!') + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus.soyTemplateName = 'bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus';
}


bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('When new changes are pushed, your status resets and you\x27ll be notified to review again.') + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick.soyTemplateName = 'bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:actions', location = '/static/bitbucket/internal/bbui/actions/pull-request.js' */
define("bitbucket/internal/bbui/actions/pull-request",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.PR_CHANGE_REVIEWER_STATE="PR_CHANGE_REVIEWER_STATE";a.PR_CHANGE_SELF_REVIEWER="PR_CHANGE_SELF_REVIEWER";a.PR_CHECK_MERGEABILITY="PR_CHECK_MERGEABILITY";a.PR_MERGE="PR_MERGE";a.PR_SET_IS_WATCHING="PR_SET_IS_WATCHING";a.PR_SET_PULL_REQUEST="PR_SET_PULL_REQUEST";a.PR_WATCH="PR_WATCH"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:actions', location = '/static/bitbucket/internal/bbui/actions/actions.js' */
define("bitbucket/internal/bbui/actions/actions",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.SET_CURRENT_USER="SET_CURRENT_USER"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/can-merge.js' */
define("bitbucket/internal/feature/pull-request/action-creators/can-merge","module exports bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/bbui/actions/pull-request".split(" "),function(d,b,e,f,g,h,k){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(c){c=c||l.default.getPullRequest();var b=m.default.rest({url:n.default.rest().currentRepo().pullRequest(c.id).merge().build(),type:"GET"});return{type:k.PR_CHECK_MERGEABILITY,
payload:null,meta:{promise:b.then(function(a){p.default.trigger(a.canMerge?"bitbucket.internal.pull-request.can.merge":"bitbucket.internal.pull-request.cant.merge",null,c,a.conflicted,a.vetoes,a.properties,a.outcome);return a})}}};var p=babelHelpers.interopRequireDefault(e),n=babelHelpers.interopRequireDefault(f),m=babelHelpers.interopRequireDefault(g),l=babelHelpers.interopRequireDefault(h);d.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/change-self-reviewer.js' */
define("bitbucket/internal/feature/pull-request/action-creators/change-self-reviewer","module exports bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/model/pull-request-json bitbucket/internal/util/analytics".split(" "),function(g,a,k,l,m,n,p,q,r){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b,d,c,a){var e="ADD_SELF"===c,f=b.toRef.repository,g=f.project,f=t.default.rest({type:e?
"POST":"DELETE",url:u.default.rest().project(g).repo(f).pullRequest(b).participants(e?null:d).build(),data:e?{user:d,role:"reviewer"}:null}).done(function(){v.default.trigger(e?"bitbucket.internal.feature.pullRequest.self.added":"bitbucket.internal.feature.pullRequest.self.removed",null,{action:c,user:d,pullRequest:(0,q.filter)(b)});w.default.add("pullRequest."+(c===h.default.SelfAction.ADD_SELF?"addSelf":"removeSelf"),{userStatus:a||h.default.ApprovalStatus.UNAPPROVED,"pullRequest.fromRef.repository.id":b.fromRef.repository.id,
"pullRequest.id":b.id,"pullRequest.toRef.repository.id":b.toRef.repository.id},!0)});return{type:n.PR_CHANGE_SELF_REVIEWER,payload:{pullRequest:b,user:d,selfAction:c},meta:{promise:f.then(function(a){return{pullRequest:b,user:a?a.user:null,selfAction:c}})}}};var v=babelHelpers.interopRequireDefault(k),u=babelHelpers.interopRequireDefault(l),t=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(r);g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status.js' */
define("bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status","module exports lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/model/pull-request-json".split(" "),function(l,f,m,n,p,q,r,t,g){function u(a){function b(b,c){h.default.trigger(b,null,k.default.merge(a,{approved:c,pullRequest:(0,g.filter)(a.pullRequest)}))}if(a.newStatus!==e.default.ApprovalStatus.APPROVED&&
a.oldStatus!==e.default.ApprovalStatus.APPROVED)a.request.then(function(){var c=a.newStatus===e.default.ApprovalStatus.NEEDS_WORK;b("bitbucket.internal.widget.needs-work."+(c?"added":"removed"),c)});else{var c=a.newStatus===e.default.ApprovalStatus.APPROVED,d=c?{ing:"bitbucket.internal.widget.approve-button.adding",ed:"bitbucket.internal.widget.approve-button.added",failed:"bitbucket.internal.widget.approve-button.add.failed"}:{ing:"bitbucket.internal.widget.approve-button.removing",ed:"bitbucket.internal.widget.approve-button.removed",
failed:"bitbucket.internal.widget.approve-button.remove.failed"};b(d.ing,c);a.request.then(function(){b(d.ed,c)},function(){b(d.failed,!c)})}}Object.defineProperty(f,"__esModule",{value:!0});f.default=function(a){var b=a.pullRequest.toRef.repository,c=b.project,d=a.user,b=v.default.rest({type:"PUT",url:w.default.rest().project(c).repo(b).pullRequest(a.pullRequest).participants(d).withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}).build(),data:{status:a.newStatus}});
a=k.default.merge(a,{request:b,prId:Number(a.pullRequest.id),user:d});u(a);return{type:r.PR_CHANGE_REVIEWER_STATE,payload:{pullRequest:a.pullRequest,user:a.user,newState:a.newStatus},meta:{promise:b.then(function(b){h.default.trigger("bitbucket.internal.feature.pullRequest.reviewerStatus.changed",null,{pullRequest:(0,g.filter)(a.pullRequest),user:b.user,newState:b.status,oldState:a.oldStatus});return{pullRequest:a.pullRequest,user:b.user,newState:b.status}})}}};var k=babelHelpers.interopRequireDefault(m),
h=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(p),v=babelHelpers.interopRequireDefault(q),e=babelHelpers.interopRequireDefault(t);l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-action-creators', location = '/static/bitbucket/internal/feature/pull-request/action-creators/watch.js' */
define("bitbucket/internal/feature/pull-request/action-creators/watch","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/bbui/actions/pull-request bitbucket/internal/model/page-state bitbucket/internal/util/events".split(" "),function(d,c,h,k,l,m,n,p,q,r){Object.defineProperty(c,"__esModule",{value:!0});c.default=function(a){var b;a=e.default.assign({},t,a);a.stateOnly?b=u.default.Deferred().resolve():(b=v.default.rest().currentPullRequest().watch().build(),
b=w.default.rest({url:b,type:a.watchState?"POST":"DELETE",statusCode:{401:function(a,b,c,d,f){return e.default.assign({},f,{title:"Could not watch this.",message:"You do not have permission to watch this.",fallbackUrl:!1,shouldReload:!0})},409:function(a,b,c,d,f){return e.default.assign({},f,{title:"Could not watch this.",fallbackUrl:!1,shouldReload:!0})}}}));b.done(function(){x.default.setIsWatching(a.watchState);
y.default.trigger(a.watchState?"bitbucket.internal.web.watch-button.added":"bitbucket.internal.web.watch-button.removed",null,a)});return{type:p.PR_WATCH,payload:a.watchState,meta:{promise:b}}};var g=babelHelpers.interopRequireDefault(h),u=babelHelpers.interopRequireDefault(k),e=babelHelpers.interopRequireDefault(l),v=babelHelpers.interopRequireDefault(m),w=babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(q),y=babelHelpers.interopRequireDefault(r),t={stateOnly:!1};d.exports=
c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:form', location = '/static/bitbucket/internal/widget/form/form.soy' */
// This file was automatically generated from form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.form = function(opt_data, opt_ignored, opt_ijData) {
  var param3 = '' + ((opt_data.headingContent) ? soy.$$filterNoAutoescape(opt_data.headingContent) : '');
  if (opt_data.errors) {
    var messageList10 = opt_data.errors;
    var messageListLen10 = messageList10.length;
    for (var messageIndex10 = 0; messageIndex10 < messageListLen10; messageIndex10++) {
      var messageData10 = messageList10[messageIndex10];
      param3 += aui.message.error({content: '' + bitbucket.internal.widget.errorContent({message: messageData10}, null, opt_ijData)}, null, opt_ijData);
    }
  }
  if (opt_data.detailedErrors) {
    var errorList18 = opt_data.detailedErrors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      param3 += aui.message.error({content: '' + bitbucket.internal.widget.errorContent(errorData18, null, opt_ijData)}, null, opt_ijData);
    }
  }
  param3 += ((opt_data.additionalErrorContent) ? soy.$$filterNoAutoescape(opt_data.additionalErrorContent) : '') + soy.$$filterNoAutoescape(opt_data.content);
  var output = '' + aui.form.form({content: param3, action: opt_data.action, method: opt_data.method, enctype: opt_data.enctype, isUnsectioned: opt_data.isUnsectioned, isLongLabels: opt_data.isLongLabels, isTopLabels: opt_data.isTopLabels, id: opt_data.id, extraClasses: '' + ((! (opt_data.preventDoubleSubmit == false)) ? 'prevent-double-submit ' : '') + aui.renderExtraClasses(opt_data, null, opt_ijData), extraAttributes: 'accept-charset="UTF-8"' + ((opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData)}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.form.soyTemplateName = 'bitbucket.internal.widget.form';
}


bitbucket.internal.widget.xsrfProtectedForm = function(opt_data, opt_ignored, opt_ijData) {
  var param66 = '';
  var xsrfTokenName__soy67 = opt_data.xsrfTokenName ? opt_data.xsrfTokenName : opt_ijData.xsrfTokenName ? opt_ijData.xsrfTokenName : null;
  param66 += soy.$$filterNoAutoescape(opt_data.content) + ((xsrfTokenName__soy67) ? '<input type="hidden" name="' + soy.$$escapeHtml(xsrfTokenName__soy67) + '" value="' + soy.$$escapeHtml(opt_data.xsrfTokenValue ? opt_data.xsrfTokenValue : opt_ijData.xsrfTokenValue ? opt_ijData.xsrfTokenValue : null) + '">' : '');
  var output = '' + bitbucket.internal.widget.form({action: opt_data.action, method: opt_data.method, enctype: opt_data.enctype, isUnsectioned: opt_data.isUnsectioned, isLongLabels: opt_data.isLongLabels, isTopLabels: opt_data.isTopLabels, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, errors: opt_data.errors, detailedErrors: opt_data.detailedErrors, additionalErrorContent: opt_data.additionalErrorContent, preventDoubleSubmit: opt_data.preventDoubleSubmit, autocomplete: opt_data.autocomplete, headingContent: opt_data.headingContent ? opt_data.headingContent : null, content: param66}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.xsrfProtectedForm.soyTemplateName = 'bitbucket.internal.widget.xsrfProtectedForm';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:form', location = '/static/bitbucket/internal/widget/form/xsrfProtectedForm.soy' */
// This file was automatically generated from xsrfProtectedForm.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.form.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.form == 'undefined') { widget.form = {}; }


widget.form.xsrfProtectedForm = function(opt_data, opt_ignored, opt_ijData) {
  return '' + widget.aui.form.form(soy.$$augmentMap(opt_data, {xsrfTokenName: opt_ijData.xsrfTokenName ? opt_ijData.xsrfTokenName : null, xsrfTokenValue: opt_ijData.xsrfTokenValue ? opt_ijData.xsrfTokenValue : null}), null, opt_ijData);
};
if (goog.DEBUG) {
  widget.form.xsrfProtectedForm.soyTemplateName = 'widget.form.xsrfProtectedForm';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:focus-snapshots', location = '/static/bitbucket/internal/util/focus-snapshot.js' */
define("bitbucket/internal/util/focus-snapshot",["module","exports","jquery"],function(d,a,e){Object.defineProperty(a,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e);a.default=function(){var b,c;return{save:function(){var a=document.activeElement;a&&(b=(0,f.default)(a),b.is(":text, textarea")&&(c=b.getSelection()))},restore:function(){b&&(b.focus(),c&&b.setSelection(c.start,c.end))}}}();d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-plugins-jquery-select2', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/plugins/jquery.select2.js' */
("undefined"===typeof window?global:window).__f8808db850ac1b5b58d33da133a8f08d=function(){var y=jQuery;"undefined"==typeof y.fn.each2&&y.extend(y.fn,{each2:function(a){for(var b=y([0]),c=-1,d=this.length;++c<d&&(b.context=b[0]=this[c])&&!1!==a.call(b[0],c,b););return this}});var e=jQuery,w=function(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=O[g]||g;return b},k=function(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1},m=function(a,
b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1},B=function(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c},G=function(a){a.on("keydown",function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),
a.trigger("keyup-change"))})},H=function(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}},j=function(a){a.preventDefault();a.stopPropagation()},z=function(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))},
I=function(a,b,c,d){var g=w(a.toUpperCase()).indexOf(w(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))},J=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},K=function(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(l){window.clearTimeout(b);
b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,l.term,l.page,l.context):null,d="function"===typeof d?d.call(h,l.term,l.page,l.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=
a.results(b,l.page);l.callback(b)}});c=t.call(h,f)},d)}},L=function(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},n;if(c==="")a.callback(b());else{n=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){n(b,
i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){n(b,d.results)});a.callback(d)}}},M=function(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}},r=function(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");
},o=function(a){return e.isFunction(a)?a():a},N=function(a){var b=0;e.each(a,function(a,d){d.children?b+=N(d.children):b++});return b},P=function(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&
null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(m(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}},C=function(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c};if(void 0===window.Select2){var f,s,D,E,A,v,x={x:0,y:0},F;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=
a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var O={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A",
"\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C",
"\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E",
"\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H",
"\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K",
"\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N",
"\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O",
"\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R",
"\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U",
"\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W",
"\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a",
"\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};s=e(document);var Q=1;A=function(){return Q++};s.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});s=C(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);
this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+A());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};z(this.container,this.opts.element,this.opts.adaptContainerCssClass);
this.container.attr("style",a.element.attr("style"));this.container.css(o(a.containerCss));this.container.addClass(o(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",j);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(a.dropdownCssClass));
this.dropdown.data("select2",this);this.dropdown.on("click",j);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",j);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));
var h=this.results,l=H(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=k(a.target,h.get())&&l(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,g){c=b.scrollTop();0<g&&0>=c-g?(b.scrollTop(0),j(a)):0>g&&b.get(0).scrollHeight-
b.scrollTop()+g<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),j(a))});G(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});
e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");void 0===i&&(i=!1);this.readonly(i);if(!(i=F)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}F=i;this.autofocus=a.element.prop("autofocus");
a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},
optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:m(a.attr("locked"),"locked")||m(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),
function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var l,j,m,k,o,u,q,b=a.sortResults(b,c,d);l=0;for(j=b.length;l<j;l=l+1){m=b[l];o=m.disabled===true;k=!o&&t(m)!==void 0;u=m.children&&m.children.length>0;q=e("<li></li>");q.addClass("select2-results-dept-"+h);q.addClass("select2-result");q.addClass(k?"select2-result-selectable":"select2-result-unselectable");
o&&q.addClass("select2-disabled");u&&q.addClass("select2-result-with-children");q.addClass(g.opts.formatResultCssClass(m));k=e(document.createElement("div"));k.addClass("select2-result-label");o=a.formatResult(m,k,d,g.opts.escapeMarkup);o!==void 0&&k.html(o);q.append(k);if(u){u=e("<ul></ul>");u.addClass("select2-result-sub");f(m.children,u,h+1);q.append(u)}q.data("select2-data",m);c.append(q)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in
a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:false},d=a.term,e,f,p;p=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){p(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&
e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){p(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=K.call(a.element,a.ajax)}else if("data"in a)a.query=L(a.data);else if("tags"in a&&(a.query=M(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===
a.initSelection))a.initSelection=function(b,c){var d=[];e(B(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(m(this.id,b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&
this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(o(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(o(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});
c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",
val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},
enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),
d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),n=h.scrollLeft()+f,j=h.scrollTop()+i,c=b.top+c,p=b.left,j=c+g<=j,m=b.top-g>=this.body().scrollTop(),k=a.outerWidth(!1),r=p+k<=n,s;a.hasClass("select2-drop-above")?(g=!0,!m&&j&&(s=!0,g=!1)):(g=!1,!j&&m&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),n=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,p=b.left,k=a.outerWidth(!1),r=p+k<=
n,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),k=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:F.width),k>d?d=k:k=d,r=p+k<=n):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(n=this.body().offset(),c-=n.top,p-=n.left);r||(p=b.left+d-k);d={left:p,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=
c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,o(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;
this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),
a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+
" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");
this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return o(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),
0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},
countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,
this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var n=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&n&&m(f,n))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;n=this.getMaximumSelectionSize();
if(1<=n&&(f=this.data(),e.isArray(f)&&f.length>=n&&r(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(n)+"</li>");return}d.val().length<h.minimumInputLength?(r(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?r(h.formatInputTooLong,"formatInputTooLong")?
c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var l;j==this.queryCount&&(this.opened()?
(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(l=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==l&&null!==l&&void 0!==i.id(l)&&null!==i.id(l)&&0===e(f.results).filter(function(){return m(i.id(this),i.id(l))}).length&&f.results.unshift(l)),0===f.results.length&&r(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),
page:this.resultsPage,context:null}),!0===f.more&&r(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});
this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=
this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||
"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);
null!==a&&this.container.css("width",a)}});D=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)j(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);j(a);break;case f.ENTER:this.selectHighlighted();j(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
j(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)j(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
j(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),j(a)}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();j(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){j(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=m(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(N(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});E=C(s,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=B(b.val(),a.separator),f=[];a.query({matcher:function(b,c,d){(b=e.grep(g,function(b){return m(b,a.id(d))}).length)&&f.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<g.length;c++)for(var e=g[c],j=0;j<f.length;j++){var k=f[j];if(m(e,a.id(k))){b.push(k);f.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+A());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),l=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&l.length?g=l:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=l.length?l:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),j(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),j(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);j(b);return;case f.ENTER:this.selectHighlighted();j(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);j(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&j(b),b.which===f.ENTER&&j(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",j).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),j(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=k(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=k(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
r(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return B(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,j="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],m=["val","data"],o={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new E:new D,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],j))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(o[d]&&(d=o[d]),f=c[d].apply(c,a.slice(1))),0<=k(a[0],i)||k(a[0],m)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];I(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=w(""+b).toUpperCase().indexOf(w(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:P,escapeMarkup:J,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:K,local:L,tags:M},util:{debounce:H,markMatch:I,escapeMarkup:J,stripDiacritics:w},"class":{"abstract":s,single:D,multi:E}}}return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-select2', location = 'node_modules/@atlassian/aui/src/js/aui/select2.js' */
("undefined"===typeof window?global:window).__cbae0711ad03dade6eafbd2c419f6a9c=function(){"use strict";var b=__307d3e18fd611f85395c67cddeb1fe24,d=b&&b.__esModule?b:{"default":b};__f8808db850ac1b5b58d33da133a8f08d;var e=d.default.fn.select2;d.default.fn.auiSelect2=function(b){var c;if(d.default.isPlainObject(b)){var a=d.default.extend({},b);c=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+c+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+
c+(a.dropdownCssClass?" "+a.dropdownCssClass:"");c=Array.prototype.slice.call(arguments,1);c.unshift(a)}else c=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];return e.apply(this,c)};return{}}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:searchable-multi-selector', location = '/static/bitbucket/internal/widget/searchable-multi-selector/searchable-multi-selector.js' */
define("bitbucket/internal/widget/searchable-multi-selector/searchable-multi-selector","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/promise".split(" "),function(p,l,m,q,r,t,u,v,w){function n(a,b){this._$field=a;var d=b=this._options=h.default.extend(!0,{},this.defaults,b);if(!d.dataSource)if(d.url)d.dataSource=new f(d.url,d.urlParams,d.filterParamName);else throw Error("either a dataSource or url must be supplied");
d.dataSource=new x(d.dataSource,d.debounceInterval);if(!c.default.isFunction(b.selectionTemplate))throw Error("a selectionTemplate must be a function");if(!c.default.isFunction(b.resultTemplate))throw Error("a resultTemplate must be a function");this._selectedItems=[];this._initialItems=[];this._excludedIds=c.default.map(b.excludedItems,b.generateId);y(this);this.setSelectedItems(b.initialItems.slice(0))}function f(a,b,d){this._url=a;this._urlParams=b;this._filterParamName=d||"filter";this.clear();
this._pageReceived=c.default.bind(this._pageReceived,this)}function x(a,b){this.clear=c.default.bind(a.clear,a);this.nextPage=z.default.delay(c.default.bind(a.nextPage,a),b)}function A(a){var b=(0,h.default)(".select2-drop-active \x3e .select2-results");b.length&&0===b.children(".select2-result-selectable").length&&b.children(".select2-disabled").length&&(0,h.default)('\x3cli class\x3d"select2-no-results"\x3e\x3c/li\x3e').html(a._options.noMatchesTemplate()).appendTo(b)}function B(a,b){return{id:a.generateId(b),
text:a.generateText(b),item:b}}function C(a,b){return c.default.reject(a,function(a){return a.id===b.id})}function D(a){a&&a.abort&&a.abort()}function y(a){var b=a._options,d=a._$field,g=a._excludedIds,f=c.default.bind(B,null,b),k=[];d.auiSelect2({hasAvatar:b.hasAvatar,query:function(a){1>=a.page&&(b.dataSource.clear(),c.default.forEach(k,D),k=[]);var d=b.prepareSearchTerm(h.default.trim(a.term)),e=b.dataSource.nextPage(d),e=e.then(function(a){return{results:c.default.chain(a.values).map(f).filter(function(a){return-1===
c.default.indexOf(g,a.id)}).value(),more:!a.isLastPage}}).promise(e);k.push(e);e.always(function(){k=c.default.reject(k,E.default.eq(e))}).done(a.callback)},formatSelection:function(a){return b.selectionTemplate(a.item)},formatResult:function(a){return b.resultTemplate(a.item)},initSelection:function(b,d){var e=c.default.map(a._initialItems,f);a._selectedItems=e;d(e)},separator:b.separator,multiple:!0,minimumInputLength:b.minimumInputLength,formatInputTooShort:b.inputTooShortTemplate,formatNoMatches:b.noMatchesTemplate,
formatSearching:b.searchingTemplate,containerCssClass:["searchable-multi-selector",b.extraClasses].join(" "),dropdownCssClass:["searchable-multi-selector-dropdown",b.dropdownClasses].join(" "),openOnEnter:!1}).on("change",function(b){b.removed&&(a._selectedItems=C(a._selectedItems,b.removed));b.added&&a._selectedItems.push(b.added);a.trigger("change")}).on("open",c.default.bind(A,null,this))}Object.defineProperty(l,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(q),
c=babelHelpers.interopRequireDefault(r),F=babelHelpers.interopRequireDefault(t);m=babelHelpers.interopRequireDefault(u);var E=babelHelpers.interopRequireDefault(v),z=babelHelpers.interopRequireDefault(w);h.default.extend(!0,n.prototype,m.default.createEventMixin("bitbucket.internal.widget.searchable.multi.selector"),{defaults:{minimumInputLength:2,extraClasses:null,dropdownClasses:null,debounceInterval:300,initialItems:[],excludedItems:[],filterParamName:"filter",separator:"|!|",urlParams:{},hasAvatar:!1,
inputTooShortTemplate:function(){return g.default.escapeHtml("Start typing to filter")},noMatchesTemplate:function(){return g.default.escapeHtml("No matches found")},searchingTemplate:function(){return g.default.escapeHtml("Filtering...")},generateId:function(a){return a.id||a.name},generateText:function(a){return a.displayName||a.name},prepareSearchTerm:c.default.identity},
getSelectedItems:function(){return c.default.pluck(this._selectedItems,"item")},setSelectedItems:function(a){this._initialItems=a.slice(0);this._$field.auiSelect2("val",c.default.map(a,this._options.generateId))},clearSelectedItems:function(){this.setSelectedItems([])}});f.prototype.clear=function(){this._nextPageStart=0};f.prototype.nextPage=function(a){a=babelHelpers.defineProperty({start:this._nextPageStart},this._filterParamName,a);return F.default.rest({url:c.default.isFunction(this._url)?this._url():
this._url,data:babelHelpers.extends({},this._urlParams,a)}).done(this._pageReceived)};f.prototype._pageReceived=function(a){this._nextPageStart=a.nextPageStart||a.start+a.size};n.PagedDataSource=f;l.default=n;p.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:user-multi-selector', location = '/static/bitbucket/internal/feature/user/user-multi-selector/user-multi-selector.js' */
define("bitbucket/internal/feature/user/user-multi-selector/user-multi-selector","module exports aui jquery bitbucket/util/navbuilder bitbucket/internal/widget/searchable-multi-selector/searchable-multi-selector".split(" "),function(h,c,d,k,e,l){function f(a,b){g.default.call(this,a,b)}Object.defineProperty(c,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(d);d=babelHelpers.interopRequireDefault(k);e=babelHelpers.interopRequireDefault(e);var g=babelHelpers.interopRequireDefault(l);
d.default.extend(!0,f.prototype,g.default.prototype,{defaults:{hasAvatar:!0,url:e.default.rest().users().build(),selectionTemplate:function(a){return bitbucket.internal.widget.avatarWithName({size:"xsmall",person:a})},urlParams:{avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})},resultTemplate:function(a){return bitbucket.internal.widget.avatarWithNameAndEmail({size:"small",person:a})},generateId:function(a){return a.name},inputTooShortTemplate:function(){return b.default.escapeHtml("Start typing to find users")},
noMatchesTemplate:function(){return b.default.escapeHtml("No matching users found")},prepareSearchTerm:function(a){return a.replace(/^@/,"")}}});c.default=f;h.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-details-form', location = '/static/bitbucket/internal/feature/pull-request/details-form/pull-request-details.soy' */
// This file was automatically generated from pull-request-details.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.detailsForm = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<fieldset class="pull-request-details">' + aui.form.textField({id: 'title', extraClasses: 'pull-request-title', name: 'title', value: opt_data.title ? opt_data.title : '', errorTexts: opt_data.fieldErrors && opt_data.fieldErrors.title ? opt_data.fieldErrors.title : null, isRequired: true, maxLength: 255, labelContent: '' + soy.$$escapeHtml('Title'), fieldWidth: 'long'}) + widget.aui.form.field({id: 'description', labelContent: '' + soy.$$escapeHtml('Description'), errors: opt_data.fieldErrors && opt_data.fieldErrors.description ? opt_data.fieldErrors.description : null, fieldGroupClass: 'pull-request-description', input: '' + bitbucket.internal.widget.markupEditor.editor({textareaId: 'pull-request-description', textareaName: 'description', text: opt_data.description, previewButtonTitle: 'View a preview of this description', attachmentButtonTitle: 'Attach a file to this pull request. You can also drag and drop a file to attach it.', attachmentButtonAccessibilityText: 'Attach file'})}) + aui.form.textField({id: 'reviewers', extraClasses: 'pull-request-reviewers', name: 'reviewers', errorTexts: opt_data.fieldErrors && opt_data.fieldErrors.reviewers ? opt_data.fieldErrors.reviewers : null, labelContent: '' + soy.$$escapeHtml('Reviewers'), descriptionText: 'Reviewers can approve a pull request to let others know when it is good to merge', fieldWidth: 'long'}) + ((opt_data.pluginFieldsContent) ? soy.$$filterNoAutoescape(opt_data.pluginFieldsContent) : '') + '</fieldset>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.detailsForm.soyTemplateName = 'bitbucket.internal.feature.pullRequest.detailsForm';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:jquery-mousewheel', location = '/static/bower/jquery-mousewheel/jquery.mousewheel.js' */
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){function m(b){var a=b||window.event,g=[].slice.call(arguments,1),d=0,e=0,h=0,f=0,f=0;b=c.event.fix(a);b.type="mousewheel";a.wheelDelta&&(d=a.wheelDelta);a.detail&&(d=-1*a.detail);a.deltaY&&(d=h=-1*a.deltaY);a.deltaX&&(e=a.deltaX,d=-1*e);void 0!==a.wheelDeltaY&&(h=a.wheelDeltaY);void 0!==a.wheelDeltaX&&(e=-1*a.wheelDeltaX);f=Math.abs(d);if(!l||f<l)l=f;f=Math.max(Math.abs(h),Math.abs(e));if(!k||f<k)k=f;
a=0<d?"floor":"ceil";d=Math[a](d/l);e=Math[a](e/k);h=Math[a](h/k);g.unshift(b,d,e,h);return(c.event.dispatch||c.event.handle).apply(this,g)}var n=["wheel","mousewheel","DOMMouseScroll"],g="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l,k;if(c.event.fixHooks)for(var p=n.length;p;)c.event.fixHooks[n[--p]]=c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=g.length;b;)this.addEventListener(g[--b],
m,!1);else this.onmousewheel=m},teardown:function(){if(this.removeEventListener)for(var b=g.length;b;)this.removeEventListener(g[--b],m,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:searchable-selector', location = '/static/bitbucket/internal/widget/searchable-selector/searchable-selector.js' */
define("bitbucket/internal/widget/searchable-selector/searchable-selector","module exports aui jquery lodash bitbucket/internal/util/ajax bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/navigator bitbucket/internal/util/promise bitbucket/internal/widget/keyboard-controller bitbucket/internal/widget/paged-scrollable".split(" "),function(q,n,k,r,t,u,v,w,x,y,z,A){function b(a,c){return this.init.apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0});
var g=babelHelpers.interopRequireDefault(k),e=babelHelpers.interopRequireDefault(r),f=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),D=babelHelpers.interopRequireDefault(w),p=babelHelpers.interopRequireDefault(x),E=babelHelpers.interopRequireDefault(y);k=babelHelpers.interopRequireDefault(z);var F=babelHelpers.interopRequireDefault(A),G=k.default.TabKeyboardController,H=k.default.ListKeyboardController,I=0;b.prototype.defaults=
{id:null,extraClasses:null,namespace:"searchable-selector",url:null,tabs:null,searchable:!0,searchPlaceholder:null,queryParamKey:"filter",queryParamsBuilder:null,pageSize:20,statusCodeHandlers:{},followLinks:!1,hideDialogOnSelect:!0,itemSelectedEvent:"bitbucket.internal.widget.searchableSelector.itemSelected",context:null,field:null,itemDataKey:"item",template:bitbucket.internal.widget.searchableSelector,resultsTemplate:bitbucket.internal.widget.searchableSelectorResults,noResultsText:null,noMoreResultsText:null,
triggerContentTemplate:bitbucket.internal.widget.searchableSelectorTriggerContent,triggerPlaceholder:null,preloadData:null,alwaysShowPreload:!1,dataTransform:null,postOptionsInit:null,clearResultsOnSearch:!0,popUpOffsetX:0,popUpOffsetY:-1,width:350};b.constructDataPageFromPreloadArray=function(a){return f.default.isArray(a)?{values:a,isLastPage:!1,size:a.length,start:0,limit:a.length}:null};b.prototype.tabOptionKeys="label url resultsTemplate noResultsText noMoreResultsText dataTransform queryParamKey preloadData searchPlaceholder".split(" ");
b.prototype.init=function(a,c){var d=this;this.instanceId=I++;this.$trigger=(0,e.default)(a);this.setOptions(c);this.scrollables=[];this.scrollableDataStores=[];this._getOptionVal("id")||(this.options.id=this._getOptionVal("namespace")+"-"+this.instanceId);this.options.tabs&&this.options.tabs.length&&(this.tabs=f.default.map(this.options.tabs,function(a){return e.default.extend(!0,{},f.default.pick(d.options,d.tabOptionKeys),a)}));var b=this._getOption("postOptionsInit");f.default.isFunction(b)&&
b.call(this);var h;this.blockShortcutPropagation=h=function(a){var c=this===document;a.keyCode===g.default.keyCode.ESCAPE?(a[c?"stopImmediatePropagation":"stopPropagation"](),d.dialog.hide()):c||a.stopPropagation()};var m=d._getOptionVal("externalSearchField");this.dialog=g.default.InlineDialog(this.$trigger,this._getOptionVal("id"),function(a,c,b){a.data("initialised")||d._initialiseDialogContent(a);b();m||f.default.defer(f.default.bind(d.setFocus,d))},{offsetX:this._getOptionVal("popUpOffsetX"),
offsetY:this._getOptionVal("popUpOffsetY"),noBind:!!m,width:this._getOptionVal("width"),hideCallback:function(){(d.$content.is(document.activeElement)||e.default.contains(d.$content[0],document.activeElement))&&d.$trigger.focus();(0,e.default)(document).add(d.dialog).off("keydown keypress",h)},initCallback:function(){(0,e.default)(document).add(d.dialog).on("keydown keypress",h)}});this._getOptionVal("searchable")&&m&&(this.$searchField=(0,e.default)(m),this._initialiseSearchOnInput());this.$trigger.find(".name").length&&
(this._selectedItem=this._getItemFromTrigger());g.default.bind("hide.dialog",function(a,c){d.$trigger.closest(c.dialog.popup.element).length&&d.dialog.hide()});return this};b.prototype.getSelectedItem=function(){return this._selectedItem};b.prototype.setSelectedItem=function(a){e.default.isPlainObject(a)&&null!=a.id&&(this._selectedItem&&this._selectedItem.id===a.id||this._itemSelected(a))};b.prototype.clearSelection=function(){this._selectedItem=null;this._getOptionVal("field")&&(0,e.default)(this._getOptionVal("field")).val("").trigger("change");
this.resetTrigger()};b.prototype._getItemFromTrigger=function(){var a=this.$trigger.find(".name");return e.default.extend({},this._buildObjectFromElementDataAttributes(a),{name:a.text()})};b.prototype._buildObjectFromElementDataAttributes=function(a){return(0,e.default)(a).data(this._getOptionVal("itemDataKey"))};b.prototype._initialiseDialogContent=function(a){var c=this,d=this._getOptionVal("searchable"),b=this._getOptionVal("externalSearchField");a.append(this._getOption("template")({id:this._getOptionVal("id"),
tabs:this.tabs,searchable:!b&&d,searchPlaceholder:this._getOptionVal("searchPlaceholder"),extraClasses:this._getOptionVal("extraClasses")}));a.closest(".aui-inline-dialog").addClass("searchable-selector-dialog");d&&!b&&(this.$searchField=a.find("input.filter"),this._initialiseSearchOnInput());this.tabs&&(b=a.find("ul.tabs-menu a"),b.on("tabSelect",function(a,b){c.currentTabId=b.tab.parent().data("tab-id");(c._getOptionVal("searchable")||0===c._getDataStoreForScrollable().length)&&c._populateScrollable();
c._resultsKeyboardController.setListElement(c._getCurrentScrollable().$scrollElement.find("ul.results-list"));d&&c.$searchField.focus();c._updateSearchPlaceholder()}),b.on("click",function(a){(0,e.default)(this).parent().hasClass("active-tab")&&(a.stopPropagation(),a.preventDefault())}),b.on("keydown",function(a){if(a.keyCode===g.default.keyCode.ENTER){var c=(0,e.default)(this);c.parent("li").hasClass("active-tab")?a.preventDefault():c.click()}}),g.default.tabs.setup());a.find(".results").each(function(){c.scrollables.push(c._createScrollable((0,
e.default)(this)));c.scrollableDataStores.push([])});a.on("click",".result a",function(a){c.selectItem(a,(0,e.default)(this))});this._initialiseKeyboardNavigation(a);this._initialiseMouseNavigation(a);this._populateScrollable();this.$content=a;a.data("initialised",!0)};b.prototype._initialiseSearchOnInput=function(){var a=this,c=this._getSearchTerm(),d=this._getOptionVal("externalSearchField"),b=E.default.delay(f.default.bind(this._handleSearchInput,this),350),e=f.default.bind(function(){c!==(c=this._getSearchTerm())&&
(this._pendingSearch?this._pendingSearch.reset(c):(this._pendingSearch=b(c),this._pendingSearch.always(function(){a._pendingSearch=null})))},this);this.$searchField.on("keydown.searchable-selector input.searchable-selector",f.default.bind(function(b){d&&(b.which===g.default.keyCode.ESCAPE?this._pendingSearch&&this._pendingSearch.abort():b.which===g.default.keyCode.DOWN&&this._shouldSearch(c)?this.dialog.show():b.which!==g.default.keyCode.ENTER||this.dialog.is(":visible")||this._pendingSearch&&this._pendingSearch.done(function(){var c=
a._getCurrentScrollable().$scrollElement.find("ul.results-list li.result:first");a._clickItem(c)}));f.default.defer(e)},this))};b.prototype._handleSearchInput=function(a){if(this._getOptionVal("externalSearchField")){if(this._shouldSearch(a))return this.dialog.is(":visible")||this.dialog.show(),this._populateScrollable();this.dialog.hide();return e.default.Deferred().reject().promise()}return this._populateScrollable()};b.prototype._initialiseKeyboardNavigation=function(a){var c=this,d,b=!1,e=function(a){var d=
c.dialog.is(":visible");if(!c._getOptionVal("externalSearchField")||d)b&&!d?c.$trigger.click():c._clickItem(a)};this._resultsKeyboardController&&this._resultsKeyboardController.destroy();this.$searchField?d=this.$searchField:this.tabs?d=a.find("ul.tabs-menu"):(d=this.$trigger,b=!0);var f=c._getCurrentScrollable().$scrollElement.find("ul.results-list");this._resultsKeyboardController=new H(d,f,{wrapAround:!1,focusedClass:"focused",itemSelector:"li.result",requestMore:function(){var a=c._getCurrentScrollable().loadAfter();
return a&&a.then(function(a){return a.isLastPage})},onSelect:function(a){c._pendingSearch?c._pendingSearch.done(function(){var a=f.find("li.result:first");a.length&&e(a)}):e(a)},focusIntoView:!0,adjacentItems:c._getOptionVal("adjacentItems")});this._tabKeyboardController&&this._tabKeyboardController.destroy();(p.default.isMozilla()||p.default.isWebkit())&&a.addClass("override-focus-style");this._tabKeyboardController=new G(a)};b.prototype._initialiseMouseNavigation=function(a){a.on("mousemove","li",
function(){(0,e.default)(this).find(".focused").hasClass("focused")||(a.find(".focused").removeClass("focused"),(0,e.default)(this).addClass("focused"))})};b.prototype._clickItem=function(a){a.children("a").each(function(){this.click()})};b.prototype.setFocus=function(){this.$searchField?this.$searchField.focus():this.tabs?this.$content.find("ul.tabs-menu a").first().focus():this.$trigger.focus()};b.prototype._createScrollable=function(a){a=new F.default(a,{pageSize:this._getOptionVal("pageSize"),
bufferPixels:0,preventOverscroll:!0,paginationContext:this.options.paginationContext});a.requestData=f.default.bind(this.getResults,this,a);a.attachNewContent=f.default.bind(this.addResultsToList,this,a,!1);return a};b.prototype._populateScrollable=function(a){a=a||this._getCurrentScrollable();this._emptyScrollable(a);var c=this._getPreloadData(),d=0;c&&(d=this.addResultsToList(a,!0,c));a=a.init();return 0<d?e.default.Deferred().resolve().promise():a};b.prototype._getPreloadData=function(){var a=
this._getOptionVal("preloadData"),c=this._getSearchTerm();if(a&&(this._getOptionVal("alwaysShowPreload")||""===c)){var d=this._getOption("dataTransform");f.default.isFunction(d)&&(a=d.call(this,a,c))}else a=null;return a};b.prototype._emptyScrollable=function(a){a=a||this._getCurrentScrollable();a.reset();this._getDataStoreForScrollable(a).length=0;this._getOptionVal("clearResultsOnSearch")&&a.$scrollElement.children("ul.results-list").empty()};b.prototype._getCurrentScrollable=function(){return this.scrollables[this.tabs&&
this.currentTabId?this.currentTabId:0]};b.prototype._getDataStoreForScrollable=function(a){if(!a)return this.scrollableDataStores[this.tabs&&this.currentTabId?this.currentTabId:0];a=f.default.indexOf(this.scrollables,a);return-1!==a?this.scrollableDataStores[a]:null};b.prototype._getSearchTerm=function(){return this.$searchField?this.$searchField.val():""};b.prototype._updateSearchPlaceholder=function(){this.$searchField&&this.$searchField.attr("placeholder",this._getOptionVal("searchPlaceholder"))};
b.prototype._getOptionVal=function(a){return this._getOption(a,!0)};b.prototype._getOption=function(a,c){var d;d=this.tabs&&f.default.contains(this.tabOptionKeys,a)?this.tabs[this.currentTabId||0][a]:this.options[a];return c?f.default.isFunction(d)?d.call(this):d:d};b.prototype.setOptions=function(a){this.options=e.default.extend(!0,{},this.defaults,a)};b.prototype.getResults=function(a,c,d){var b=this;this.currentXHR&&this.currentXHR.abort&&this.currentXHR.abort();c=(this._getOption("queryParamsBuilder")||
this._defaultQueryParamsBuilder).call(this,this._getSearchTerm(),c,d);if(null===c)return e.default.Deferred().reject().promise();d=a.$scrollElement.children("ul.results-list");this._showSpinner(a);d.scrollTop(d[0].scrollHeight);c=this.currentXHR=B.default.rest({url:this._getOptionVal("url"),data:c,statusCode:this._getOptionVal("statusCodeHandlers")});c.always(function(){b._hideSpinner(a);b.currentXHR=null});return c};b.prototype._showSpinner=function(a){a.$scrollElement.children(".spinner").show().spin()};
b.prototype._hideSpinner=function(a){a.$scrollElement.children(".spinner").spinStop().hide()};b.prototype._shouldSearch=function(a){return null!=(this._getOption("queryParamsBuilder")||this._defaultQueryParamsBuilder).call(this,a,0,this._getOptionVal("pageSize"))};b.prototype._defaultQueryParamsBuilder=function(a,c,b){c={start:c,limit:b};this._getOptionVal("searchable")&&(c[this._getOptionVal("queryParamKey")]=a);return c};b.prototype.addResultsToList=function(a,c,b){var l=this._getOption("dataTransform"),
h;f.default.isFunction(l)&&(b=l.call(this,b,this._getSearchTerm()));!c&&(h=this._getPreloadData())&&(b=this.dedupeData(b,h));b=e.default.extend({},b,{isPreload:c,noResultsText:this._getOptionVal("noResultsText"),noMoreResultsText:this._getOptionVal("noMoreResultsText")});var l=(0,e.default)(this._getOption("resultsTemplate")(b)),g=this._getDataStoreForScrollable(a);g.push.apply(g,b.values);a=a.$scrollElement.children("ul.results-list");(c=0===b.start&&!(h&&0<h.size)&&(!c||0<b.size))&&a.empty();a.append(l).attr("data-last-updated",
(new Date).getTime());c&&0<b.size&&this._resultsKeyboardController.moveToNext();return b.size};b.prototype.dedupeData=function(a,b){a&&a.values&&b&&b.values&&(a=e.default.extend(!0,{},a),a.values=f.default.reject(a.values,function(a){return f.default.find(b.values,function(b){return a.id===b.id})}));return a};b.prototype.selectItem=function(a,b){var d=b.data("id"),e=f.default.find(this._getDataStoreForScrollable(),function(a){return a.id===d});("#"===b.attr("href")||!this._getOptionVal("followLinks")&&
C.default.openInSameTab)&&a.preventDefault();this._selectedItem&&this._selectedItem.id===e.id||this._itemSelected(e);this._getOptionVal("hideDialogOnSelect")&&this.dialog.hide()};b.prototype._itemSelected=function(a){this._selectedItem=a;this._getOptionVal("field")&&(0,e.default)(this._getOptionVal("field")).val(a.id).trigger("change");this.updateTrigger({item:a});D.default.trigger(this._getOptionVal("itemSelectedEvent"),this,a,this._getOptionVal("context"))};b.prototype.updateTrigger=function(a,
b){this._getOptionVal("externalSearchField")||(this.$trigger.html(this._getOption("triggerContentTemplate")(a||{})),b&&this.$trigger.attr("title",b));this.$trigger.trigger("change")};b.prototype.resetTrigger=function(){this.updateTrigger({text:this._getOptionVal("triggerPlaceholder")})};b.prototype.destroy=function(){this.blockShortcutPropagation&&(0,e.default)(document).add(this.dialog).off("keydown keypress",this.blockShortcutPropagation);this._getOptionVal("externalSearchField")&&this.$searchField.off(".searchable-selector");
this.dialog&&(this.dialog.hide(),this.dialog.remove(),this.dialog=null);this._resultsKeyboardController&&(this._resultsKeyboardController.destroy(),this._resultsKeyboardController=null);this._tabKeyboardController&&(this._tabKeyboardController.destroy(),this._tabKeyboardController=null);this.tabs=this.scrollableDataStores=this.scrollables=this.$trigger=null;this._initialiseDialogContent=e.default.noop};n.default=b;q.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:searchable-selector', location = '/static/bitbucket/internal/widget/searchable-selector/searchable-selector.soy' */
// This file was automatically generated from searchable-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.searchableSelector = function(opt_data, opt_ignored) {
  var output = '<div class="searchable-selector ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '" id="' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.searchable) ? '<header><label class="assistive" for="' + soy.$$escapeHtml(opt_data.id) + '-search-input">' + soy.$$escapeHtml(opt_data.searchPlaceholder ? opt_data.searchPlaceholder : 'Find') + '</label><input id="' + soy.$$escapeHtml(opt_data.id) + '-search-input" type="text" name="filter" class="filter" placeholder="' + soy.$$escapeHtml(opt_data.searchPlaceholder ? opt_data.searchPlaceholder : 'Find') + '"/></header>' : '');
  if (opt_data.tabs && opt_data.tabs.length > 1) {
    output += '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu">';
    var tabList24 = opt_data.tabs;
    var tabListLen24 = tabList24.length;
    for (var tabIndex24 = 0; tabIndex24 < tabListLen24; tabIndex24++) {
      var tabData24 = tabList24[tabIndex24];
      output += aui.tabMenuItem({url: '#' + soy.$$escapeHtml(opt_data.id) + '-tab-pane-' + soy.$$escapeHtml(tabIndex24), text: tabData24.label, isActive: tabIndex24 == 0, extraAttributes: {'data-tab-id': tabIndex24}});
    }
    output += '</ul>';
    var tabList36 = opt_data.tabs;
    var tabListLen36 = tabList36.length;
    for (var tabIndex36 = 0; tabIndex36 < tabListLen36; tabIndex36++) {
      var tabData36 = tabList36[tabIndex36];
      output += aui.tabPane({content: '<ul class="results-list"></ul><div class="spinner"></div>', id: opt_data.id + '-tab-pane-' + tabIndex36, isActive: tabIndex36 == 0, extraClasses: 'results', extraAttributes: {'data-tab-id': tabIndex36}});
    }
    output += '</div>';
  } else {
    output += '<div class="results"><ul class="results-list"></ul><div class="spinner"></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelector.soyTemplateName = 'bitbucket.internal.widget.searchableSelector';
}


bitbucket.internal.widget.searchableSelectorResults = function(opt_data, opt_ignored) {
  var output = '';
  var resultList50 = opt_data.values;
  var resultListLen50 = resultList50.length;
  for (var resultIndex50 = 0; resultIndex50 < resultListLen50; resultIndex50++) {
    var resultData50 = resultList50[resultIndex50];
    output += '<li class="result ' + ((opt_data.isPreload) ? 'preload' : '') + '"><a href="' + soy.$$escapeHtml(resultData50.url ? resultData50.url : '#') + '" tabindex="-1" data-id="' + soy.$$escapeHtml(resultData50.id) + '" data-item="' + soy.$$escapeHtml(JSON.stringify(resultData50).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(resultData50.name) + '</a></li>';
  }
  output += (opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText ? opt_data.noMoreResultsText : 'No more results') + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText ? opt_data.noResultsText : 'No results') + '</li>' : '';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorResults.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorResults';
}


bitbucket.internal.widget.searchableSelectorTrigger = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.searchableSelectorTriggerGeneric({id: opt_data.id, content: '' + bitbucket.internal.widget.searchableSelectorTriggerContent(opt_data), autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTrigger.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTrigger';
}


bitbucket.internal.widget.searchableSelectorTriggerGeneric = function(opt_data, opt_ignored) {
  return '<button ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + 'type="button" class="aui-button searchable-selector-trigger' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.autofocus) ? ' autofocus' : '') + ((opt_data.titleContent) ? ' title="' + soy.$$filterNoAutoescape(opt_data.titleContent) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</button>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTriggerGeneric.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTriggerGeneric';
}


bitbucket.internal.widget.searchableSelectorTriggerWithField = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.searchableSelectorTrigger(opt_data) + widget.aui.form.input({id: opt_data.fieldId ? opt_data.fieldId : opt_data.id + '-field', name: opt_data.fieldName ? opt_data.fieldName : opt_data.id + '-field', initialValue: opt_data.item ? opt_data.item.id : null, type: 'hidden'});
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTriggerWithField.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTriggerWithField';
}


bitbucket.internal.widget.searchableSelectorTriggerContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.item) ? '<span class="name" data-id="' + soy.$$escapeHtml(opt_data.item.id) + '" data-item="' + soy.$$escapeHtml(JSON.stringify(opt_data.item).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(opt_data.item.name) + '</span>' : '<span class="placeholder">' + soy.$$escapeHtml(opt_data.text ? opt_data.text : 'Select item') + '</span>');
};
if (goog.DEBUG) {
  bitbucket.internal.widget.searchableSelectorTriggerContent.soyTemplateName = 'bitbucket.internal.widget.searchableSelectorTriggerContent';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision-reference-selector', location = '/static/bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector.soy' */
// This file was automatically generated from revision-reference-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: 'No branches', noMoreResultsText: 'No more branches'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: 'No tags', noMoreResultsText: 'No more tags'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: 'No commits', noMoreResultsText: 'No more commits'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorResults = function(opt_data, opt_ignored) {
  var output = '';
  var refList27 = opt_data.values;
  var refListLen27 = refList27.length;
  for (var refIndex27 = 0; refIndex27 < refListLen27; refIndex27++) {
    var refData27 = refList27[refIndex27];
    output += '<li class="result ' + ((opt_data.isPreload) ? 'preload' : '') + '"><a href="' + soy.$$escapeHtml(refData27.url ? refData27.url : '#') + '" data-id="' + soy.$$escapeHtml(refData27.id) + '" tabindex="-1">' + bitbucket.internal.feature.repository.revisionReferenceSelectorRef({ref: refData27}) + '</a></li>';
  }
  output += (opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText ? opt_data.noMoreResultsText : 'No more results') + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText ? opt_data.noResultsText : 'No results') + '</li>' : '';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorResults.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorResults';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.searchableSelectorTriggerGeneric({id: opt_data.id, content: '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent(opt_data), autofocus: opt_data.autofocus, extraClasses: 'revision-reference-selector-trigger' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes, titleContent: '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTitle(opt_data)});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger(opt_data) + widget.aui.form.input({id: opt_data.fieldId ? opt_data.fieldId : opt_data.id ? opt_data.id + '-field' : opt_data.id, name: opt_data.fieldName ? opt_data.fieldName : opt_data.id + '-field', initialValue: opt_data.ref ? opt_data.ref.id : null, type: 'hidden'});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.ref) ? bitbucket.internal.feature.repository.revisionReferenceSelectorRef(opt_data) : '<span class="placeholder">' + soy.$$escapeHtml(opt_data.text ? opt_data.text : 'Select revision') + '</span>');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorRef = function(opt_data, opt_ignored) {
  return ((opt_data.ref.type) ? aui.icons.icon({size: 'small', useIconFont: true, iconFontSet: 'devtools', icon: opt_data.ref.type.id, accessibilityText: opt_data.ref.type.name}) : '') + '<span class="name" title="' + soy.$$escapeHtml(opt_data.ref.displayId) + '" data-id="' + soy.$$escapeHtml(opt_data.ref.id) + '" data-revision-ref="' + soy.$$escapeHtml(JSON.stringify(opt_data.ref).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(opt_data.ref.displayId ? opt_data.ref.displayId : opt_data.ref.id) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorRef.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorRef';
}


bitbucket.internal.feature.repository.revisionReferenceSelectorTitle = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$escapeHtml(opt_data.ref ? (opt_data.ref.displayId ? opt_data.ref.displayId : opt_data.ref.id) : opt_data.text ? opt_data.text : 'Select revision');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.revisionReferenceSelectorTitle.soyTemplateName = 'bitbucket.internal.feature.repository.revisionReferenceSelectorTitle';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:revision-reference-selector', location = '/static/bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector.js' */
define("bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/model/repository bitbucket/internal/model/revision-reference bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/widget/searchable-selector/searchable-selector".split(" "),function(p,k,d,l,q,r,t,u,v,w,x,y){function b(a,g){return this.init.apply(this,arguments)}
Object.defineProperty(k,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var e=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(q),m=babelHelpers.interopRequireDefault(r),z=babelHelpers.interopRequireDefault(t),A=babelHelpers.interopRequireDefault(u),c=babelHelpers.interopRequireDefault(v);l=babelHelpers.interopRequireDefault(w);var n=babelHelpers.interopRequireDefault(x),h=babelHelpers.interopRequireDefault(y);e.default.extend(b.prototype,h.default.prototype);
b.prototype._addRefTypeAndRepositoryToResults=function(a){if(a&&a.values){a=e.default.extend(!0,{},a);var g=this._getCurrentType();f.default.each(a.values,f.default.bind(function(a){a.type=g;a.repository||(a.repository=this.repository&&this.repository.toJSON())},this))}return a};b.prototype.defaults=e.default.extend(!0,{},h.default.prototype.defaults,{tabs:[{label:"Branches",type:c.default.type.BRANCH,url:function(){return this.getBranchesUrl()},resultsTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorBranchResults,
searchPlaceholder:"Filter branches"},{label:"Tags",type:c.default.type.TAG,url:function(){return this.getTagsUrl()},resultsTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorTagResults,searchPlaceholder:"Filter tags"},{label:"Commits",type:c.default.type.COMMIT,url:function(){return this.getCommitsUrl()},resultsTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorCommitResults,
searchPlaceholder:"Filter commits"}],queryParamKey:"filterText",namespace:"revision-reference-selector",itemSelectedEvent:"bitbucket.internal.feature.repository.revisionReferenceSelector.revisionRefChanged",itemUnselectedEvent:"bitbucket.internal.feature.repository.revisionReferenceSelector.revisionRefUnselected",itemDataKey:"revision-ref",statusCodeHandlers:l.default.ignore404WithinRepository(),triggerContentTemplate:bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerContent,
extraClasses:"revision-reference-selector",repository:function(){return z.default.getRepository()},show:{branches:!0,tags:!0,commits:!1},dataTransform:b.prototype._addRefTypeAndRepositoryToResults,postOptionsInit:function(){this.setRepository(this._getOptionVal("repository"))},paginationContext:"revision-reference-selector"});b.prototype.init=function(a,g){h.default.prototype.init.apply(this,arguments);return this};b.prototype.setOptions=function(a){a.extraClasses&&(a.extraClasses=this.defaults.extraClasses+
" "+e.default.trim(a.extraClasses));a=e.default.extend(!0,{},this.defaults,a);var g=f.default.filter({branches:c.default.type.BRANCH.id,tags:c.default.type.TAG.id,commits:c.default.type.COMMIT.id},function(g,b){return a.show[b]});a.tabs=f.default.filter(a.tabs,function(a){return-1!==f.default.indexOf(g,a.type.id)});this.options=a};b.prototype._getItemFromTrigger=function(){var a=this.$trigger.find(".name");return new c.default(e.default.extend({},this._buildObjectFromElementDataAttributes(a),{displayId:a.text(),
repository:this.repository}))};b.prototype.getBranchesUrl=function(){return m.default.rest().project(this.repository.getProject()).repo(this.repository).branches().build()};b.prototype.getTagsUrl=function(){return m.default.rest().project(this.repository.getProject()).repo(this.repository).tags().build()};b.prototype.getCommitsUrl=function(){return m.default.rest().project(this.repository.getProject()).repo(this.repository).commits().build()};b.prototype.getRepository=function(){return this.repository};
b.prototype.setRepository=function(a){var b=this.repository;if(a instanceof A.default&&!a.isEqual(b)&&(this.repository=a,b)){if(b=this._getCurrentScrollable())this._emptyScrollable(b),b.init();this.clearSelection();this.dialog.hide();n.default.trigger("bitbucket.internal.feature.repository.revisionReferenceSelector.repoChanged",this,a,this._getOptionVal("context"))}};b.prototype._getCurrentType=function(){return this.tabs[this.currentTabId||0].type};b.prototype.setSelectedItem=function(a){a instanceof
c.default&&!a.isEqual(this._selectedItem)&&this._itemSelected(a)};b.prototype.clearSelection=function(){h.default.prototype.clearSelection.apply(this,arguments);n.default.trigger(this._getOptionVal("itemUnselectedEvent"),this,null,this._getOptionVal("context"))};b.prototype._itemSelected=function(a){var b;a instanceof c.default?b=a.toJSON():(b=f.default.pick(a,f.default.keys(c.default.prototype.namedAttributes)),a=new c.default(b));this._selectedItem=a;this._getOptionVal("field")&&(0,e.default)(this._getOptionVal("field")).val(b.id).trigger("change");
var d=bitbucket.internal.feature.repository.revisionReferenceSelectorTitle({ref:b});this.updateTrigger({ref:b},d);n.default.trigger(this._getOptionVal("itemSelectedEvent"),this,a,this._getOptionVal("context"))};k.default=b;p.exports=k["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-branch-selector', location = '/static/bitbucket/internal/feature/repository/branch-selector/branch-selector.js' */
define("bitbucket/internal/feature/repository/branch-selector/branch-selector",["module","exports","aui","jquery","bitbucket/internal/feature/repository/revision-reference-selector/revision-reference-selector"],function(c,a,d,e,f){Object.defineProperty(a,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(d),h=babelHelpers.interopRequireDefault(e),k=babelHelpers.interopRequireDefault(f);a.default=function(a,b){b=h.default.extend({show:{branches:!0,tags:!1,commits:!1},triggerPlaceholder:"Select branch",
paginationContext:"branch-selector"},b);return new k.default(a,b)};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-branch-selector', location = '/static/bitbucket/internal/feature/repository/branch-selector/branch-selector.soy' */
// This file was automatically generated from branch-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.branchSelectorTrigger = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTrigger({id: opt_data.id, ref: opt_data.ref, text: opt_data.text ? opt_data.text : 'Select branch', autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.branchSelectorTrigger.soyTemplateName = 'bitbucket.internal.feature.repository.branchSelectorTrigger';
}


bitbucket.internal.feature.repository.branchSelectorTriggerWithField = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.repository.revisionReferenceSelectorTriggerWithField({id: opt_data.id, ref: opt_data.ref, text: opt_data.text ? opt_data.text : 'Select branch', fieldName: opt_data.fieldName, fieldId: opt_data.fieldId, autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.branchSelectorTriggerWithField.soyTemplateName = 'bitbucket.internal.feature.repository.branchSelectorTriggerWithField';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:warn-before-unload', location = '/static/bitbucket/internal/util/warn-before-unload.js' */
define("bitbucket/internal/util/warn-before-unload",["module","exports","aui"],function(b,a,g){Object.defineProperty(a,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(g);a.default=function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},e=!1;c=c||h.default.format("You made changes that have not yet reached {0}. If you leave this page, those changes will be lost.",bitbucket.internal.util.productName());var d=window.onbeforeunload,f=function(){if(!e&&b())return c;if(d)return d.apply(this,arguments)};window.onbeforeunload=
f;a.always(function(){e=!0;window.onbeforeunload===f&&(window.onbeforeunload=d)})};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-edit', location = '/static/bitbucket/internal/feature/pull-request/edit/pull-request-edit.js' */
define("bitbucket/internal/feature/pull-request/edit/pull-request-edit","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/branch-selector/branch-selector bitbucket/internal/feature/user/user-multi-selector/user-multi-selector bitbucket/internal/model/revision-reference bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/focus-snapshot bitbucket/internal/util/function bitbucket/internal/util/warn-before-unload bitbucket/internal/widget/markup-editor/markup-editor".split(" "),
function(u,n,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){function b(a,d){var f={width:800,height:350,id:"edit-pull-request-dialog",closeOnOutsideClick:!1,focusSelector:"#pull-request-description",keypressListener:c.default.bind(this.keypressListener,this)};this._pullRequest=a;this._currentReviewerUsers=this._pullRequest.getReviewers();this._opts=g.default.extend({},f,d);this._dialog=new e.default.Dialog(this._opts);this._dialogEl=(0,g.default)("#"+this._opts.id);this._isDisabled=!1;this._draftKey=m.default.buildKey("draft-description",
"pull-request");this.initDialog()}function K(a){return{user:a}}function p(a){var d=c.default.pick(a,["title","description"]);c.default.has(a,"reviewers")&&(d.reviewers=c.default.chain(a.reviewers).map(L.default.dot("user.name")).sort().map(function(a){return{user:{name:a}}}).value());c.default.has(a,"toRef")&&(d.toRef={id:a.toRef.id});return d}Object.defineProperty(n,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(v),g=babelHelpers.interopRequireDefault(w),c=babelHelpers.interopRequireDefault(x),
M=babelHelpers.interopRequireDefault(y),N=babelHelpers.interopRequireDefault(z),O=babelHelpers.interopRequireDefault(A),P=babelHelpers.interopRequireDefault(B),Q=babelHelpers.interopRequireDefault(C),m=babelHelpers.interopRequireDefault(D),R=babelHelpers.interopRequireDefault(E),r=babelHelpers.interopRequireDefault(F),t=babelHelpers.interopRequireDefault(G),L=babelHelpers.interopRequireDefault(H),S=babelHelpers.interopRequireDefault(I),l=babelHelpers.interopRequireDefault(J);b.prototype.keypressListener=
function(a){a.stopImmediatePropagation();R.default.isCtrlEnter(a)&&(a.preventDefault(),(0,g.default)(".button-panel-submit-button",this._dialogEl).click());27===a.keyCode&&this._dialogEl.is(":visible")&&!this._isDisabled&&(l.default.unbindFrom(this._dialog.getCurrentPanel().body),this.hide())};b.prototype.initDialog=function(){this._$buttonPanel=this._dialog.addHeader("Edit Pull Request").addPanel("Edit Pull Request").addSubmit("Save",
c.default.bind(this.save,this)).addCancel("Cancel",c.default.bind(this.cancel,this)).getPage(0).buttonpanel;this._$spinner=(0,g.default)('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e').prependTo(this._$buttonPanel);this.triggerPanelResize=c.default.bind(this.triggerPanelResize,this);this._dialogEl.on("input","textarea#pull-request-description",this.updateDraftDescription.bind(this))};b.prototype.updateDraftDescription=c.default.debounce(function(a){(a=a.target.value)?
m.default.setSessionItem(this._draftKey,a):this.deleteDraftDescription()},300);b.prototype.deleteDraftDescription=function(){m.default.removeSessionItem(this._draftKey)};b.prototype.populatePanelFromPullRequest=function(){var a=m.default.getSessionItem(this._draftKey);this.updatePanel({title:this._pullRequest.getTitle(),description:a||this._pullRequest.getDescription(),toRef:c.default.extend({type:P.default.type.BRANCH},this._pullRequest.getToRef().toJSON()),reviewers:this._currentReviewerUsers.map(function(a){return a.getUser().toJSON()})},
!!a)};b.prototype.triggerPanelResize=function(){var a=this._dialog.isMaximised(),d=this._dialog.getCurrentPanel().body,d=d.innerHeight()>=d.get(0).scrollHeight;a&&!d||c.default.defer(c.default.bind(function(){this.isVisible()&&(t.default.save(),this._dialog.updateHeight(),t.default.restore())},this))};b.prototype.updatePanel=function(a,d){var f=this._dialog.getCurrentPanel().body;a.reviewers.length&&a.reviewers[0].user&&(a.reviewers=c.default.pluck(a.reviewers,"user"));f.empty().append(bitbucket.internal.feature.pullRequest.edit(a));
if(d)f.find("textarea#pull-request-description").addClass("restored").attr("title","The description of this pull request has been restored from an automatically saved draft.").one("click keydown input",function(a){(0,g.default)(a.target).removeClass("restored").removeAttr("title")});this.userSelect=new O.default(f.find("#reviewers"),{initialItems:a.reviewers,excludedItems:[this._pullRequest.getAuthor().getUser().toJSON()],urlParams:{"permission.1":"LICENSED_USER","permission.2":"REPO_READ","permission.2.repositoryId":this._pullRequest.getToRef().getRepository().getId()}});
var b=f.find("#toRef");this.branchSelector=new N.default(b,{id:"toRef-dialog",repository:this._pullRequest.getToRef().getRepository(),field:b.next("input")});l.default.bindTo(f).on("resize",this.triggerPanelResize.bind(this));this.triggerPanelResize()};b.prototype.getPullRequestUpdateFromForm=function(a){return{title:a.find("#title").val(),description:a.find("#pull-request-description").val(),reviewers:c.default.map(this.userSelect.getSelectedItems(),K),toRef:this.branchSelector.getSelectedItem().toJSON(),
version:this._pullRequest.getVersion()}};b.prototype.mergePullRequestUpdate=function(a,d,f){var b=d.version;a=p(a);d=p(d);f=p(f);var e=c.default.reduce(c.default.keys(f),function(b,e){if(!b)return null;var g=d[e],k=f[e];if(c.default.isEqual(g,k))return b;var h=a[e];return c.default.isEqual(h,k)?b:c.default.isEqual(h,g)?(b[e]=k,b):null},c.default.merge({},d));e&&(e.version=b);return e};b.prototype.save=function(a,d){if(!this._isDisabled){var b=this.getPullRequestUpdateFromForm(d.getCurrentPanel().body.find("form"));
if(b.title)return this._$spinner.show().spin("small"),this.toggleDisabled(!0),this._doSave(b);var c="You must supply a title for this pull request.";this.updatePanel(g.default.extend({fieldErrors:{title:[c]}},b))}};b.prototype._doSave=function(a){var b=this,f=Q.default.rest({url:M.default.rest().currentPullRequest().withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}).build(),type:"PUT",data:a,statusCode:{400:!1,409:!1}});(0,S.default)(f,e.default.format("You have made changes to the pull request that have not yet reached {0}. If you leave this page, those changes will be lost.",
bitbucket.internal.util.productName()));f.done(function(a){b.deleteDraftDescription();window.location.reload()});f.fail(function(f,m,n,q,p){var k=[],h={},l;if(1===q.errors.length&&"com.atlassian.bitbucket.pull.PullRequestOutOfDateException"===q.errors[0].exceptionName&&(f=b.mergePullRequestUpdate(b._pullRequest.toJSON(),q.errors[0].pullRequest,a))){b._doSave(f);return}c.default.each(q.errors,function(a){a.context?(Object.prototype.hasOwnProperty.call(h,a.context)||(h[a.context]=[]),"reviewers"===
a.context?(h[a.context]=c.default.pluck(a.reviewerErrors,"message"),k.push(a),l=a.validReviewers):h[a.context].push(a.message)):("com.atlassian.bitbucket.pull.PullRequestOutOfDateException"===a.exceptionName&&(a.messageContent=e.default.escapeHtml(a.message)+" \x3ca href\x3d'"+window.location.href.split("#")[0]+"'\x3e"+e.default.escapeHtml("Reload")+"\x3c/a\x3e."),k.push(a))});b.updatePanel(g.default.extend({errors:k,fieldErrors:h},a,{reviewers:l}));b._$spinner.spinStop().hide();
b.toggleDisabled(!1)})};b.prototype.toggleDisabled=function(a){void 0===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&(a=!this._isDisabled);this._$buttonPanel.toggleClass("disabled",a);this._$buttonPanel.find("button")[a?"attr":"removeAttr"]("disabled","disabled");this._dialog[a?"disable":"enable"]();this._isDisabled=a};b.prototype.cancel=function(){this._isDisabled||(l.default.unbindFrom(this._dialog.getCurrentPanel().body),this.deleteDraftDescription(),this.hide())};b.prototype.isVisible=
function(){return this._dialogEl.is(":visible")};b.prototype.show=function(){this.populatePanelFromPullRequest();this._dialog.show();r.default.on("window.resize.debounced",this.triggerPanelResize)};b.prototype.hide=function(){document.activeElement.blur();this._dialog.hide();r.default.off("window.resize.debounced",this.triggerPanelResize)};b.prototype.bind=function(a){var b=this;(0,g.default)(document).on("click",a,function(a){a.preventDefault();b.show()})};n.default=b;u.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-edit', location = '/static/bitbucket/internal/feature/pull-request/edit/pull-request-edit.soy' */
// This file was automatically generated from pull-request-edit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.edit = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.errors) {
    var errorList5 = opt_data.errors;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += aui.message.error({content: '' + ((errorData5.messageContent) ? soy.$$filterNoAutoescape(errorData5.messageContent) : soy.$$escapeHtml(errorData5.message))});
    }
  }
  output += bitbucket.internal.widget.form({action: '', autocomplete: 'off', content: '' + widget.aui.form.field({id: 'toRef', labelContent: '' + soy.$$escapeHtml('Destination'), description: 'Update the destination branch for the pull request', errors: opt_data.fieldErrors ? opt_data.fieldErrors.toRef : null, input: '' + bitbucket.internal.feature.repository.branchSelectorTriggerWithField({id: 'toRef', fieldName: 'toRef', ref: opt_data.toRef})}) + bitbucket.internal.feature.pullRequest.detailsForm(opt_data)});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.edit.soyTemplateName = 'bitbucket.internal.feature.pullRequest.edit';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:code-block', location = '/static/bitbucket/internal/widget/code-block/code-block.soy' */
// This file was automatically generated from code-block.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.codeBlock = function(opt_data, opt_ignored) {
  return '<div class="code-block' + ((opt_data.instructionBlock) ? ' instruction-block' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><pre><code>' + soy.$$filterNoAutoescape(opt_data.content) + '</code></pre></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.codeBlock.soyTemplateName = 'bitbucket.internal.widget.codeBlock';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:branch-diagram', location = '/static/bitbucket/internal/feature/repository/branch-diagram/branch-diagram.js' */
define("bitbucket/internal/feature/repository/branch-diagram/branch-diagram","module exports jquery lodash bitbucket/internal/model/repository bitbucket/internal/model/revision-reference".split(" "),function(g,f,e,h,k,l){function a(b){this.$el=(0,m.default)(b)}Object.defineProperty(f,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(e);e=babelHelpers.interopRequireDefault(h);var n=babelHelpers.interopRequireDefault(k),p=babelHelpers.interopRequireDefault(l);a.prototype._updateRefLozenge=
function(b,c,a){var d=this.$el.find("."+b);d.trigger("mouseout");c&&c instanceof p.default?c.getDisplayId()||c.getId()?(b=bitbucket.internal.feature.repository.refLozenge({ref:c.toJSON(),repository:a&&a instanceof n.default?a.toJSON():null,extraClasses:b}),d.length?d.replaceWith(b).removeClass("invisible"):this.$el.append(b)):d.addClass("invisible"):null!=c&&""!==c||d.addClass("invisible");d=this.$el.find(".source-ref").length&&this.$el.find(".target-ref").length;this.$el.toggleClass("disabled",!d)};
a.prototype.updateSourceRef=e.default.partial(a.prototype._updateRefLozenge,"source-ref");a.prototype.updateTargetRef=e.default.partial(a.prototype._updateRefLozenge,"target-ref");f.default=a;g.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:branch-diagram', location = '/static/bitbucket/internal/feature/repository/branch-diagram/branch-diagram.soy' */
// This file was automatically generated from branch-diagram.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.branchDiagram = function(opt_data, opt_ignored) {
  return '<div class="branch-diagram branch-diagram-' + soy.$$escapeHtml(opt_data.type) + ((! opt_data.sourceRef || ! opt_data.targetRef) ? ' disabled' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><div class="diagram-image"></div>' + ((opt_data.sourceRef) ? bitbucket.internal.feature.repository.refLozenge({ref: opt_data.sourceRef, extraClasses: 'source-ref', repository: opt_data.sourceRepo}) : '') + ((opt_data.targetRef) ? bitbucket.internal.feature.repository.refLozenge({ref: opt_data.targetRef, extraClasses: 'target-ref', repository: opt_data.targetRepo}) : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.branchDiagram.soyTemplateName = 'bitbucket.internal.feature.repository.branchDiagram';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:set-dialog-buttons-disabled', location = '/static/bitbucket/internal/util/set-dialog-buttons-disabled.js' */
define("bitbucket/internal/util/set-dialog-buttons-disabled",["module","exports","jquery"],function(b,a,e){Object.defineProperty(a,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(e);a.default=function(a,c){a.$el.find(".aui-dialog2-footer-actions .aui-button").each(function(a,b){var d=(0,f.default)(b);d.prop("disabled",c).toggleClass("disabled",c);c?d.attr("aria-disabled","true"):d.removeAttr("aria-disabled")})};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:javascript-errors', location = '/static/bitbucket/internal/bbui/javascript-errors/not-implemented-error.js' */
define("bitbucket/internal/bbui/javascript-errors/not-implemented-error",["module","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});var e=function(a){function b(a){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.name="NotImplementedError";c.message=a||"This method has not been implemented";return c}babelHelpers.inherits(b,a);return b}(Error);a.default=e;d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:javascript-errors', location = '/static/bitbucket/internal/bbui/javascript-errors/javascript-errors.js' */
define("bitbucket/internal/bbui/javascript-errors/javascript-errors",["exports","./not-implemented-error"],function(a,b){Object.defineProperty(a,"__esModule",{value:!0});a.NotImplementedError=void 0;var c=babelHelpers.interopRequireDefault(b);a.NotImplementedError=c.default});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:urls', location = '/static/bitbucket/internal/bbui/urls/urls.js' */
define("bitbucket/internal/bbui/urls/urls",["module","exports","../javascript-errors/javascript-errors"],function(e,c,d){Object.defineProperty(c,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(d);d=function(){function c(){babelHelpers.classCallCheck(this,c)}babelHelpers.createClass(c,[{key:"fileChanges",value:function(b,c){throw new a.default.NotImplementedError;}},{key:"avatarUrl",value:function(b,c){throw new a.default.NotImplementedError;}},{key:"user",value:function(b){throw new a.default.NotImplementedError;
}},{key:"pullRequest",value:function(b){throw new a.default.NotImplementedError;}},{key:"createPullRequest",value:function(b){throw new a.default.NotImplementedError;}},{key:"allPullRequests",value:function(b){throw new a.default.NotImplementedError;}},{key:"help",value:function(b){throw new a.default.NotImplementedError;}},{key:"search",value:function(b){throw new a.default.NotImplementedError;}},{key:"project",value:function(b){throw new a.default.NotImplementedError;}},{key:"repo",value:function(b){throw new a.default.NotImplementedError;
}},{key:"remote",value:function(b){throw new a.default.NotImplementedError;}}]);return c}();c.default=d;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-urls', location = '/static/bitbucket/internal/impl/urls.js' */
define("bitbucket/internal/impl/urls","module exports bitbucket/util/navbuilder bitbucket/internal/bbui/javascript-errors/javascript-errors bitbucket/internal/bbui/urls/urls bitbucket/internal/util/object".split(" "),function(f,d,g,h,k,l){function b(){e.default.call(this)}Object.defineProperty(d,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(g),m=babelHelpers.interopRequireDefault(h),e=babelHelpers.interopRequireDefault(k);babelHelpers.interopRequireDefault(l).default.inherits(b,
e.default);b.prototype.avatarUrl=function(a,b){return c.default._avatarUrl(a,b).build()};b.prototype.pullRequest=function(a){return c.default.currentRepo().pullRequest(a).build()};b.prototype.inboxPullRequest=function(a,b,d){return c.default.project(a).repo(b).pullRequest(d).build()};b.prototype.createPullRequest=function(a){return c.default.project(a.project).repo(a).createPullRequest().build()};b.prototype.allPullRequests=function(a,b){return b?c.default.project(a.project).repo(a).allPullRequests().state(b).build():
c.default.project(a.project).repo(a).allPullRequests().build()};b.prototype.help=function(a){switch(a){case "help.mirroring.clone.dialog":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Clone+a+repository?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash#Clonearepository-mirrorclone';case "help.mirroring.getting.started":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Smart+Mirroring?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.mirroring.setup":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Set+up+a+mirror?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.pull.request":return 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.search.guide":return 'http:\/\/go.atlassian.com\/bitbucket.go.search.guide?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';
case "help.search.troubleshoot":return 'http:\/\/go.atlassian.com\/bitbucket.go.search.troubleshoot?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';case "help.search.query":return 'http:\/\/go.atlassian.com\/bitbucket.go.search.query?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash';default:throw new m.default.NotImplementedError;}};b.prototype.search=function(a){return c.default.search(a).build()};b.prototype.project=function(a){return c.default.project(a).build()};b.prototype.repo=function(a){return c.default.project(a.project).repo(a).build()};b.prototype.user=function(a){return c.default.user(a.slug).build()};
b.prototype.remote=function(a){return c.default.project(a.project.key).repo(a.slug).clone(a.scmId).buildAbsolute()};d.default=new b;f.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:classnames', location = '/static/lib/react/classnames.js' */
(function(){function c(){for(var b="",d=0;d<arguments.length;d++){var a=arguments[d];if(a){var e=typeof a;if("string"===e||"number"===e)b+=" "+a;else if(Array.isArray(a))b+=" "+c.apply(null,a);else if("object"===e)for(var f in a)g.call(a,f)&&a[f]&&(b+=" "+f)}}return b.substr(1)}var g={}.hasOwnProperty;"undefined"!==typeof module&&module.exports?module.exports=c:"function"===typeof define&&"object"===typeof define.amd&&define.amd?define("classnames",function(){return c}):window.classNames=c})();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:classnames', location = '/static/lib/react/classnames-AMD.js' */
define("classnames",function(){return window.classNames});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/inline-dialog.js' */
define("bitbucket/internal/bbui/aui-react/inline-dialog",["exports","classnames","prop-types","react","./component"],function(d,a,g,b,e){Object.defineProperty(d,"__esModule",{value:!0});d.InlineDialogTrigger=void 0;var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(g);var f=babelHelpers.interopRequireDefault(b),k=babelHelpers.interopRequireDefault(e);e={children:a.default.node,className:a.default.string,dialogId:a.default.string.isRequired,href:a.default.string,title:a.default.string};
a={alignment:a.default.string,children:a.default.node,className:a.default.string,id:a.default.string.isRequired};b=d.InlineDialogTrigger=function(a){function b(a){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.elementType="button";c.triggerProps={"aria-controls":a.dialogId,"aria-haspopup":!0,className:(0,h.default)("aui-button",a.className),"data-aui-trigger":!0,role:"button",title:a.title};a.href&&(c.triggerProps=
babelHelpers.extends({},c.triggerProps,{className:a.className,href:a.href,tabIndex:"0"}),c.elementType="a");return c}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"render",value:function(){return f.default.createElement(this.elementType,this.triggerProps,this.props.children)}}]);return b}(b.Component);b.defaultProps={className:"",href:"",title:""};b.propTypes=e;b=function(a){return f.default.createElement(k.default,{id:a.id,markup:'\x3caui-inline-dialog\n                        id\x3d"'+
a.id+'"\n                        class\x3d"'+a.className+'"\n                        alignment\x3d"'+a.alignment+'"\n                     \x3e\x3c/aui-inline-dialog\x3e',containerSelector:"#"+a.id+" .aui-inline-dialog-contents"},a.children)};b.defaultProps={alignment:"right middle",className:""};b.propTypes=a;d.default=b});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/avatar.js' */
define("bitbucket/internal/bbui/aui-react/avatar","exports aui classnames lodash prop-types react bitbucket/internal/impl/urls".split(" "),function(d,c,r,f,t,h,k){Object.defineProperty(d,"__esModule",{value:!0});d.Avatar=d.ProjectAvatar=d.AvatarTShirtSize=d.AvatarSize=void 0;var u=babelHelpers.interopRequireDefault(c),l=babelHelpers.interopRequireDefault(r);c=babelHelpers.interopRequireDefault(t);var e=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(k);h={avatarAttrs:c.default.object,
avatarClassName:c.default.string,badges:c.default.arrayOf(c.default.shape({className:c.default.string,text:c.default.string})),className:c.default.string,size:c.default.string,tooltip:c.default.bool,tooltipText:c.default.string,visibleBadge:c.default.string,withLink:c.default.bool,withName:c.default.bool,withEmail:c.default.bool};k={badges:[],size:"small",tooltip:!0,tooltipText:"",withName:!1,withEmail:!1};var n=d.AvatarSize={XSMALL:16,SMALL:24,MEDIUM:32,LARGE:48,XLARGE:64,XXLARGE:96,XXXLARGE:128};
d.AvatarTShirtSize=(0,f.mapValues)(n,function(a,b){return b.toLowerCase()});f=function(a){var b=a.person.user||a.person,c=b.displayName||b.name,d=c,g=[];a.withName&&g.push(c);a.withEmail&&b.emailAddress&&(d+=" ("+b.emailAddress+")",g.push(e.default.createElement("span",{key:"email",className:"email-address"},b.emailAddress)));b={alt:c,avatarAttrs:{"data-username":b.name},avatarSrc:m.default.avatarUrl(b,n[a.size.toUpperCase()]),badges:a.badges,className:(0,l.default)("user-avatar",a.avatarClassName,
{"badge-hidden":a.hideBadge},a.withName||a.withEmail?null:a.className),display:g,displayLink:m.default.user(b),size:a.size,title:a.tooltip&&(a.tooltipText||d),tooltip:a.tooltip,visibleBadge:a.visibleBadge};return e.default.createElement(p,babelHelpers.extends({},a,{avatarProps:b}))};f.defaultProps=babelHelpers.extends({},k);f.propTypes=babelHelpers.extends({},h,{person:c.default.object.isRequired});d.default=f;f=d.ProjectAvatar=function(a){return e.default.createElement(p,babelHelpers.extends({},
a,{avatarProps:{alt:a.project.name,avatarSrc:a.project.avatarUrl||"XXX TODO TEST",badges:a.badges,className:"aui-avatar-project",display:a.project.name,displayLink:"XXX TODO TEST",size:a.size,title:a.project.name,tooltip:a.tooltip,visibleBadge:a.visibleBadge}}))};f.defaultProps=babelHelpers.extends({},k,{avatarAttrs:{}});f.propTypes=babelHelpers.extends({},h,{project:c.default.object.isRequired});var q=d.Avatar=function(a){var b=a.alt,c=a.avatarAttrs,d=a.avatarSrc,g=a.badges,g=void 0===g?[]:g,f=a.className,
h=a.size,k=a.title,m=a.tooltip,n=a.visibleBadge;a=(0,l.default)(f,"aui-avatar","aui-avatar-"+h,{"aui-avatar-badged":g.length});b={alt:b,ref:m?function(a){return u.default.$(a).tooltip()}:null,src:d,title:m?k:void 0};return e.default.createElement("span",babelHelpers.extends({className:a},c),e.default.createElement("span",{className:"aui-avatar-inner"},e.default.createElement("img",b)),g.map(function(a){return e.default.createElement("span",{key:a.className,className:(0,l.default)("badge",a.className,
{"badge-hidden":n!==a.className}),"aria-hidden":!n},a.text)}))},p=function(a){var b=a.avatarProps;return a.withName?e.default.createElement("div",{className:(0,l.default)(a.className,"avatar-with-name"),title:b.tooltip?b.title:void 0},e.default.createElement(q,babelHelpers.extends({},b,{tooltip:!1})),e.default.createElement(v,{display:b.display,href:a.withLink?b.displayLink:null})):e.default.createElement(q,babelHelpers.extends({},b,{className:(0,l.default)(b.className,a.className)}))},v=function(a){var b=
a.display;return(a=a.href)?e.default.createElement("a",{className:"name",href:a},b):e.default.createElement("span",{className:"name"},b)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/spinner.js' */
define("bitbucket/internal/bbui/aui-react/spinner",["exports","jquery","prop-types","react","react-dom"],function(a,d,h,e,k){Object.defineProperty(a,"__esModule",{value:!0});a.SpinnerSize=void 0;var f=babelHelpers.interopRequireDefault(d),l=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(e),g=babelHelpers.interopRequireDefault(k),c=a.SpinnerSize={SMALL:"small",MEDIUM:"medium",LARGE:"large"};d=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,
(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"componentDidMount",value:function(){this.spin()}},{key:"shouldComponentUpdate",value:function(a){return this.props.size!==a.size}},{key:"componentDidUpdate",value:function(){this.spinStop();this.spin()}},{key:"componentWillUnmount",value:function(){this.spinStop()}},{key:"spin",value:function(){(0,f.default)(g.default.findDOMNode(this)).spin(this.props.size||c.SMALL)}},{key:"spinStop",
value:function(){(0,f.default)(g.default.findDOMNode(this)).spinStop()}},{key:"render",value:function(){return m.default.createElement("div",{className:"bb-spinner"})}}],[{key:"propTypes",get:function(){return{size:l.default.oneOf([c.SMALL,c.MEDIUM,c.LARGE])}}}]);return b}(e.Component);a.default=d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/flags.js' */
define("bitbucket/internal/bbui/aui-react/flags",["exports","classnames","lodash","prop-types","react"],function(b,a,h,k,c){Object.defineProperty(b,"__esModule",{value:!0});b.Flag=b.flagType=b.closeType=void 0;var n=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(k);var e=babelHelpers.interopRequireDefault(c),f=b.closeType={AUTO:"auto",MANUAL:"manual",NEVER:"never"};k=b.flagType={ERROR:"error",INFO:"info",SUCCESS:"success",WARNING:"warning"};var m=b.Flag=function(a){function g(){var l,
a,d,b;babelHelpers.classCallCheck(this,g);for(var e=arguments.length,f=Array(e),c=0;c<e;c++)f[c]=arguments[c];return b=(a=(d=babelHelpers.possibleConstructorReturn(this,(l=g.__proto__||Object.getPrototypeOf(g)).call.apply(l,[this].concat(f))),d),d.state={hidden:void 0},d.onTransitionEnd=(0,h.debounce)(function(){var a=d.props,l=a.id,a=a.onClose;d.state.hidden&&a&&a(l)},250),d.close=function(){return d.setState({hidden:!0})},a),babelHelpers.possibleConstructorReturn(d,b)}babelHelpers.inherits(g,a);
babelHelpers.createClass(g,[{key:"componentDidMount",value:function(){var a=this;(0,h.defer)(function(){return a.setState({hidden:!1})});this.props.close===f.AUTO&&(this.autoCloseTimeout=setTimeout(this.close,5E3))}},{key:"componentWillUnmount",value:function(){this.autoCloseTimeout&&clearTimeout(this.autoCloseTimeout)}},{key:"render",value:function(){var a=this.props,b=a.body,d=a.close,c=a.title,a=a.type,g=this.state.hidden;return e.default.createElement("div",{className:"aui-flag","aria-hidden":(0,
h.isBoolean)(g)?""+g:g,onTransitionEnd:this.onTransitionEnd},e.default.createElement("div",{className:(0,n.default)("aui-message","aui-message-"+a,"shadowed",a,{closeable:d!==f.NEVER,"aui-will-close":d===f.AUTO})},e.default.createElement("p",{className:"title"},e.default.createElement("strong",null,c)),b,d===f.AUTO||d===f.MANUAL?e.default.createElement("span",{className:"aui-icon icon-close",role:"button",tabIndex:"0",onClick:this.close}):null))}}]);return g}(c.Component);m.propTypes={body:a.default.node,
close:a.default.oneOf((0,h.values)(f)),id:a.default.string.isRequired,onClose:a.default.func,title:a.default.string,type:a.default.oneOf((0,h.values)(k))};m.defaultProps={close:f.MANUAL,type:k.INFO};c=function(a){var b=a.flags,c=a.onClose;return e.default.createElement("div",{id:"aui-flag-container"},b&&b.map(function(a){return e.default.createElement(m,babelHelpers.extends({key:a.id},a,{onClose:c}))}))};c.propTypes={flags:a.default.array,onClose:a.default.func};b.default=c});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/dialog.js' */
define("bitbucket/internal/bbui/aui-react/dialog","exports aui classnames lodash prop-types react ./icon".split(" "),function(c,k,a,m,n,e,f){Object.defineProperty(c,"__esModule",{value:!0});c.DialogSize=c.DialogContent=c.DialogFooter=c.DialogHeader=void 0;var v=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(n);var b=babelHelpers.interopRequireDefault(e),p=babelHelpers.interopRequireDefault(f),q=c.DialogHeader=function(a){var d=a.headerActionContent,l=a.headerSecondaryContent,
x=a.modal,g=a.onClose;return b.default.createElement("header",{className:"aui-dialog2-header"},b.default.createElement("h2",{className:"aui-dialog2-header-main"},a.titleContent),l?b.default.createElement("div",{className:"aui-dialog2-header-secondary"},l):null,d?b.default.createElement("div",{className:"aui-dialog2-header-actions"},d):null,!x&&g?b.default.createElement("a",{className:"aui-dialog2-header-close",href:"#",onClick:g},b.default.createElement(p.default,{icon:"close-dialog"},"Close")):
null)};q.propTypes={headerSecondaryContent:a.default.node,headerActionContent:a.default.node,modal:a.default.bool,onClose:a.default.func,titleContent:a.default.node};var r=c.DialogFooter=function(a){var d=a.footerActionContent;a=a.footerHintContent;return b.default.createElement("footer",{className:"aui-dialog2-footer"},d?b.default.createElement("div",{className:"aui-dialog2-footer-actions"},d):null,a?b.default.createElement("div",{className:"aui-dialog2-footer-hint"},a):null)};r.propTypes={footerActionContent:a.default.node,
footerHintContent:a.default.node};var t=c.DialogContent=function(a){return b.default.createElement("div",{className:"aui-dialog2-content"},a.children)};t.propTypes={children:a.default.node};f=c.DialogSize={SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"};e=function(a){function d(){var a,b,g,c;babelHelpers.classCallCheck(this,d);for(var e=arguments.length,f=Array(e),h=0;h<e;h++)f[h]=arguments[h];return c=(b=(g=babelHelpers.possibleConstructorReturn(this,(a=d.__proto__||Object.getPrototypeOf(d)).call.apply(a,
[this].concat(f))),g),g.onKeyDownEsc=function(a){var l=a.keyCode,b=g.props,d=b.modal,b=b.onClose;"Escape"!==a.key&&l!==k.keyCode.ESCAPE||d||!b||b()},b),babelHelpers.possibleConstructorReturn(g,c)}babelHelpers.inherits(d,a);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var a=document.body.style;this.allowBodyScroll=function(b){return function(){a.overflow=b}}(a.overflow);a.overflow="hidden";addEventListener("keydown",this.onKeyDownEsc)}},{key:"componentWillUnmount",value:function(){this.allowBodyScroll();
removeEventListener("keydown",this.onKeyDownEsc)}},{key:"render",value:function(){var a=this.props,d=a.children,c=a.className,e=a.headerSecondaryContent,f=a.headerActionContent,w=a.footerActionContent,h=a.footerHintContent,k=a.modal,u=a.onClose,m=a.size,n=a.titleContent,p=a.warning;return b.default.createElement("div",null,b.default.createElement("section",{role:"dialog",id:a.id,className:(0,v.default)("aui-layer","aui-dialog2","aui-dialog2-"+m,{"aui-dialog2-warning":p},c),style:{zIndex:3E3}},b.default.createElement(q,
{headerActionContent:f,headerSecondaryContent:e,modal:k,onClose:u,titleContent:n}),b.default.createElement(t,null,d),b.default.createElement(r,{footerActionContent:w,footerHintContent:h})),b.default.createElement("div",{className:"aui-blanket",tabIndex:"0",style:{zIndex:2980},"aria-hidden":!1,onClick:k?null:u}))}}]);return d}(e.Component);e.propTypes={children:a.default.node,className:a.default.string,headerSecondaryContent:a.default.node,headerActionContent:a.default.node,footerActionContent:a.default.node,
footerHintContent:a.default.node,id:a.default.string,modal:a.default.bool,onClose:function(a,b){return function(c){for(var e=arguments.length,g=Array(1<e?e-1:0),f=1;f<e;f++)g[f-1]=arguments[f];return(b(c)?a.isRequired:a).apply(void 0,[c].concat(g))}}(a.default.func,function(a){return!a.modal}),size:a.default.oneOf((0,m.values)(f)),titleContent:a.default.node,warning:a.default.bool};e.defaultProps={modal:!1,size:f.MEDIUM,warning:!1};c.default=e});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/component.js' */
define("bitbucket/internal/bbui/aui-react/component","module exports classnames lodash prop-types react react-dom".split(" "),function(h,d,a,k,l,c,e){Object.defineProperty(d,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(a),n=babelHelpers.interopRequireDefault(k);a=babelHelpers.interopRequireDefault(l);var g=babelHelpers.interopRequireDefault(c),f=babelHelpers.interopRequireDefault(e);e={children:a.default.node.isRequired,containerSelector:a.default.string,id:a.default.string,markup:a.default.string.isRequired,
wrapperClass:a.default.string};c=function(a){function b(){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"componentDidMount",value:function(){var a=this,b=f.default.findDOMNode(this);b.innerHTML=this.props.markup;b.firstChild.id=this.props.id;n.default.defer(function(){return a.updateContent()})}},{key:"componentDidUpdate",value:function(){this.updateContent()}},
{key:"componentWillUnmount",value:function(){f.default.unmountComponentAtNode(this.getContainer());if(this.props.id){var a=document.querySelector("#"+this.props.id);a&&a.parentNode.removeChild(a)}}},{key:"getContainer",value:function(){return this._container?this._container:this._container=document.querySelector(this.props.containerSelector||"#"+this.props.id)}},{key:"updateContent",value:function(){var a=g.default.createElement("div",{className:(0,m.default)(this.props.wrapperClass)},this.props.children);
this.getContainer()&&f.default.render(a,this.getContainer())}},{key:"render",value:function(){return g.default.createElement("div",null)}}]);return b}(c.Component);c.propTypes=e;d.default=c;h.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/icon.js' */
define("bitbucket/internal/bbui/aui-react/icon",["module","exports","classnames","prop-types","react"],function(e,c,a,f,d){Object.defineProperty(c,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var h=babelHelpers.interopRequireDefault(d);d={icon:a.default.string.isRequired,size:a.default.oneOf(["small","large"]),title:a.default.string,children:a.default.node};a=function(a){var b=a.icon;/^aui-iconfont-/.test(b)||(b="aui-iconfont-"+b);return h.default.createElement("span",
{className:(0,g.default)("aui-icon","aui-icon-"+a.size,b),title:a.title},a.children)};a.propTypes=d;a.defaultProps={size:"small"};c.default=a;e.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:aui-react', location = '/static/bitbucket/internal/bbui/aui-react/toggle-button.js' */
define("bitbucket/internal/bbui/aui-react/toggle-button",["module","exports","lodash","prop-types","react"],function(k,e,l,a,b){Object.defineProperty(e,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);var m=babelHelpers.interopRequireDefault(b);b=function(a){function c(){var a,b,d,e;babelHelpers.classCallCheck(this,c);for(var g=arguments.length,h=Array(g),f=0;f<g;f++)h[f]=arguments[f];return e=(b=(d=babelHelpers.possibleConstructorReturn(this,(a=c.__proto__||Object.getPrototypeOf(c)).call.apply(a,
[this].concat(h))),d),d.onToggle=function(a){a=a.target.checked;var b=d.props.onToggle;b&&b(a)},d.setBooleanProps=function(a){c.booleanProps.forEach(function(b){d.toggle[b]=a[b]})},b),babelHelpers.possibleConstructorReturn(d,e)}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){var a=this;this.toggle.addEventListener("change",this.onToggle);this.setBooleanProps(this.props);setTimeout(function(){return a.setBooleanProps(a.props)})}},{key:"componentWillReceiveProps",
value:function(a){this.setBooleanProps(a)}},{key:"componentWillUnmount",value:function(){this.toggle.removeEventListener("change",this.onToggle)}},{key:"render",value:function(){var a=this;return m.default.createElement("aui-toggle",babelHelpers.extends({ref:function(b){a.toggle=b}},(0,l.omit)(this.props,c.booleanProps.concat("onToggle"))))}}]);return c}(b.Component);b.propTypes={busy:a.default.bool,checked:a.default.bool,disabled:a.default.bool,label:a.default.string.isRequired,onToggle:a.default.func};
b.booleanProps=["checked","disabled","busy"];e.default=b;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-static-resources', location = '/static/branch-deletion.js' */
define("pullRequest/branchDeletion",["aui","jquery","lodash","bitbucket/util/navbuilder","bitbucket/internal/model/page-state","bitbucket/internal/util/ajax","bitbucket/internal/util/client-storage","bitbucket/internal/util/events","exports",],function(l,e,o,a,k,j,c,q,d){var f="#pull-request-merge-dialog";var g="#delete-branch-checkbox";function i(r){return a.newBuilder().addPathComponents("rest","pull-request-source-branch-deletion","1.0","projects",k.getProject().getKey(),"repos",k.getRepository().getSlug(),"pull-requests",k.getPullRequest().getId()).withParams({dryRun:!!r}).build()}function n(r,t){var s=new l.Dialog({width:650,height:200,id:"branch-deletion-failure",closeOnOutsideClick:false,});s.addHeader("Pull request merged").addPanel("",bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents({errorMessage:r})).addCancel("Close",function(){s.remove();t()});s.show();s.updateHeight()}function h(r){if(r&&r.errors&&r.errors.length){return r.errors[0].message}return null}function b(){return false}function m(s,t){var r=e.Deferred();s.done(function(){var u=Array.prototype.slice.call(arguments);function v(){r.resolve.apply(this,u)}if(e(g).is(":checked")){j.rest({url:d._getRestDeleteBranchUrl(),type:"POST",statusCode:{400:b,401:b,403:b,409:b,},}).done(function(){q.trigger("bitbucket.internal.page.pullRequest.revisionRefRemoved",null,k.getPullRequest().getFromRef().toJSON());return v()}).fail(function(y,A,x,z){t();var w=h(z);if(w){n(w,r.resolve)}else{v()}})}else{v()}}).fail(function(){r.reject.apply(this,Array.prototype.slice.call(arguments))});return r.promise()}d.initialiseBranchDeletion=function(){o.defer(function(){var u=e(f).find(g);var r=c.buildKey(["pr","merge","delete","branch"],"repo");var t=!!c.getItem(r);u.prop("checked",t).on("change",function(){c.setItem(r,!!this.checked,{noCleanup:true,})});var v=l.dialog2(f);v.on("show",function s(){p();v.off("show",s)})})};function p(){var r=e(f).find(g);j.rest({url:i(true),type:"POST",dataType:"json",statusCode:{400:b,403:b,409:b,},}).done(function(){r.removeAttr("disabled")}).fail(function(u,w,t,v){var s=h(v);if(s){r.attr("disabled","disabled").removeAttr("checked").parent().tooltip({delayOut:200,delayIn:0,gravity:"n",html:false,hoverable:true,offset:7,title:function(){return s},})}})}d.getMergePromiseDecorator=m;d._getRestDeleteBranchUrl=i});require("pullRequest/branchDeletion");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-static-resources', location = '/static/branch-deletion.soy' */
// This file was automatically generated from branch-deletion.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.plugin.pullRequestDeleteBranch.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.plugin == 'undefined') { bitbucket.internal.plugin = {}; }
if (typeof bitbucket.internal.plugin.pullRequestDeleteBranch == 'undefined') { bitbucket.internal.plugin.pullRequestDeleteBranch = {}; }


bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox = function(opt_data, opt_ignored) {
  return '<span class="delete-branch-checkbox-wrapper" title="' + soy.$$escapeHtml('Delete the source branch after the merge completes successfully.') + '"><input id="delete-branch-checkbox" class="checkbox" disabled="disabled" type="checkbox" name="delete-branch-checkbox"/><label for="delete-branch-checkbox">' + soy.$$escapeHtml('Delete source branch after merging') + '</label></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox.soyTemplateName = 'bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox';
}


bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: '' + soy.$$escapeHtml('The pull request was merged, but the branch could not be deleted'), content: '' + soy.$$escapeHtml(opt_data.errorMessage)});
};
if (goog.DEBUG) {
  bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents.soyTemplateName = 'bitbucket.internal.plugin.pullRequestDeleteBranch.failureDialogContents';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-web-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion','key':'branch-deletion-web-panel','moduleKey':'branch-deletion-web-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-pull-request-branch-deletion:branch-deletion-web-panel','weight':0.0,'context-provider':function(ctx) { return WebFragments._getValue((require('pullRequest/branchDeletion').initialiseBranchDeletion), ctx); },'params':{},'location':'internal.stash.pull-request.merge-dialog.footer.hint','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.plugin.pullRequestDeleteBranch.deleteBranchCheckbox), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-merge-dialog', location = '/static/bitbucket/internal/feature/pull-request/merge-dialog/pull-request-merge-dialog.soy' */
// This file was automatically generated from pull-request-merge-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.merge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.merge == 'undefined') { bitbucket.internal.feature.pullRequest.merge = {}; }


bitbucket.internal.feature.pullRequest.merge.dialog = function(opt_data, opt_ignored) {
  var param39 = '';
  var webPanelList40 = WebFragments.getWebPanels('internal.stash.pull-request.merge-dialog.footer.hint').map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var webPanelListLen40 = webPanelList40.length;
  for (var webPanelIndex40 = 0; webPanelIndex40 < webPanelListLen40; webPanelIndex40++) {
    var webPanelData40 = webPanelList40[webPanelIndex40];
    param39 += (webPanelIndex40 == 0) ? soy.$$escapeHtml(webPanelData40) : '';
  }
  var output = '' + aui.dialog.dialog2({id: 'pull-request-merge-dialog', size: 'large', content: '<div class="commit-message-container"><div class="committer-avatar">' + bitbucket.internal.widget.avatar({size: 'medium', person: opt_data.person}) + '</div>' + bitbucket.internal.widget.codeBlock({content: '' + bitbucket.internal.feature.pullRequest.merge.mergeMessage(opt_data), extraClasses: 'default-commit-message'}) + bitbucket.internal.widget.form({action: '', autocomplete: 'off', extraClasses: 'commit-message-form collapsed', content: '' + widget.aui.form.expandingTextarea({id: 'commit-message', name: 'commit-message', extraClasses: 'text commit-message full-width-field', placeholderText: soydata.VERY_UNSAFE.ordainSanitizedHtml('Add to the commit message\x26hellip;')}) + aui.buttons.button({type: 'link', text: 'Cancel', extraClasses: 'commit-message-action cancel-commit-message-link'})}) + '</div>' + bitbucket.internal.feature.repository.branchDiagram({type: 'merge', id: 'merge-branch', sourceRef: opt_data.pullRequest.fromRef, sourceRepo: opt_data.pullRequest.fromRef.repository.id != opt_data.pullRequest.toRef.repository.id ? opt_data.pullRequest.fromRef.repository : null, targetRef: opt_data.pullRequest.toRef, targetRepo: opt_data.pullRequest.fromRef.repository.id != opt_data.pullRequest.toRef.repository.id ? opt_data.pullRequest.toRef.repository : null}), titleText: 'Merge Pull Request', footerHintContent: param39, footerActionContent: '' + ((opt_data.mergeStrategies && opt_data.mergeStrategies.length > 1 && opt_data.defaultStrategy) ? bitbucket.internal.feature.pullRequest.merge.mergeStrategy(opt_data) : '') + aui.buttons.button({text: 'Merge', type: 'primary', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.dialog.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.dialog';
}


bitbucket.internal.feature.pullRequest.merge.mergeMessage = function(opt_data, opt_ignored) {
  var output = '';
  var crossRepo__soy61 = opt_data.pullRequest.toRef.repository.id != opt_data.pullRequest.fromRef.repository.id;
  output += 'Merge pull request #' + soy.$$escapeHtml(opt_data.pullRequest.id) + ' in ' + soy.$$escapeHtml(opt_data.pullRequest.toRef.repository.project.key) + '/' + soy.$$escapeHtml(opt_data.pullRequest.toRef.repository.slug) + ' from ' + ((crossRepo__soy61) ? soy.$$escapeHtml(opt_data.pullRequest.fromRef.repository.project.key) + '/' + soy.$$escapeHtml(opt_data.pullRequest.fromRef.repository.slug) + ':' : '') + soy.$$escapeHtml(opt_data.pullRequest.fromRef.displayId) + ' to ' + soy.$$escapeHtml(opt_data.pullRequest.toRef.displayId);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.mergeMessage.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.mergeMessage';
}


bitbucket.internal.feature.pullRequest.merge.errors = function(opt_data, opt_ignored) {
  var param79 = '';
  var errorList80 = opt_data.errors;
  var errorListLen80 = errorList80.length;
  for (var errorIndex80 = 0; errorIndex80 < errorListLen80; errorIndex80++) {
    var errorData80 = errorList80[errorIndex80];
    if (errorData80.conflicted || errorData80.vetoes && errorData80.vetoes.length) {
      param79 += soy.$$escapeHtml(AJS.format('There {0,choice,1#is|1\x3care} {0} {0,choice,1#issue|1\x3cissues} preventing you from merging this pull request.',errorData80.vetoes ? errorData80.vetoes.length + errorData80.conflicted : errorData80.conflicted)) + '<ul>' + ((errorData80.conflicted) ? '<li>' + soy.$$escapeHtml('Merge conflict.') + aui.buttons.button({text: 'Show details', type: 'link', extraClasses: 'view-merge-veto-details-button'}) + '</li>' : '');
      if (errorData80.vetoes && errorData80.vetoes.length) {
        var vetoList96 = errorData80.vetoes;
        var vetoListLen96 = vetoList96.length;
        for (var vetoIndex96 = 0; vetoIndex96 < vetoListLen96; vetoIndex96++) {
          var vetoData96 = vetoList96[vetoIndex96];
          param79 += '<li>' + soy.$$escapeHtml(vetoData96.detailedMessage) + '</li>';
        }
      }
      param79 += '</ul>';
    } else {
      param79 += bitbucket.internal.widget.errorContent({message: errorData80.message, details: errorData80.details, detailListExtraClasses: 'errors'});
    }
  }
  var output = '' + aui.message.error({content: param79});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.errors.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.errors';
}


bitbucket.internal.feature.pullRequest.merge.mergeStrategy = function(opt_data, opt_ignored) {
  var output = '<button id="merge-strategy-button" class="aui-button aui-dropdown2-trigger" aria-controls="merge-strategy-opts">' + soy.$$escapeHtml(opt_data.defaultStrategy.name) + '</button><aui-dropdown-menu id="merge-strategy-opts"><aui-section label="' + soy.$$escapeHtml('Merge strategy') + '">';
  var strategyList115 = opt_data.mergeStrategies;
  var strategyListLen115 = strategyList115.length;
  for (var strategyIndex115 = 0; strategyIndex115 < strategyListLen115; strategyIndex115++) {
    var strategyData115 = strategyList115[strategyIndex115];
    output += '<aui-item-link href="#" data-strategy="' + soy.$$escapeHtml(strategyData115.id) + '"><span class="strategy-name">' + soy.$$escapeHtml(strategyData115.name) + '</span>' + ((strategyData115.id == opt_data.defaultStrategy.id) ? ' (' + soy.$$escapeHtml('default') + ')' : '') + ' <code>' + soy.$$escapeHtml(strategyData115.flag) + '</code></aui-item-link>';
  }
  output += '</aui-section></aui-dropdown-menu>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.merge.mergeStrategy.soyTemplateName = 'bitbucket.internal.feature.pullRequest.merge.mergeStrategy';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-merge-dialog', location = '/static/bitbucket/internal/feature/pull-request/merge-dialog/merge-dialog.js' */
define("bitbucket/internal/feature/pull-request/merge-dialog/merge-dialog","module exports aui jquery bitbucket/util/navbuilder bitbucket/internal/bbui/aui-react/avatar bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/set-dialog-buttons-disabled bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),function(u,n,v,w,x,y,z,A,B,C,D){function E(e){var b=p.default.dialog2(bitbucket.internal.feature.pullRequest.merge.dialog(e.dialog));
(0,c.default)("body").append(b.$el);var f=void 0,k=void 0,g=void 0;(0,c.default)(document).on("click","#merge-strategy-opts aui-item-link",function(d){var a=(0,c.default)(d.currentTarget);g=a.data("strategy");b.$el.find("#merge-strategy-button").text(a.find(".strategy-name").text());d.preventDefault()});b.$el.find(".confirm-button").on("click",function(d){d=(0,c.default)("#merge-strategy-button").length?(0,c.default)("#merge-strategy-button"):d.target;var a=new F.default(d,"before");d=q.default.rest().currentPullRequest().merge().withParams({avatarSize:y.AvatarSize.XSMALL,
version:h.default.getPullRequest().getVersion()}).build();(0,r.default)(b,!0);a.show();d=f=t.default.rest(babelHelpers.extends({},e.ajax,{url:d,type:"POST",data:{message:b.$el.find("#commit-message").val(),strategyId:g}}));f.always(function(){f=null;a.hide();(0,r.default)(b,!1)});if(!k)try{k=require("pullRequest/branchDeletion").getMergePromiseDecorator}catch(H){}k&&(d=k(d,function(){return b.hide()})||d);d.done(function(a){l.default.trigger("bitbucket.internal.feature.pullRequest.merged",null,{user:h.default.getCurrentUser().toJSON(),
pullRequest:a});e.callback(a)})});b.$el.find(".cancel-button").on("click",function(){f&&(f.abort(),f=null);m(b);b.hide()});b.$el.find(".commit-message").on("focus",G);b.$el.find(".cancel-commit-message-link").click(function(d){d.preventDefault();m(b)});b.on("hide",function(){m(b)});b.$el.on("click",".view-merge-veto-details-button",function(){b.hide();l.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help")});return b}function G(){(0,c.default)(this).closest(".commit-message-form").removeClass("collapsed")}
function m(e){e.$el.find(".commit-message").val("");e.$el.find(".commit-message-form").addClass("collapsed")}Object.defineProperty(n,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(v),c=babelHelpers.interopRequireDefault(w),q=babelHelpers.interopRequireDefault(x),h=babelHelpers.interopRequireDefault(z),t=babelHelpers.interopRequireDefault(A),l=babelHelpers.interopRequireDefault(B),r=babelHelpers.interopRequireDefault(C),F=babelHelpers.interopRequireDefault(D),e=void 0;n.default=
{onMergeClick:function(){e.show();m(e);e.$el.find(".confirm-button").focus()},initMergeDialog:function(c){var b=c.callback,f=c.mergeTimeout;t.default.rest({url:q.default.rest().currentRepo().pullRequestSettings().build(),type:"GET"}).done(function(c){var g=h.default.getPullRequest(),d=c.mergeConfig.strategies.filter(function(a){return a.enabled}).filter(function(a){return a.id!==c.mergeConfig.defaultStrategy.id});d.unshift(c.mergeConfig.defaultStrategy);d={dialog:{person:h.default.getCurrentUser()&&
h.default.getCurrentUser().toJSON(),pullRequest:g.toJSON(),mergeStrategies:d,defaultStrategy:c.mergeConfig.defaultStrategy},ajax:{statusCode:{400:function(a,b,d,c,f){a=e.$el.find(".aui-dialog2-content");c.errors&&(a.children(".aui-message").remove(),a.prepend(bitbucket.internal.feature.pullRequest.merge.errors({errors:c.errors})));return!1},401:function(a,b,d,c,f){e.hide();return babelHelpers.extends({},f,{title:"Could not merge pull request",message:"You no longer have permission to merge this pull request.",
fallbackUrl:!1,shouldReload:!0})},409:function(a,b,d,c,f){a=c.errors&&c.errors.length&&c.errors[0];b=e.$el.find(".aui-dialog2-content");if("com.atlassian.bitbucket.pull.PullRequestOutOfDateException"===a.exceptionName)b.find(".aui-message").remove(),e.hide();else if(a&&(a.isConflicted||a.conflicted||a.vetoes&&a.vetoes.length))return l.default.trigger("bitbucket.internal.pull-request.cant.merge",null,g,a.conflicted||a.isConflicted,a.vetoes),b.children(".aui-message").remove(),b.prepend(bitbucket.internal.feature.pullRequest.merge.errors({errors:c.errors})),
"false"!==e.$el.attr("aria-hidden")&&l.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help"),!1},"*":function(){e.hide()}},timeout:1E3*(f||300)},callback:function(a){b(a);e.hide()}};e=E(d)})}};u.exports=n["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-json', location = '/static/bitbucket/internal/model/pull-request-json.js' */
define("bitbucket/internal/model/pull-request-json",["exports","lodash","bitbucket/internal/model/pull-request"],function(a,c,b){Object.defineProperty(a,"__esModule",{value:!0});a.filter=a.pullRequestProperties=void 0;b=babelHelpers.interopRequireDefault(b);var d=a.pullRequestProperties=Object.keys((new b.default({})).namedAttributes);a.filter=function(a){return(0,c.pick)(a,d)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:branch-from-to', location = '/static/bitbucket/internal/bbui/branch-from-to/branch-from-to.js' */
define("bitbucket/internal/bbui/branch-from-to/branch-from-to","module exports aui classnames prop-types react react-dom ../aui-react/avatar".split(" "),function(k,f,b,l,m,e,g,n){Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(b),p=babelHelpers.interopRequireDefault(l);b=babelHelpers.interopRequireDefault(m);var d=babelHelpers.interopRequireDefault(e);b={fromRef:b.default.object.isRequired,toRef:b.default.object.isRequired};e=function(b){function c(){babelHelpers.classCallCheck(this,
c);return babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}babelHelpers.inherits(c,b);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){var a=(0,g.findDOMNode)(this);h.default.$(".ref-name",a).tooltip()}},{key:"componentWillUnmount",value:function(){var a=(0,g.findDOMNode)(this);h.default.$(".ref-name",a).tooltip("destroy")}},{key:"refItem",value:function(a,q,b,c){c=b&&!c;b=this.projectAvatar(a,!b);return d.default.createElement("div",
{className:(0,p.default)("ref-name","ref-name-"+q,{"with-avatar":b}),title:this.refTitle(a)},b,this.displayTitle(a,c))}},{key:"projectAvatar",value:function(a,b){if(b)return d.default.createElement("span",{className:"avatar-to-project avatar-ref-project"},d.default.createElement(n.ProjectAvatar,{size:"xsmall",project:a.repository.project,tagName:"span"}))}},{key:"displayTitle",value:function(a,b){return b?d.default.createElement("span",null,d.default.createElement("span",{className:"repo-name"},a.repository.name),
d.default.createElement("span",{className:"repo-name-icon"}),d.default.createElement("span",{className:"branch-name"},a.displayId)):d.default.createElement("span",{className:"branch-name"},a.displayId)}},{key:"refTitle",value:function(a){return a.repository.project.name+" / "+a.repository.name+" : "+a.displayId}},{key:"render",value:function(){var a=this.props,b=a.fromRef,a=a.toRef,c=b.repository.project.id===a.repository.project.id,e=b.repository.id===a.repository.id;return d.default.createElement("div",
{className:"branch-from-to"},this.refItem(b,"from",c,e),d.default.createElement("div",{className:"aui-icon aui-icon-small aui-iconfont-devtools-arrow-right arrow"},"to"),this.refItem(a,"to",c,e))}}]);return c}(e.Component);e.propTypes=b;f.default=e;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:codeblock', location = '/static/bitbucket/internal/bbui/codeblock/codeblock.js' */
define("bitbucket/internal/bbui/codeblock/codeblock",["module","exports","classnames","prop-types","react"],function(e,d,a,f,b){function g(a){return c.default.Children.map(a,function(a){return a.type&&"line"===a.type.toLowerCase()&&[a.props.children,"\n"]||a})}Object.defineProperty(d,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(f);var c=babelHelpers.interopRequireDefault(b);b=function(a){return c.default.createElement("div",{className:(0,
h.default)("code-block",{"instruction-block":a.instructionBlock},a.extraClasses)},c.default.createElement("pre",null,c.default.createElement("code",null,a.code||g(a.children))))};b.propTypes={instructionBlock:a.default.bool,extraClasses:a.default.string,children:a.default.node,code:a.default.string};d.default=b;e.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-title-enricher', location = '/static/bitbucket/internal/bbui/pull-request-header/pull-request-title-enricher.js' */
define("bitbucket/internal/bbui/pull-request-header/pull-request-title-enricher",["module","exports","../../util/string-replacer"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=new (babelHelpers.interopRequireDefault(b).default);a.default=b;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reviewer-avatar', location = '/static/bitbucket/internal/bbui/reviewer-avatar/reviewer-avatar.js' */
define("bitbucket/internal/bbui/reviewer-avatar/reviewer-avatar","module exports lodash prop-types react bitbucket/internal/enums ../aui-react/avatar".split(" "),function(l,e,f,b,d,g,h){function m(b,c){var a=b.user.displayName||b.user.name,d=void 0;return d=c||!b.status||b.status===g.ApprovalStatus.UNAPPROVED?a:b.status===g.ApprovalStatus.APPROVED?AJS.format("{0} marked as approved.",a):AJS.format("{0} marked as needs work.",
a)}Object.defineProperty(e,"__esModule",{value:!0});f=babelHelpers.interopRequireDefault(f);b=babelHelpers.interopRequireDefault(b);var n=babelHelpers.interopRequireDefault(d),p=babelHelpers.interopRequireDefault(h);h={avatarSize:b.default.string,reviewer:b.default.shape({user:b.default.object.isRequired,status:b.default.oneOf(f.default.values(g.ApprovalStatus)).isRequired}).isRequired,withName:b.default.bool,tooltip:b.default.bool,nameOnly:b.default.bool};var k={APPROVED:"approved",NEEDS_WORK:"needs-work"},
q=[{className:k.APPROVED,text:"Approved"},{className:k.NEEDS_WORK,text:"Needs work"}];d=function(b){function c(){babelHelpers.classCallCheck(this,c);return babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}babelHelpers.inherits(c,b);babelHelpers.createClass(c,[{key:"shouldComponentUpdate",value:function(a){return this.props.reviewer.user.name!==
a.reviewer.user.name||this.props.reviewer.status!==a.reviewer.status||this.props.avatarSize!==a.avatarSize||Boolean(this.props.nameOnly)!==Boolean(a.nameOnly)||Boolean(this.props.tooltip)!==Boolean(a.tooltip)||Boolean(this.props.withName)!==Boolean(a.withName)}},{key:"render",value:function(){var a=this.props;return n.default.createElement(p.default,{person:a.reviewer.user,size:a.avatarSize,badges:q,tooltipText:m(a.reviewer,a.nameOnly),visibleBadge:a.reviewer.status?k[a.reviewer.status]:"",withName:a.withName,
tooltip:a.tooltip})}}]);return c}(d.Component);d.propTypes=h;e.default=d;l.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:tipsy', location = '/static/bitbucket/internal/bbui/tipsy/tipsy.js' */
define("bitbucket/internal/bbui/tipsy/tipsy","module exports jquery prop-types react react-dom".split(" "),function(f,d,a,g,b,h){Object.defineProperty(d,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(g);var k=babelHelpers.interopRequireDefault(b);a={children:a.default.node,title:a.default.string,className:a.default.string,delay:a.default.number};b=function(a){function c(a){babelHelpers.classCallCheck(this,c);var b=babelHelpers.possibleConstructorReturn(this,
(c.__proto__||Object.getPrototypeOf(c)).call(this,a));b.tipsyProps={title:a.title,className:a.className,delay:a.delay};return b}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"componentDidMount",value:function(){var a=(0,h.findDOMNode)(this);this.props.delay?setTimeout(function(){(0,e.default)(a).tooltip()},this.props.delay):(0,e.default)(a).tooltip()}},{key:"render",value:function(){return k.default.createElement("span",this.tipsyProps,this.props.children)}}]);return c}(b.Component);
d.default=b;b.propTypes=a;f.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:self-reviewer', location = '/static/bitbucket/internal/bbui/self-reviewer/self-reviewer.js' */
define("bitbucket/internal/bbui/self-reviewer/self-reviewer","module exports aui classnames prop-types react bitbucket/internal/enums ../aui-react/inline-dialog ../reviewer-avatar/reviewer-avatar ../tipsy/tipsy".split(" "),function(n,g,b,p,q,f,k,l,h,r){Object.defineProperty(g,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(b),t=babelHelpers.interopRequireDefault(p);b=babelHelpers.interopRequireDefault(q);var a=babelHelpers.interopRequireDefault(f),u=babelHelpers.interopRequireDefault(l),
v=babelHelpers.interopRequireDefault(h),m=babelHelpers.interopRequireDefault(r);h={currentUserAsReviewer:b.default.object,isWatching:b.default.bool,onSelfClick:b.default.func.isRequired,removeSelfModalId:b.default.string.isRequired};f=function(b){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.state={hovered:!1};return a}babelHelpers.inherits(d,b);babelHelpers.createClass(d,[{key:"mouseEnter",
value:function(a){this.setState({hovered:!0})}},{key:"mouseLeave",value:function(a){this.setState({hovered:!1})}},{key:"createUnwatchMarkup",value:function(){return{__html:"\u003cstrong\u003eUnwatch\u003c/strong\u003e this pull request."}}},{key:"render",value:function(){var c=this,b=this.props.currentUserAsReviewer,d=a.default.createElement("p",null,a.default.createElement("label",null,a.default.createElement("input",{className:"checkbox",type:"checkbox",ref:function(a){c._unwatchCheckbox=
a}}),a.default.createElement("span",{dangerouslySetInnerHTML:this.createUnwatchMarkup()})));return b?a.default.createElement("div",{className:(0,t.default)("self-avatar",{jsHover:this.state.hovered,reviewing:this.props.currentUserAsReviewer}),onMouseEnter:function(){return c.mouseEnter()},onMouseLeave:function(){return c.mouseLeave()}},a.default.createElement(m.default,{key:"remove-self",title:"Remove yourself as a reviewer",className:"remove-self",delay:500},a.default.createElement(l.InlineDialogTrigger,
{dialogId:this.props.removeSelfModalId,className:"aui-button"},"\u2013")),a.default.createElement(u.default,{key:"remove_self_dialog",id:this.props.removeSelfModalId,className:"remove-self-dialog",alignment:"bottom right"},a.default.createElement("h5",null,"Confirm removal"),a.default.createElement("p",null,"Please confirm if you want to remove yourself as a reviewer."),this.props.isWatching?d:null,a.default.createElement("p",
null,a.default.createElement("button",{className:"aui-button",onClick:function(a){return c.props.onSelfClick(k.SelfAction.REMOVE_SELF,c._unwatchCheckbox?c._unwatchCheckbox.checked:null)}},"Remove as reviewer"))),a.default.createElement(v.default,{reviewer:b,tooltip:!1})):a.default.createElement("div",{className:"self-avatar"},a.default.createElement(m.default,{key:"add-self",ref:function(a){c._add_self=a},title:"Add yourself as a reviewer",
className:"add-self"},a.default.createElement("button",{onClick:function(){c.setState({hovered:!1});c.props.onSelfClick(k.SelfAction.ADD_SELF)},className:"aui-button"},"+")))}}]);return d}(f.Component);f.propTypes=h;g.default=f;n.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reviewer-avatar-list', location = '/static/bitbucket/internal/bbui/reviewer-avatar-list/reviewer-avatar-list.js' */
define("bitbucket/internal/bbui/reviewer-avatar-list/reviewer-avatar-list","module exports aui classnames lodash prop-types react bitbucket/internal/enums ../aui-react/inline-dialog ../reviewer-avatar/reviewer-avatar ../self-reviewer/self-reviewer".split(" "),function(r,f,a,t,u,v,g,w,m,x,y){function z(b){return b.slice().sort(function(b,a){return n[b.status]-n[a.status]||b.user.displayName.localeCompare(a.user.displayName)})}Object.defineProperty(f,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(a),
p=babelHelpers.interopRequireDefault(t),A=babelHelpers.interopRequireDefault(u);a=babelHelpers.interopRequireDefault(v);var e=babelHelpers.interopRequireDefault(g),l=babelHelpers.interopRequireDefault(w),B=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(x),C=babelHelpers.interopRequireDefault(y),d;g={avatarSize:a.default.string,currentUserAsReviewer:a.default.object,currentUserAvatarSize:a.default.string,dialogReviewersAsTooltip:a.default.bool,isWatching:a.default.bool,
maxOpen:a.default.number,menuId:a.default.string.isRequired,onSelfClick:a.default.func,permissionToReview:a.default.bool.isRequired,pullRequestIsOpen:a.default.bool.isRequired,reverse:a.default.bool,reviewers:a.default.array.isRequired,triggerClass:a.default.string};var n={APPROVED:1,NEEDS_WORK:2,UNAPPROVED:3},D=(d={},babelHelpers.defineProperty(d,l.default.ApprovalStatus.APPROVED,"Approved"),babelHelpers.defineProperty(d,l.default.ApprovalStatus.NEEDS_WORK,
"Needs work"),d);d=function(b){var a=z(b.reviewers),c=b.currentUserAsReviewer?A.default.findIndex(a,function(a){return a.user.name===(b.currentUserAsReviewer.name||b.currentUserAsReviewer.user.name)}):-1,d=b.permissionToReview&&b.pullRequestIsOpen,f=d?b.maxOpen-1:b.maxOpen;-1<c&&(c=a.splice(c,1)[0],d&&!b.currentUserAvatarSize||a.unshift(c));var g=void 0,c=void 0;a.length>f?(g=a.slice(0,f-1),c=a.slice(f-1)):(g=a,c=[]);a=g.map(function(a){return e.default.createElement(q.default,
{reviewer:a,key:a.user.name,avatarSize:b.currentUserAsReviewer&&b.currentUserAvatarSize&&a.user.name===b.currentUserAsReviewer.name?b.currentUserAvatarSize:"small"})}).slice();d&&a.unshift(e.default.createElement(C.default,{removeSelfModalId:"remove-self-modal",currentUserAsReviewer:b.currentUserAsReviewer,isWatching:b.isWatching,key:"self_reviewer",onSelfClick:b.onSelfClick}));if(c.length)if(b.dialogReviewersAsTooltip){var h="";c.map(function(a,b,c){h+=k.default.escapeHtml(a.user.displayName);a.status!==
l.default.ApprovalStatus.UNAPPROVED&&(h+=" ("+D[a.status]+")");b+1<c.length&&(h+="\x3cbr\x3e")});a.push(e.default.createElement("button",{className:"overflow-reviewers-trigger overflow-reviewers-tooltip aui-button aui-button-subtle",key:"overflow-reviewers-tooltip",title:h,ref:function(a){return k.default.$(a).tooltip({html:!0})}},"+",c.length))}else a.push(e.default.createElement(m.InlineDialogTrigger,{key:"trigger",dialogId:b.menuId,className:(0,p.default)("aui-button-subtle overflow-reviewers-trigger",
b.triggerClass)},"+",c.length)),a.push(e.default.createElement(B.default,{key:"dialog",id:b.menuId,className:"overflow-reviewers",alignment:b.reverse?"left top":"bottom right"},e.default.createElement("div",{className:"avatar-dropdown"},e.default.createElement("ul",{className:"aui-list-truncate"},c.map(function(a){return e.default.createElement("li",{key:a.user.name},e.default.createElement(q.default,{reviewer:a,tooltip:!1,nameOnly:!0,withName:!0}))})))));return e.default.createElement("div",{className:(0,
p.default)("reviewer-avatar-list",{reviewing:b.currentUserAsReviewer,reversed:b.reverse})},b.reverse?a.reverse():a)};d.propTypes=g;f.default=d;r.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reviewer-status', location = '/static/bitbucket/internal/bbui/reviewer-status/reviewer-status.js' */
define("bitbucket/internal/bbui/reviewer-status/reviewer-status","module exports aui classnames lodash prop-types react bitbucket/internal/enums".split(" "),function(l,c,d,m,n,a,b,f){Object.defineProperty(c,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(d),p=babelHelpers.interopRequireDefault(m);d=babelHelpers.interopRequireDefault(n);a=babelHelpers.interopRequireDefault(a);var h=babelHelpers.interopRequireDefault(b);b={currentUserAsReviewer:a.default.object,onStatusClick:a.default.func.isRequired,
status:a.default.oneOf(d.default.values(f.ApprovalStatus))};var k={approve:"Approve &mdash; This pull request is ready to merge","approve-deselect":"Remove approval","needs-work":"Needs work &mdash; This pull request shouldn\u0027t be merged yet","needs-work-deselect":"Remove Needs work"};a=function(a){function c(d,b){var g=a.status===
d;return h.default.createElement("button",{className:"aui-button "+b,"aria-pressed":g,title:k[b+(g?"-deselect":"")],onClick:function(){return a.onStatusClick({newStatus:g?f.ApprovalStatus.UNAPPROVED:d})},ref:function(a){return e.default.$(a).tooltip({html:!0})}},h.default.createElement("span",null,k[b+(g?"-deselect":"")]))}return h.default.createElement("div",{className:(0,p.default)("aui-buttons","reviewer-status-selector",{reviewing:a.currentUserAsReviewer}),"data-status":a.status},c(f.ApprovalStatus.NEEDS_WORK,
"needs-work"),c(f.ApprovalStatus.APPROVED,"approve"))};a.propTypes=b;c.default=a;l.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:web-fragments', location = '/static/bitbucket/internal/bbui/web-fragments/web-fragments.js' */
define("bitbucket/internal/bbui/web-fragments/web-fragments",["exports","../javascript-errors/javascript-errors"],function(a,c){Object.defineProperty(a,"__esModule",{value:!0});a.FragmentType=void 0;a.FragmentType={ITEM:"ITEM",SECTION:"SECTION",PANEL:"PANEL"};var e=function(){function a(){babelHelpers.classCallCheck(this,a)}babelHelpers.createClass(a,[{key:"getWebItems",value:function(b,d){throw new c.NotImplementedError;}},{key:"getWebSections",value:function(b,d){throw new c.NotImplementedError;
}},{key:"getWebPanels",value:function(b,d){throw new c.NotImplementedError;}},{key:"getWebFragments",value:function(b,d,a){throw new c.NotImplementedError;}}],[{key:"getExampleItem",value:function(b,d){var a=d&&Object.keys(d).join(", ")||"(none)";return{type:"ITEM",completeModuleKey:b+":example-web-item",weight:1E3,location:b,url:"#example-web-item-url",key:"example-web-item",text:"Client Web Item: "+b,params:{},id:null,cssClass:"plugin-point",tooltip:"Client Context Items: "+a,iconUrl:null,iconWidth:0,
iconHeight:0}}},{key:"getExampleSection",value:function(b,a){return{type:"SECTION",completeModuleKey:b+":example-web-section",weight:1E3,location:b,key:"example-web-section",text:"Client Web Section: "+b,params:{}}}},{key:"getExamplePanel",value:function(b,a){var c=a&&Object.keys(a).join(", ")||"(none)";return{type:"PANEL",completeModuleKey:b+":example-web-panel",weight:1E3,location:b,key:"example-web-panel",html:'\x3cdiv class\x3d"plugin-point web-panel"\x3e\x3cstrong\x3eClient Web Panel\x3c/strong\x3e: '+
b+"\x3cbr /\x3e\x3cstrong\x3eClient Context Items\x3c/strong\x3e: "+c+"\x3c/div\x3e",params:{}}}}]);return a}();a.default=e});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-web-fragments', location = '/static/bitbucket/internal/impl/web-fragments.js' */
define("bitbucket/internal/impl/web-fragments",["module","exports","lodash","bitbucket/internal/bbui/web-fragments/web-fragments","bitbucket/internal/util/object"],function(m,e,n,p,q){function h(b){return k.default.transform(b,function(a,b,d){a[d]=b&&b._stash?b._stash:b},{})}function c(){l.default.apply(this,arguments);this._handlers={}}function f(b,a,c){return function(d,g){return this._handlers[d]?this._handlers[d](d,[b],h(g),g):window.WebFragments[a](d,h(g)).map(c.bind(null,d))}}Object.defineProperty(e,
"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(n),l=babelHelpers.interopRequireDefault(p);babelHelpers.interopRequireDefault(q).default.inherits(c,l.default);c.prototype.getWebItems=f("ITEM","getWebItems",function(b,a){return{type:"ITEM",weight:a.weight,location:b,url:a.url,key:a.moduleKey,text:a.linkText,params:a.params,id:a.linkId,cssClass:a.styleClass,tooltip:a.tooltip,iconUrl:a.iconUrl||null,iconWidth:a.iconWidth||0,iconHeight:a.iconHeight||0,description:a.description}});c.prototype.getWebSections=
f("SECTION","getWebSections",function(b,a){return{type:"SECTION",weight:a.weight,location:b,key:a.key,text:a.labelText,params:a.params,description:a.description}});c.prototype.getWebPanels=f("PANEL","_getWebPanels",function(b,a){return{type:"PANEL",weight:a.weight,location:b,key:a.key,html:a.view,params:a.params,description:a.description}});c.prototype.getWebFragments=function(b,a,c){var d=this;return(0,k.default)(a).map(function(a){switch(a){case "ITEM":return d.getWebItems(b,c);case "SECTION":return d.getWebSections(b,
c);case "PANEL":return d.getWebPanels(b,c)}}).flatten().sortBy("weight").value()};c.prototype.registerHandler=function(b,a){if(this._handlers[b])throw Error("Location "+b+" is being double handled.");this._handlers[b]=a};e.default=new c;m.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/actions.js' */
define("bitbucket/internal/bbui/pull-request-header/actions",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.PR_HIDE_MERGE_ERRORS="PR_HIDE_MERGE_ERRORS";a.PR_SHOW_MERGE_ERRORS="PR_SHOW_MERGE_ERRORS"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge-instructions.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge-instructions","module exports prop-types react bitbucket/internal/enums bitbucket/internal/impl/urls ../../codeblock/codeblock".split(" "),function(n,b,h,l,d,p,q){Object.defineProperty(b,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(h),a=babelHelpers.interopRequireDefault(l),m=babelHelpers.interopRequireDefault(p),g=babelHelpers.interopRequireDefault(q);h=function(b){function e(){var a;babelHelpers.classCallCheck(this,
e);for(var c=arguments.length,b=Array(c),f=0;f<c;f++)b[f]=arguments[f];c=babelHelpers.possibleConstructorReturn(this,(a=e.__proto__||Object.getPrototypeOf(e)).call.apply(a,[this].concat(b)));a=c.props.pullRequest.fromRef.repository;var b=c.props.pullRequest.toRef.repository,d=f=null;a.id!==b.id&&(f=m.default.remote(a),d=m.default.remote(b));c.refDetails={sourceBranch:c.props.pullRequest.fromRef.displayId,targetBranch:c.props.pullRequest.toRef.displayId,sourceRemote:f,targetRemote:d};return c}babelHelpers.inherits(e,
b);babelHelpers.createClass(e,null,[{key:"propTypes",get:function(){return{stability:k.default.oneOf(Object.keys(d.BranchStability).map(function(a){return d.BranchStability[a]})),isAutoMergeConflict:k.default.bool,pullRequest:k.default.object.isRequired}}},{key:"defaultProps",get:function(){return{stability:d.BranchStability.STABLE}}}]);babelHelpers.createClass(e,[{key:"mergeSteps",value:function(){return this.props.stability===d.BranchStability.STABLE||this.props.isAutoMergeConflict?a.default.createElement("div",
null,a.default.createElement("p",null,a.default.createElement("strong",null,"Step 1:"," "),"Checkout the target branch and merge in the changes from the source branch. Resolve conflicts."),a.default.createElement(g.default,{instructionBlock:!0},a.default.createElement("line",null,"git checkout ",this.refDetails.targetBranch),a.default.createElement("line",null,"git pull ",this.refDetails.sourceRemote?this.refDetails.sourceRemote:"origin",
" ",this.refDetails.sourceBranch)),a.default.createElement("p",null,a.default.createElement("strong",null,"Step 2:"," "),"After the merge conflicts are resolved, stage the changes accordingly, commit the changes and push."),a.default.createElement(g.default,{instructionBlock:!0},a.default.createElement("line",null,"git commit"),a.default.createElement("line",null,"git push ",this.refDetails.targetRemote?this.refDetails.targetRemote:"origin"," HEAD")),a.default.createElement("p",
null,a.default.createElement("strong",null,"Step 3:"," "),"The pull request will be updated and marked as merged.")):a.default.createElement("div",null,a.default.createElement("p",null,a.default.createElement("strong",null,"Step 1:"," "),"Checkout the source branch and merge in the changes from the target branch. Resolve conflicts."),a.default.createElement(g.default,{instructionBlock:!0},
a.default.createElement("line",null,"git checkout ",this.refDetails.sourceBranch),a.default.createElement("line",null,"git pull ",this.refDetails.targetRemote?this.refDetails.targetRemote:"origin"," ",this.refDetails.targetBranch)),a.default.createElement("p",null,a.default.createElement("strong",null,"Step 2:"," "),"After the merge conflicts are resolved, stage the changes accordingly, commit the changes and push."),a.default.createElement(g.default,{instructionBlock:!0},
a.default.createElement("line",null,"git commit"),a.default.createElement("line",null,"git push ",this.refDetails.sourceRemote?this.refDetails.sourceRemote:"origin"," HEAD")),a.default.createElement("p",null,a.default.createElement("strong",null,"Step 3:"," "),"Merge the updated pull request."))}},{key:"render",value:function(){var b="This pull request has conflicts.";
this.props.isAutoMergeConflict&&(b="Automatic merge failed because there were conflicts.");var c=AJS.format("You must resolve the conflicts by manually merging {0} into this branch. After the conflicts are resolved you will be able to merge the pull request.",this.refDetails.targetBranch);if(this.props.stability===d.BranchStability.STABLE||this.props.isAutoMergeConflict)c=AJS.format("You must resolve the conflicts by manually merging this branch into {0}. This will merge the pull request remotely.",this.refDetails.targetBranch);return a.default.createElement("div",{className:"merge-instructions"},
a.default.createElement("p",{className:"intro"},b),a.default.createElement("p",{className:"intro"},c),this.mergeSteps())}}]);return e}(l.Component);b.default=h;n.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge-help-dialog.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge-help-dialog","module exports aui prop-types react bitbucket/internal/enums ../../aui-react/component ./merge-instructions".split(" "),function(l,b,f,m,g,h,n,p){Object.defineProperty(b,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(f),d=babelHelpers.interopRequireDefault(m),k=babelHelpers.interopRequireDefault(g),q=babelHelpers.interopRequireDefault(n),r=babelHelpers.interopRequireDefault(p);f=function(b){function a(){babelHelpers.classCallCheck(this,
a);return babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}babelHelpers.inherits(a,b);babelHelpers.createClass(a,[{key:"componentDidMount",value:function(){var c=this;this.dialog=e.default.dialog2(document.querySelector("#"+this.props.id));this.dialog.on("hide",function(){c.dialog.$el.remove();c.props.onHide()});this.dialog.$el.find("#merge-help-dialog-close-button").on("click",function(){return c.dialog.hide()});this.dialog.show()}},{key:"render",
value:function(){var c=this.props,a="Merge conflict";this.props.isAutoMergeConflict&&(a="Auto-merge conflict");var b="Close";return k.default.createElement(q.default,{id:c.id,markup:'\n                \x3csection role\x3d"dialog" id\x3d"'+c.id+'" aria-hidden\x3d"true" class\x3d"aui-layer aui-dialog2 aui-dialog2-large"\x3e\n                    \x3cheader class\x3d"aui-dialog2-header"\x3e\n                        \x3ch2 class\x3d"aui-dialog2-header-main"\x3e'+
a+'\x3c/h2\x3e\n                        \x3ca class\x3d"aui-dialog2-header-close"\x3e\n                            \x3cspan class\x3d"aui-icon aui-icon-small aui-iconfont-close-dialog"\x3e'+b+'\x3c/span\x3e\n                        \x3c/a\x3e\n                    \x3c/header\x3e\n                    \x3cdiv class\x3d"aui-dialog2-content"\x3e\n                        \x3cdiv class\x3d"merge-help"\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cfooter class\x3d"aui-dialog2-footer"\x3e\n                        \x3cdiv class\x3d"aui-dialog2-footer-actions"\x3e\n                            \x3cbutton id\x3d"merge-help-dialog-close-button" class\x3d"aui-button aui-button-link"\x3e'+
b+"\x3c/button\x3e\n                        \x3c/div\x3e\n                    \x3c/footer\x3e\n                \x3c/section\x3e\n        ",containerSelector:"#"+c.id+" .aui-dialog2-content .merge-help"},k.default.createElement(r.default,{pullRequest:this.props.pullRequest,stability:this.props.stability,isAutoMergeConflict:this.props.isAutoMergeConflict}))}}],[{key:"propTypes",get:function(){return{id:d.default.string.isRequired,onHide:d.default.func.isRequired,stability:d.default.oneOf(Object.keys(h.BranchStability).map(function(a){return h.BranchStability[a]})),
isAutoMergeConflict:d.default.bool,pullRequest:d.default.object.isRequired}}}]);return a}(g.Component);b.default=f;l.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/reopen-button.js' */
define("bitbucket/internal/bbui/pull-request-header/components/reopen-button","module exports prop-types react react-dom ../../aui-react/spinner".split(" "),function(k,d,b,a,l,e){Object.defineProperty(d,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);var f=babelHelpers.interopRequireDefault(a),m=babelHelpers.interopRequireDefault(e);e={onReOpenClick:b.default.func.isRequired,enabled:b.default.bool};a=function(a){function c(a){babelHelpers.classCallCheck(this,c);var g=babelHelpers.possibleConstructorReturn(this,
(c.__proto__||Object.getPrototypeOf(c)).call(this,a));g.state={enabled:a.enabled};return g}babelHelpers.inherits(c,a);babelHelpers.createClass(c,[{key:"componentWillUpdate",value:function(a,c){if(!c.enabled){var h=(0,l.findDOMNode)(this),b=h.getBoundingClientRect();h.style.width=b.right-b.left+"px"}}},{key:"onClick",value:function(){var a=this;this.props.onReOpenClick().fail(function(){a.setState({enabled:!0})});this.setState({enabled:!1})}},{key:"render",value:function(){var a=this,c="Re-open for discussion",
b="Re-open";this.state.enabled||(b=f.default.createElement(m.default,null));return f.default.createElement("button",{onClick:function(){return a.onClick()},className:"aui-button aui-button-primary reopen-button","aria-disabled":!this.state.enabled,title:c},b)}}]);return c}(a.Component);a.propTypes=e;a.defaultProps={enabled:!0};d.default=a;k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/pull-request-more.js' */
define("bitbucket/internal/bbui/pull-request-header/components/pull-request-more","module exports classnames jquery lodash prop-types react bitbucket/internal/enums bitbucket/internal/impl/web-fragments ../../aui-react/component".split(" "),function(h,g,b,k,p,q,e,m,f,r){Object.defineProperty(g,"__esModule",{value:!0});var t=babelHelpers.interopRequireDefault(b),c=babelHelpers.interopRequireDefault(k),n=babelHelpers.interopRequireDefault(p);b=babelHelpers.interopRequireDefault(q);var a=babelHelpers.interopRequireDefault(e),
l=babelHelpers.interopRequireDefault(f),u=babelHelpers.interopRequireDefault(r);f={onMoreAction:b.default.func.isRequired,isWatching:b.default.bool.isRequired,conditions:b.default.objectOf(b.default.bool).isRequired,pullRequest:b.default.object.isRequired};e=function(b){function d(){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));a.dropdownIsVisible=!1;a.throttledTriggerHideOnScroll=n.default.throttle(function(){this.dropdownIsVisible&&
(0,c.default)(".pull-request-more-trigger").trigger("aui-button-invoke")}.bind(a),50);return a}babelHelpers.inherits(d,b);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var a=this;(0,c.default)("#pull-request-header-more").on({"aui-dropdown2-show":function(){a.dropdownIsVisible=!0},"aui-dropdown2-hide":function(b){(0,c.default)(b.target).hide();a.dropdownIsVisible=!1}});(0,c.default)(document).on("scroll",this.throttledTriggerHideOnScroll)}},{key:"componentWillUnmount",value:function(){(0,
c.default)("#pull-request-header-more").off("aui-dropdown2-hide");(0,c.default)(document).off("scroll",this.throttledTriggerHideOnScroll)}},{key:"render",value:function(){var b=this,c=void 0,d=void 0,e=void 0,g=this.props.pullRequest.state===m.PullRequestState.OPEN,f=this.props.pullRequest.state===m.PullRequestState.MERGED,h=l.default.getWebItems("bitbucket.pullrequest.action",{pullRequest:this.props.pullRequest}),k=n.default.flatten(l.default.getWebSections("bitbucket.internal.pullrequest.toolbar.deprecated").map(function(a){return l.default.getWebItems("bitbucket.internal.pullrequest.toolbar.deprecated/"+
a.key)}));this.props.conditions.canEdit&&!f&&(c=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"edit"},"Edit")));this.props.conditions.canDecline&&g&&(d=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"decline"},"Decline")));
this.props.conditions.canDelete&&!f&&(e=a.default.createElement("li",null,a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"delete"},"Delete")));return a.default.createElement("div",null,a.default.createElement("button",{className:"pull-request-more-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless","aria-haspopup":"true","aria-owns":"pull-request-header-more"},
a.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-more"},"More")),a.default.createElement(u.default,{id:"pull-request-header-more",markup:'\x3cdiv class\x3d"aui-style-default aui-dropdown2"\x3e\x3c/div\x3e',wrapperClass:"aui-dropdown2-section"},a.default.createElement("ul",{className:"aui-list-truncate",onClick:function(a){return b.props.onMoreAction(a.target.dataset.action)}},c,d,e,a.default.createElement("li",null,
a.default.createElement("button",{className:"aui-button aui-button-link",role:"menuitem","data-action":"watch"},this.props.isWatching?"Unwatch":"Watch")),h.concat(k).map(function(b){return a.default.createElement("li",{key:b.completeModuleKey||b.key},b.url?a.default.createElement("a",{href:b.url,className:b.cssClass,id:b.id,title:b.tooltip},b.text):a.default.createElement("button",{className:(0,t.default)("aui-button aui-button-link",
b.cssClass),role:"menuitem",id:b.id,title:b.tooltip},b.text))}))))}}]);return d}(e.Component);e.propTypes=f;g.default=e;h.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge","module exports jquery lodash prop-types react bitbucket/internal/enums ../../aui-react/inline-dialog ./merge-button ./merge-help-dialog".split(" "),function(m,h,k,n,p,l,q,r,t,u){Object.defineProperty(h,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(k),v=babelHelpers.interopRequireDefault(n),g=babelHelpers.interopRequireDefault(p),b=babelHelpers.interopRequireDefault(l),w=babelHelpers.interopRequireDefault(r),
x=babelHelpers.interopRequireDefault(t),y=babelHelpers.interopRequireDefault(u);k=function(h){function e(){var c;babelHelpers.classCallCheck(this,e);for(var a=arguments.length,d=Array(a),b=0;b<a;b++)d[b]=arguments[b];a=babelHelpers.possibleConstructorReturn(this,(c=e.__proto__||Object.getPrototypeOf(e)).call.apply(c,[this].concat(d)));a.state={};return a}babelHelpers.inherits(e,h);babelHelpers.createClass(e,null,[{key:"propTypes",get:function(){return{conditions:g.default.object.isRequired,mergeHelp:g.default.object,
onMergeClick:g.default.func.isRequired,onMergeHelpDialogClose:g.default.func,pullRequest:g.default.object.isRequired,showMergeHelpDialog:g.default.bool}}}]);babelHelpers.createClass(e,[{key:"componentDidMount",value:function(){var c=this;this.mergeWarningDialog=document.getElementById("merge-warning-inline-dialog");this.throttledWarningDialogHide=v.default.throttle(function(){c.mergeWarningDialog&&(c.mergeWarningDialog.open=!1)},50);(0,f.default)(window).on("scroll resize",this.throttledWarningDialogHide);
this.onToggleMergeWarningDialog=function(a){c.setState({mergeWarningDialogOpen:"aui-show"===a.type?!0:!1})};(0,f.default)(this.mergeWarningDialog).on("aui-show aui-hide",this.onToggleMergeWarningDialog)}},{key:"componentWillReceiveProps",value:function(c){this.setState({mergeHelpDialogShowing:c.showMergeHelpDialog})}},{key:"componentWillUnmount",value:function(){(0,f.default)(window).off("scroll resize",this.throttledWarningDialogHide);(0,f.default)(this.mergeWarningDialog).off("aui-show aui-hide",
this.onToggleMergeWarningDialog)}},{key:"onHideMergeHelpDialog",value:function(){this.extendedMergeHelpContent="";this.setState({mergeHelpDialogShowing:!1});if(this.props.onMergeHelpDialogClose)this.props.onMergeHelpDialogClose()}},{key:"onMergeWarningClick",value:function(){this.toggleMergeWarningDialog()}},{key:"toggleMergeWarningDialog",value:function(c){null==c&&(c=!this.mergeWarningDialog.open);var a=(0,f.default)(this.mergeWarningDialog),b=a.find(".merge-warning-content .aui-list-truncate");
b.css({"max-height":0});this.mergeWarningDialog.open=c;c=(0,f.default)(window).height()-a.offset().top-a.outerHeight()-10;b.css({"max-height":Math.min(300,c)})}},{key:"showExtendedMergeHelp",value:function(){this.setState({mergeHelpDialogShowing:!0})}},{key:"render",value:function(){var c=this,a=this.props.pullRequest;if(a.state===q.PullRequestState.OPEN&&a.mergeable){var d=[].concat(a.mergeable.vetoes||[]);a.mergeable.conflicted&&d.unshift({detailedMessage:"Merge conflict.",
isConflictVeto:!0});this.props.conditions.canMerge||d.push({detailedMessage:"You do not have sufficient permissions to perform the merge."});var e=void 0;this.state.mergeHelpDialogShowing&&(e=b.default.createElement(y.default,{id:"extended-merge-help-dialog",onHide:function(){return c.onHideMergeHelpDialog()},pullRequest:a,stability:this.props.mergeHelp&&this.props.mergeHelp.stability,isAutoMergeConflict:this.props.mergeHelp&&this.props.mergeHelp.isAutoMergeConflict}));d=b.default.createElement(w.default,
{key:"merge-warning-dialog",id:"merge-warning-inline-dialog",alignment:"bottom"},b.default.createElement("div",{className:"merge-warning-content"},b.default.createElement("h6",null,"Merge issues"),b.default.createElement("p",null,AJS.format("There {0,choice,1#is|1\u003care} {0} {0,choice,1#issue|1\u003cissues} preventing you from merging this pull request.",d&&d.length)),b.default.createElement("ul",{className:"aui-list-truncate"},d&&d.map(function(a,d){var e=a.isConflictVeto?b.default.createElement("button",
{className:"aui-button aui-button-link more-info",onClick:function(){return c.showExtendedMergeHelp()}},"Show details"):null;return b.default.createElement("li",{key:"merge-issue-"+d},b.default.createElement("span",{className:"message"},b.default.createElement("span",{className:"aui-icon aui-icon-small aui-iconfont-warning"}),a.detailedMessage),e)}))));return b.default.createElement("div",null,b.default.createElement(x.default,{onMergeClick:this.props.onMergeClick,
onMergeWarningClick:function(){return c.onMergeWarningClick()},mergeable:a.mergeable,conditions:this.props.conditions,conflicted:a.mergeable.conflicted,vetoes:a.mergeable.vetoes,extraButtonProps:{"aria-controls":"merge-warning-inline-dialog","aria-haspopup":!0},tooltipVisibility:!this.state.mergeWarningDialogOpen}),d,e)}return null}}]);return e}(l.Component);h.default=k;m.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/components/merge-button.js' */
define("bitbucket/internal/bbui/pull-request-header/components/merge-button","module exports classnames jquery prop-types react react-dom ../../aui-react/spinner".split(" "),function(m,e,f,n,p,h,g,q){Object.defineProperty(e,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(f),k=babelHelpers.interopRequireDefault(n),c=babelHelpers.interopRequireDefault(p),l=babelHelpers.interopRequireDefault(h),t=babelHelpers.interopRequireDefault(q);f=function(e){function d(a){babelHelpers.classCallCheck(this,
d);a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a));a.state={canMerge:a.props.mergeable.canMerge&&a.props.conditions.canMerge};return a}babelHelpers.inherits(d,e);babelHelpers.createClass(d,null,[{key:"propTypes",get:function(){return{conflicted:c.default.bool,conditions:c.default.object.isRequired,mergeable:c.default.shape({isChecking:c.default.bool,canMerge:c.default.bool}),onMergeClick:c.default.func.isRequired,onMergeWarningClick:c.default.func.isRequired,
extraButtonProps:c.default.object,vetoes:c.default.arrayOf(c.default.shape({detailedMessage:c.default.string.isRequired})),tooltipVisibility:c.default.bool}}},{key:"defaultProps",get:function(){return{conflicted:!1,mergeable:{isChecking:!1,canMerge:!0},extraButtonProps:{}}}}]);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var a=(0,g.findDOMNode)(this);(0,k.default)(a).tooltip({gravity:"ne",live:!0})}},{key:"componentWillReceiveProps",value:function(a){this.setState({canMerge:a.mergeable.canMerge&&
a.conditions.canMerge})}},{key:"componentWillUpdate",value:function(a){var b=(0,g.findDOMNode)(this);a.mergeable.isChecking?(a=b.getBoundingClientRect(),b.style.width=a.right-a.left+"px"):b.style.width="";b.getAttribute("title")||(b.setAttribute("title",b.getAttribute("original-title")||""),b.removeAttribute("original-title"))}},{key:"componentDidUpdate",value:function(){var a=(0,g.findDOMNode)(this),b=this.props.tooltipVisibility?"enable":"disable";(0,k.default)(a).tooltip(b)}},{key:"onClick",value:function(){if(this.state.canMerge)this.props.onMergeClick();
else if(!this.props.mergeable.isChecking)this.props.onMergeWarningClick()}},{key:"mergeIssueReason",value:function(){var a="";if(!this.state.canMerge)var b=this.props,a=b.conflicted,b=b.vetoes,b=void 0===b?[]:b,a=!a||b&&0!==b.length?b&&1===b.length&&!a?b[0].detailedMessage:"This pull request can\u0027t be merged. Click for details.":"You will need to resolve conflicts to be able to merge.";return a}},{key:"render",value:function(){var a=this,b=this.props.mergeable.isChecking,
c=!b&&this.state.canMerge,d=(0,r.default)("aui-button","merge-button");return l.default.createElement("button",babelHelpers.extends({onClick:function(){return a.onClick()},className:d,"aria-disabled":!c,title:b?null:this.mergeIssueReason()},this.props.extraButtonProps),b?l.default.createElement(t.default,null):"Merge")}}]);return d}(h.Component);e.default=f;m.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:pull-request-header', location = '/static/bitbucket/internal/bbui/pull-request-header/pull-request-header.js' */
define("bitbucket/internal/bbui/pull-request-header/pull-request-header","module exports aui classnames jquery lodash prop-types react bitbucket/internal/enums ../aui-react/avatar ../branch-from-to/branch-from-to ../reviewer-avatar-list/reviewer-avatar-list ../reviewer-status/reviewer-status ./components/merge ./components/pull-request-more ./components/reopen-button ./pull-request-title-enricher".split(" "),function(n,h,k,p,q,r,a,f,d,l,t,u,v,w,x,y,z){Object.defineProperty(h,"__esModule",{value:!0});
var g=babelHelpers.interopRequireDefault(k),m=babelHelpers.interopRequireDefault(p),A=babelHelpers.interopRequireDefault(q);k=babelHelpers.interopRequireDefault(r);a=babelHelpers.interopRequireDefault(a);var c=babelHelpers.interopRequireDefault(f),B=babelHelpers.interopRequireDefault(l),C=babelHelpers.interopRequireDefault(t),D=babelHelpers.interopRequireDefault(u),E=babelHelpers.interopRequireDefault(v),F=babelHelpers.interopRequireDefault(w),G=babelHelpers.interopRequireDefault(x),H=babelHelpers.interopRequireDefault(y),
I=babelHelpers.interopRequireDefault(z);l={conditions:a.default.objectOf(a.default.bool),mergeHelp:a.default.object,currentUserAsReviewer:a.default.object,currentUserIsWatching:a.default.bool,currentUserStatus:a.default.oneOf(k.default.values(d.ApprovalStatus)),onMergeClick:a.default.func.isRequired,onReOpenClick:a.default.func.isRequired,onMergeHelpDialogClose:a.default.func,onMoreAction:a.default.func.isRequired,onSelfClick:a.default.func.isRequired,onStatusClick:a.default.func.isRequired,pullRequest:a.default.object.isRequired,
permissionToReview:a.default.bool.isRequired,showMergeHelpDialog:a.default.bool};f=function(a){function e(b){babelHelpers.classCallCheck(this,e);b=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,b));b.state={prTitle:{__html:g.default.escapeHtml(b.props.pullRequest.title)}};return b}babelHelpers.inherits(e,a);babelHelpers.createClass(e,[{key:"componentDidMount",value:function(){var b=this;(0,A.default)(document).ready(function(){return b.enrichPullRequestTitle(b.props.pullRequest.title)})}},
{key:"componentWillReceiveProps",value:function(b){b.pullRequest.title!==this.props.pullRequest.title&&this.enrichPullRequestTitle(b.pullRequest.title)}},{key:"pullRequestStateReadable",value:function(b){var a,c=(a={},babelHelpers.defineProperty(a,d.PullRequestState.OPEN,"Open"),babelHelpers.defineProperty(a,d.PullRequestState.DECLINED,"Declined"),babelHelpers.defineProperty(a,
d.PullRequestState.MERGED,"Merged"),a);return c.hasOwnProperty(b)?c[b]:""}},{key:"enrichPullRequestTitle",value:function(b){var a=this;I.default.process(b,{},g.default.escapeHtml).then(function(b){a.setState({prTitle:{__html:b}})})}},{key:"render",value:function(){var b=this.props.pullRequest,a=b.state===d.PullRequestState.OPEN,e=void 0,f=void 0;b.state===d.PullRequestState.DECLINED&&this.props.conditions.canReOpen&&(e=c.default.createElement(H.default,
{onReOpenClick:this.props.onReOpenClick}));a&&(f=c.default.createElement(E.default,{currentUserAsReviewer:this.props.currentUserAsReviewer,onStatusClick:this.props.onStatusClick,status:this.props.currentUserStatus}));return c.default.createElement("div",{className:"pull-request-header"},c.default.createElement("div",{className:"flexible"},c.default.createElement("div",{className:"pull-request-metadata"},c.default.createElement(B.default,{className:"author",person:b.author,withName:!0,withLink:!0}),
c.default.createElement(C.default,{fromRef:b.fromRef,toRef:b.toRef}),c.default.createElement("div",{className:"divider"}),c.default.createElement("div",{className:(0,m.default)("status","aui-lozenge",{"aui-lozenge-complete":b.state===d.PullRequestState.OPEN,"aui-lozenge-error":b.state===d.PullRequestState.DECLINED,"aui-lozenge-success":b.state===d.PullRequestState.MERGED})},this.pullRequestStateReadable(b.state))),c.default.createElement("div",{className:(0,m.default)("pull-request-actions",{pullRequestIsOpen:a})},
c.default.createElement(D.default,{reviewers:b.reviewers,menuId:"overflow-reviewers",triggerClass:"overflow-reviewers-trigger",maxOpen:4,avatarSize:"small",reverse:!0,onSelfClick:this.props.onSelfClick,currentUserAsReviewer:this.props.currentUserAsReviewer,isWatching:this.props.currentUserIsWatching,permissionToReview:this.props.permissionToReview,pullRequestIsOpen:a}),f,c.default.createElement(F.default,{conditions:this.props.conditions,mergeHelp:this.props.mergeHelp,onMergeClick:this.props.onMergeClick,
onMergeHelpDialogClose:this.props.onMergeHelpDialogClose,pullRequest:b,showMergeHelpDialog:this.props.showMergeHelpDialog}),e,c.default.createElement(G.default,{onMoreAction:this.props.onMoreAction,isWatching:this.props.currentUserIsWatching,conditions:this.props.conditions,pullRequest:b}))),c.default.createElement("h2",{dangerouslySetInnerHTML:this.state.prTitle}))}}]);return e}(f.Component);f.propTypes=l;h.default=f;n.exports=h["default"]});;
;
/* module-key = 'se.bjurr.prnfs.pull-request-notifier-for-stash:se.bjurr.prnfb.triggerbutton', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'se.bjurr.prnfs.pull-request-notifier-for-stash','key':'se.bjurr.prnfb.triggerbutton','moduleKey':'se.bjurr.prnfb.triggerbutton','completeModuleKey':'se.bjurr.prnfs.pull-request-notifier-for-stash:se.bjurr.prnfb.triggerbutton','weight':50.0,'params':{},'location':'bitbucket.pullrequest.action','linkText':WebFragments._formatI18n("bitbucket.web.pull-request.toolbar.triggerbutton", 'bitbucket.web.pull-request.toolbar.triggerbutton', 'pr-triggerbutton')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-header', location = '/static/bitbucket/internal/feature/pull-request/header/pull-request-header-view.js' */
define("bitbucket/internal/feature/pull-request/header/pull-request-header-view","module exports aui aui/flag jquery lodash prop-types react react-redux bitbucket/util/navbuilder bitbucket/internal/bbui/aui-react/avatar bitbucket/internal/bbui/pull-request-header/pull-request-header bitbucket/internal/enums bitbucket/internal/feature/pull-request/action-creators/can-merge bitbucket/internal/feature/pull-request/action-creators/change-reviewer-status bitbucket/internal/feature/pull-request/action-creators/change-self-reviewer bitbucket/internal/feature/pull-request/action-creators/watch bitbucket/internal/feature/pull-request/edit/pull-request-edit bitbucket/internal/feature/pull-request/merge-dialog/merge-dialog bitbucket/internal/model/page-state bitbucket/internal/model/participant bitbucket/internal/model/pull-request-json bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/set-dialog-buttons-disabled bitbucket/internal/util/shortcuts bitbucket/internal/widget/submit-spinner/submit-spinner".split(" "),
function(C,r,l,D,E,m,F,n,G,H,x,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X){function Y(){function e(a){var f=a.approved?"You approved this pull request":"You removed your approval of this pull request";b(f,a)}function d(a){var f=a.watchState?"You are watching this pull request":"You are no longer watching this pull request";b(f,a)}function b(c,f){(0,m.isMatch)(f,t)&&(a&&a.close(),
a=(0,Z.default)({type:"success",title:c,close:"auto"}))}var a=void 0;h.default.on("bitbucket.internal.widget.approve-button.added",e);h.default.on("bitbucket.internal.widget.approve-button.removed",e);h.default.on("bitbucket.internal.web.watch-button.added",d);h.default.on("bitbucket.internal.web.watch-button.removed",d)}function y(e){var d=g.default.dialog2(e.templates.dialog()),b=void 0;d.$el.on("click",".confirm-button",function(a){var c=new aa.default(a.target,"before");(0,z.default)(d,!0);c.show();
b=A.default.rest(e.ajax);b.fail(function(a,c,b,g){400===a.status?(a=d.$el.find(".aui-dialog2-content"),g.errors&&(a.children(".aui-message").remove(),a.prepend(e.templates.error(g.errors)))):d.hide()}).always(function(){c.hide();(0,z.default)(d,!1);b=null}).done(function(a){h.default.trigger(e.events.done,null,{user:k.default.getCurrentUser().toJSON(),pullRequest:a});e.callback(a)})});d.$el.find(".cancel-button").on("click",function(){b&&(b.abort(),b=null);d.hide()});d.$el.on("aui-show",_.debounce(function(){return d.$el.find(".cancel-button").focus()}));
return d}function u(e,d,b){k.default.getPullRequest().set((0,S.filter)(e));!0===d&&b.dispatch({type:"PR_SET_PULL_REQUEST",payload:e})}Object.defineProperty(r,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(l),Z=babelHelpers.interopRequireDefault(D),ba=babelHelpers.interopRequireDefault(E);l=babelHelpers.interopRequireDefault(F);var ca=babelHelpers.interopRequireDefault(n),q=babelHelpers.interopRequireDefault(H),da=babelHelpers.interopRequireDefault(I),p=babelHelpers.interopRequireDefault(J),
ea=babelHelpers.interopRequireDefault(K),fa=babelHelpers.interopRequireDefault(L),ga=babelHelpers.interopRequireDefault(M),v=babelHelpers.interopRequireDefault(N),ha=babelHelpers.interopRequireDefault(O),B=babelHelpers.interopRequireDefault(P),k=babelHelpers.interopRequireDefault(Q),ia=babelHelpers.interopRequireDefault(R),A=babelHelpers.interopRequireDefault(T),h=babelHelpers.interopRequireDefault(U),z=babelHelpers.interopRequireDefault(V),w=babelHelpers.interopRequireDefault(W),aa=babelHelpers.interopRequireDefault(X),
t={triggeredBy:"keyboardShortcut"};n=function(e){function d(b){babelHelpers.classCallCheck(this,d);var a=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b));a.onMoreAction=function(c){switch(c){case "edit":a._pullRequestEdit.show();break;case "watch":a.toggleWatch();break;case "decline":a.declineDialog||a.createDeclineDialog();a.declineDialog.show();break;case "delete":a.deleteDialog||a.createDeleteDialog(),a.deleteDialog.show()}};a.onReOpenClick=function(){var c=
q.default.rest().currentPullRequest().reopen().withParams({avatarSize:x.AvatarSize.XSMALL,version:k.default.getPullRequest().getVersion()}).build();return A.default.rest({url:c,type:"POST",statusCode:{409:function(a,c,b,d,e){return babelHelpers.extends({},e,{title:"Could not reopen pull request.",fallbackUrl:!1,shouldReload:!1})}}}).done(function(c){h.default.trigger("bitbucket.internal.feature.pullRequest.reopened",null,{user:k.default.getCurrentUser().toJSON(),
pullRequest:c});u(c,!0,a.props);a.mergeCheck()})};a.onSelfClick=function(c,f){a.props.dispatch((0,ga.default)(a.props.pullRequest,a.props.currentUser,c,a.props.currentUserAsReviewer&&a.props.currentUserAsReviewer.status));"ADD_SELF"===c&&a.props.dispatch((0,v.default)({stateOnly:!0,watchState:!0}));f&&a.props.dispatch((0,v.default)({watchState:!1}))};a.onStatusClick=function(c){var f=a.props,b=f.dispatch,d=f.currentUser,e=f.currentUserAsReviewer,f=f.pullRequest;e?b((0,fa.default)((0,m.merge)({pullRequest:f,
user:d,oldStatus:e.status},c))):console.warn("Current user is not a reviewer")};a.onMergeHelpDialogClose=function(){a.setState({showMergeHelpDialog:!1})};a.getConditions=function(){var c=a.props,f=c.pullRequest.author.user.name===c.currentUser.name,b=c.hasSourceRepoRead,d=c.hasRepoWrite,f=d||f;return{canMerge:d,canDecline:f,canDelete:c.canDelete,canEdit:f,canReOpen:f&&b}};a.toggleWatch=function(c){var b=a.props,d=b.dispatch,b=b.pullRequest;d((0,v.default)((0,m.merge)({},{watchState:!b.isWatching},
c)))};a.mergeCheck=function(){var c=a.props,b=c.dispatch,c=c.pullRequest;c.state===p.default.PullRequestState.OPEN&&b((0,ea.default)(c))};a.initMergeEvents=function(){h.default.on("bitbucket.internal.feature.pull-request.merge-check",a.mergeCheck);["bitbucket.internal.feature.pullRequest.reviewerStatus.changed","bitbucket.internal.feature.pullRequest.self.added","bitbucket.internal.feature.pullRequest.self.removed"].forEach(function(c){return h.default.on(c,a.mergeCheck)});h.default.on("bitbucket.internal.branch.plugin.conflict.merge.help",
function(c){return a.setState({mergeHelp:c})});h.default.on("bitbucket.internal.pull-request.show.cant.merge.help",function(){return a.setState({showMergeHelpDialog:!0})})};a.createDeclineDialog=function(){a.declineDialog=y({buttonSelector:".decline-pull-request",ajax:{url:q.default.rest().currentPullRequest().decline().withParams({avatarSize:x.AvatarSize.XSMALL,version:k.default.getPullRequest().getVersion()}).build(),type:"POST",statusCode:{401:function(a,b,d,e,h){return babelHelpers.extends({},
h,{title:"Could not decline pull request",message:"You no longer have permission to decline this pull request.",fallbackUrl:!1,shouldReload:!0})}}},callback:function(c){u(c,!0,a.props);a.declineDialog.hide()},templates:{dialog:function(){return bitbucket.internal.feature.pullRequest.decline.dialog({content:'\x3cp class\x3d"decline-message"\x3e\n                        '+"Are you sure you want to decline this pull request? This will close the pull request without merging."+
"\n                    \x3c/p\x3e"})},error:function(a){return bitbucket.internal.feature.pullRequest.decline.errors({errors:a})}},events:{done:"bitbucket.internal.feature.pullRequest.declined"}})};a.createDeleteDialog=function(){a.deleteDialog=y({buttonSelector:".delete-pull-request",ajax:{url:q.default.rest().currentPullRequest().build(),type:"DELETE",data:{version:k.default.getPullRequest().getVersion()},statusCode:{400:!1,401:function(a,b,d,e,h){return babelHelpers.extends({},h,{title:"Could not delete pull request",
message:"You no longer have permission to delete this pull request.",fallbackUrl:!1,shouldReload:!0})}}},callback:function(){a.deleteDialog.hide();window.location=q.default.currentRepo().allPullRequests().build()},templates:{dialog:function(){return bitbucket.internal.feature.pullRequest.delete.dialog({content:'\x3cp class\x3d"delete-message"\x3e\n                        '+"Are you sure you want to delete this pull request? All comments will be lost. This operation cannot be undone!"+"\n                    \x3c/p\x3e"})},
error:function(a){return bitbucket.internal.feature.pullRequest.delete.errors({errors:a})}},events:{done:"bitbucket.internal.feature.pullRequest.deleted"}})};a.state={};return a}babelHelpers.inherits(d,e);babelHelpers.createClass(d,[{key:"componentDidMount",value:function(){var b=this,a=k.default.getPullRequest();this._pullRequestEdit=new ha.default(a);w.default.bind("pullRequestApprove",function(){var a=(b.props.currentUserAsReviewer&&b.props.currentUserAsReviewer.status)===p.default.ApprovalStatus.APPROVED?
p.default.ApprovalStatus.UNAPPROVED:p.default.ApprovalStatus.APPROVED;b.onStatusClick((0,m.merge)({newStatus:a},t))});w.default.bind("pullRequestEdit",function(){a.getState()!==p.default.PullRequestState.MERGED&&b._pullRequestEdit.show()});(0,ba.default)(document).on("click",".add-description",function(){b._pullRequestEdit.show()});w.default.bind("pullRequestWatch",function(){b.toggleWatch(t)});h.default.once("bitbucket.internal.feature.comments.commentAdded",function(){var c=k.default.getCurrentUser(),
d=a.getParticipants().toJSON();[a.getAuthor().toJSON()].concat(a.getReviewers().toJSON()).concat(d).some(function(a){return a.user.name===c.id})||(a.setParticipants(d.concat([new ia.default({user:c})])),b.toggleWatch({watchState:!0}))});this.mergeCheck();B.default.initMergeDialog({callback:function(a){return u(a,!0,b.props)},mergeTimeout:this.props.mergeTimeout});this.initMergeEvents();Y()}},{key:"render",value:function(){var b={pullRequest:this.props.pullRequest,conditions:this.getConditions(),currentUser:this.props.currentUser,
currentUserAsReviewer:this.props.currentUserAsReviewer,currentUserIsWatching:this.props.pullRequest.isWatching,mergeHelp:this.state.mergeHelp,onMoreAction:this.onMoreAction,currentUserStatus:this.props.currentUserAsReviewer&&this.props.currentUserAsReviewer.status,onMergeClick:B.default.onMergeClick,onReOpenClick:this.onReOpenClick,onSelfClick:this.onSelfClick,onStatusClick:this.onStatusClick,permissionToReview:this.props.currentUser.name!==this.props.pullRequest.author.user.name,showMergeHelpDialog:this.state.showMergeHelpDialog,
onMergeHelpDialogClose:this.onMergeHelpDialogClose};return ca.default.createElement(da.default,b)}}]);return d}(n.Component);n.propTypes={canDelete:l.default.bool.isRequired,hasRepoWrite:l.default.bool.isRequired,hasSourceRepoRead:l.default.bool.isRequired,mergeTimeout:l.default.number};r.default=(0,G.connect)(function(e){var d=e.currentUser,b=e.pullRequest;return{pullRequest:b,currentUser:d,currentUserAsReviewer:function(){return(0,m.find)(b.reviewers,function(a){return a.user.name===d.name})}()}})(n);
C.exports=r["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-header', location = '/static/bitbucket/internal/feature/pull-request/header/pull-request-decline-dialog.soy' */
// This file was automatically generated from pull-request-decline-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.decline.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.decline == 'undefined') { bitbucket.internal.feature.pullRequest.decline = {}; }


bitbucket.internal.feature.pullRequest.decline.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'pull-request-decline-dialog', content: '' + soy.$$filterNoAutoescape(opt_data.content), titleText: 'Decline Pull Request', footerActionContent: '' + aui.buttons.button({text: 'Decline', type: 'primary', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.decline.dialog.soyTemplateName = 'bitbucket.internal.feature.pullRequest.decline.dialog';
}


bitbucket.internal.feature.pullRequest.decline.errors = function(opt_data, opt_ignored) {
  var param19 = '';
  var errorList20 = opt_data.errors;
  var errorListLen20 = errorList20.length;
  for (var errorIndex20 = 0; errorIndex20 < errorListLen20; errorIndex20++) {
    var errorData20 = errorList20[errorIndex20];
    param19 += bitbucket.internal.widget.errorContent({message: errorData20.message, details: errorData20.details, detailListExtraClasses: 'errors'});
  }
  var output = '' + aui.message.error({content: param19});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.decline.errors.soyTemplateName = 'bitbucket.internal.feature.pullRequest.decline.errors';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-header', location = '/static/bitbucket/internal/feature/pull-request/header/pull-request-delete-dialog.soy' */
// This file was automatically generated from pull-request-delete-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.delete.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.delete == 'undefined') { bitbucket.internal.feature.pullRequest.delete = {}; }


bitbucket.internal.feature.pullRequest.delete.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'pull-request-delete-dialog', content: opt_data.content, titleText: 'Delete pull request', extraClasses: 'aui-dialog2-warning', size: 'small', class: 'aui-dialog2-warning', footerActionContent: '' + aui.buttons.button({text: 'Delete pull request', extraClasses: 'confirm-button'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'cancel-button'})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.delete.dialog.soyTemplateName = 'bitbucket.internal.feature.pullRequest.delete.dialog';
}


bitbucket.internal.feature.pullRequest.delete.errors = function(opt_data, opt_ignored) {
  var param19 = '';
  var errorList20 = opt_data.errors;
  var errorListLen20 = errorList20.length;
  for (var errorIndex20 = 0; errorIndex20 < errorListLen20; errorIndex20++) {
    var errorData20 = errorList20[errorIndex20];
    param19 += bitbucket.internal.widget.errorContent({message: errorData20.message, details: errorData20.details, detailListExtraClasses: 'errors'});
  }
  var output = '' + aui.message.error({content: param19});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.delete.errors.soyTemplateName = 'bitbucket.internal.feature.pullRequest.delete.errors';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request-watch.js' */
define("bitbucket/internal/bbui/reducers/pull-request-watch",["module","exports","../actions/pull-request","../utils/create-reducer","../utils/replace-state-with-rollback"],function(f,c,e,d,g){Object.defineProperty(c,"__esModule",{value:!0});d=babelHelpers.interopRequireDefault(d);var h=babelHelpers.interopRequireDefault(g),a;c.default=(0,d.default)(!1,(a={},babelHelpers.defineProperty(a,e.PR_WATCH,function(a,b){return(0,h.default)(a,b,{forward:function(){return b.payload}})}),babelHelpers.defineProperty(a,
e.PR_SET_IS_WATCHING,function(a,b){return b.payload}),a));f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request-reviewers.js' */
define("bitbucket/internal/bbui/reducers/pull-request-reviewers","module exports lodash bitbucket/internal/enums ../actions/pull-request ../utils/create-reducer ../utils/merge-object-in-array ../utils/replace-state-with-rollback".split(" "),function(l,e,f,a,g,m,n,p){Object.defineProperty(e,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(f);f=babelHelpers.interopRequireDefault(m);var q=babelHelpers.interopRequireDefault(n),k=babelHelpers.interopRequireDefault(p),c;e.default=(0,f.default)([],
(c={},babelHelpers.defineProperty(c,g.PR_CHANGE_REVIEWER_STATE,function(d,b){var a=function(a){return b.payload.user&&a.user.name===b.payload.user.name};return(0,k.default)(d,b,{forward:function(){return(0,q.default)(d,a,{status:b.payload.newState})}})}),babelHelpers.defineProperty(c,g.PR_CHANGE_SELF_REVIEWER,function(d,b){return(0,k.default)(d,b,{forward:function(){switch(b.payload.selfAction){case a.SelfAction.ADD_SELF:return d.concat([{role:a.ParticipantRole.REVIEWER,status:a.ApprovalStatus.UNAPPROVED,
user:b.payload.user}]);case a.SelfAction.REMOVE_SELF:var c=h.default.extend([],d);return h.default.remove(c,function(a){return a.user.name!==b.payload.user.name});default:console.warn("Unknown reviewer action")}}})}),c));l.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request-can-merge.js' */
define("bitbucket/internal/bbui/reducers/pull-request-can-merge","module exports lodash ../actions/pull-request ../pull-request-header/actions ../utils/create-reducer ../utils/merge-state-with-rollback".split(" "),function(g,c,d,h,e,k,l){Object.defineProperty(c,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(d);d=babelHelpers.interopRequireDefault(k);var m=babelHelpers.interopRequireDefault(l),a;c.default=(0,d.default)({canMerge:!1,conflicted:null,vetoes:null,properties:null,isChecking:!1,
showDialog:!1},(a={},babelHelpers.defineProperty(a,h.PR_CHECK_MERGEABILITY,function(a,b){return(0,m.default)(a,b,{forward:function(){return{isChecking:!0}},commit:function(){return babelHelpers.extends({},b.payload,{isChecking:!1})}})}),babelHelpers.defineProperty(a,e.PR_SHOW_MERGE_ERRORS,function(a,b){return f.default.assign({},a,{showDialog:!0})}),babelHelpers.defineProperty(a,e.PR_HIDE_MERGE_ERRORS,function(a,b){return f.default.assign({},a,{showDialog:!1})}),a));g.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/noop.js' */
define("bitbucket/internal/bbui/reducers/noop",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:null};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/current-user.js' */
define("bitbucket/internal/bbui/reducers/current-user",["module","exports","../actions/actions","../utils/create-reducer"],function(c,b,d,a){Object.defineProperty(b,"__esModule",{value:!0});a=babelHelpers.interopRequireDefault(a);b.default=(0,a.default)({},babelHelpers.defineProperty({},d.SET_CURRENT_USER,function(b,a){return a.payload}));c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:reducers', location = '/static/bitbucket/internal/bbui/reducers/pull-request.js' */
define("bitbucket/internal/bbui/reducers/pull-request","module exports redux ../../model/pull-request-json ../actions/pull-request ./noop ./pull-request-can-merge ./pull-request-reviewers ./pull-request-watch".split(" "),function(g,a,h,k,l,b,m,c,d){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e,a){var b=e;a.type===l.PR_SET_PULL_REQUEST&&(b=babelHelpers.extends({},e,a.payload));return n(b,a)};var p=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(m);
c=babelHelpers.interopRequireDefault(c);d=babelHelpers.interopRequireDefault(d);var f={};k.pullRequestProperties.forEach(function(a){f[a]=p.default});var n=(0,h.combineReducers)(babelHelpers.extends({},f,{reviewers:c.default,mergeable:b.default,isWatching:d.default}));g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-store', location = '/static/bitbucket/internal/feature/pull-request/store/pull-request-store.js' */
define("bitbucket/internal/feature/pull-request/store/pull-request-store",["module","exports","bitbucket/internal/bbui/reducers/current-user","bitbucket/internal/bbui/reducers/pull-request","bitbucket/internal/util/redux"],function(b,a,c,d,e){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return(0,e.customCreateStore)({pullRequest:f.default,currentUser:g.default},a)};var g=babelHelpers.interopRequireDefault(c),f=babelHelpers.interopRequireDefault(d);b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:feature-loader-util', location = '/static/bitbucket/internal/util/feature-loader.js' */
define("bitbucket/internal/util/feature-loader","module exports aui jquery lodash require bitbucket/internal/util/events".split(" "),function(r,l,t,F,G,H,I){function x(b,c){if("function"!==typeof b.load||"function"!==typeof b.unload)throw Error("Modules require both a load and unload callback. Please use:\n"+y(c));}function y(b){return"FeatureLoader.registerHandler('"+b+"', /urlMatcher/, {\n    load : loadFn,\n    unload : unloadFn,\n    keyboardShortcutContexts : [ 'commit', ... ]});"}function k(h){function l(a){function f(){g.default.trigger(h.unloadedEvent,
null,a)}if(!b.default.contains(e,a))return c.default.Deferred().resolve();var d=a.module.unload(m);e=b.default.without(e,a);if(d&&d.then)return d.then(f);f();return c.default.Deferred().resolve()}function z(a){function f(){g.default.trigger(h.loadedEvent,null,a)}if(b.default.contains(e,a))return c.default.Deferred().resolve();a.module||(a.module=(0,J.default)(a.moduleName),x(a.module,a.name));var d=a.module.load(m,A);e.push(a);if(d&&d.then)return d.then(f);f();return c.default.Deferred().resolve()}
function B(){if(!n||u!==window.location.href){u=window.location.href;var a=v(u);a.length?(b.default.each(a,function(a){g.default.trigger(h.requestedEvent,null,a.name)}),p||(p=!0,C.then(r))):n?window.location.reload():g.default.trigger(h.errorEvent,null,{message:"No handler is registered to the current page",code:k.NO_HANDLER})}}function r(){p=!1;var a=v(window.location.href),f=b.default.difference(a,e),a=b.default.difference(e,a);if(f.length||a.length)e.length?a=c.default.when.apply(c.default,
b.default.map(a,l)):((0,c.default)(m).empty(),a=c.default.Deferred().resolve()),C=a.then(function(){return c.default.when.apply(c.default,b.default.map(f,z))}).then(function(){w&&w.resetContexts()})}function v(a){return b.default.filter(q,function(b){return b.urlRegex&&b.urlRegex.test(a)})}function D(){B()}function t(a){return a.module&&a.module.keyboardShortcutContexts||[]}function E(a){var c=b.default.chain(e).map(t).flatten().uniq().value();b.default.each(c,function(b){a.enableContext(b)})}if(!(this instanceof
k))return new k(h);h=c.default.extend({},k.defaults,h);var u=window.location.href,e=[],q={},C=c.default.Deferred().resolve(),p,n=!1,m,w,A={};this.registerHandler=function(a,c,d){if(b.default.has(q,a))throw Error("A handler with the name '"+a+"' already exists.");if(!d)throw Error("No module or module name was provided. Please use:\n"+y(a));"string"===typeof d?a=q[a]={name:a,urlRegex:c,moduleName:d}:(x(d,a),a=q[a]={name:a,urlRegex:c,module:d});n&&!p&&b.default.contains(v(window.location.href),a)&&
z(a);return this};this.setElement=function(a){m=a};this.setContext=function(a){A=a};this.setKeyboardShortcuts=function(a){w=a};this.current=function(){return e.slice()};this.init=function(a){m=a;B();g.default.on("bitbucket.internal.history.changestate",D);g.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",E);n=!0};this.destroy=function(){g.default.off("bitbucket.internal.history.changestate",D);g.default.off("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",
E)};return this}Object.defineProperty(l,"__esModule",{value:!0});var K=babelHelpers.interopRequireDefault(t),c=babelHelpers.interopRequireDefault(F),b=babelHelpers.interopRequireDefault(G),J=babelHelpers.interopRequireDefault(H),g=babelHelpers.interopRequireDefault(I);k.defaults={unloadedEvent:"stash.util.feature-loader.unloaded",loadedEvent:"stash.util.feature-loader.loaded",requestedEvent:"stash.util.feature-loader.loadRequested",errorEvent:"stash.util.feature-loader.errorOccurred"};k.NO_HANDLER=
"NO_HANDLER";l.default=k;r.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:summary-panel-widget', location = '/static/bitbucket/internal/widget/summary-panel/summary-panel.soy' */
// This file was automatically generated from summary-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.summaryPanel.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }
if (typeof bitbucket.internal.widget.summaryPanel == 'undefined') { bitbucket.internal.widget.summaryPanel = {}; }


bitbucket.internal.widget.summaryPanel.overviewWebPanel = function(opt_data, opt_ignored) {
  return '<div class="plugin-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + ((opt_data.linkContent.length > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.linkHref ? opt_data.linkHref : '#') + '"' + ((opt_data.linkClass) ? ' class="' + soy.$$escapeHtml(opt_data.linkClass) + '"' : '') + ((opt_data.linkTooltip) ? ' title="' + soy.$$escapeHtml(opt_data.linkTooltip) + '"' : '') + ((opt_data.linkExtraAttributes) ? aui.renderExtraAttributes({extraAttributes: opt_data.linkExtraAttributes}) : '') + '>' + bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon(opt_data) + soy.$$filterNoAutoescape(opt_data.linkContent) + '</a>' : (opt_data.iconClass && opt_data.iconClass.length > 0) ? bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon(opt_data) : '') + ((opt_data.extraContent) ? '<div class="item-extra-content">' + soy.$$filterNoAutoescape(opt_data.extraContent) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.overviewWebPanel.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.overviewWebPanel';
}


bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '" ' + ((opt_data.iconTooltip) ? 'title="' + soy.$$escapeHtml(opt_data.iconTooltip) + '"' : '') + ' >' + ((opt_data.iconUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.overviewWebPanelIcon';
}


bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.summaryPanel.overviewWebPanel(soy.$$augmentMap(opt_data, {linkContent: '' + ((opt_data.count) ? '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ' : '') + ((opt_data.linkText) ? '<span class="label">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : '')}));
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel';
}


bitbucket.internal.widget.summaryPanel.linkWebPanel = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.overviewWebPanel(soy.$$augmentMap(opt_data, {iconClass: 'aui-icon-small' + (opt_data.iconClass ? ' ' + opt_data.iconClass : '')}));
};
if (goog.DEBUG) {
  bitbucket.internal.widget.summaryPanel.linkWebPanel.soyTemplateName = 'bitbucket.internal.widget.summaryPanel.linkWebPanel';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:discussion-plugin-templates', location = '/static/bitbucket/internal/feature/discussion/participants-list/participants-list.soy' */
// This file was automatically generated from participants-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.discussion.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.discussion == 'undefined') { bitbucket.internal.feature.discussion = {}; }


bitbucket.internal.feature.discussion.participants = function(opt_data, opt_ignored) {
  var param17 = '<ul class="aui-list-truncate">';
  var participantList19 = opt_data.participants;
  var participantListLen19 = participantList19.length;
  for (var participantIndex19 = 0; participantIndex19 < participantListLen19; participantIndex19++) {
    var participantData19 = participantList19[participantIndex19];
    param17 += '<li>' + bitbucket.internal.widget.avatarList.participantAvatar({participant: participantData19, extraClasses: 'participant-item', withName: true}) + '</li>';
  }
  param17 += '</ul>';
  var param14 = '' + aui.dropdown2.contents({id: 'participants-dropdown', extraClasses: 'aui-style-default aui-dropdown2-tailed avatar-dropdown participants-dropdown', content: param17});
  var output = '' + bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-user', linkText: '' + soy.$$escapeHtml(AJS.format('{0,choice,1#Participant|1\x3cParticipants}',opt_data.participants.length)), linkClass: 'participants-trigger aui-dropdown2-trigger', linkExtraAttributes: 'aria-owns=participants-dropdown aria-haspopup=true', count: opt_data.participants.length, extraClasses: 'participants' + ((! opt_data.participants.length) ? ' hidden' : ''), extraContent: param14});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.discussion.participants.soyTemplateName = 'bitbucket.internal.feature.discussion.participants';
}


bitbucket.internal.feature.discussion.participantCount = function(opt_data, opt_ignored) {
  return '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.discussion.participantCount.soyTemplateName = 'bitbucket.internal.feature.discussion.participantCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-overview-plugin-templates', location = '/static/bitbucket/internal/feature/pull-request/overview/plugins/pull-request-overview-plugin-templates.soy' */
// This file was automatically generated from pull-request-overview-plugin-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.overview.plugins.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }
if (typeof bitbucket.internal.feature.pullRequest.overview == 'undefined') { bitbucket.internal.feature.pullRequest.overview = {}; }
if (typeof bitbucket.internal.feature.pullRequest.overview.plugins == 'undefined') { bitbucket.internal.feature.pullRequest.overview.plugins = {}; }


bitbucket.internal.feature.pullRequest.overview.plugins.learnMore = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.linkWebPanel({extraClasses: 'learn-more', iconClass: 'aui-iconfont-help', linkHref: 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash', linkExtraAttributes: {target: '_blank'}, linkContent: '' + soy.$$escapeHtml('Learn more')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.overview.plugins.learnMore.soyTemplateName = 'bitbucket.internal.feature.pullRequest.overview.plugins.learnMore';
}
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-amd.js' */
define("applinks/lib/lodash",["lodash"],function(a){return a});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
define("applinks/lib/version",["applinks/lib/lodash"],function(c){function d(f,g){if(c.isUndefined(f)){return 0}else{if(typeof f!=="number"||isNaN(f)){throw new Error(g+": expected a number, was: <"+f+">")}else{return Math.floor(f)}}}function a(f,g){if(!f||!(f instanceof e)){throw new Error(g+": expected a Version object, was: <"+f+">")}return f}function b(f,g){return f>g?1:f==g?0:-1}function e(g,h,f){this.major=d(g,"major");this.minor=d(h,"minor");this.bugfix=d(f,"bugfix")}e.parse=function(g,h){h=h||"versionString";if(!g){throw new Error(h+": expected a non-empty string")}var f=g.split(".");if(f.length!==3){throw new Error(h+": expected <major>.<minor>.<bugfix> string, was: <"+g+">")}return new e(parseInt(f[0]),parseInt(f[1]),parseInt(f[2]))};e.comparator=function(g,f){return a(g,"versionOne").compareTo(a(f,"versionTwo"))};e.prototype.compareTo=function(h){a(h,"that");var f=b(this.major,h.major);if(f!=0){return f}var g=b(this.minor,h.minor);if(g!=0){return g}return b(this.bugfix,h.bugfix)};e.prototype.greaterThan=function(f){return this.compareTo(f)>0};e.prototype.greaterThanOrEqual=function(f){return this.compareTo(f)>=0};e.prototype.lessThan=function(f){return this.compareTo(f)<0};e.prototype.lessThanOrEqual=function(f){return this.compareTo(f)<=0};e.prototype.equals=function(f){return this.compareTo(f)==0};e.prototype.toMinor=function(){return new e(this.major,this.minor)};e.prototype.toMajor=function(){return new e(this.major)};e.prototype.toString=function(){return this.major+"."+this.minor+"."+this.bugfix};return e});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define("applinks/lib/aui-version-details",["applinks/lib/version"],function(g){var d=new g(5,8,15);var f=new g(5,9,13);var e=new g(5,8);var c=new g(5,9);function a(h){if(h.lessThan(d)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+d+" or "+f+" for Applinks to work")}if(h.greaterThanOrEqual(c)&&h.lessThan(f)){throw new Error("AUI version "+h+" is too low, you need to upgrade AUI to "+f+" for Applinks to work")}}function b(h){var i=g.parse(h.version,"AUI version");a(i);h.versionDetails=i;h.versionDetails.is58=i.toMinor().equals(e);h.versionDetails.is59=i.toMinor().equals(c);return h}return{addVersionDetails:b}});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define("applinks/lib/console",function(){return window.console});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define("applinks/lib/jquery",function(){return window.jQuery});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define("applinks/lib/aui",["applinks/lib/window","applinks/lib/aui-version-details"],function(b,c){var a=b.AJS;if(!a){throw new Error("window.AJS not defined, cannot load AUI")}return c.addVersionDetails(a)});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
define("applinks/lib/wrm",function(){return window.WRM});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define("applinks/lib/skate",function(){return window.skate});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
define("applinks/lib/window",function(){return window});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-public', location = 'js/applinks.public.js' */
var ApplinksUtils=ApplinksUtils||(function(f){var c={},b={};var p="com_atlassian_applinks_authentication";function o(r){var q=f('<span class="aui-icon icon-close"></span>').click(function(){r.trigger("messageClose",[this]).remove()});r.append(q)}function g(){if(window===parent.window){return null}var r=null,q=window;f("iframe",parent.document.body).each(function(s){if(this.contentWindow.window===q){r=this}});return r}function d(r,x,w,q,s,u){if(x in c){var t=c[x];if(w){t.authAdminUri=q;delete c[x]}j(t,w,u)}if(!s&&parent&&(parent!==window)){var v=window;f("iframe",parent.document.body).each(function(y,A){var z=A.contentWindow;if(z!==v){if(z.AJS&&z.AJS.$){z.AJS.$(z.document).trigger("applinks.auth.completion",[x,w,q,true,u])}}})}}function j(q,u,t){var s=f(document);if(u){var r=function(v){if(v.isDefaultPrevented()){m(q)}else{h(q);document.location.reload(true)}};s.bind("applinks.auth.approved",r);s.trigger("applinks.auth.approved",q);s.unbind("applinks.auth.approved",r)}else{s.trigger("applinks.auth.denied",[q,t])}}function k(r,q){var s=r.find("a.applink-authenticate");if(r.hasClass("aui-message")){o(r)}s.click(function(t){window.open(q.authUri,p);t.preventDefault()});c[q.id]=q;return r}function n(){f(".applinks-auth-request").each(function(t){var s=f(this),v=s.find(".applinkId").val(),q=s.find(".appName").val(),r=s.find(".appUri").val(),u=s.find(".authUri").val();if(v&&u){k(s,{id:v,appName:q,appUri:r,authUri:u})}})}function i(q){var r=f('<div class="aui-message warning closeable applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');r.append(AJS.format("Additional information may be available, please \u003ca class=\u0022applink-authenticate\u0022 href=\u0022{0}\u0022\u003eauthenticate\u003c/a\u003e with \u003ca href=\u0022{1}\u0022\u003e{2}\u003c/a\u003e.",AJS.escapeHtml(q.authUri),AJS.escapeHtml(q.appUri),AJS.escapeHtml(q.appName)));k(r,q);return r}function e(u,r){var q=f('<span class="applinks-auth-request"></span>'),s=f('<span class="applinks-request-description"></span>'),t=AJS.format("\u003ca class=\u0022applink-authenticate\u0022 href=\u0022{0}\u0022\u003eAuthenticate\u003c/a\u003e to see additional information.",AJS.escapeHtml(r.authUri));if(u){s.append(u);s.append(" - ")}s.append(t);q.append(s);k(q,r);return q}function h(q){var r=g();if((!r)||(!r.id)){return}if(!parent.ApplinksUtils.pendingConfirmations){parent.ApplinksUtils.pendingConfirmations={}}if(!(r.id in parent.ApplinksUtils.pendingConfirmations)){parent.ApplinksUtils.pendingConfirmations[r.id]=[]}parent.ApplinksUtils.pendingConfirmations[r.id].push(q);return}function l(){if(parent&&parent.ApplinksUtils&&parent.ApplinksUtils.pendingConfirmations){var r=g();if(r){if(r.id in parent.ApplinksUtils.pendingConfirmations){var s=parent.ApplinksUtils.pendingConfirmations[r.id];delete parent.ApplinksUtils.pendingConfirmations[r.id];for(var q=0,t=s.length;q<t;q++){m(s[q])}}}}}function m(s){var t=f(document),r=f('<div class="aui-message success closeable applinks-auth-confirmation"><p><span class="aui-icon icon-applinks-key-success"></span></p></div>'),q=t.find("div.applinks-auth-confirmation-container");if(!q.length){q=t.find("body")}r.append(AJS.format("This application is now using \u003ca href=\u0022{0}\u0022\u003e{1}\u003c/a\u003e\u0027\u0027s credentials. Revoke access at any time by going to \u003ca href=\u0022{2}\u0022\u003eOAuth access tokens\u003c/a\u003e.",AJS.escapeHtml(s.appUri),AJS.escapeHtml(s.appName),AJS.escapeHtml(s.authAdminUri)));o(r);q.prepend(r);setTimeout(function(){r.fadeOut(1000,function(){f(this).remove()})},5000)}function a(){if(parent&&!(parent===window)){if(!parent.ApplinksUtils){parent.ApplinksUtils={}}}f(document).bind("applinks.auth.completion",d);n();l()}f(document).ready(a);return{createAuthRequestBanner:i,createAuthRequestInline:e}})(AJS.$);;
;
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Template.Util.Issue.Status.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issueStatus) ? '<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="' + soy.$$escapeHtml('no.issue.status.info') + '"></span>' : (opt_data.issueStatus.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatus(opt_data) : JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}));
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatusResolver.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatusResolver';
}


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" width="16" height="16" alt="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$escapeHtml(opt_data.name) + ((opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '') + '" class="jira-issue-status-icon">' + ((! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.iconStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.iconStatus';
}


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth});
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatus';
}


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = '<span class="jira-issue-status-tooltip-title">' + soy.$$escapeHtml(opt_data.name) + '</span>' + ((opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  output += '<span class=" jira-issue-status-lozenge aui-lozenge ' + JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data) + ((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '') + ((opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '') + ' jira-issue-status-lozenge-max-width-' + soy.$$escapeHtml(maxWidth__soy46) + '" data-tooltip="' + soy.$$escapeHtml(tooltipContent__soy47) + '">' + soy.$$escapeHtml(opt_data.name) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozenge.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozenge';
}


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_ignored) {
  return 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray') + ' ' + ((opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozengeClasses.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozengeClasses';
}
;
;
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){if(AJS.$.fn.tooltip){AJS.$(".jira-issue-status-lozenge[data-tooltip]").tooltip({aria:true,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:true,live:true,title:"data-tooltip",className:"jira-issue-status-tooltip"})}});;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.soy' */
// This file was automatically generated from fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.fields.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.fields == 'undefined') { jiraIntegration.templates.fields = {}; }


jiraIntegration.templates.fields.stringField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({labelContent: '' + soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.stringField.soyTemplateName = 'jiraIntegration.templates.fields.stringField';
}


jiraIntegration.templates.fields.textareaField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><textarea rows="10" id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" class="textarea long-field">' + soy.$$escapeHtml(opt_data.value) + '</textarea>';
  if (opt_data.errorTexts) {
    var errorList37 = opt_data.errorTexts;
    var errorListLen37 = errorList37.length;
    for (var errorIndex37 = 0; errorIndex37 < errorListLen37; errorIndex37++) {
      var errorData37 = errorList37[errorIndex37];
      output += '<div class="error">' + soy.$$escapeHtml(errorData37) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.textareaField.soyTemplateName = 'jiraIntegration.templates.fields.textareaField';
}


jiraIntegration.templates.fields.arrayField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.arrayField.soyTemplateName = 'jiraIntegration.templates.fields.arrayField';
}


jiraIntegration.templates.fields.numberField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.numberField.soyTemplateName = 'jiraIntegration.templates.fields.numberField';
}


jiraIntegration.templates.fields.allowedValuesField = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options.length) ? aui.form.selectField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), options: opt_data.options, isRequired: opt_data.isRequired, isMultiple: opt_data.isMultiple, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}) : aui.form.valueField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: 'None', isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.allowedValuesField.soyTemplateName = 'jiraIntegration.templates.fields.allowedValuesField';
}


jiraIntegration.templates.fields.timeTrackingField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.timeTrackingField.soyTemplateName = 'jiraIntegration.templates.fields.timeTrackingField';
}


jiraIntegration.templates.fields.unrenderableTypeField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field jira-field-unrenderable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><label>' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>' + aui.form.value({content: opt_data.reasonContent});
  if (opt_data.errorTexts) {
    var errorList117 = opt_data.errorTexts;
    var errorListLen117 = errorList117.length;
    for (var errorIndex117 = 0; errorIndex117 < errorListLen117; errorIndex117++) {
      var errorData117 = errorList117[errorIndex117];
      output += '<div class="error">' + soy.$$escapeHtml(errorData117) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.unrenderableTypeField.soyTemplateName = 'jiraIntegration.templates.fields.unrenderableTypeField';
}


jiraIntegration.templates.fields.dateField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({labelContent: '' + soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.dateField.soyTemplateName = 'jiraIntegration.templates.fields.dateField';
}


jiraIntegration.templates.fields.select2WithIconField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><select id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '">';
  var optionList154 = opt_data.options;
  var optionListLen154 = optionList154.length;
  for (var optionIndex154 = 0; optionIndex154 < optionListLen154; optionIndex154++) {
    var optionData154 = optionList154[optionIndex154];
    output += '<option value="' + soy.$$escapeHtml(optionData154.value) + '" ' + ((optionData154.selected) ? 'selected' : '') + ' data-icon-url="' + soy.$$escapeHtml(optionData154.iconUrl) + '">' + soy.$$escapeHtml(optionData154.text) + '</option>';
  }
  output += '</select>';
  if (opt_data.errorTexts) {
    var errorList170 = opt_data.errorTexts;
    var errorListLen170 = errorList170.length;
    for (var errorIndex170 = 0; errorIndex170 < errorListLen170; errorIndex170++) {
      var errorData170 = errorList170[errorIndex170];
      output += '<div class="error">' + soy.$$escapeHtml(errorData170) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconField.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconField';
}


jiraIntegration.templates.fields.select2WithIconOption = function(opt_data, opt_ignored) {
  return ((opt_data.iconUrl) ? aui.avatar.avatar({avatarImageUrl: opt_data.iconUrl, size: 'xsmall', isProject: opt_data.isProject, extraClasses: 'select-option-image', tagName: 'span'}) : '') + '<span class="select-option" title="' + soy.$$escapeHtml(opt_data.optionValue) + '">' + soy.$$escapeHtml(opt_data.optionValue) + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconOption.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconOption';
}


jiraIntegration.templates.fields.labelFieldResult = function(opt_data, opt_ignored) {
  return '' + ((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format('\x22{0}\x22 - (New label)',opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.labelFieldResult.soyTemplateName = 'jiraIntegration.templates.fields.labelFieldResult';
}


jiraIntegration.templates.fields.userOptionSelect = function(opt_data, opt_ignored) {
  var output = '';
  var userOption__soy197 = soy.$$escapeHtml(opt_data.displayName) + ' - (' + soy.$$escapeHtml(opt_data.name) + ')';
  output += '<span title="' + soy.$$filterNoAutoescape(userOption__soy197) + '">' + soy.$$filterNoAutoescape(userOption__soy197) + '</span>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.userOptionSelect.soyTemplateName = 'jiraIntegration.templates.fields.userOptionSelect';
}
;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=(function(J,Q){var k="YYYY-MM-DD";var g={template:jiraIntegration.templates.fields.stringField,getContext:v,getValue:B};var z={template:jiraIntegration.templates.fields.stringField,getContext:q,getValue:E,behavior:o};var u={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:C,behavior:j};var s={template:jiraIntegration.templates.fields.textareaField,getContext:v,getValue:B};var G={template:jiraIntegration.templates.fields.numberField,getContext:v,getValue:D};var c={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:C};var P={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:Q.bind(b,null,"id"),behavior:S};var M={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:Q.bind(b,null,"id")};var L={template:jiraIntegration.templates.fields.timeTrackingField,getContext:R,getValue:e};var K={template:jiraIntegration.templates.fields.dateField,getContext:v,getValue:r,behavior:y};var i={template:jiraIntegration.templates.fields.select2WithIconField,getContext:I,getValue:Q.bind(b,null,"id"),behavior:a};var l={"com.pyxis.greenhopper.jira:gh-epic-label":g,string:g,summary:g,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":g,"com.atlassian.jira.plugin.system.customfieldtypes:url":g,environment:s,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":s,description:s,"com.atlassian.jira.plugin.system.customfieldtypes:float":G,array:c,labels:u,"com.atlassian.jira.plugin.system.customfieldtypes:labels":c,resolution:P,fixVersions:P,priority:i,versions:P,components:P,security:P,"com.atlassian.jira.plugin.system.customfieldtypes:version":P,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":P,"com.atlassian.jira.plugin.system.customfieldtypes:project":P,assignee:z,reporter:z,timetracking:L,duedate:K,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":K,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":M,"com.atlassian.jira.plugin.system.customfieldtypes:select":M};var w={ignoreFieldsWithDefaultValue:false};function m(V,T,W){var U=T.schema.system||"customfield_"+T.schema.customId;return{labelText:T.name,name:U,isRequired:T.required,errorTexts:W[U],jiraType:V}}function v(X,T,U,V){var W=X.name;X.value=(J.isPlainObject(V[W])?V[W].name:V[W])||(U&&U.fields[W])||"";return X}function B(T){return T.val()}function r(T){var U=T.val();if(U===""){return null}else{return U}}function D(T){var U=T.val();if(t(U)){return Number(U)}return U||null}function y(T){var V=T.find("input");if(!!navigator.userAgent.match(/Trident/)&&AJS.version<"5.3.5"){var U="placeholder" in document.createElement("input");V.attr("placeholder",k);if(!U){V.on("focus",function(){if(V.val()===V.attr("placeholder")){V.val("")}}).on("blur",function(){if(V.val()===""){V.val(V.attr("placeholder"))}}).blur()}}else{WRM.require("wr!com.atlassian.auiplugin:aui-date-picker").done(function(){V.datePicker({overrideBrowserDefault:true})})}}function h(X,T,U,V){var W=X.name;X.value=(V[W]&&V[W].join(","))||(U&&U.fields[W]&&U.fields[W].join(","));return X}function C(T){return Q.map(T.val().split(","),J.trim)}function f(Z,T,U,W){var X=Z.name;var V=W[X];var aa=U&&U.fields[X];var Y;if(V){Y=J.isArray(V)?Q.pluck(V,"name"):[V.name]}else{if(aa){Y=J.isArray(aa)?Q.pluck(aa,"name"):[aa.name]}else{Y=[]}}Z.options=Q.map(T.allowedValues,function(ab){return{value:ab.id,text:ab.name||ab.value,selected:Q.contains(Y,ab.name||ab.id)}});Z.isMultiple=Q.contains(T.operations,"add");return Z}function b(W,U){var X=U.val();var T=U.attr("multiple");var V=function(Z){var Y={};Y[W]=Z;return Y};if(T){return J.isArray(X)?Q.map(X,V):[V(X)]}return V(X)}function S(T){T.find("select[multiple]").auiSelect2()}function q(X,T,U,V){var W=X.name;X.value=(V[W]&&V[W].name)||(U&&U.fields[W]&&U.fields[W].name)||"";return X}function E(T){return{name:T.val()}}function O(U,X,W,V,Y){var aa=U.find("input");var Z=U.attr("name");aa.removeClass("text");var T={minimumInputLength:1,id:Z,name:Z,query:function(ac){function ab(ad){ac.callback({results:ad})}n(X,W,ac.term,V).done(ab)}};aa.auiSelect2(J.extend(T,Y));U.find("div.aui-select2-container").addClass("jira-select2-drop-box")}function o(T,W,V,U){var X={formatInputTooShort:function(){return "Find users..."},formatResult:function(Y){return jiraIntegration.templates.fields.userOptionSelect({name:Y.id,displayName:Y.text})}};O(T,W,V,U,X)}function j(T,W,V,U){var X=T.find("input");jiraIntegration.fields._labelPicker.build(X,function(Y){return n(W,V,Y,U)})}function n(X,V,W,U){var T=J.extend({restType:V,issueKey:(U&&U.key)||"",term:W},X);return J.ajax({type:"POST",timeout:0,contentType:"application/json",dataType:"json",url:AJS.contextPath()+"/rest/jira-integration/latest/fields/autocomplete",data:JSON.stringify(T)})}function R(X,T,U,V){var W=X.name;X.value=(V[W]&&V[W].remainingEstimate)||(U&&U.fields[W]&&U.fields[W].remainingEstimate)||"";return X}function e(T){return{remainingEstimate:T.val()}}function I(Y,T,U,V){var W=Y.name;var X=(V[W]&&V[W].name)||(U&&U.fields&&U.fields[W]&&U.fields[W].name)||"";Y.options=Q.map(T.allowedValues,function(Z){return{value:Z.id,text:Z.name,selected:X===Z.name,iconUrl:Z.iconUrl}});return Y}function A(U){var T;if(U.id){T=J(U.element).attr("data-icon-url")}return jiraIntegration.templates.fields.select2WithIconOption({optionValue:U.text,iconUrl:T})}function a(X,W,U,T){if(!J.fn.auiSelect2){AJS.log("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.");return}var V=X.find("select");V.addClass("jira-select2-drop-box");V.auiSelect2({hasAvatar:true,minimumResultsForSearch:-1,formatSelection:A,formatResult:A})}function p(U,T){if(Q.has(l,U)&&console&&console.warn){console.warn("Redefining handler for type "+U+".")}l[U]=T}function F(T){return T.schema?(T.schema.system||T.schema.custom||T.schema.customId):T}function N(T){return l[F(T)]}function x(T){var U=d(T);return U&&N(U)}function d(T){return T.closest(".jira-field").attr("data-jira-type")}function H(U,T){return J.ajax({type:"GET",timeout:0,url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+U.serverId+"/projects/"+U.projectKey+"/issue-types/"+U.issueType+"/fields-meta"}).pipe(function(W){var V=[];Q.each(W.fields,function(Y){var X=F(Y);if(Y.required&&!Q.contains(T.excludedFields,X)){V.push(Y)}});return V})}function t(T){return/\d/.test(T)&&/^-?\d*\.?\d*$/.test(T)}return{addFieldHandler:p,getFieldHandler:N,canRender:function(T){var V=F(T);var U=l[V];if(!U){return false}return T.operations&&T.operations.length&&(!U.canRender||U.canRender(T))},renderField:function(X,Z,aa,Y){var T=Z.schema.system||Z.schema.custom||Z.schema.customId;var V=l[T];var W=m(T,Z,Y||{});var ab=!V||(V.canRender&&!V.canRender(Z));var U=!Z.operations||!Z.operations.length;if(ab||U){W.reasonContent=ab?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(X?X.url:"#")+'">',"</a>"):U?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(X?X.url:"#")+'">',"</a>"):null;if(!W.reasonContent){throw new Error("Invalid unrenderable reason.")}return jiraIntegration.templates.fields.unrenderableTypeField(W)}return V.template(V.getContext(W,Z,X,aa||{}))},getJSON:function(T){var U=x(T);return U&&U.getValue&&U.getValue(T)},attachFieldBehaviors:function(V,U,T){V.find(".jira-field").each(function(Y,X){var W=J(X);var aa=d(W);var Z=aa&&N(aa);var ab=Z&&Z.behavior;if(ab){ab(W,U,aa,T)}})},renderCreateRequiredFields:function(X,W,V,U,T){U=Q.extend({},w,U);function Y(Z){if(U.ignoreFieldsWithDefaultValue){Z=Q.filter(Z,function(ab){return !ab.hasDefaultValue})}var aa=Q.filter(Z,function(ab){return !jiraIntegration.fields.canRender(ab)});if(aa.length){if(T){T(aa)}return}X.html(Q.map(Z,function(ab){return jiraIntegration.fields.renderField(null,ab,null,null)}).join(""));jiraIntegration.fields.attachFieldBehaviors(X,{serverId:V.serverId,projectKey:V.projectKey},null)}if(U.requiredFields){Y(U.requiredFields)}else{H(V,U).done(Y)}}}}(AJS.$,window._));;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/label-picker.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=jiraIntegration.fields||{};jiraIntegration.fields._labelPicker=function(a){var b=function(d,c){d.auiSelect2({tags:true,multiple:true,tokenSeparators:[","," "],createSearchChoice:function(e){if(!e){return null}return{id:e,text:e,isNew:true}},query:function(f){var e=function(g){f.callback({results:g})};c(f.term).done(e)},formatResult:function(e){return jiraIntegration.templates.fields.labelFieldResult({label:{labelName:e.text,isNew:e.isNew}})}})};return{build:b}}(AJS.$);;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:transition-form', location = '/transition-form/transition-form.soy' */
// This file was automatically generated from transition-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates._transitionForm.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates._transitionForm == 'undefined') { jiraIntegration.templates._transitionForm = {}; }


jiraIntegration.templates._transitionForm.globalError = function(opt_data, opt_ignored) {
  var param3 = '';
  var errorTextList4 = opt_data.errorTexts;
  var errorTextListLen4 = errorTextList4.length;
  for (var errorTextIndex4 = 0; errorTextIndex4 < errorTextListLen4; errorTextIndex4++) {
    var errorTextData4 = errorTextList4[errorTextIndex4];
    param3 += '<p>' + soy.$$escapeHtml(errorTextData4) + '</p>';
  }
  var output = '' + aui.message.error({content: param3});
  output += aui.buttons.button({tagName: 'a', type: 'primary', extraClasses: 'jira-error-action', extraAttributes: {href: opt_data.actionUrl}, text: opt_data.actionText});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates._transitionForm.globalError.soyTemplateName = 'jiraIntegration.templates._transitionForm.globalError';
}


jiraIntegration.templates._transitionForm.form = function(opt_data, opt_ignored) {
  var param19 = '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml(opt_data.transition.name) + '</h3></div>';
  if (opt_data.errorText) {
    var param25 = '';
    var errorTextList26 = opt_data.errorText;
    var errorTextListLen26 = errorTextList26.length;
    for (var errorTextIndex26 = 0; errorTextIndex26 < errorTextListLen26; errorTextIndex26++) {
      var errorTextData26 = errorTextList26[errorTextIndex26];
      param25 += soy.$$escapeHtml(errorTextData26);
    }
    param19 += aui.message.error({content: param25});
  }
  param19 += soy.$$filterNoAutoescape(opt_data.fieldContent) + aui.form.buttons({content: '' + aui.buttons.button({type: 'primary', extraClasses: 'jira-transition', extraAttributes: {'data-transition-id': opt_data.transition.id}, text: opt_data.transition.name}) + aui.buttons.button({extraClasses: 'jira-transition-cancel', type: 'link', text: 'Cancel'})});
  var output = '' + aui.form.form({action: '', extraClasses: 'jira-transition-form', content: param19});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates._transitionForm.form.soyTemplateName = 'jiraIntegration.templates._transitionForm.form';
}
;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:transition-form', location = '/transition-form/transition-form.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.transitionForm=(function(b,a){return{isRequired:function(c,d){return d.fields&&a.some(d.fields,jiraIntegration.fields.canRender)},$render:function(g,f,c,h){if(!b.fn.auiSelect2){throw new Error("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.")}var d={};var k=false;a.each(h&&h.errors||[],function(l){k=k||l.context;var m=l.context||"__global__";d[m]=d[m]||[];d[m].push(l.message)});var i=!!d.__global__;if(!i||k){var e=f.fields?a.values(f.fields):[];a.each(e,function(m,l){m.fieldIndex=l});e.sort(function(o,n){var m=jiraIntegration.fields.canRender(o)?0:1;var l=jiraIntegration.fields.canRender(n)?0:1;return(m-l)||(o.fieldIndex-n.fieldIndex)});var j=b(jiraIntegration.templates._transitionForm.form({errorTexts:d.__global__,transition:f,fieldContent:a.map(e,function(l){return jiraIntegration.fields.renderField(g,l,c,d)}).join("")}));jiraIntegration.fields.attachFieldBehaviors(j,{serverId:g.applicationLinkId,projectKey:g.fields.project.key},g);return j}else{return b(jiraIntegration.templates._transitionForm.globalError({errorTexts:d.__global__,actionText:AJS.format("{0} in JIRA",f.name),actionUrl:g.url}))}},getJSON:function(c){return a.reduce(c.find("input,select,textarea").not(".select2-input,.select2-focusser"),function(d,f){var e=b(f);d[e.attr("name")]=jiraIntegration.fields.getJSON(e);return d},{})}}}(AJS.$,window._));;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog', location = '/jira-issue-dialog/jira-issues-dialog.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraIssuesDialog=(function(d,r){d(document).on("jira-img-error","img",function(){var t=d('<div class="jira-default-project-avatar"></div>').text(this.getAttribute("alt"));d(this).replaceWith(t)});var i;function o(t){this.options=d.extend({},o.prototype.defaults,t);this.issueKeys=this.options.issueKeys||[];this.entityKey=this.options.entityKey||null;r.bindAll(this,"show","hide","onOAuthSuccess","setIssueKeys","setEntityKey","setTitle","reset","destroy","_renderJiraData");this._initDialog();this._truncated=false;this._jiraIssuesData=null;this._jiraIssuesDataPromise=null;this._events={};this._currentXhr=null}o.prototype.defaults={id:"jira-issues-dialog",issueKeys:null,entityKey:null,maxIssues:10,headerTitle:"JIRA Issues",get$AuthMessage:function(v){var t=d(jiraIntegration.templates.dialog.authenticate({extraClasses:"jira-oauth-dialog",multipleJiras:v.length>1}));var u=t.find(".jira-instance-list");v.forEach(function(x,w){if(w!==0){u.append(", ")}u.append(a(x))});return t},get$ConnectionLostMessage:function(v){if(v.length===1){var u=v[0];return d(jiraIntegration.templates.dialog.error({titleContent:jiraIntegration.templates.dialog.linkTitle({text:"Connection lost with",link:u.applicationUrl,linkText:u.applicationName}),text:"Unfortunately, we\u0027ve encountered problems connecting to JIRA"+":\n"+u.message,extraClasses:"communication-error"}))}else{var t=r.map(v,function(w){return jiraIntegration.templates.dialog.linkText({link:w.applicationUrl,linkText:w.applicationName,text:w.message,extraClasses:"multi"})});return d(jiraIntegration.templates.dialog.error({title:"There were errors communicating with JIRA",content:t.join(""),extraClasses:"communication-error"}))}},get$UnknownErrorMessage:function(){return d(jiraIntegration.templates.dialog.error({title:"Unknown error",text:"An unexpected error occurred.\nPlease contact your system administrator if the problem persists."}))},get$NoIssuesExistMessage:function(){return d(jiraIntegration.templates.dialog.message({title:"Can\u0027t display issues",text:"Either you don\u0027t have access to view them or they don\u0027t exist.\nPlease contact your system administrator if you believe this is incorrect.",iconClass:"icon-jira",extraClasses:"no-issues-exist"}))},ajax:function(t){alert("JiraIssuesDialog requires the option 'ajax(options)' to be specified.\nThis method should handle response status codes other than 200 and 500.")}};function g(t){return Math.max(0,Math.min(t-250,640))}o.prototype.on=function(t,u){this._events[t]=this._events[t]||[];this._events[t].push(u)};o.prototype.off=function(t,u){if(this._events[t]){this._events[t]=r.without(this._events[t],u)}};o.prototype._trigger=function(u){var t=this;var v=Array.prototype.slice.call(arguments,1);if(this._events[u]){r.map(this._events[u],function(w){w.apply(t,v)})}};o.prototype._initDialog=function(){var t=this;var v=d(window).height();this.dialog=new AJS.Dialog({width:980,height:g(v),id:this.options.id,closeOnOutsideClick:true,focusSelector:".button-panel-cancel-link"});d("#"+this.options.id).addClass("jira-issues-dialog");this.setTitle();this.dialog.addCancel("Close",this.hide).addPanel("jira-issues-list");this._transitionClickHandler=function(w){w.preventDefault();t._onTransitionClicked(this)};this.dialog.getCurrentPanel().body.on("click",".jira-transition-cancel",function(w){w.preventDefault();t._onTransitionCancelled(this)});d(document).on("hideLayer",function(){if(t.multiIssueView){t.multiIssueView.destroy()}});this._updateOAuthStatus();var u=d(window);this.onWindowResize=r.debounce(function(){t._setMinHeight(u.height())},200);u.on("resize",this.onWindowResize)};o.prototype._setMinHeight=function(u){var t=this.dialog.getCurrentPanel().body;t.css("min-height",g(u));if(t.is(":visible")){this.dialog.updateHeight()}};function l(t){return(!t.which||t.which===1)&&!(t.metaKey||t.ctrlKey||t.shiftKey||(t.altKey&&!d.browser.msie))}o.prototype.reset=function(){this._cancelPendingRender();this._truncated=false;this._jiraIssuesData=null};o.prototype.setIssueKeys=function(u,t){u=r.uniq(u);this.initialIssueKey=t;if(!this.issueKeys||u.length!==this.issueKeys.length||r.difference(u,this.issueKeys).length){this.issueKeys=u;this.reset()}};o.prototype.setEntityKey=function(t){if(this.entityKey!==t){this.entityKey=t;this.reset()}};o.prototype.destroy=function(){this.reset();this.dialog.remove();this._events=null;this.dialog=null;this.issueKeys=null;this.entityKey=null;this.options=null;if(this.onWindowResize){d(window).off("resize",this.onWindowResize);this.onWindowResize=null}};o.prototype.setTitle=function(t){this.dialog.addHeader(t||this.options.headerTitle||o.prototype.defaults.headerTitle)};o.prototype.show=function(){this._bindOAuthCallbacks();d(document).on("click",".jira-transition",this._transitionClickHandler);this.dialog.getCurrentPanel().body.removeClass("multi-issues");this.dialog.show();this._setMinHeight(d(window).height());this._loadJiraData().done(this._renderJiraData);this._trigger("show")};o.prototype.hide=function(){this._removeJiraDialog();this.dialog.hide();this._unbindOAuthCallbacks();d(document).off("click",".jira-transition",this._transitionClickHandler);this._trigger("hide")};o.prototype._removeJiraDialog=function(){d("#jira-instance-list-dialog").remove()};o.prototype._getRestIssuesUrl=function(){return AJS.contextPath()+"/rest/jira-integration/latest/issues?issueKey="+r.map(this.issueKeys,encodeURIComponent).join("&issueKey=")+(this.entityKey?"&entityKey="+encodeURIComponent(this.entityKey):"")+"&fields=*all,-comment&minimum="+this.options.maxIssues};o.prototype._getRestTransitionUrl=function(t,u){return AJS.contextPath()+"/rest/jira-integration/latest/issues/"+encodeURIComponent(t)+"/transitions?applicationId="+encodeURIComponent(u)+"&fields=*all,-comment"};o.prototype._getOAuthStatusUrl=function(){return AJS.contextPath()+"/rest/jira-integration/latest/servers"};o.prototype._loadJiraData=function(){if((!this._jiraIssuesData||this._jiraIssuesDataIncomplete)&&!this._jiraIssuesDataPromise){var t=this;var u=this.dialog.getCurrentPanel().body;if(!d.fn.spin){alert("This plugin requires spin.js and the jquery plugin to be available.")}u.empty().spin("large");this._jiraIssuesDataPromise=this.options.ajax({type:"GET",url:this._getRestIssuesUrl(),dataType:"json",contentType:"application/json",jsonp:false}).pipe(function(x,A,y){if(x.errors&&x.errors.length){t._handleAuthenticationRequired(x.errors);return d.Deferred().reject()}if(x&&x.length){var z=r.filter(x,function(B){return B.canTransition&&B.transitions.length===0});if(z.length){r.forEach(z,function(B){B.transitions=t._getTransitions(B.key,B.applicationLinkId,x);B.transitions.done(function(){f(B)})});r.forEach(r.difference(x,z),f);var v=z[0].transitions;var w=d.Deferred();v.done(function(){w.resolve(x)});v.fail(w.reject);return w}r.forEach(x,f)}return x},function(w,x,v){t._handle500Error(w)}).always(function(){u.spinStop()}).done(function(v){if(v.length){t._truncated=v.length>t.options.maxIssues;v=r.first(v,t.options.maxIssues)}t._jiraIssuesData=v;t._jiraIssuesDataIncomplete=v.length!=t.issueKeys.length});return t._jiraIssuesDataPromise.always(function(){t._jiraIssuesDataPromise=null})}else{if(this._jiraIssuesDataPromise){return this._jiraIssuesDataPromise}else{return d.Deferred().resolve(this._jiraIssuesData).promise()}}};o.prototype._getTransitions=function(t,x,w){var v=this;var u;w=w||this._jiraIssuesData;if(w){u=r.find(w,function(y){return y.key===t});if(u&&u.transitions&&u.transitions[0]&&u.transitions[0].fields){return d.when(u.transitions)}}return this.options.ajax({type:"GET",url:this._getRestTransitionUrl(t,x),dataType:"json",contentType:"application/json",jsonp:false}).pipe(function(y){if(y.errors&&y.errors.length){v._handleAuthenticationRequired(y.errors);return d.Deferred().reject()}else{if(u){u.transitions=y}return y}},function(z,A,y){v._handle500Error(z)})};o.prototype._transitionIssue=function(u,w,x,t){var v=this;return this.options.ajax({type:"POST",url:this._getRestTransitionUrl(u.key,x),dataType:"json",contentType:"application/json",jsonp:false,data:JSON.stringify({fields:t,transition:{id:w.id}})}).pipe(function(z){if(z.errors&&z.errors.length){v._handleAuthenticationRequired(z.errors);return d.Deferred().reject()}if(u.fields.status.id===z.fields.status.id&&w.to&&w.to.id!==z.fields.status.id){return d.Deferred().reject(k("The transition could not be completed due to an unexpected error. Use JIRA to execute this transition."))}v._trigger("transitioned",u.key);if(z.canTransition&&!z.transitions.length){var y=d.Deferred();v._getTransitions(z.key,z.applicationLinkId,[z]).done(function(){f(z);v._updateCachedData(z);y.resolve(z)}).fail(y.reject);return y}f(z);v._updateCachedData(z);return z})};o.prototype.isVisible=function(){return this.dialog.getCurrentPanel().body.is(":visible")};o.prototype.onOAuthSuccess=function(t){if(this.isVisible()){this._removeJiraDialog();this._updateOAuthStatus(true);this._loadJiraData().done(this._renderJiraData);t.preventDefault()}};o.prototype._onTransitionClicked=function(A){var G=this;var v=d(A);var H=v.closest(".jira-transition-form");var E=this.dialog.getCurrentPanel().body.find(".jira-issue-detailed");var B=E.find(".jira-transition");var t=E.attr("data-application-id");var w=E.attr("data-issue-key");var y=v.attr("data-transition-id");var F=r.find(this._jiraIssuesData,function(I){return I.key===w});B.attr("aria-disabled","true").prop("disabled",true);var D;var C;var u=this._getTransitions(w,t).pipe(function(I){D=r.find(I,function(J){return J.id===y});if(D){if(H.length){C=jiraIntegration.transitionForm.getJSON(H)}else{if(jiraIntegration.transitionForm.isRequired(F,D)){return d.Deferred().reject("formRequired")}}}else{D={id:y,name:v.text()}}return G._transitionIssue(F,D,t,C)});var z;if(H.length){z=d('<div class="jira-transition-spinner"></div>').prependTo(H.find(".buttons"))}else{z=d('<div class="jira-transition-spinner"></div>').appendTo(E.find(".jira-transitions"))}z.spin();var x=E.closest(".list-and-detail-view").find('> .list-view .issue-item[data-issuekey="'+F.key+'"]');u.done(function(J){var I=J.fields.status;x.find(".issue-item-status").html(jiraIntegration.templates.dialog.itemIssueStatus({issueStatus:I}))});this._registerPendingRender(u).always(function(){B.attr("aria-disabled","false").prop("disabled",false);z.spinStop().remove()}).done(function(I){E.replaceWith(G._renderDetailedIssue(I))}).fail(function(J){if(!J){return}if(J==="formRequired"){E.children(".jira-header").nextAll().remove();E.append(jiraIntegration.transitionForm.$render(F,D));E.addClass("jira-transitioning");return}var K;if(J.responseText){try{K=JSON.parse(J.responseText)}catch(L){K=k("An unexpected error occurred.\nPlease contact your system administrator if the problem persists.")}}else{K=J}if(K&&K.errors){E.children(".jira-header").nextAll().remove();if(D){E.append(jiraIntegration.transitionForm.$render(F,D,C,K));E.addClass("jira-transitioning")}else{if(K.errors&&K.errors.length){var I=r.map(K.errors,function(M){return"<li>"+AJS.escapeHtml(M.message)+"</li>"});E.append(aui.message.error({content:'<ul class="jira-errors">'+I.join("")+"</ul>"}))}else{E.replaceWith(G.options.get$UnknownErrorMessage());G._setMinHeight(0)}}}})};o.prototype._renderDetailedIssue=function(t){var u=d(jiraIntegration.templates.dialog.detailedIssue({issue:t}));return u.attr("data-last-updated",new Date().getTime())};o.prototype._onTransitionCancelled=function(v){var x=d(v);var w=x.closest(".jira-issue-detailed");var t=w.attr("data-issue-key");var u=r.find(this._jiraIssuesData,function(y){return y.key===t});w.replaceWith(this._renderDetailedIssue(u))};o.prototype._updateCachedData=function(t){this._jiraIssuesData=r.map(this._jiraIssuesData,function(u){return(u.key===t.key)?t:u})};o.prototype._handleAuthenticationRequired=function(u){var t=this;this._removeViewWarning();i.then(function(v){if(u.length!==v.length){t._updateOAuthStatus(true)}i.then(function(w){t.dialog.getCurrentPanel().body.empty().append(t.options.get$AuthMessage(w));t._setMinHeight(0)})})};o.prototype._removeViewWarning=function(){this.dialog.popup.element.find(".view-warning").remove()};o.prototype._handle500Error=function(x){if(x.status===500){var u;try{u=JSON.parse(x.responseText)}catch(w){}var t;var v=u&&u.errors;if(!v||!v.length){t=this.options.get$UnknownErrorMessage()}else{t=this.options.get$ConnectionLostMessage(v)}this._removeViewWarning();this.dialog.getCurrentPanel().body.empty().append(t);this._setMinHeight(0)}};o.prototype._registerPendingRender=function(t){this._cancelPendingRender();var u=this._pendingRender=d.Deferred();t.done(function(){u.resolveWith(this,arguments)}).fail(function(){u.rejectWith(this,arguments)});return this._pendingRender};o.prototype._cancelPendingRender=function(){if(this._pendingRender){this._pendingRender.reject();this._pendingRender=null}};o.prototype._renderJiraData=function(){var u=this;var v;var y=this.dialog.getCurrentPanel().body;this._cancelPendingRender();var t;var z;var x;switch(this._jiraIssuesData.length){case 0:v=this.options.get$NoIssuesExistMessage();break;case 1:z=this.issueKeys.length>1;v=this._renderDetailedIssue(this._jiraIssuesData[0]);x=d(window).height();break;default:if(this._truncated){t=AJS.format("Showing the first {0} issues",this.options.maxIssues)}else{if(this.issueKeys.length!==this._jiraIssuesData.length){z=true}}var w=r.findWhere(this._jiraIssuesData,{key:this.initialIssueKey});v=d(jiraIntegration.templates.dialog.multiIssueView({issues:this._jiraIssuesData,selectedIssue:w}));this.multiIssueView=new c(v,function(D,C,E,F){if(!l(F)){return}F.preventDefault();u._cancelPendingRender();var A=D.attr("data-issuekey");var B=r.find(u._jiraIssuesData,function(G){return G.key===A});if(B.transitions&&B.transitions.promise){E.empty().spin("large");u._registerPendingRender(B.transitions).always(function(){E.spinStop()}).done(function(){E.html(u._renderDetailedIssue(B))})}else{E.html(u._renderDetailedIssue(B))}});y.addClass("multi-issues");x=d(window).height();break}this._removeViewWarning();if(t){this.dialog.popup.element.find(".dialog-button-panel").prepend(jiraIntegration.templates.dialog.warningMessage({warningText:t}))}else{if(z){i.then(this._renderOAuthStatus.bind(this))}}y.html(v);v.find(".issue-status").attr("data-last-updated",new Date().getTime());this._setMinHeight(x||0)};o.prototype._bindOAuthCallbacks=function(){var t=AJS.$(document);t.bind("applinks.auth.approved",this.onOAuthSuccess);d('<div class="applinks-auth-confirmation-container hidden"></div>').appendTo(this.dialog.popup.element)};o.prototype._unbindOAuthCallbacks=function(){var t=AJS.$(document);t.unbind("applinks.auth.approved",this.onOAuthSuccess);d(".applinks-auth-confirmation-container.hidden").remove()};o.prototype._updateOAuthStatus=function(t){if(i&&!t){return}i=this.options.ajax({type:"GET",url:this._getOAuthStatusUrl()}).then(function(u){return u.filter(function(v){return !v.authenticated})})};o.prototype._renderOAuthStatus=function(v){this._removeJiraDialog();this._removeViewWarning();var t=this.dialog.popup.element.find(".dialog-button-panel");if(v.length===0){t.prepend(jiraIntegration.templates.dialog.warningMessage({warningText:"You don\u0027t have access to view all issues or they may not exist"}));return}var w=d(jiraIntegration.templates.dialog.oauthFooterMessage({includeDialog:v.length>2,multipleJiras:v.length>1}));var x=w.find(".jira-instance-picker");v.slice(0,2).forEach(function(z,y){if(y!==0){x.append(", ")}x.append(a(z))});var u=w.find(".jira-instance-list");v.slice(2).forEach(function(y){u.append(d("<li></li>").append(a(y)))});t.prepend(jiraIntegration.templates.dialog.warningMessage({warningText:""}));t.find(".view-warning").html(w)};function a(v){var u=ApplinksUtils.createAuthRequestInline(null,{id:v.id,authUri:AJS.contextPath()+"/plugins/servlet/applinks/oauth/login-dance/authorize?applicationLinkID="+encodeURIComponent(v.id),appUri:v.displayUrl,appName:v.name});var t=u.find("a.applink-authenticate").text(v.name).attr("title",v.name);return t.wrap('<span class="instance"></span>')}function k(t){return{errors:[{message:t}]}}var m={j:74,k:75};function c(t,v,u){this.options=d.extend({},c.prototype.defaults,u);this.$listView=t.find(".list-view");this.$detailView=t.find(".detail-view");this.selectHandler=v;r.bindAll(this,"itemClickHandler","shortcutHandler");this.init()}c.prototype.defaults={selectedClass:"selectedItem"};c.prototype.init=function(){var t=this;this.bindShortcuts();this.$listView.on("click","li",this.itemClickHandler)};c.prototype.itemClickHandler=function(v){var u=this.options.selectedClass;this.$listView.find("li."+u).removeClass(u);var t=d(v.currentTarget).addClass(u);this.selectHandler(t,this.$listView,this.$detailView,v)};c.prototype.destroy=function(){this.unbindShortcuts()};c.prototype.shortcutHandler=function(w){if(d(w.target).is("input,textarea,select")){return}var u;if(w.which===m.j){u="next"}else{if(w.which===m.k){u="prev"}else{return}}var v=this.$listView.find("li."+this.options.selectedClass);var t=v[u]("li");t.click();this._scrollItemIntoView(t)};c.prototype.bindShortcuts=function(){d(document).on("keydown",this.shortcutHandler)};c.prototype.unbindShortcuts=function(){d(document).off("keydown",this.shortcutHandler)};c.prototype._scrollItemIntoView=function(t){t.find("a").focus().blur()};var q=/.*(?=\/browse\/[^\/]*-\d+)/;var j=/.*(?=\/rest\/api\/\d+\/)/;function f(w){var v=q.exec(w.url)[0];var x=j.exec(w.self)[0];function u(A,y,z){if(typeof A==="string"){z[y]=n(A,v,x);return}r.each(A,u)}function t(z,y){if(z[y]){z[y]=e(z[y],v,x)}}s(w.fields,h,u);s(w.renderedFields,h,u);s(w.transitions,h,u);if(w.renderedFields){t(w.renderedFields,"description");r.each(w.renderedFields.comment&&w.renderedFields.comment.comments||[],function(y){t(y,"body")})}}function h(v,t,u){return/[uU]rls?$/.test(t)}function e(u,t,w){try{var v=d("<div />").html(u);r.each(["href","src"],function(y){r.each(v.find("["+y+"]"),function(z){z.setAttribute(y,n(z.getAttribute(y),t,w))})});u=v.html()}catch(x){}return u}var b=/^((\w+:)?\/\/|\w+:)/;function n(u,t,v){if(u.substring(0,v.length)===v){return p(t,u.substring(v.length))}if(!b.test(u)){return p(t,u)}return u}function s(v,u,t){if(v&&typeof v==="object"){r.each(v,function(x,w){if(u(x,w,v)){t(x,w,v)}s(x,u,t)})}}function p(u,t){var w=u.charAt(u.length-1)==="/";var v=t.charAt(0)==="/";return w&&v?u+t.substring(1):w||v?u+t:u+"/"+t}return o}(AJS.$,_));require(["aui/inline-dialog2"]);;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog', location = '/jira-issue-dialog/jira-issues-dialog.soy' */
// This file was automatically generated from jira-issues-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.dialog.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.dialog == 'undefined') { jiraIntegration.templates.dialog = {}; }


jiraIntegration.templates.dialog.detailedIssue = function(opt_data, opt_ignored) {
  return '<div class="jira-issue-detailed" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-application-id="' + soy.$$escapeHtml(opt_data.issue.applicationLinkId) + '"><div class="jira-header">' + aui.group.group({content: '' + aui.group.item({extraClasses: 'jira-project-avatar', content: '<span class="aui-avatar aui-avatar-project jira-project-avatar aui-avatar-large"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.issue.fields.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.issue.fields.project.name ? opt_data.issue.fields.project.name : '') + '" onerror="AJS.$(this).trigger(\'jira-img-error\')" /></span></span>'}) + aui.group.item({content: '<span class="project-name">' + soy.$$escapeHtml(opt_data.issue.fields.project.name) + '</span><a class="issue-key" href="' + soy.$$escapeHtml(opt_data.issue.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a><h2 class="issue-summary" title="' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '">' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '</h2>'})}) + '</div>' + ((opt_data.issue.canTransition && opt_data.issue.transitions && opt_data.issue.transitions.length) ? jiraIntegration.templates.dialog.jiraActionsToolbar({transitions: opt_data.issue.transitions, maxTransitionsToDisplay: opt_data.maxTransitionsToDisplay}) : '') + '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml('Details') + '</h3></div>' + aui.group.group({extraClasses: 'issue-details jira-section', content: '' + aui.group.item({content: '<ul class="fields"><li class="field issue-type"><span class="field-label">' + soy.$$escapeHtml('Type:') + '</span><img class="aui-icon" src="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.iconUrl) + '"/><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.name) + '</span></li><li class="field issue-priority"><span class="field-label">' + soy.$$escapeHtml('Priority:') + '</span>' + ((opt_data.issue.fields.priority) ? '<img class="aui-icon" src="' + soy.$$escapeHtml(opt_data.issue.fields.priority.iconUrl) + '"/><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.priority.name) + '</span>' : '<span class="field-text empty">' + soy.$$escapeHtml('No priority') + '</span>') + '</li></ul>'}) + aui.group.item({content: '<ul class="fields"><li class="field issue-status"><span class="field-label">' + soy.$$escapeHtml('Status:') + '</span>' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.issue.fields.status}) + '</li><li class="field issue-assignee"><span class="field-label">' + soy.$$escapeHtml('Assignee:') + '</span>' + ((opt_data.issue.fields.assignee) ? '<img class="aui-icon" title="' + soy.$$escapeHtml(opt_data.issue.fields.assignee.displayName) + '" src="' + soy.$$escapeHtml(opt_data.issue.fields.assignee.avatarUrls['16x16']) + '"><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.assignee.displayName) + '</span>' : '<span class="field-text empty">' + soy.$$escapeHtml('Unassigned') + '</span>') + '</li></ul>'})}) + '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml('Description') + '</h3></div><div class="jira-section">' + ((opt_data.issue.renderedFields && opt_data.issue.renderedFields.description) ? '<div class="issue-description rendered">' + soy.$$filterNoAutoescape(opt_data.issue.renderedFields.description) + '</div>' : (opt_data.issue.fields.description) ? '<p class="issue-description">' + soy.$$escapeHtml(opt_data.issue.fields.description) + '</p>' : '<p class="issue-description empty">' + soy.$$escapeHtml('No description') + '</p>') + '</div></div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.detailedIssue.soyTemplateName = 'jiraIntegration.templates.dialog.detailedIssue';
}


jiraIntegration.templates.dialog.jiraActionsToolbar = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({extraClasses: 'jira-actions', content: '' + aui.toolbar2.group({content: '' + aui.toolbar2.item({item: 'primary', extraClasses: 'jira-transitions', content: '' + jiraIntegration.templates.dialog.transitionsButtons(opt_data)})})});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.jiraActionsToolbar.soyTemplateName = 'jiraIntegration.templates.dialog.jiraActionsToolbar';
}


jiraIntegration.templates.dialog.transitionsButtons = function(opt_data, opt_ignored) {
  var output = '';
  var maxTransitionsToDisplay__soy122 = opt_data.maxTransitionsToDisplay ? opt_data.maxTransitionsToDisplay : 3;
  var param123 = '';
  var transitionList124 = opt_data.transitions;
  var transitionListLen124 = transitionList124.length;
  for (var transitionIndex124 = 0; transitionIndex124 < transitionListLen124; transitionIndex124++) {
    var transitionData124 = transitionList124[transitionIndex124];
    param123 += (transitionIndex124 < maxTransitionsToDisplay__soy122 - 1 || opt_data.transitions.length <= maxTransitionsToDisplay__soy122) ? aui.buttons.button({text: transitionData124.name, extraClasses: 'jira-transition', extraAttributes: {'data-transition-id': transitionData124.id, autocomplete: 'off'}}) : '';
  }
  param123 += (opt_data.transitions.length > maxTransitionsToDisplay__soy122) ? aui.buttons.button({text: 'More', dropdown2Target: 'jira-more-transitions', extraAttributes: {autocomplete: 'off'}}) : '';
  output += aui.buttons.buttons({content: param123});
  if (opt_data.transitions.length > maxTransitionsToDisplay__soy122) {
    var param143 = '<ul>';
    var transitionList145 = opt_data.transitions;
    var transitionListLen145 = transitionList145.length;
    for (var transitionIndex145 = 0; transitionIndex145 < transitionListLen145; transitionIndex145++) {
      var transitionData145 = transitionList145[transitionIndex145];
      param143 += (transitionIndex145 > maxTransitionsToDisplay__soy122 - 2) ? '<li><a class="jira-transition" data-transition-id="' + soy.$$escapeHtml(transitionData145.id) + '">' + soy.$$escapeHtml(transitionData145.name) + '</a></li>' : '';
    }
    param143 += '</ul>';
    output += aui.dropdown2.contents({id: 'jira-more-transitions', extraClasses: 'aui-style-default', content: param143});
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.transitionsButtons.soyTemplateName = 'jiraIntegration.templates.dialog.transitionsButtons';
}


jiraIntegration.templates.dialog.warningMessage = function(opt_data, opt_ignored) {
  return '<div class="view-warning"><span class="aui-icon aui-icon-small aui-iconfont-info" /><span class="warning-message">' + soy.$$escapeHtml(opt_data.warningText) + '</span></div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.warningMessage.soyTemplateName = 'jiraIntegration.templates.dialog.warningMessage';
}


jiraIntegration.templates.dialog.multiIssueView = function(opt_data, opt_ignored) {
  var output = '<div class="list-and-detail-view"><div class="list-view"><ul>';
  var issueList162 = opt_data.issues;
  var issueListLen162 = issueList162.length;
  for (var issueIndex162 = 0; issueIndex162 < issueListLen162; issueIndex162++) {
    var issueData162 = issueList162[issueIndex162];
    output += jiraIntegration.templates.dialog.issueItem({issue: issueData162, isSelected: opt_data.selectedIssue ? issueData162.key == opt_data.selectedIssue.key : issueIndex162 == 0});
  }
  output += '</ul></div><div class="detail-view">' + jiraIntegration.templates.dialog.detailedIssue({issue: opt_data.selectedIssue ? opt_data.selectedIssue : opt_data.issues[0]}) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.multiIssueView.soyTemplateName = 'jiraIntegration.templates.dialog.multiIssueView';
}


jiraIntegration.templates.dialog.issueItem = function(opt_data, opt_ignored) {
  return '<li class="issue-item' + soy.$$escapeHtml(opt_data.isSelected ? ' selectedItem' : '') + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issue.key) + '"><img class="aui-icon issue-item-type" title="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.name) + '" src="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.iconUrl) + '"/><a class="issue-item-key" href="' + soy.$$escapeHtml(opt_data.issue.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a><div class="issue-item-status">' + jiraIntegration.templates.dialog.itemIssueStatus({issueStatus: opt_data.issue.fields.status}) + '</div><a href="' + soy.$$escapeHtml(opt_data.issue.url) + '" class="issue-item-summary" title="' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '">' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '</a></li>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.issueItem.soyTemplateName = 'jiraIntegration.templates.dialog.issueItem';
}


jiraIntegration.templates.dialog.itemIssueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.issueStatus, isSubtle: true, isCompact: ! opt_data.issueStatus.statusCategory});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.itemIssueStatus.soyTemplateName = 'jiraIntegration.templates.dialog.itemIssueStatus';
}


jiraIntegration.templates.dialog.message = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="jira-dialog-message' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.iconClass) ? '<div class="jira-dialog-message-icon aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + soy.$$escapeHtml(opt_data.accessibilityText ? opt_data.accessibilityText : '') + '</div>' : '') + ((opt_data.title) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + ((opt_data.text) ? '<p>' + soy.$$escapeHtml(opt_data.text) + '</p>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.message.soyTemplateName = 'jiraIntegration.templates.dialog.message';
}


jiraIntegration.templates.dialog.linkText = function(opt_data, opt_ignored) {
  return '<p class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</a>: ' + soy.$$escapeHtml(opt_data.text) + '</p>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.linkText.soyTemplateName = 'jiraIntegration.templates.dialog.linkText';
}


jiraIntegration.templates.dialog.linkTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.text) + ' <a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</a></h2>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.linkTitle.soyTemplateName = 'jiraIntegration.templates.dialog.linkTitle';
}


jiraIntegration.templates.dialog.authenticate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + jiraIntegration.templates.dialog.message({title: 'Authenticate to see this issue', content: '<p>' + ((opt_data.multipleJiras) ? soy.$$escapeHtml('Please log in to approve these applications:') + ' ' : soy.$$escapeHtml('Please log in to approve this application:') + ' ') + '<span class=\'jira-instance-list\'></span></p>', extraClasses: opt_data.extraClasses, iconClass: 'icon-lock'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.authenticate.soyTemplateName = 'jiraIntegration.templates.dialog.authenticate';
}


jiraIntegration.templates.dialog.error = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + jiraIntegration.templates.dialog.message({title: opt_data.title, titleContent: opt_data.titleContent, text: opt_data.text, content: opt_data.content, extraClasses: opt_data.extraClasses, iconClass: 'icon-skull'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.error.soyTemplateName = 'jiraIntegration.templates.dialog.error';
}


jiraIntegration.templates.dialog.oauthFooterMessage = function(opt_data, opt_ignored) {
  return '<span>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ((opt_data.multipleJiras) ? soy.$$escapeHtml('Authenticate with the following applications to view more issues:') + ' ' : soy.$$escapeHtml('Authenticate with the following application to view more issues:') + ' ') + '<span class=\'jira-instance-picker\'></span>' + ((opt_data.includeDialog) ? ', ' + aui.inlineDialog2.trigger({menu: {id: 'jira-instance-list-dialog'}, text: 'More'}) + aui.inlineDialog2.inlineDialog2({id: 'jira-instance-list-dialog', respondsTo: 'toggle', alignment: 'top center', content: '<ul class="jira-instance-list"></ul>'}) : '') + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.oauthFooterMessage.soyTemplateName = 'jiraIntegration.templates.dialog.oauthFooterMessage';
}
;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog-trigger', location = '/jira-issues-dialog-trigger/jira-issues-dialog-trigger.js' */
jiraIntegration.triggers=(function(d,b){function c(g){return g.which===3}function f(g){return(!g.which||g.which===1)&&!(g.metaKey||g.ctrlKey||g.shiftKey||(g.altKey&&!d.browser.msie))}var a={defaults:{selector:".jira-issues-trigger",headerTitleFn:null}};function e(j,h){j=d.extend({},a.defaults,j);var l;function i(){if(!l){if(h instanceof jiraIntegration.JiraIssuesDialog){l=h}else{l=new jiraIntegration.JiraIssuesDialog(h)}}return l}function n(v,r){var t=i();if(c(v)||(!f(v)&&!!r.data("single-issue"))){return}v.preventDefault();var u=r.attr("data-issue-keys");var s=u&&u.split(",");var q=r.attr("data-initial-issue-key");if(s){t.setIssueKeys(s,q)}if(typeof j.headerTitleFn==="function"){t.setTitle(j.headerTitleFn(r))}r.tipsy("hide");t.show()}var o={gravity:"n",className:function(){var s=d(".tipsy");var w=s[0];var q=w.offsetWidth;var v="multi-issues-tooltip";s.addClass(v);var t=w.offsetWidth;var r=q-t;var u=parseFloat(s.css("left"),10);s.css("left",(u+r/2)+"px");return v}};var g;var p;if(typeof j.selector==="string"){g=function(r){var q=d(r.target).closest(j.selector);if(q.length){n(r,q)}};d(document).on("click",g);o.live=true;d(j.selector+".multi-issues").tipsy(o);p=function(){d(document).off("click",g)}}else{g=function(q){n(q,d(this))};var k=d(j.selector);k.on("click",g);var m=k.filter(".multi-issues");m.tipsy(o);p=function(){k.off("click",g)}}return{getDialog:i,unbind:p}}a.init=e;return a}(AJS.$,_));;
;
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog-trigger', location = '/jira-issues-dialog-trigger/jira-issues-dialog-trigger.soy' */
// This file was automatically generated from jira-issues-dialog-trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.trigger.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.trigger == 'undefined') { jiraIntegration.templates.trigger = {}; }


jiraIntegration.templates.trigger.issuesTrigger = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.displayedIssue || opt_data.issues.length == 1) {
    output += '<a class="' + soy.$$escapeHtml(opt_data.className ? opt_data.className : 'jira-issues-trigger') + '" data-issue-keys="';
    var issueList8 = opt_data.issues;
    var issueListLen8 = issueList8.length;
    for (var issueIndex8 = 0; issueIndex8 < issueListLen8; issueIndex8++) {
      var issueData8 = issueList8[issueIndex8];
      output += ((! (issueIndex8 == 0)) ? ',' : '') + soy.$$escapeHtml(issueData8.key);
    }
    output += '"' + ((opt_data.displayedIssue) ? ' data-initial-issue-key="' + soy.$$escapeHtml(opt_data.displayedIssue.key) + '"' : '') + ' data-single-issue="true" href="' + soy.$$escapeHtml(opt_data.displayedIssue ? opt_data.displayedIssue.url : opt_data.issues[0].url) + '">' + soy.$$escapeHtml(opt_data.displayedIssue ? opt_data.displayedIssue.key : opt_data.issues[0].key) + '</a>';
  } else if (opt_data.issues.length > 1) {
    output += '<a class="' + soy.$$escapeHtml(opt_data.className ? opt_data.className : 'jira-issues-trigger') + ' multi-issues" data-issue-keys="';
    var issueList29 = opt_data.issues;
    var issueListLen29 = issueList29.length;
    for (var issueIndex29 = 0; issueIndex29 < issueListLen29; issueIndex29++) {
      var issueData29 = issueList29[issueIndex29];
      output += ((! (issueIndex29 == 0)) ? ',' : '') + soy.$$escapeHtml(issueData29.key);
    }
    output += '" href="#" title="' + jiraIntegration.templates.trigger.tooltip(opt_data) + '"><strong>' + soy.$$escapeHtml(opt_data.issues.length <= (opt_data.maxIssues ? opt_data.maxIssues : 10) ? opt_data.issues.length : AJS.format('{0}+',opt_data.maxIssues ? opt_data.maxIssues : 10)) + '</strong> ' + soy.$$escapeHtml('JIRA Issues') + '</a>';
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.trigger.issuesTrigger.soyTemplateName = 'jiraIntegration.templates.trigger.issuesTrigger';
}


jiraIntegration.templates.trigger.tooltip = function(opt_data, opt_ignored) {
  var output = '';
  var issueList44 = opt_data.issues;
  var issueListLen44 = issueList44.length;
  for (var issueIndex44 = 0; issueIndex44 < issueListLen44; issueIndex44++) {
    var issueData44 = issueList44[issueIndex44];
    output += (issueIndex44 < 5) ? ((! (issueIndex44 == 0)) ? '\n' : '') + soy.$$escapeHtml(issueData44.key) : '';
  }
  output += (opt_data.issues.length > 5) ? '\n' + soy.$$escapeHtml(AJS.format('and {0} more...',opt_data.issues.length - 5)) : '';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.trigger.tooltip.soyTemplateName = 'jiraIntegration.templates.trigger.tooltip';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-integration-lib', location = '/bitbucket/internal/feature/jira/integration/triggers.js' */
define("bitbucket/internal/feature/jira/integration/triggers",[],function(){return jiraIntegration.triggers});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-integration-lib', location = '/bitbucket/internal/feature/jira/integration/dialog.js' */
define("bitbucket/internal/feature/jira/integration/dialog",function(){return jiraIntegration.JiraIssuesDialog});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:oauth-util', location = '/static/bitbucket/internal/util/oauth.js' */
define("bitbucket/internal/util/oauth",["module","exports","jquery","bitbucket/internal/util/events"],function(k,d,l,m){function n(a){var c=new f.default.Deferred,b={url:a,deferred:c,api:c.promise({abort:function(){g.cancelRequest(a)}})};e.default.trigger("bitbucket.internal.util.oauth.authorizationRequested",null,a);c.then(function(){e.default.trigger("bitbucket.internal.util.oauth.authorizationSucceeded",null,a)},function(){e.default.trigger("bitbucket.internal.util.oauth.authorizationFailed",null,
a)});g.fireRequest(a,c.resolve,c.reject);return b}function h(a){if(b){if(b.url===a)return b.api;b.api.abort()}a=b=n(a);b.deferred.always(function(){b=null});return a.api}Object.defineProperty(d,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(l),e=babelHelpers.interopRequireDefault(m),g=function(){function a(){window.aouthWindow&&window.aouthWindow.close&&window.aouthWindow.close();window.oauthCallback=null;window.aouthWindow=null}return{fireRequest:function(c,b,d){window.oauthCallback=
{uri:c,success:function(){a();b&&b()},failure:function(){a();d&&d()}};window.aouthWindow=window.open(c)},cancelRequest:function(a){window.oauthCallback&&window.oauthCallback.uri===a&&window.oauthCallback.failure()}}}(),b;d.default={authorizeUrl:h,interceptLinks:function(a){(0,f.default)(document).on("click",a,function(a){var b=this.getAttribute("href");b&&(h(b),a.preventDefault())})}};k.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-issues-dialog', location = '/bitbucket/internal/feature/jira/dialog/dialog.js' */
define("bitbucket/internal/feature/jira/dialog/dialog","module exports lodash bitbucket/internal/feature/jira/integration/dialog bitbucket/internal/feature/jira/integration/triggers bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/oauth".split(" "),function(f,c,g,h,k,l,m,n){function b(a){p.default.bindAll(this,"show","hide","showDialog","closeDialog","destroy");a=babelHelpers.extends({},this.defaults,a);a.triggerSelector?(this._triggerInfo=q.default.init({selector:a.triggerSelector,
headerTitleFn:"function"===typeof a.headerTitle?a.headerTitle:void 0},a),this._dialog=this._triggerInfo.getDialog()):this._dialog=new d.default(a);e.default.on("bitbucket.internal.util.oauth.authorizationSucceeded",this._dialog.onAuthorizationSucceeded)}Object.defineProperty(c,"__esModule",{value:!0});var p=babelHelpers.interopRequireDefault(g),d=babelHelpers.interopRequireDefault(h),q=babelHelpers.interopRequireDefault(k),r=babelHelpers.interopRequireDefault(l),e=babelHelpers.interopRequireDefault(m);
babelHelpers.interopRequireDefault(n).default.interceptLinks(".jira-ual-authenticate");b.prototype.defaults=babelHelpers.extends({},d.default.prototype.defaults,{oauthTriggerClass:"jira-ual-authenticate",ajax:function(a){return r.default.rest(babelHelpers.extends({statusCode:{200:!1,500:!1}},a))}});b.prototype.destroy=function(){e.default.off("bitbucket.internal.util.oauth.authorizationSucceeded",this._dialog.onAuthorizationSucceeded);this._dialog.destroy();this._dialog=null;this._triggerInfo&&(this._triggerInfo.unbind(),
this._triggerInfo=null)};b.prototype.showDialog=b.prototype.show=function(){this._dialog.show()};b.prototype.closeDialog=b.prototype.hide=function(){this._dialog.hide()};b.prototype.setIssueKeys=function(a){this._dialog.setIssueKeys(a)};c.default=b;f.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues', location = '/bitbucket/internal/feature/jira/pull-request/pull-request-jira-issues.js' */
define("bitbucket/internal/feature/jira/pull-request/pull-request-jira-issues","exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/jira/dialog/dialog bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/shortcuts".split(" "),function(a,k,l,m,n,p,q,r){function t(){u.default.rest({url:v.default.newBuilder(["rest","jira","latest","projects",d.default.getProject().getKey(),"repos",d.default.getRepository().getSlug(),"pull-requests",d.default.getPullRequest().getId(),
"issues"]).build(),type:"GET",statusCode:{"*":function(){return!1}}}).done(function(b){c=b;b=(0,g.default)(bitbucket.internal.feature.pullRequest.jiraWebPanel(a.getWebPanelParams())).hide();(0,g.default)(".jira-issues-placeholder").replaceWith(b);b.fadeIn();c.length&&(e=new h.default({id:"pull-request-jira-issues-dialog",issueKeys:w.default.pluck(c,"key"),maxIssues:f,triggerSelector:".pull-request-issues-trigger"}))})}function x(){y.default.bind("showJiraIssuesDialog",function(){e&&e.showDialog()})}
Object.defineProperty(a,"__esModule",{value:!0});a.getWebPanelParams=function(){return{issues:c,maxIssues:f}};a.onReady=function(){t();new h.default({id:"markup-jira-issues-dialog",maxIssues:f,triggerSelector:".markup-issues-trigger"});x()};var g=babelHelpers.interopRequireDefault(k),w=babelHelpers.interopRequireDefault(l),v=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),d=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q),y=babelHelpers.interopRequireDefault(r),
f=10,e=void 0,c=void 0});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues', location = '/bitbucket/internal/feature/jira/pull-request/pull-request-jira-issues.soy' */
// This file was automatically generated from pull-request-jira-issues.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.jiraWebPanel = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issues || opt_data.issues.length == 0) ? '<div class=\'jira-issues-placeholder hidden\'></div>' : (opt_data.issues.length == 1) ? bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({linkText: opt_data.issues[0].key, linkHref: opt_data.issues[0].url, linkExtraAttributes: 'data-single-issue=true', linkClass: 'pull-request-issues-trigger', iconClass: 'aui-icon-small aui-iconfont-jira', iconTooltip: 'Issues', extraClasses: 'jira-issues'}) : bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({count: opt_data.issues.length > opt_data.maxIssues ? opt_data.maxIssues + '+' : opt_data.issues.length, linkText: 'JIRA Issues', linkClass: 'pull-request-issues-trigger multi-issues', linkTooltip: '' + jiraIntegration.templates.trigger.tooltip(opt_data), iconClass: 'aui-icon-small aui-iconfont-jira', iconTooltip: 'Issues', extraClasses: 'jira-issues'}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.jiraWebPanel.soyTemplateName = 'bitbucket.internal.feature.pullRequest.jiraWebPanel';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues', location = '/bitbucket/internal/feature/jira/pull-request/pull-request-jira-issues-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/jira/pull-request/pull-request-jira-issues").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-jira','key':'pull-request-jira-issues-panel','moduleKey':'pull-request-jira-issues-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-jira-issues-panel','weight':15.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/jira/pull-request/pull-request-jira-issues').getWebPanelParams()), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.feature.pullRequest.jiraWebPanel), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-common-resources', location = '/bitbucket/internal/feature/build/common/build-status-common.js' */
define("bitbucket/internal/feature/build/common/build-status-common","exports jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/internal/feature/build/common/build-status-dialog bitbucket/internal/util/ajax".split(" "),function(c,l,v,w,x,y,z){function A(a){return p.default.rest("build-status").addPathComponents("commits","stats",a).build()}function q(a,b,c,e,h){if(e&&(e.failed||e.inProgress||e.successful))return b.replaceWith(a({commitId:c,stats:e})),r.default.isFunction(h)&&
h(b),!0;b.remove();return!1}function B(a){return C.default.rest({url:p.default.rest("build-status").addPathComponents("commits","stats").build(),type:"POST",data:a,statusCode:{"*":!1}})}function D(a){return(0,g.default)(bitbucket.internal.build.status.summaryIcon(a)).tooltip({gravity:"ne",html:!1})}function E(a,b,c){b=(0,g.default)(b+" .build-status-placeholder");Array.prototype.reduce.call(b,function(a,b){var d=(0,g.default)(b),t=d.attr("data-commit-id"),d=q(D,d,t,c[t]);return a||d},!1)&&a.show()}
function f(a,b){this._pendingCommitIds=[];this._headerSelector=a;this._cellSelector=b;m.bindTo((0,g.default)(document),b+" .build-icon","click",function(a){return a.attr("data-commit-id")})}function u(a,b){return F.default.rest({url:A(a),data:b,statusCode:{"*":!1}})}Object.defineProperty(c,"__esModule",{value:!0});c.showDialogIfHasBuildStatus=c.requestBuildStatus=c.queryBuildStatusAndDecorate=c.BuildStatusColumnRenderer=void 0;var g=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(v),
p=babelHelpers.interopRequireDefault(w),C=babelHelpers.interopRequireDefault(x);l=babelHelpers.interopRequireDefault(y);var F=babelHelpers.interopRequireDefault(z),m=new l.default,n=!1,k={};f.prototype.renderPlaceholder=function(a,b){this.populateBuildStatusLater(a,E);return k.hasOwnProperty(a)?bitbucket.internal.build.status.summaryIcon({commitId:a,stats:k[a],isPlaceholder:!0,date:b}):bitbucket.internal.build.status.placeholder({commitId:a,date:b})};f.prototype.populateBuildStatusLater=function(a,
b){this._pendingCommitIds.length||this._queuePopulation(b);this._pendingCommitIds.push(a)};f.prototype._queuePopulation=function(a){var b=this;setTimeout(function(){var c=b._pendingCommitIds;b._pendingCommitIds=[];B(c).then(function(a){r.default.forEach(a,function(a,b){k[b]=a});return k}).done(a.bind(null,(0,g.default)(b._headerSelector),b._cellSelector))},50)};c.BuildStatusColumnRenderer=f;c.queryBuildStatusAndDecorate=function(a,b,c,e,h){var d=a.commitId;u(d,{includeUnique:!!a.includeUnique}).done(function(a){var f=
(0,g.default)(b);a=q(e,f,d,a,function(){m.bindTo(c,"","click",function(){return d});h&&h(f)});n=n||a});return a};c.requestBuildStatus=u;c.showDialogIfHasBuildStatus=function(a){n&&m.showFor(a)}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-common-resources', location = '/bitbucket/internal/feature/build/common/build-status-dialog.js' */
define("bitbucket/internal/feature/build/common/build-status-dialog","module exports aui jquery bitbucket/internal/util/ajax bitbucket/internal/util/dom-event".split(" "),function(l,f,m,n,p,q){function g(){this._xhr=this._instance=null}function r(a,b){var t=(new c.default.Dialog({closeOnOutsideClick:!0,id:"build-status-dialog",height:240,width:600,keypressListener:function(b){b.keyCode===c.default.keyCode.ESCAPE&&a._instance&&a._instance.hide()}})).addHeader("Builds").addPanel("",
b,"build-status-dialog-panel").addLink("Close",function(){a._instance&&a._instance.hide()});(0,d.default)(document).one("hideLayer",function(){a._xhr&&a._xhr.abort();a._instance&&(a._instance.remove(),a._instance=null)});return t}function u(a,b){a._xhr=v.default.rest({url:w(b)}).fail(function(){a._instance&&a._instance.hide()}).done(function(b){b=b.values.sort(function(a,b){var e;if(!(e=h[a.state]-h[b.state]||b.dateAdded-a.dateAdded)){e=a.name||a.key;var k=
b.name||b.key;e=e<k?-1:e>k?1:0}return e});x(a,bitbucket.internal.build.status.dialogList({statuses:b}))}).always(function(){a._xhr=null});return a._xhr}function w(a){return c.default.contextPath()+"/rest/build-status/latest/commits/"+encodeURIComponent(a)}function x(a,b){a._instance.getCurrentPanel().html(b);a._instance.updateHeight()}Object.defineProperty(f,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),v=babelHelpers.interopRequireDefault(p),
y=babelHelpers.interopRequireDefault(q);g.prototype.bindTo=function(a,b,c,f){var g=this;(0,d.default)(a).on(c,b,function(a){var b=(0,d.default)(this).prop("href"),b=b&&b!==location.href+"#"&&b!==location.href;if(y.default.openInSameTab(a)||!b)a.preventDefault(),g.showFor(f((0,d.default)(this)))})};g.prototype.showFor=function(a){this._instance&&this._instance.remove();var b=(0,d.default)('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e');this._instance=r(this,b);this._instance.show();(0,d.default)(".button-panel-link").focus();
b.show().spin("large");u(this,a).always(function(){b.spinStop().remove()})};var h={INPROGRESS:0,FAILED:1,SUCCESSFUL:2};f.default=g;l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-common-resources', location = '/bitbucket/internal/feature/build/common/build-status-common.soy' */
// This file was automatically generated from build-status-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.build.status.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.build == 'undefined') { bitbucket.internal.build = {}; }
if (typeof bitbucket.internal.build.status == 'undefined') { bitbucket.internal.build.status = {}; }


bitbucket.internal.build.status.summaryIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed > 0) ? bitbucket.internal.build.status.failedBuildIcon({commitId: opt_data.commitId, clickable: true, results: opt_data.stats.results, isPlaceholder: opt_data.isPlaceholder, date: opt_data.date, title: '' + bitbucket.internal.build.status.title(opt_data)}) : (opt_data.stats.inProgress > 0) ? bitbucket.internal.build.status.inProgressBuildIcon({commitId: opt_data.commitId, clickable: true, results: opt_data.stats.results, isPlaceholder: opt_data.isPlaceholder, date: opt_data.date, title: '' + bitbucket.internal.build.status.title(opt_data)}) : (opt_data.stats.successful > 0) ? bitbucket.internal.build.status.successfulBuildIcon({commitId: opt_data.commitId, clickable: true, results: opt_data.stats.results, isPlaceholder: opt_data.isPlaceholder, date: opt_data.date, title: '' + bitbucket.internal.build.status.title(opt_data)}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.summaryIcon.soyTemplateName = 'bitbucket.internal.build.status.summaryIcon';
}


bitbucket.internal.build.status.title = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed >= 1) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#build|1\x3cbuilds} failed',opt_data.stats.failed)) : (opt_data.stats.inProgress >= 1) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#build|1\x3cbuilds} in progress',opt_data.stats.inProgress)) : (opt_data.stats.successful >= 1) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#build|1\x3cbuilds} passed',opt_data.stats.successful)) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.title.soyTemplateName = 'bitbucket.internal.build.status.title';
}


bitbucket.internal.build.status.dialogList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.statuses.length == 0) {
    output += bitbucket.internal.widget.focusMessage.message({title: 'None found', text: 'There are no build results available for this commit.'});
  } else {
    output += '<ul class="build-status-list">';
    var statusList50 = opt_data.statuses;
    var statusListLen50 = statusList50.length;
    for (var statusIndex50 = 0; statusIndex50 < statusListLen50; statusIndex50++) {
      var statusData50 = statusList50[statusIndex50];
      output += '<li>';
      switch (statusData50.state) {
        case 'SUCCESSFUL':
          output += bitbucket.internal.build.status.successfulBuildIcon({content: 'Build successful', title: 'Build successful'});
          break;
        case 'FAILED':
          output += bitbucket.internal.build.status.failedBuildIcon({content: 'Build failed', title: 'Build failed'});
          break;
        case 'INPROGRESS':
          output += bitbucket.internal.build.status.inProgressBuildIcon({content: 'Build in progress', title: 'Build in progress'});
          break;
      }
      output += '<div class="summary" data-key="' + soy.$$escapeHtml(statusData50.key) + '"><span class="name"><a href="' + soy.$$escapeHtml(statusData50.url) + '" target="_blank" title="' + bitbucket.internal.build.status.buildName({status: statusData50}) + '">' + bitbucket.internal.build.status.buildName({status: statusData50}) + '</a></span>' + bitbucket.internal.widget.date.shortAge({date: statusData50.dateAdded, extraClasses: 'date-added'}) + '</div>' + bitbucket.internal.build.status.buildDescription({status: statusData50}) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.dialogList.soyTemplateName = 'bitbucket.internal.build.status.dialogList';
}


bitbucket.internal.build.status.buildLabel = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.status) {
    case 'FAILED':
      output += soy.$$escapeHtml(AJS.format('{0,choice,1#build|1\x3cbuilds} failed',opt_data.count));
      break;
    case 'INPROGRESS':
      output += soy.$$escapeHtml(AJS.format('{0,choice,1#build|1\x3cbuilds} in progress',opt_data.count));
      break;
    case 'SUCCESSFUL':
      output += soy.$$escapeHtml(AJS.format('{0,choice,1#build|1\x3cbuilds}',opt_data.count));
      break;
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildLabel.soyTemplateName = 'bitbucket.internal.build.status.buildLabel';
}


bitbucket.internal.build.status.successfulBuildIcon = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-approve successful-build-icon', status: 'SUCCESSFUL'}));
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.successfulBuildIcon.soyTemplateName = 'bitbucket.internal.build.status.successfulBuildIcon';
}


bitbucket.internal.build.status.failedBuildIcon = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-error failed-build-icon', status: 'FAILED'}));
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.failedBuildIcon.soyTemplateName = 'bitbucket.internal.build.status.failedBuildIcon';
}


bitbucket.internal.build.status.inProgressBuildIcon = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-time inprogress-build-icon', status: 'INPROGRESS'}));
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.inProgressBuildIcon.soyTemplateName = 'bitbucket.internal.build.status.inProgressBuildIcon';
}


bitbucket.internal.build.status.buildIcon = function(opt_data, opt_ignored) {
  var output = '';
  var url__soy106 = opt_data.clickable && opt_data.results && opt_data.results.length == 1 ? opt_data.results[0].url : null;
  var cssClassesContent__soy107 = 'aui-icon aui-icon-small build-icon ' + soy.$$escapeHtml(opt_data.iconClasses) + ' ' + ((opt_data.isPlaceholder) ? ' build-status-placeholder' : '');
  var attributesContent__soy114 = '' + ((opt_data.title) ? '  title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.commitId) ? '  data-commit-id="' + soy.$$escapeHtml(opt_data.commitId) + '"' : '') + ((opt_data.status) ? '  data-build-status="' + soy.$$escapeHtml(opt_data.status) + '"' : '') + ((opt_data.date) ? '  data-date="' + soy.$$escapeHtml(opt_data.date) + '"' : '');
  output += (! opt_data.clickable) ? '<span class="' + soy.$$escapeHtml(cssClassesContent__soy107) + '" ' + soy.$$filterNoAutoescape(attributesContent__soy114) + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</span>' : (url__soy106) ? '<a href="' + soy.$$escapeHtml(url__soy106) + '" class="' + soy.$$escapeHtml(cssClassesContent__soy107) + '" ' + soy.$$filterNoAutoescape(attributesContent__soy114) + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</a>' : '<button type="button" class="aui-button aui-button-link ' + soy.$$escapeHtml(cssClassesContent__soy107) + '" ' + soy.$$filterNoAutoescape(attributesContent__soy114) + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</button>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildIcon.soyTemplateName = 'bitbucket.internal.build.status.buildIcon';
}


bitbucket.internal.build.status.buildName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.status.name ? opt_data.status.name : opt_data.status.key);
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildName.soyTemplateName = 'bitbucket.internal.build.status.buildName';
}


bitbucket.internal.build.status.buildDescription = function(opt_data, opt_ignored) {
  return '<div class="description" title="' + soy.$$escapeHtml(opt_data.status.description ? opt_data.status.description : '') + '">' + soy.$$escapeHtml(opt_data.status.description ? opt_data.status.description : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.buildDescription.soyTemplateName = 'bitbucket.internal.build.status.buildDescription';
}


bitbucket.internal.build.status.placeholder = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="build-status-placeholder hidden"' + ((opt_data.commitId) ? ' data-commit-id="' + soy.$$escapeHtml(opt_data.commitId) + '"' : '') + ((opt_data.date) ? ' data-last-updated="' + soy.$$escapeHtml(opt_data.date) + '"' : '') + '></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.placeholder.soyTemplateName = 'bitbucket.internal.build.status.placeholder';
}


bitbucket.internal.build.status.stats = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.build.status.statsPanel({stats: opt_data.stats, build: opt_data.stats.results && opt_data.stats.results.length == 1 ? opt_data.stats.results[0] : null});
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.stats.soyTemplateName = 'bitbucket.internal.build.status.stats';
}


bitbucket.internal.build.status.statsPanel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed > 0) ? bitbucket.internal.build.status.summary({build: opt_data.build, buildIconContent: '' + bitbucket.internal.build.status.failedBuildIcon({clickable: true, results: opt_data.stats.results}), count: opt_data.stats.failed, status: 'FAILED'}) : (opt_data.stats.inProgress > 0) ? bitbucket.internal.build.status.summary({build: opt_data.build, buildIconContent: '' + bitbucket.internal.build.status.inProgressBuildIcon({clickable: true, results: opt_data.stats.results}), count: opt_data.stats.inProgress, status: 'INPROGRESS'}) : (opt_data.stats.successful > 0) ? bitbucket.internal.build.status.summary({build: opt_data.build, buildIconContent: '' + bitbucket.internal.build.status.successfulBuildIcon({clickable: true, results: opt_data.stats.results}), count: opt_data.stats.successful, status: 'SUCCESSFUL'}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.statsPanel.soyTemplateName = 'bitbucket.internal.build.status.statsPanel';
}


bitbucket.internal.build.status.summary = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-build', iconText: 'Build status', iconTooltip: 'Builds', linkClass: 'build-status-overview-link', linkHref: opt_data.build ? opt_data.build.url : null, linkExtraAttributes: opt_data.build ? 'data-single-build=true' : null, linkText: '' + bitbucket.internal.build.status.buildLabel(opt_data), count: opt_data.count, extraClasses: 'build-status-summary', extraContent: '' + soy.$$filterNoAutoescape(opt_data.buildIconContent)});
};
if (goog.DEBUG) {
  bitbucket.internal.build.status.summary.soyTemplateName = 'bitbucket.internal.build.status.summary';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-panel-resources', location = '/bitbucket/internal/feature/build/status-panel/status-panel-context-provider.js' */
define("bitbucket/internal/feature/build/status-panel/status-panel-context-provider",["exports","bitbucket/internal/feature/build/common/build-status-common","bitbucket/internal/util/shortcuts"],function(a,b,d){Object.defineProperty(a,"__esModule",{value:!0});a.fetchContext=function(a){c=a.commitId;(0,b.queryBuildStatusAndDecorate)(a,".build-status-placeholder",".build-status-summary .build-status-overview-link, .build-status-summary .build-icon",bitbucket.internal.build.status.stats)};var c=void 0;
babelHelpers.interopRequireDefault(d).default.bind("showBuildDialog",function(){(0,b.showDialogIfHasBuildStatus)(c)})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-pr-overview', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-build','key':'build-status-pr-overview','moduleKey':'build-status-pr-overview','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-build:build-status-pr-overview','weight':10.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/build/status-panel/status-panel-context-provider').fetchContext({ commitId: ctx['pullRequest'].fromRef.latestCommit, includeUnique: true })), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.build.status.placeholder), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel.soy' */
// This file was automatically generated from tasks-overview-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.tasks.tasksOverview.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.tasks == 'undefined') { bitbucket.internal.feature.tasks = {}; }
if (typeof bitbucket.internal.feature.tasks.tasksOverview == 'undefined') { bitbucket.internal.feature.tasks.tasksOverview = {}; }


bitbucket.internal.feature.tasks.tasksOverview.overviewPanel = function(opt_data, opt_ignored) {
  return '<div class="plugin-section-separator"></div><div class="plugin-item plugin-item-task-count' + ((opt_data.openTaskCount == 0 && opt_data.resolvedTaskCount == 0) ? ' hidden' : '') + '"><a href="#" class="task-list-dialog-link">' + aui.icons.icon({useIconFont: true, icon: 'editor-task'}) + '<span class="replacement-placeholder" title="' + soy.$$escapeHtml('View all tasks (Type \x27Shift + T\x27)') + '">' + bitbucket.internal.feature.tasks.tasksOverview.taskCount(opt_data) + '</span></a></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.tasksOverview.overviewPanel.soyTemplateName = 'bitbucket.internal.feature.tasks.tasksOverview.overviewPanel';
}


bitbucket.internal.feature.tasks.tasksOverview.taskCount = function(opt_data, opt_ignored) {
  return '<span class="task-count" data-open="' + soy.$$escapeHtml(opt_data.openTaskCount) + '" data-resolved="' + soy.$$escapeHtml(opt_data.resolvedTaskCount) + '">' + ((opt_data.openTaskCount > 0) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x3cstrong\x3e{0}\x3c/strong\x3e open {0,choice,0#tasks|1#task|1\x3ctasks}',typeof (opt_data.openTaskCount) === 'number' ? opt_data.openTaskCount : soy.$$escapeHtml(opt_data.openTaskCount)))) : (opt_data.resolvedTaskCount > 0) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('All tasks resolved')) : '') + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.tasks.tasksOverview.taskCount.soyTemplateName = 'bitbucket.internal.feature.tasks.tasksOverview.taskCount';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel.js' */
define("bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel",["module","exports","lodash","bitbucket/internal/widget/updating-section/updating-section"],function(c,b,d,e){function a(b,a){this.init.apply(this,arguments)}Object.defineProperty(b,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(d),g=babelHelpers.interopRequireDefault(e);a.prototype.init=function(b,a){var c=a.toEventStream(),d={isVisibleProperty:a.map(function(a){return 0<a.resolvedTaskCount||0<a.openTaskCount}).toProperty()};
this._destroyCallbacks=[new g.default(b,c,bitbucket.internal.feature.tasks.tasksOverview.taskCount,d)]};a.prototype.destroy=function(){f.default.invoke(this._destroyCallbacks,"destroy")};b.default=a;c.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-counter.js' */
define("bitbucket/internal/feature/tasks/tasks-overview/tasks-counter","module exports bacon jquery lodash bitbucket/internal/feature/tasks/model/task-state bitbucket/internal/util/bacon bitbucket/internal/util/function".split(" "),function(h,e,k,l,m,n,p,q){function c(){this.init.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var r=babelHelpers.interopRequireDefault(k),t=babelHelpers.interopRequireDefault(l),f=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),
g=babelHelpers.interopRequireDefault(p),u=babelHelpers.interopRequireDefault(q);c.prototype.init=function(){var a=this;this._destroyCallbacks=[];f.default.bindAll(this,"_mapEventData");this._taskCounterStream=r.default.mergeAll(f.default.map(["created","resolved","reopened","deleted","failed-transition"],function(b){return g.default.events("bitbucket.internal.feature.pull-request-tasks."+b).map(a._mapEventData)})).merge(g.default.events("bitbucket.internal.feature.pull-request-tasks.set-counts"))};
c.prototype.emptyCounter=function(a){return{openTaskCount:0,resolvedTaskCount:0,pullRequestId:a&&a.pullRequestId||null,repositoryId:a&&a.repositoryId||null}};c.prototype._mapEventData=function(a){var b=this.emptyCounter(a.task);switch(a.task.state){case d.default.OPEN:b.openTaskCount=1;break;case d.default.RESOLVED:b.resolvedTaskCount=1}switch(a.task.lastState){case d.default.OPEN:b.openTaskCount=-1;break;case d.default.RESOLVED:b.resolvedTaskCount=-1}return b};c.prototype.countPropertyForPullRequest=
function(a,b){var c=this,d=this._taskCounterStream.merge(b).filter(function(b){return b.pullRequestId===a.pullRequestId&&b.repositoryId===a.repositoryId}).scan(this.emptyCounter(a),function(a,b){b.isReset&&(a=c.emptyCounter(b));a.openTaskCount+=b.openTaskCount;a.resolvedTaskCount+=b.resolvedTaskCount;return a});this._destroyCallbacks.push(d.onValue(t.default.noop));return d};c.prototype.destroy=function(){u.default.applyAll(this._destroyCallbacks)};e.default=c;h.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-resources', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview.js' */
define("bitbucket/internal/feature/tasks/tasks-overview/tasks-overview","module exports bacon jquery lodash bitbucket/util/events bitbucket/util/state bitbucket/internal/feature/tasks/tasks-overview/tasks-counter bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-panel".split(" "),function(m,c,n,p,q,r,t,u,v){function b(){var a=g.default.getPullRequest().id,c=g.default.getRepository().id,b=w.default.fromPromise(_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-web:pull-request-tasks-page-provider",
"bitbucket.layout.pullRequest")).map(function(b){return h.default.extend(b.hasOwnProperty("openTaskCount")?b:d.emptyCounter(),{pullRequestId:a,repositoryId:c})});e||(e=d.countPropertyForPullRequest({pullRequestId:a,repositoryId:c},b));(0,x.default)(".plugin-item-task-count").each(function(){f.push(new y.default(this,e))})}function z(a){"bitbucket.pull-request.nav.overview"===a.name&&b()}function A(a){"bitbucket.pull-request.nav.overview"===a.name&&(h.default.invoke(f,"destroy"),f=[])}Object.defineProperty(c,
"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(n),x=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q),k=babelHelpers.interopRequireDefault(r),g=babelHelpers.interopRequireDefault(t),l=babelHelpers.interopRequireDefault(u),y=babelHelpers.interopRequireDefault(v),e,d,f=[];c.default={openTaskCountContext:function(a){return l.default.prototype.emptyCounter({pullRequestId:a.pullRequest.id,repositoryId:a.pullRequest.fromRef.repository.id})},onReady:function(){d=
new l.default;k.default.on("bitbucket.internal.page.pull-request.view.contextLoaded",z);k.default.on("bitbucket.internal.page.pull-request.view.contextUnloaded",A);b()}};m.exports=c["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tasks-overview-init-resource', location = '/static/bitbucket/internal/feature/tasks/tasks-overview/tasks-overview-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/tasks/tasks-overview/tasks-overview").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:task-list-init-resource', location = '/static/bitbucket/internal/feature/tasks/task-list/task-list-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/tasks/task-list/task-list").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-tasks-overview-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-tasks-overview-panel','moduleKey':'pull-request-tasks-overview-panel','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-tasks-overview-panel','weight':20.0,'context-provider':function(ctx) { return WebFragments._getValue((require('bitbucket/internal/feature/tasks/tasks-overview/tasks-overview').openTaskCountContext), ctx); },'params':{},'location':'bitbucket.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.feature.tasks.tasksOverview.overviewPanel), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-learnmore', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-learnmore','moduleKey':'pull-request-learnmore','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-learnmore','weight':20.0,'params':{},'location':'bitbucket.pull-request.links','view':function(ctx) { return WebFragments._getValue((bitbucket.internal.feature.pullRequest.overview.plugins.learnMore), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-overview', location = '/static/bitbucket/internal/feature/pull-request/overview/pull-request-view-overview.soy' */
// This file was automatically generated from pull-request-view-overview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.viewOverview = function(opt_data, opt_ignored) {
  return bitbucket.internal.feature.pullRequest.overviewMetadata(opt_data) + '<h3>' + soy.$$escapeHtml('Activity') + '</h3>' + bitbucket.internal.feature.pullRequest.activity({id: 'pull-request-activity', currentUser: opt_data.currentUser, commentTips: opt_data.commentTips});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.viewOverview.soyTemplateName = 'bitbucket.internal.feature.pullRequest.viewOverview';
}


bitbucket.internal.feature.pullRequest.pullRequestSummary = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0} created a pull request',opt_data.authorNameContent));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.pullRequestSummary.soyTemplateName = 'bitbucket.internal.feature.pullRequest.pullRequestSummary';
}


bitbucket.internal.feature.pullRequest.overviewMetadata = function(opt_data, opt_ignored) {
  var param15 = '' + widget.aui.group.item({content: '<h3>' + soy.$$escapeHtml('Details') + '</h3>' + widget.aui.group.group({extraClasses: 'details', content: '' + widget.aui.group.item({extraClasses: 'author-avatar-item', content: '' + bitbucket.internal.widget.avatar({person: opt_data.author, size: 'medium'})}) + widget.aui.group.item({content: '<p>' + bitbucket.internal.feature.pullRequest.pullRequestSummary({authorNameContent: '' + bitbucket.internal.widget.userLink({user: opt_data.author, extraClasses: 'author'})}) + bitbucket.internal.widget.date.shortAge({extraClasses: 'creation-date', date: opt_data.createdDate}) + '</p>' + ((opt_data.descriptionAsHtml) ? '<div class="description markup">' + soy.$$filterNoAutoescape(opt_data.descriptionAsHtml) + '</div>' : (opt_data.description) ? '<p class="description">' + soy.$$escapeHtml(opt_data.description) + '</p>' : '<p class="description no-description">' + soy.$$escapeHtml('No description for this pull request.') + ' <a class="add-description">' + soy.$$escapeHtml('Add one') + '</a></p>')})})});
  var param59 = '<div class="plugin-section-primary">';
  var panelHtmlList61 = WebFragments.getWebPanels('bitbucket.pull-request.related-entities',{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var panelHtmlListLen61 = panelHtmlList61.length;
  for (var panelHtmlIndex61 = 0; panelHtmlIndex61 < panelHtmlListLen61; panelHtmlIndex61++) {
    var panelHtmlData61 = panelHtmlList61[panelHtmlIndex61];
    param59 += soy.$$escapeHtml(panelHtmlData61);
  }
  param59 += '<div class="plugin-section-separator"></div></div><div class="plugin-section-secondary">';
  var panelHtmlList65 = WebFragments.getWebPanels('bitbucket.pull-request.links',{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var panelHtmlListLen65 = panelHtmlList65.length;
  for (var panelHtmlIndex65 = 0; panelHtmlIndex65 < panelHtmlListLen65; panelHtmlIndex65++) {
    var panelHtmlData65 = panelHtmlList65[panelHtmlIndex65];
    param59 += soy.$$escapeHtml(panelHtmlData65);
  }
  param59 += '</div>';
  var sectionList69 = WebFragments.getWebSections('bitbucket.pull-request.overview.sections',{pullRequest: opt_data.pullRequest});
  var sectionListLen69 = sectionList69.length;
  for (var sectionIndex69 = 0; sectionIndex69 < sectionListLen69; sectionIndex69++) {
    var sectionData69 = sectionList69[sectionIndex69];
    param59 += '<div class="' + soy.$$escapeHtml(sectionData69.key) + '">' + ((sectionData69.labelText) ? '<h4>' + soy.$$escapeHtml(sectionData69.labelText) + '</h4>' : '');
    var panelHtmlList78 = WebFragments.getWebPanels(sectionData69.location + '/' + sectionData69.key,{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen78 = panelHtmlList78.length;
    for (var panelHtmlIndex78 = 0; panelHtmlIndex78 < panelHtmlListLen78; panelHtmlIndex78++) {
      var panelHtmlData78 = panelHtmlList78[panelHtmlIndex78];
      param59 += soy.$$escapeHtml(panelHtmlData78);
    }
    param59 += '</div>';
  }
  param15 += widget.aui.group.item({extraClasses: 'summary-panel', content: param59});
  var output = '' + widget.aui.group.group({content: param15});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.overviewMetadata.soyTemplateName = 'bitbucket.internal.feature.pullRequest.overviewMetadata';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-commits', location = '/static/bitbucket/internal/feature/pull-request/commits/pull-request-commits.soy' */
// This file was automatically generated from pull-request-commits.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.commits = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.commits.commitsTableImpl({repository: opt_data.repository, commitPage: opt_data.commitPage, pullRequest: opt_data.pullRequest, tableId: 'pull-request-commits-table', webSections: opt_data.commitsTableWebSections});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commits.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commits';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-commits', location = '/static/bitbucket/internal/feature/pull-request/commits/pull-request-commits.js' */
define("bitbucket/internal/feature/pull-request/commits/pull-request-commits","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/commits/commits-table bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/history".split(" "),function(k,b,l,m,n,p,q,r,t,u){function v(){return w.default.currentRepo().pullRequest(g).commits()}Object.defineProperty(b,"__esModule",{value:!0});var x=babelHelpers.interopRequireDefault(l),d=babelHelpers.interopRequireDefault(m),
y=babelHelpers.interopRequireDefault(n),w=babelHelpers.interopRequireDefault(p),z=babelHelpers.interopRequireDefault(q),A=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),B=babelHelpers.interopRequireDefault(u),f=void 0,g=void 0,a=void 0;b.default={init:function(c){f=[];g=c.pullRequest.getId();var e=(0,d.default)(bitbucket.internal.feature.pullRequest.commits({repository:c.repository.toJSON(),commitsTableWebSections:c.commitsTableWebSections})),b=(0,d.default)("\x3cdiv /\x3e").append(e);
a=new z.default(v,{target:e,webSections:c.commitsTableWebSections,allCommitsFetchedMessage:"No more commits in pull request"});(0,d.default)(c.el).append(a.$spinner);e=a.init({suspended:!0}).done(function(){(0,d.default)(c.el).prepend(b.children());a.resume()});a.bindKeyboardShortcuts();f.push(h.default.chainWith((0,d.default)(document)).on("click",".commits-table a.commitid",function(a){var b=(0,d.default)(a.target).closest("tr").attr("data-commit-json");h.default.trigger("bitbucket.internal.feature.pullRequest.commit.open",
this,{commitJSON:b?JSON.parse(b):null,pullRequest:c.pullRequest});b&&A.default.openInSameTab(a)&&(B.default.pushState({commit:JSON.parse(b)},null,a.target.href),a.preventDefault())}));return e},reset:function(){y.default.invoke(f,"destroy");a.destroy();a=null}};k.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-diff-blame', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-commit-diff-blame','moduleKey':'pull-request-commit-diff-blame','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-diff-blame','weight':20.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.handlerID === 'diff-text-unified' }), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'file-blame'),'location':'bitbucket.pull-request.commit.diff.toolbar.secondary','linkText':WebFragments._formatI18n("Blame", 'bitbucket.web.file.content.sourceview.showblame', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-add-file-comment', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-commit-add-file-comment','moduleKey':'pull-request-commit-add-file-comment','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-commit-add-file-comment','weight':10.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.commentMode === 'create-new' }), ctx); },'params':{'iconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small aui-iconfont-add-comment')},'tooltip':WebFragments._formatI18n("Add a file comment (Type \u0027m\u0027)", 'bitbucket.web.comment.filecomments.add', ''),'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle add-file-comment-trigger'),'location':'bitbucket.pull-request.commit.diff.toolbar.secondary'});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-add-file-comment', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-add-file-comment','moduleKey':'pull-request-add-file-comment','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-add-file-comment','weight':10.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.commentMode === 'create-new' }), ctx); },'params':{'iconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small aui-iconfont-add-comment')},'tooltip':WebFragments._formatI18n("Add a file comment (Type \u0027m\u0027)", 'bitbucket.web.comment.filecomments.add', ''),'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle add-file-comment-trigger'),'location':'bitbucket.pull-request.diff.toolbar.secondary'});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-diff-blame', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments','key':'pull-request-diff-blame','moduleKey':'pull-request-diff-blame','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-client-web-fragments:pull-request-diff-blame','weight':20.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.handlerID === 'diff-text-unified' }), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'file-blame'),'location':'bitbucket.pull-request.diff.toolbar.secondary','linkText':WebFragments._formatI18n("Blame", 'bitbucket.web.file.content.sourceview.showblame', '')});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:icon-soy-templates', location = '/static/bitbucket/internal/images/icons/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.images.icons.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.images == 'undefined') { bitbucket.internal.images = {}; }
if (typeof bitbucket.internal.images.icons == 'undefined') { bitbucket.internal.images.icons = {}; }


bitbucket.internal.images.icons.createRepo = function(opt_data, opt_ignored) {
  return '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="#B1B1B1" fill-rule="evenodd"><path d="M13.272 13.272h9.344a1.387 1.387 0 0 0-.01-2.772h-9.334V9.337 1.384a1.387 1.387 0 0 0-2.772.01V10.5H1.394C.617 10.5 0 11.12 0 11.886c0 .771.618 1.386 1.38 1.386h9.16l-.04 9.334c0 .777.62 1.394 1.386 1.394a1.38 1.38 0 0 0 1.386-1.38v-6.733-2.637z"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.createRepo.soyTemplateName = 'bitbucket.internal.images.icons.createRepo';
}


bitbucket.internal.images.icons.importRepo = function(opt_data, opt_ignored) {
  return '<svg width="21" height="23" viewBox="0 0 21 23" xmlns="http://www.w3.org/2000/svg"><g fill="#B1B1B1" fill-rule="evenodd"><path d="M7 0h9.778c1.167 0 2.162.421 2.986 1.263.824.843 1.236 1.86 1.236 3.05v11.5a4.23 4.23 0 0 1-.837 2.566 4.24 4.24 0 0 1-2.138 1.566 4.192 4.192 0 0 1-1.504 2.201c-.74.57-1.58.854-2.521.854H4.2c-1.16 0-2.15-.421-2.97-1.263-.82-.843-1.23-1.86-1.23-3.05v-11.5C0 6.223.277 5.36.831 4.6a4.084 4.084 0 0 1 2.144-1.544A4.192 4.192 0 0 1 4.479.854 4.028 4.028 0 0 1 7 0zm12.578 15.813v-11.5c0-.787-.273-1.462-.82-2.028-.547-.565-1.207-.848-1.98-.848H7c-.518 0-.99.132-1.416.394-.427.262-.764.61-1.012 1.044H14c1.16 0 2.15.421 2.97 1.263.82.843 1.23 1.86 1.23 3.05v11.118a2.876 2.876 0 0 0 1.006-1.056c.248-.442.372-.92.372-1.438zm-2.756 2.897V7.21c0-.794-.275-1.471-.826-2.033A2.693 2.693 0 0 0 14 4.335H4.222c-.773 0-1.433.28-1.98.842a2.808 2.808 0 0 0-.82 2.033v11.5c0 .794.273 1.471.82 2.033a2.663 2.663 0 0 0 1.98.842H14c.78 0 1.446-.28 1.996-.842.55-.562.826-1.24.826-2.033z"/><path d="M9.873 17.853c-.356.424-.93.43-1.292 0l-3.734-4.426c-.357-.424-.193-.767.307-.767H8.222V6.652h1.95v6.008h3.063c.555 0 .722.337.36.767l-3.722 4.426z"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.importRepo.soyTemplateName = 'bitbucket.internal.images.icons.importRepo';
}


bitbucket.internal.images.icons.logo = function(opt_data, opt_ignored) {
  return '<svg width="42" height="48" viewBox="0 0 42 48" xmlns="http://www.w3.org/2000/svg"><title>logo-BB</title><g fill="#205081" fill-rule="evenodd"><path d="M21 0C9.472 0 .002 3.063.002 6.942c0 1.02 2.47 15.517 3.5 21.233.411 2.654 7.205 6.33 17.498 6.33 10.293 0 16.88-3.676 17.498-6.33 1.03-5.716 3.5-20.212 3.5-21.233C41.792 3.062 32.528 0 21 0zm0 29.809c-3.706 0-6.588-2.859-6.588-6.534s2.882-6.533 6.588-6.533 6.588 2.858 6.588 6.533c0 3.471-2.882 6.534-6.588 6.534zm0-20.826c-7.411 0-13.381-1.225-13.381-2.858S13.589 3.267 21 3.267c7.411 0 13.381 1.225 13.381 2.858S28.411 8.983 21 8.983z"/><path d="M36.194 33.688c-.412 0-.618.204-.618.204s-5.147 4.083-14.41 4.083c-9.264 0-14.411-4.083-14.411-4.083s-.412-.204-.618-.204c-.411 0-.823.204-.823.817v.204c.823 4.287 1.441 7.35 1.441 7.758.618 3.063 6.794 5.513 14.205 5.513 7.41 0 13.587-2.45 14.204-5.513 0-.408.618-3.47 1.441-7.758v-.204c.206-.409 0-.817-.411-.817z"/><ellipse cx="21" cy="23.071" rx="3.294" ry="3.267"/></g></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.logo.soyTemplateName = 'bitbucket.internal.images.icons.logo';
}


bitbucket.internal.images.icons.allCommits = function(opt_data, opt_ignored) {
  return '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 14"><path    style="fill:#999" d="M13,11.91a2.47,2.47,0,0,0,.32-0.27A2.22,2.22,0,0,0,14,10V2.31A2.22,2.22,0,0,0,13.32.68,2.22,2.22,0,0,0,11.69,0H6.31A2.22,2.22,0,0,0,4.68.68,2.47,2.47,0,0,0,4.4,1H5.5A1.48,1.48,0,0,1,6.31.77h5.38a1.49,1.49,0,0,1,1.08.45,1.48,1.48,0,0,1,.45,1.09V10a1.47,1.47,0,0,1-.23.81v1.09Z" transform="translate(-2 0)"/><path    style="fill:#999" d="M4.31,2H9.69a2.22,2.22,0,0,1,1.63.68A2.22,2.22,0,0,1,12,4.31V12a2.31,2.31,0,0,1-2.31,2.31H4.31a2.22,2.22,0,0,1-1.63-.68A2.22,2.22,0,0,1,2,12V4.31a2.22,2.22,0,0,1,.68-1.63A2.22,2.22,0,0,1,4.31,2Zm6.92,10V4.31A1.54,1.54,0,0,0,9.69,2.77H4.31A1.54,1.54,0,0,0,2.77,4.31V12a1.54,1.54,0,0,0,1.54,1.54H9.69A1.54,1.54,0,0,0,11.23,12Z" transform="translate(-2 0)"/><polygon style="fill:#999" points="4.5 4 5.5 4 5.5 6.4 5.5 7 4.5 7 4.5 4" /><polygon style="fill:#999" points="4.5 9 5.5 9 5.5 11.4 5.5 12 4.5 12 4.5 9"/><path    style="fill:#999" d="M7,10A2,2,0,1,1,9,8,2,2,0,0,1,7,10ZM7,7A1,1,0,1,0,8,8,1,1,0,0,0,7,7Z" transform="translate(-2 0)"/></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.allCommits.soyTemplateName = 'bitbucket.internal.images.icons.allCommits';
}


bitbucket.internal.images.icons.commit = function(opt_data, opt_ignored) {
  return '<svg xmlns="http://www.w3.org/2000/svg" width="7" height="15" viewBox="0 0 7 15"><path style="fill:#999" d="M11.07,7.39a3.5,3.5,0,0,0-3-3.45V0h-1V3.94a3.48,3.48,0,0,0,0,6.9V15h1V10.84A3.5,3.5,0,0,0,11.07,7.39Zm-3.5,2.5a2.5,2.5,0,1,1,2.5-2.5A2.5,2.5,0,0,1,7.57,9.89Z" transform="translate(-4.07 0)"/></svg>';
};
if (goog.DEBUG) {
  bitbucket.internal.images.icons.commit.soyTemplateName = 'bitbucket.internal.images.icons.commit';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-history', location = '/static/bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history.js' */
define("bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history","module exports jquery bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(q,e,r,t,u,v){function l(a){h(a.$tree)}function h(a){a.find(".jstree-leaf").each(function(a,f){var g=(0,w.default)(f);m(g).isViewed&&g.addClass("viewed")})}function n(a){var b=m(a),f=b.update;b.isViewed||(k.default.setItem(d,f(c)),a.addClass("viewed"))}
function m(a){var b=a.data("diffViewType"),f=a.data("path").toString,g=f+":contentIds",d=a.data("contentId");a=a.data("fromContentId");var e=d+":"+a;a=void 0;a=p.default.EFFECTIVE===b?c[f]===d:c[g]&&-1!==c[g].indexOf(e);return{isViewed:a,update:function(a){p.default.EFFECTIVE===b&&(a[f]=d);var c=a[g]||[];-1===c.indexOf(e)&&c.push(e);a[g]=c;return a}}}Object.defineProperty(e,"__esModule",{value:!0});var w=babelHelpers.interopRequireDefault(r),p=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),
b=babelHelpers.interopRequireDefault(v),d=void 0,c=void 0;e.default={init:function(){d=k.default.buildKey("history","pull-request");c=k.default.getItem(d)||{};b.default.on("bitbucket.internal.feature.commit.difftree.treeInitialised",l);b.default.on("bitbucket.internal.feature.commit.difftree.nodeOpening",h);b.default.on("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",n)},reset:function(){c=d=null;b.default.off("bitbucket.internal.feature.commit.difftree.treeInitialised",l);b.default.off("bitbucket.internal.feature.commit.difftree.nodeOpening",
h);b.default.off("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",n)}};q.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:cache-util', location = '/static/bitbucket/internal/util/cache.js' */
define("bitbucket/internal/util/cache",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var c=a.Persist={ONCE:"ONCE",FOREVER:"FOREVER"},d=function(){function a(){babelHelpers.classCallCheck(this,a);this.entries={}}babelHelpers.createClass(a,[{key:"set",value:function(b,a){this.entries[b]={value:a,persistence:2<arguments.length&&void 0!==arguments[2]?arguments[2]:c.FOREVER}}},{key:"get",value:function(b){if(this.has(b)){var a=this.entries[b];a.persistence===c.ONCE&&delete this.entries[b];
return a.value}}},{key:"has",value:function(a){return this.entries.hasOwnProperty(a)}},{key:"clear",value:function(a){return arguments.length?this.has(a)?(delete this.entries[a],!0):!1:(this.entries={},!0)}}]);return a}();a.default=d});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-change', location = '/static/bitbucket/internal/feature/file-content/request-change.js' */
define("bitbucket/internal/feature/file-content/request-change","exports bitbucket/util/navbuilder bitbucket/internal/model/commit-range bitbucket/internal/model/revision bitbucket/internal/util/ajax bitbucket/internal/util/cache".split(" "),function(b,q,r,t,u,l){function e(a){var b=a.pullRequest,e=a.start,g=a.limit,h=m.default.rest().currentRepo().pullRequest(b).changes().withParams({start:e,limit:g}),d=h.withParams({changeScope:"unreviewed"}).build();if(c.has(d))return c.get(d);var f=k.default.rest({url:d,
statusCode:k.default.ignore404WithinRepository()}).fail(function(){c.clear(d)});f.done(function(a){if(a.properties&&a.properties.changeScope&&"ALL"===a.properties.changeScope){var d=h.withParams({pullRequestId:b.id}).build();c.set(d,f,l.Persist.ONCE)}a=m.default.rest().currentRepo().changes(new v.default({untilRevision:new n.default({id:a.toHash}),sinceRevision:new n.default({id:a.fromHash})})).withParams({start:e,limit:g,pullRequestId:b.id}).build();c.set(a,f)});c.set(d,f);return f}function g(a){if(c.has(a))return c.get(a);
var b=k.default.rest({url:a,statusCode:k.default.ignore404WithinRepository()}).fail(function(){c.clear(a)});c.set(a,b);return b}function h(){c.clear()}function p(a){c.clear(a)}Object.defineProperty(b,"__esModule",{value:!0});b.getUnreviewedChangesRequest=e;b.getChangesRequestFromUrl=g;b.reset=h;b.invalidateCacheForUrl=p;var m=babelHelpers.interopRequireDefault(q),v=babelHelpers.interopRequireDefault(r),n=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),c=new (babelHelpers.interopRequireDefault(l).default);
b.default={getUnreviewedChangesRequest:e,getChangesRequestFromUrl:g,reset:h,invalidateCacheForUrl:p}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:jstree', location = '/static/bower/jstree/jquery.jstree.js' */
(function(){if(!jQuery||!jQuery.jstree){var r=!1,t=!1,u=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(a,c,b){a=a.toLowerCase();var e=b.cssRules||b.rules,d=0;do{if(e.length&&d>e.length+5)break;if(e[d].selectorText&&e[d].selectorText.toLowerCase()==a)return!0===c?(b.removeRule&&b.removeRule(d),b.deleteRule&&b.deleteRule(d),!0):e[d]}while(e[++d]);return!1},add_css:function(a,b){if(c.jstree.css.get_css(a,!1,b))return!1;b.insertRule?b.insertRule(a+" { }",0):b.addRule(a,null,0);return c.vakata.css.get_css(a)},
remove_css:function(a,b){return c.vakata.css.get_css(a,!0,b)},add_sheet:function(a){var b=!1,e=!0;if(a.str)return a.title&&(b=c("style[id\x3d'"+a.title+"-stylesheet']")[0]),b?e=!1:(b=document.createElement("style"),b.setAttribute("type","text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?e?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.str):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.str:(b.appendChild(document.createTextNode(a.str)),
document.getElementsByTagName("head")[0].appendChild(b)),b.sheet||b.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(d){}else return b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a.url,document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet}};var a=[],b=-1,d={},e={};c.fn.jstree=function(f){var b="string"==typeof f,e=Array.prototype.slice.call(arguments,1),h=this;if(b){if("_"==f.substring(0,1))return h;
this.each(function(){var b=a[c.data(this,"jstree_instance_id")],b=b&&c.isFunction(b[f])?b[f].apply(b,e):b;if("undefined"!==typeof b&&(0===f.indexOf("is_")||!0!==b&&!1!==b))return h=b,!1})}else this.each(function(){var b=c.data(this,"jstree_instance_id"),g=[],h=f?c.extend({},!0,f):{},n=c(this),q=!1,v=[],g=g.concat(e);n.data("jstree")&&g.push(n.data("jstree"));h=g.length?c.extend.apply(null,[!0,h].concat(g)):h;"undefined"!==typeof b&&a[b]&&a[b].destroy();b=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",
b);h.plugins=c.isArray(h.plugins)?h.plugins:c.jstree.defaults.plugins.slice();h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");q=c.extend(!0,{},c.jstree.defaults,h);q.plugins=h.plugins;c.each(d,function(a,f){-1===c.inArray(a,q.plugins)?(q[a]=null,delete q[a]):v.push(a)});q.plugins=v;a[b]=new c.jstree._instance(b,c(this).addClass("jstree jstree-"+b),q);c.each(a[b]._get_settings().plugins,function(c,
f){a[b].data[f]={}});c.each(a[b]._get_settings().plugins,function(c,f){d[f]&&d[f].__init.apply(a[b])});setTimeout(function(){a[b]&&a[b].init()},0)});return h};c.jstree={defaults:{plugins:[]},_focused:function(){return a[b]||null},_reference:function(f){if(a[f])return a[f];var b=c(f);b.length||"string"!==typeof f||(b=c("#"+f));return b.length?a[b.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,b,e){this.data={core:{}};this.get_settings=function(){return c.extend(!0,
{},e)};this._get_settings=function(){return e};this.get_index=function(){return a};this.get_container=function(){return b};this.get_container_ul=function(){return b.children("ul:eq(0)")};this._set_settings=function(a){e=c.extend(!0,{},e,a)}},_fn:{},plugin:function(a,b){b=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},b);d[a]=b;c.jstree.defaults[a]=b.defaults;c.each(b._fn,function(b,e){e.plugin=a;e.old=c.jstree._fn[b];c.jstree._fn[b]=function(){var a,f=e,d=Array.prototype.slice.call(arguments);
a=new c.Event("before.jstree");var g=!1;if(!0!==this.data.core.locked||"unlock"===b||"is_locked"===b){do{if(f&&f.plugin&&-1!==c.inArray(f.plugin,this._get_settings().plugins))break;f=f.old}while(f);if(f){if(0===b.indexOf("_"))a=f.apply(this,d);else{a=this.get_container().triggerHandler(a,{func:b,inst:this,args:d,plugin:f.plugin});if(!1===a)return;"undefined"!==typeof a&&(d=a);a=f.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(b+".jstree",{inst:this,args:d,rslt:a,
rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(a){return f.old.apply(this,a?Array.prototype.slice.call(arguments,1):d)}}),d)}return a}}};c.jstree._fn[b].old=e.old;c.jstree._fn[b].plugin=a})},rollback:function(f){f&&(c.isArray(f)||(f=[f]),c.each(f,function(c,f){a[f.i].set_rollback(f.h,f.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),b=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],e=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree \x3e ul \x3e li { margin-left:0px; } .jstree-rtl \x3e ul \x3e li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a \x3e ins { height:16px; width:16px; } .jstree a \x3e .jstree-icon { margin-right:3px; } .jstree-rtl a \x3e .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open \x3e ul { display:block; } li.jstree-closed \x3e ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(b,10)){r=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}e+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(b,10)&&(t=!0,e+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(b,10)&&(u=!0,e+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:e,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("\x3cul\x3e\x3cli class\x3d'jstree-last jstree-leaf'\x3e\x3cins\x3e\x26#160;\x3c/ins\x3e\x3ca class\x3d'jstree-loading' href\x3d'#'\x3e\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e"+
this._get_string("loading")+"\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li \x3e ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=
window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var e=this._get_node(b.rslt.obj),d=this;-1===e&&(e=this.get_container_ul());e.length&&e.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(b,f){d.data[b]&&c.isFunction(d["_"+b+"_notify"])&&d["_"+b+"_notify"].call(d,a,f)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,b){var e=this._get_node(b.rslt.obj),d=this;-1===e&&(e=this.get_container_ul());e.length&&e.find("li.jstree-open:not(:has(ul))").each(function(){d.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var f,e=this.get_index(),l=this._get_settings(),h=this;c.each(l.plugins,function(a,c){try{d[c].__destroy.apply(h)}catch(b){}});this.__callback();if(this.is_focused())for(f in a)if(a.hasOwnProperty(f)&&
f!=e){a[f].set_focus();break}e===b&&(b=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^\x3d'jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+e).undelegate(".jstree-"+e);a[e]=null;delete a[e]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,e=!0,d=[],m=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,b){if("#"==b)return!0;c(b).length?d.push(b):m.push(b)}),d.length&&(this.data.core.to_load=m,c.each(d,function(a,c){b._is_loaded(c)||(b.load_node(c,function(){b.reload_nodes(!0)},function(){b.reload_nodes(!0)}),
e=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){b.open_node(c,!1,!0)});e&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(c,b){a.open_node(b,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");b=this.get_index();this.__callback()}},is_focused:function(){return b==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),b=
-1);this.__callback()},_get_node:function(a){var b=c(a,this.get_container());if(b.is(".jstree")||-1==a)return-1;b=b.closest("li",this.get_container());return b.length?b:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("\x3e ul \x3e li:first-child"):a.length?c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("\x3e ul \x3e li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var b=a.parentsUntil(".jstree","li:eq(0)");return b.length?b:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?
a:-1},_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,c){var b=[],e=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){b.push(c?this.id:e.get_text(this))});b.reverse();b.push(c?a.attr("id"):this.get_text(a));return b},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,b){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var e=b||r?0:this._get_settings().core.animation,d=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){d.open_node(this,!1,!0)}),e&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),e?a.children("ul").stop(!0,!0).slideDown(e,function(){this.style.display="";d.after_open(a)}):d.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){d.open_node(a,c,b)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var b=c||r?0:this._get_settings().core.animation,e=this;if(!a.length||!a.hasClass("jstree-open"))return!1;b&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");b?a.children("ul").stop(!0,!0).slideUp(b,function(){this.style.display="";e.after_close(a)}):
e.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,b){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());b?a=a.find("li.jstree-closed"):(b=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var e=this;a.each(function(){var a=this;
e._is_loaded(this)?e.open_node(this,!1,!c):e.open_node(this,function(){e.open_all(a,c,b)},!c)});0===b.find("li.jstree-closed").length&&this.__callback({obj:b})},close_all:function(a,c){var b=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){b.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,b){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,b,e,d,m){a=this._get_node(a);b="undefined"===typeof b?
"last":b;var k=c("\x3cli /\x3e"),p=this._get_settings().core,n;if(-1!==a&&!a.length)return!1;if(!m&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,e,d,!0)}),!1;this.__rollback();"string"===typeof e&&(e={data:e});e||(e={});e.attr&&k.attr(e.attr);e.metadata&&k.data(e.metadata);e.state&&k.addClass("jstree-"+e.state);e.data||(e.data=this._get_string("new_node"));c.isArray(e.data)||(n=e.data,e.data=[],e.data.push(n));c.each(e.data,function(a,b){n=c("\x3ca /\x3e");c.isFunction(b)&&
(b=b.call(this,e));if("string"==typeof b)n.attr("href","#")[p.html_titles?"html":"text"](b);else b.attr||(b.attr={}),b.attr.href||(b.attr.href="#"),n.attr(b.attr)[p.html_titles?"html":"text"](b.title),b.language&&n.addClass(b.language);n.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");!b.icon&&e.icon&&(b.icon=e.icon);b.icon&&(-1===b.icon.indexOf("/")?n.children("ins").addClass(b.icon):n.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));k.append(n)});
k.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");-1===a&&(a=this.get_container(),"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(k);n=this._get_parent(a);break;case "after":a.after(k);n=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").prepend(k);n=a;break;case "last":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").append(k);n=a;break;default:a.children("ul").length||
a.append("\x3cul /\x3e"),b||(b=0),n=a.children("ul").children("li").eq(b),n.length?n.before(k):a.children("ul").append(k),n=a}if(-1===n||n.get(0)===this.get_container().get(0))n=-1;this.clean_node(n);this.__callback({obj:k,parent:n});d&&d.call(this,k);return k},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];
return a.nodeValue},set_text:function(a,b){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&
this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();var b=this._get_parent(a),e=c([]),d=this;a.each(function(){e=e.add(d._get_prev(this))});a=a.detach();-1!==b&&0===b.find("\x3e ul \x3e li").length&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:e,parent:b});return a},prepare_move:function(a,b,d,h,m){var k={};k.ot=c.jstree._reference(a)||this;k.o=k.ot._get_node(a);k.r=
-1===b?-1:this._get_node(b);k.p="undefined"===typeof d||!1===d?"last":d;if(m||!e.o||e.o[0]!==k.o[0]||e.r[0]!==k.r[0]||e.p!==k.p){k.ot=c.jstree._reference(k.o)||this;k.rt=c.jstree._reference(k.r)||this;if(-1!==k.r&&k.r){if(!/^(before|after)$/.test(k.p)&&!this._is_loaded(k.r))return this.load_node(k.r,function(){this.prepare_move(a,b,d,h,!0)});switch(k.p){case "before":k.cp=k.r.index();k.cr=k.rt._get_parent(k.r);break;case "after":k.cp=k.r.index()+1;k.cr=k.rt._get_parent(k.r);break;case "inside":case "first":k.cp=
0;k.cr=k.r;break;case "last":k.cp=k.r.find(" \x3e ul \x3e li").length;k.cr=k.r;break;default:k.cp=k.p,k.cr=k.r}}else switch(k.cr=-1,k.p){case "first":case "before":case "inside":k.cp=0;break;case "after":case "last":k.cp=k.rt.get_container().find(" \x3e ul \x3e li").length;break;default:k.cp=k.p}k.np=-1==k.cr?k.rt.get_container():k.cr;k.op=k.ot._get_parent(k.o);k.cop=k.o.index();-1===k.op&&(k.op=k.ot?k.ot.get_container():this.get_container());!/^(before|after)$/.test(k.p)&&k.op&&k.np&&k.op[0]===k.np[0]&&
k.o.index()<k.cp&&k.cp++;k.or=k.np.find(" \x3e ul \x3e li:nth-child("+(k.cp+1)+")");e=k}this.__callback(e);h&&h.call(this,e)},check_move:function(){var a=e,b=!0,c=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==c.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,b,d,h,m,k){if(!m)return this.prepare_move(a,b,d,function(a){this.move_node(a,!1,!1,h,!0,
k)});h&&(e.cy=!0);if(!k&&!this.check_move())return!1;this.__rollback();b=!1;h?(b=a.o.clone(!0),b.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):b=a.o;a.or.length?a.or.before(b):(a.np.children("ul").length||c("\x3cul /\x3e").appendTo(a.np),a.np.children("ul:eq(0)").append(b));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("\x3e ul \x3e li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(p){}h&&(e.cy=
!0,e.oc=b);this.__callback(e);return e},_get_move:function(){return e}}})})(jQuery);(function(c){var a,b,d;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(b=c('\x3ctextarea cols\x3d"10" rows\x3d"2"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=c('\x3ctextarea cols\x3d"10" rows\x3d"2" style\x3d"overflow: hidden;"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=b.width()-d.width(),b.add(d).remove()):(b=c("\x3cdiv /\x3e").css({width:100,
height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("\x3cdiv /\x3e").find("div").css({width:"100%",height:200}),a=100-b.width(),b.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||
this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",
c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,b){var d=this._get_settings().ui,l=this._get_node(b.rslt.obj),h=l&&l.length?l.children("ul").find("a.jstree-clicked"):c(),m=this;!1!==d.selected_parent_close&&h.length&&h.each(function(){m.deselect_node(this);"select_parent"===d.selected_parent_close&&m.select_node(l)})},this)).bind("delete_node.jstree",c.proxy(function(a,b){var c=this._get_settings().ui.select_prev_on_delete,d=this._get_node(b.rslt.obj),d=d&&d.length?
d.find("a.jstree-clicked"):[],h=this;d.each(function(){h.deselect_node(this)});c&&d.length&&b.rslt.prev.each(function(){if(this.parentNode)return h.select_node(this),!1})},this)).bind("move_node.jstree",c.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,
initially_select:[]},_fn:{_get_node:function(a,b){if("undefined"===typeof a||null===a)return b?this.data.ui.selected:this.data.ui.last_selected;var d=c(a,this.get_container());if(d.is(".jstree")||-1==a)return-1;d=d.closest("li",this.get_container());return d.length?d:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,
"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(b,function(b,c){c&&"#"!==c&&a.select_node(c)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});
this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,b;if(!a||!a.length)return!1;b=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===b[0]&&(this.data.ui.hovered=
null);this.__callback({obj:a})},select_node:function(a,b,c){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var d=this._get_settings().ui,h="on"==d.select_multiple_modifier||!1!==d.select_multiple_modifier&&c&&c[d.select_multiple_modifier+"Key"],m=!1!==d.select_range_modifier&&c&&c[d.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],k=this.is_selected(a),p=!0,n=this;if(b){if(d.disable_selecting_children&&
h&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;p=!1;switch(!0){case m:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==d.select_limit||a.length<d.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==n.data.ui.last_selected[0]&&
n.deselect_node(this)}),k=!1,p=!0):p=!1;break;case k&&!h:this.deselect_all();k=!1;p=!0;break;case !k&&!h:if(-1==d.select_limit||0<d.select_limit)this.deselect_all(),p=!0;break;case k&&h:this.deselect_node(a);break;case !k&&h:if(-1==d.select_limit||this.data.ui.selected.length+1<=d.select_limit)p=!0}}p&&!k&&(m||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),d.selected_parent_open&&a.parents(".jstree-closed").each(function(){n.open_node(this,!1,!0)}),this.data.ui.selected=
this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:c}))},_fix_scroll:function(b){var c=this.get_container()[0];c.scrollHeight>c.offsetHeight&&(b=this._get_node(b))&&-1!==b&&b.length&&b.is(":visible")&&(b=b.offset().top-this.get_container().offset().top,0>b&&(c.scrollTop=c.scrollTop+b-1),b+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?a:0)>c.offsetHeight&&(c.scrollTop+=b-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?a:0)))},deselect_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},
get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",
c.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var c=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,b){a=this._get_node(a);var d=this._get_settings().core.rtl,e=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),g=a.find("\x3e a:visible \x3e ins").width()*
a.find("\x3e a:visible \x3e ins").length,l=this.get_text(a),h=c("\x3cdiv /\x3e",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),m=a.css("position","relative").append(c("\x3cinput /\x3e",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:d?"auto":f+g+4+"px",right:d?f+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=
a.children(".jstree-rename-input"),d=c.val();""===d&&(d=l);h.remove();c.remove();this.set_text(a,l);this.rename_node(a,d);b.call(this,a,d,l);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=l,this.blur()):13==a?this.blur():m.width(Math.min(h.text("pW"+this.value).width(),e))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");h.css({fontFamily:m.css("fontFamily")||"",fontSize:m.css("fontSize")||"",
fontWeight:m.css("fontWeight")||"",fontStyle:m.css("fontStyle")||"",fontStretch:m.css("fontStretch")||"",fontVariant:m.css("fontVariant")||"",letterSpacing:m.css("letterSpacing")||"",wordSpacing:m.css("wordSpacing")||""});m.width(Math.min(h.text("pW"+m[0].value).width(),e))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,c,f){b.call(this,{obj:a,new_name:c,old_name:f})})},create:function(a,b,d,e,f){var g=this;(a=this._get_node(a))||
(a=-1);this.__rollback();return this.create_node(a,b,d,function(a){var b=this._get_parent(a),d=c(a).index();e&&e.call(this,a);b.length&&b.hasClass("jstree-closed")&&this.open_node(b,!1,!0);f?g.__callback({obj:a,name:this.get_text(a),parent:b,position:d}):this._show_input(a,function(a,c,e){g.__callback({obj:a,name:c,parent:b,position:d})})})},remove:function(a){a=this._get_node(a,!0);var b=this._get_parent(a),c=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,
prev:c,parent:b})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,b,c,e,f,g){var l=this._get_settings().crrm.move;if(!f)return"undefined"===typeof c&&(c=l.default_position),"inside"!==c||l.default_position.match(/^(before|after)$/)||(c=l.default_position),this.__call_old(!0,a,b,c,e,!1,g);if(!0===l.always_copy||"multitree"===l.always_copy&&a.rt.get_index()!==a.ot.get_index())e=!0;this.__call_old(!0,a,
b,c,e,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;
this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:b})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",
c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(b,d){if(!b)return!1;d||(d=c.jstree._themes+b+"/style.css");-1==c.inArray(d,a)&&(c.vakata.css.add_sheet({url:d}),a.push(d));this.data.themes.theme!=b&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=b);this.get_container().addClass("jstree-"+
b);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=
!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",
!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(b,d){!1!==d&&-1==c.inArray(b,a)&&(c(document).bind("keydown",b,function(a){a:{var d=c.jstree._focused(),g;if(d&&d.data&&
d.data.hotkeys&&d.data.hotkeys.enabled&&(g=d._get_settings().hotkeys[b])){a=g.call(d,a);break a}a=void 0}return a}),a.push(b))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||
-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&
(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},
del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},
_fn:{load_node:function(a,c,d){var e=this;this.load_node_json(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},d)},_is_loaded:function(a){var b=this._get_settings().json_data;a=this._get_node(a);return-1==a||!a||!b.ajax&&!b.progressive_render&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var b=this._get_settings().json_data;a&&-1!==a&&b.progressive_unload&&(c.isFunction(b.data)||b.ajax)&&a.removeData("jstree_children");
return this.__call_old()},load_node_json:function(a,b,d){var e=this.get_settings().json_data,f,g=function(){};f=function(){};if((a=this._get_node(a))&&-1!==a&&(e.progressive_render||e.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(f=this._parse_json(a.data("jstree_children"),a))a.append(f),e.progressive_unload||a.removeData("jstree_children");this.clean_node(a);b&&b.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;
a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),b&&b.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
e.correct_state&&this.correct_state(a)):e.correct_state&&this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||((f=this._parse_json(e.data,a))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):e.correct_state&&this.get_container().children("ul").empty());b&&b.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:g=function(c,b,f){var k=this.get_settings().json_data.ajax.error;
k&&k.call(this,c,b,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===b&&e.correct_state&&this.correct_state(a)):"success"===b&&e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},f=function(d,f,m){var k=this.get_settings().json_data.ajax.success;k&&(d=k.call(this,d,f,m)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||!c.isArray(d)&&!c.isPlainObject(d))return g.call(this,
m,f,"");(d=this._parse_json(d,a))?(-1!==a&&a?(a.append(d).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()),this.clean_node(a),b&&b.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),b&&b.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},e.ajax.context=
this,e.ajax.error=g,e.ajax.success=f,e.ajax.dataType||(e.ajax.dataType="json"),c.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),c.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),c.ajax(e.ajax)}}},_parse_json:function(a,b,d){var e=!1,f=this._get_settings(),g=f.json_data,l=f.core.html_titles,h;if(!a)return e;g.progressive_unload&&b&&-1!==b&&b.data("jstree_children",e);if(c.isArray(a)){e=c();if(!a.length)return!1;f=0;for(g=a.length;f<g;f++)h=this._parse_json(a[f],b,!0),
h.length&&(e=e.add(h))}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return e;e=c("\x3cli /\x3e");a.attr&&e.attr(a.attr);a.metadata&&e.data(a.metadata);a.state&&e.addClass("jstree-"+a.state);c.isArray(a.data)||(h=a.data,a.data=[],a.data.push(h));c.each(a.data,function(b,d){h=c("\x3ca /\x3e");c.isFunction(d)&&(d=d.call(this,a));if("string"==typeof d)h.attr("href","#")[l?"html":"text"](d);else d.attr||(d.attr={}),d.attr.href||(d.attr.href="#"),h.attr(d.attr)[l?"html":"text"](d.title),
d.language&&h.addClass(d.language);h.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");!d.icon&&a.icon&&(d.icon=a.icon);d.icon&&(-1===d.icon.indexOf("/")?h.children("ins").addClass(d.icon):h.children("ins").css("background","url('"+d.icon+"') center center no-repeat"));e.append(h)});e.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");a.children&&(g.progressive_render&&"open"!==a.state?e.addClass("jstree-closed").data("jstree_children",a.children):(g.progressive_unload&&
e.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(h=this._parse_json(a.children,b,!0),h.length&&(b=c("\x3cul /\x3e"),b.append(h),e.append(b)))))}d||(d=c("\x3cul /\x3e"),d.append(e),e=d);return e},get_json:function(a,b,d,e){var f=[],g=this._get_settings(),l=this,h,m,k,p,n,q;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("\x3e ul \x3e li"));b=c.isArray(b)?b:["id","class"];!e&&this.data.types&&b.push(g.types.type_attr);d=c.isArray(d)?d:[];a.each(function(){k=
c(this);h={data:[]};b.length&&(h.attr={});c.each(b,function(a,c){(m=k.attr(c))&&m.length&&m.replace(/jstree[^ ]*/ig,"").length&&(h.attr[c]=(" "+m).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});k.hasClass("jstree-open")&&(h.state="open");k.hasClass("jstree-closed")&&(h.state="closed");k.data()&&(h.metadata=k.data());p=k.children("a");p.each(function(){n=c(this);d.length||-1!==c.inArray("languages",g.plugins)||n.children("ins").get(0).style.backgroundImage.length||
n.children("ins").get(0).className&&n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(q=!1,-1!==c.inArray("languages",g.plugins)&&c.isArray(g.languages)&&g.languages.length&&c.each(g.languages,function(a,c){if(n.hasClass(c))return q=c,!1}),m={attr:{},title:l.get_text(n,q)},c.each(d,function(a,c){m.attr[c]=(" "+(n.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",g.plugins)&&c.isArray(g.languages)&&
g.languages.length&&c.each(g.languages,function(a,c){if(n.hasClass(c))return m.language=c,!0}),n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(m.icon=n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),n.children("ins").get(0).style.backgroundImage.length&&(m.icon=n.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):m=l.get_text(n);1<p.length?h.data.push(m):
h.data=m});k=k.find("\x3e ul \x3e li");k.length&&(h.children=l.get_json(k,b,d,!0));f.push(h)});return f}}})})(jQuery);(function(c){c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var b=this._get_settings().languages,d=!1,e=".jstree-"+this.get_index()+" a";if(!c.isArray(b)||0===b.length)return!1;if(-1==c.inArray(a,b))if(b[a])a=b[a];else return!1;if(a==this.data.languages.current_language)return!0;d=c.vakata.css.get_css(e+"."+this.data.languages.current_language,
!1,this.data.languages.language_css);!1!==d&&(d.style.display="none");d=c.vakata.css.get_css(e+"."+a,!1,this.data.languages.language_css);!1!==d&&(d.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,b){var d=this._get_settings().languages,e=this._get_settings().core.strings;c.isArray(d)&&d.length&&(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language);return e[b]&&
e[b][a]?e[b][a]:e[a]?e[a]:a},get_text:function(a,b){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var d=this._get_settings().languages,e=this._get_settings().core.html_titles;c.isArray(d)&&d.length?(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language,a=a.children("a."+b)):a=a.children("a:eq(0)");if(e)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b,d){a=
this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,f=this._get_settings().core.html_titles;c.isArray(e)&&e.length?(d=d&&-1!=c.inArray(d,e)?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");if(f)return e=a.children("INS").clone(),a.html(b).prepend(e),this.__callback({obj:a,name:b,lang:d}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b,lang:d});return a.nodeValue=
b},_load_css:function(){var a=this._get_settings().languages,b="/* languages css */",d=".jstree-"+this.get_index()+" a",e;if(c.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(e=0;e<a.length;e++)b+=d+"."+a[e]+" {",a[e]!=this.data.languages.current_language&&(b+=" display:none; "),b+=" } ";this.data.languages.language_css=c.vakata.css.add_sheet({str:b,title:"jstree-languages"})}},create_node:function(a,b,d,e){return this.__call_old(!0,a,b,d,function(a){var b=this._get_settings().languages,
d=a.children("a"),h;if(c.isArray(b)&&b.length){for(h=0;h<b.length;h++)d.is("."+b[h])||a.append(d.eq(0).clone().removeClass(b.join(" ")).addClass(b[h]));d.not("."+b.join(", .")).remove()}e&&e.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var a=this._get_settings().cookies,b;a.save_loaded&&(b=c.cookie(a.save_loaded))&&b.length&&(this.data.core.to_load=b.split(","));a.save_opened&&
(b=c.cookie(a.save_opened))&&b.length&&(this.data.core.to_open=b.split(","));a.save_selected&&(b=c.cookie(a.save_selected))&&b.length&&this.data.ui&&(this.data.ui.to_select=b.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",
""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var b=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options));b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options));
break;case "select_node":case "deselect_node":b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options))}else b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options)),b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options)),b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),
b.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var d=this._get_node(c.rslt.obj),d=-1===d?this.get_container().children("ul"):d.children("ul");this.sort(d)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},this)).bind("move_node.jstree",c.proxy(function(a,c){var d=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(d.children("ul"))},
this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var b=this._get_settings().sort,d=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(b,d)));a.find("\x3e li \x3e ul").each(function(){d.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,b=!1,d=!1,e=!1,f=!1,g=!1,l=!1,h=!1,m=!1;c.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,
b,d){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(e){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=b;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("\x3cdiv id\x3d'vakata-dragged' /\x3e").html(d);c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},
drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var b=c(document),d=b.scrollTop(),b=b.scrollLeft();20>a.pageY-d?(g&&"down"===l&&(clearInterval(g),g=!1),g||(l="up",g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-
c.vakata.dnd.scroll_spd)},150))):g&&"up"===l&&(clearInterval(g),g=!1);20>c(window).height()-(a.pageY-d)?(g&&"up"===l&&(clearInterval(g),g=!1),g||(l="down",g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150))):g&&"down"===l&&(clearInterval(g),g=!1);20>a.pageX-b?(f&&"right"===h&&(clearInterval(f),f=!1),f||(h="left",f=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-c.vakata.dnd.scroll_spd)},150))):f&&"left"===h&&(clearInterval(f),
f=!1);20>c(window).width()-(a.pageX-b)?(f&&"left"===h&&(clearInterval(f),f=!1),f||(h="right",f=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150))):f&&"right"===h&&(clearInterval(f),f=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);g&&clearInterval(g);c(document).unbind("mousemove",
c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})});
c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(b){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),b.currentTarget===
b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target&&(b=c.jstree._reference(b.target),b.data.dnd.foreign?(b=b._get_settings().dnd.drag_check.call(this,{o:a,r:b.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(b.prepare_move(a,b.get_container(),"last"),b.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(b){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&b.currentTarget===b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target){var d=c.jstree._reference(b.currentTarget);d.data.dnd.foreign?(b=d._get_settings().dnd.drag_check.call(this,{o:a,r:d.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||d._get_settings().dnd.drag_finish.call(this,
{o:a,r:d.get_container(),is_root:!0})):d.move_node(a,d.get_container(),"last",b[d._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var b=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},b),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},b),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&d&&e&&(d.hide(),e.hide())},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a","mousemove.jstree",
c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(b&&b.length&&b.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&
a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;d&&d.hide();e&&e.hide();this.data.dnd.mto=setTimeout(function(c){return function(){c.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;d&&d.css({top:"-2000px"});e&&e.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,b){if(b.data.jstree){var d=c(b.event.target);d.closest(".jstree").hasClass("jstree-"+
this.get_index())&&this.dnd_enter(d)}},this));var f=this._get_settings().dnd;f.drag_target&&c(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(b){a=b.target;c.vakata.dnd.drag_start(b,{jstree:!0,obj:b.target},"\x3cins class\x3d'jstree-icon'\x3e\x3c/ins\x3e"+c(b.target).text());this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));
c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;b.preventDefault()},this));f.drop_target&&c(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(b.target),e:b})&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(b.target),e:b})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(b&&b.length){this.data.dnd.off=b.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+b.width());if(this.data.dnd.foreign){var c=this._get_settings().dnd.drag_check.call(this,{o:a,r:b});this.data.dnd.after=c.after;this.data.dnd.before=c.before;
this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,b,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,b,"after");this.data.dnd.after=this.check_move();this._is_loaded(b)?(this.prepare_move(a,b,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],b=!1,f=this._get_settings().core.rtl,
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,d){if(this.data.dnd[d])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),b=d,!1},this));!1===b&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(b){case "before":d.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":d.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":d.css({left:a+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();e&&e.hide();break;default:d.hide(),
e&&e.hide()}return m=b}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(b,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(c){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:b,p:m}):(this.dnd_prepare(),this.move_node(a,b,m,c[this._get_settings().dnd.copy_modifier+"Key"]));b=a=!1;d.hide();e&&e.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var d=this._get_settings().dnd;this.data.dnd.prepared=!1;b=this._get_node(a);d.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),d.check_timeout)):this.dnd_prepare();d.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),b&&b.length&&b.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),d.open_timeout))):b&&b.length&&b.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d.hide();e&&e.hide();b&&b[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(b,f){a=this._get_node(b);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var h=1<a.length?this._get_string("multiple_selection"):this.get_text(a),
g=this.get_container();this._get_settings().core.html_titles||(h=h.replace(/</ig,"\x26lt;").replace(/>/ig,"\x26gt;"));c.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"\x3cins class\x3d'jstree-icon'\x3e\x3c/ins\x3e"+h);this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=
parseInt(g.height(),10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});d=c("\x3cdiv /\x3e").attr({id:"jstree-marker"}).hide().html("\x26raquo;").bind("mouseleave mouseenter",function(a){d.hide();e.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");e=c("\x3cdiv /\x3e").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(b&&b.length)return b.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=c(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
b&&b.length)return b.children("a").trigger(a),d.hide(),e.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(d.show(),e&&e.show())});c(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(d.hide(),e&&e.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("\x3e ul \x3e li");if(!1!==a){var b,d=this,e,f=this._get_settings().checkbox.two_state,g=this._get_settings().checkbox.real_checkboxes,l=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){e=c(this);b=e.is("li")&&(e.hasClass("jstree-checked")||g&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").andSelf().each(function(){var a=
c(this),e;a.children("a"+(d.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("\x3cins class\x3d'jstree-checkbox'\x3e\x26#160;\x3c/ins\x3e").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":b);g&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(e=l.call(d,a),a.prepend("\x3cinput type\x3d'checkbox' class\x3d'jstree-real-checkbox' id\x3d'"+e[0]+"' name\x3d'"+e[0]+"' value\x3d'"+e[1]+"' /\x3e")));f?(a.hasClass("jstree-checked")||
a.children(":checked").length)&&a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===b||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){d._repair_state(this)})}},change_state:function(a,b){a=this._get_node(a);var d=!1,e=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;b=!1===
b||!0===b?b:a.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state)b?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),e&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),e&&a.children(":checkbox").prop("checked",!0));else{if(b){d=a.find("li").andSelf();if(!d.filter(".jstree-checked, .jstree-undetermined").length)return!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&d.children(":checkbox").prop("checked",
!1)}else{d=a.find("li").andSelf();if(!d.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&d.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(b){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("\x3e ul \x3e .jstree-checked, .jstree-undetermined \x3e ul \x3e .jstree-checked")},get_unchecked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("\x3e ul \x3e .jstree-unchecked, .jstree-undetermined \x3e ul \x3e .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var b=this._get_settings().checkbox.real_checkboxes,
c=a.find("\x3e ul \x3e .jstree-checked").length,e=a.find("\x3e ul \x3e .jstree-undetermined").length,f=a.find("\x3e ul \x3e li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===c&&0===e?this.change_state(a,!0):c===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&
this.data.checkbox.noui){var a=this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(b,function(b,c){a.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+
this.id)})}}});c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,b,f){var g="",l;if(document.recalc)return l=document.createElement("xml"),g=document.createElement("xml"),l.innerHTML=a,g.innerHTML=b,c("body").append(l).append(g),setTimeout(function(a,b,d){return function(){d.call(null,a.transformNode(b.XMLDocument));setTimeout(function(a,b){return function(){c(a).remove();c(b).remove()}}(a,
b),200)}}(l,g,f),100),!0;"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),b=(new DOMParser).parseFromString(b,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){l=new XSLTProcessor;g=c.isFunction(l.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!g)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");b=(new DOMParser).parseFromString(b,"text/xml");c.isFunction(l.transformDocument)?(g=document.implementation.createDocument("","",null),l.transformDocument(a,b,g,null),f.call(null,(new XMLSerializer).serializeToString(g))):(l.importStylesheet(b),g=l.transformToFragment(a,document),f.call(null,c("\x3cdiv /\x3e").append(g).html()));return!0}return!1};var a={nest:'\x3c?xml version\x3d"1.0" encoding\x3d"utf-8" ?\x3e\x3cxsl:stylesheet version\x3d"1.0" xmlns:xsl\x3d"http://www.w3.org/1999/XSL/Transform" \x3e\x3cxsl:output method\x3d"html" encoding\x3d"utf-8" omit-xml-declaration\x3d"yes" standalone\x3d"no" indent\x3d"no" media-type\x3d"text/html" /\x3e\x3cxsl:template match\x3d"/"\x3e\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\x3cxsl:with-param name\x3d"node" select\x3d"/root" /\x3e\t\x3c/xsl:call-template\x3e\x3c/xsl:template\x3e\x3cxsl:template name\x3d"nodes"\x3e\t\x3cxsl:param name\x3d"node" /\x3e\t\x3cul\x3e\t\x3cxsl:for-each select\x3d"$node/item"\x3e\t\t\x3cxsl:variable name\x3d"children" select\x3d"count(./item) \x26gt; 0" /\x3e\t\t\x3cli\x3e\t\t\t\x3cxsl:attribute name\x3d"class"\x3e\t\t\t\t\x3cxsl:if test\x3d"position() \x3d last()"\x3ejstree-last \x3c/xsl:if\x3e\t\t\t\t\x3cxsl:choose\x3e\t\t\t\t\t\x3cxsl:when test\x3d"@state \x3d \'open\'"\x3ejstree-open \x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:when test\x3d"$children or @hasChildren or @state \x3d \'closed\'"\x3ejstree-closed \x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:otherwise\x3ejstree-leaf \x3c/xsl:otherwise\x3e\t\t\t\t\x3c/xsl:choose\x3e\t\t\t\t\x3cxsl:value-of select\x3d"@class" /\x3e\t\t\t\x3c/xsl:attribute\x3e\t\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'class\' and name() !\x3d \'state\' and name() !\x3d \'hasChildren\'"\x3e\t\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3c/xsl:if\x3e\t\t\t\x3c/xsl:for-each\x3e\t\x3cins class\x3d"jstree-icon"\x3e\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\x3c/ins\x3e\t\t\t\x3cxsl:for-each select\x3d"content/name"\x3e\t\t\t\t\x3ca\x3e\t\t\t\t\x3cxsl:attribute name\x3d"href"\x3e\t\t\t\t\t\x3cxsl:choose\x3e\t\t\t\t\t\x3cxsl:when test\x3d"@href"\x3e\x3cxsl:value-of select\x3d"@href" /\x3e\x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:otherwise\x3e#\x3c/xsl:otherwise\x3e\t\t\t\t\t\x3c/xsl:choose\x3e\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3e\x3cxsl:value-of select\x3d"@lang" /\x3e \x3cxsl:value-of select\x3d"@class" /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:attribute name\x3d"style"\x3e\x3cxsl:value-of select\x3d"@style" /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'style\' and name() !\x3d \'class\' and name() !\x3d \'href\'"\x3e\t\t\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\t\x3c/xsl:if\x3e\t\t\t\t\x3c/xsl:for-each\x3e\t\t\t\t\t\x3cins\x3e\t\t\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3ejstree-icon \t\t\t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and not(contains(@icon,\'/\'))"\x3e\x3cxsl:value-of select\x3d"@icon" /\x3e\x3c/xsl:if\x3e\t\t\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and contains(@icon,\'/\')"\x3e\x3cxsl:attribute name\x3d"style"\x3ebackground:url(\x3cxsl:value-of select\x3d"@icon" /\x3e) center center no-repeat;\x3c/xsl:attribute\x3e\x3c/xsl:if\x3e\t\t\t\t\t\t\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\t\t\t\t\t\x3c/ins\x3e\t\t\t\t\t\x3cxsl:copy-of select\x3d"./child::node()" /\x3e\t\t\t\t\x3c/a\x3e\t\t\t\x3c/xsl:for-each\x3e\t\t\t\x3cxsl:if test\x3d"$children or @hasChildren"\x3e\x3cxsl:call-template name\x3d"nodes"\x3e\x3cxsl:with-param name\x3d"node" select\x3d"current()" /\x3e\x3c/xsl:call-template\x3e\x3c/xsl:if\x3e\t\t\x3c/li\x3e\t\x3c/xsl:for-each\x3e\t\x3c/ul\x3e\x3c/xsl:template\x3e\x3c/xsl:stylesheet\x3e',
flat:'\x3c?xml version\x3d"1.0" encoding\x3d"utf-8" ?\x3e\x3cxsl:stylesheet version\x3d"1.0" xmlns:xsl\x3d"http://www.w3.org/1999/XSL/Transform" \x3e\x3cxsl:output method\x3d"html" encoding\x3d"utf-8" omit-xml-declaration\x3d"yes" standalone\x3d"no" indent\x3d"no" media-type\x3d"text/xml" /\x3e\x3cxsl:template match\x3d"/"\x3e\t\x3cul\x3e\t\x3cxsl:for-each select\x3d"//item[not(@parent_id) or @parent_id\x3d0 or not(@parent_id \x3d //item/@id)]"\x3e\t\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\t\x3cxsl:with-param name\x3d"node" select\x3d"." /\x3e\t\t\t\x3cxsl:with-param name\x3d"is_last" select\x3d"number(position() \x3d last())" /\x3e\t\t\x3c/xsl:call-template\x3e\t\x3c/xsl:for-each\x3e\t\x3c/ul\x3e\x3c/xsl:template\x3e\x3cxsl:template name\x3d"nodes"\x3e\t\x3cxsl:param name\x3d"node" /\x3e\t\x3cxsl:param name\x3d"is_last" /\x3e\t\x3cxsl:variable name\x3d"children" select\x3d"count(//item[@parent_id\x3d$node/attribute::id]) \x26gt; 0" /\x3e\t\x3cli\x3e\t\x3cxsl:attribute name\x3d"class"\x3e\t\t\x3cxsl:if test\x3d"$is_last \x3d true()"\x3ejstree-last \x3c/xsl:if\x3e\t\t\x3cxsl:choose\x3e\t\t\t\x3cxsl:when test\x3d"@state \x3d \'open\'"\x3ejstree-open \x3c/xsl:when\x3e\t\t\t\x3cxsl:when test\x3d"$children or @hasChildren or @state \x3d \'closed\'"\x3ejstree-closed \x3c/xsl:when\x3e\t\t\t\x3cxsl:otherwise\x3ejstree-leaf \x3c/xsl:otherwise\x3e\t\t\x3c/xsl:choose\x3e\t\t\x3cxsl:value-of select\x3d"@class" /\x3e\t\x3c/xsl:attribute\x3e\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\x3cxsl:if test\x3d"name() !\x3d \'parent_id\' and name() !\x3d \'hasChildren\' and name() !\x3d \'class\' and name() !\x3d \'state\'"\x3e\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\x3c/xsl:if\x3e\t\x3c/xsl:for-each\x3e\t\x3cins class\x3d"jstree-icon"\x3e\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\x3c/ins\x3e\t\x3cxsl:for-each select\x3d"content/name"\x3e\t\t\x3ca\x3e\t\t\x3cxsl:attribute name\x3d"href"\x3e\t\t\t\x3cxsl:choose\x3e\t\t\t\x3cxsl:when test\x3d"@href"\x3e\x3cxsl:value-of select\x3d"@href" /\x3e\x3c/xsl:when\x3e\t\t\t\x3cxsl:otherwise\x3e#\x3c/xsl:otherwise\x3e\t\t\t\x3c/xsl:choose\x3e\t\t\x3c/xsl:attribute\x3e\t\t\x3cxsl:attribute name\x3d"class"\x3e\x3cxsl:value-of select\x3d"@lang" /\x3e \x3cxsl:value-of select\x3d"@class" /\x3e\x3c/xsl:attribute\x3e\t\t\x3cxsl:attribute name\x3d"style"\x3e\x3cxsl:value-of select\x3d"@style" /\x3e\x3c/xsl:attribute\x3e\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'style\' and name() !\x3d \'class\' and name() !\x3d \'href\'"\x3e\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\x3c/xsl:if\x3e\t\t\x3c/xsl:for-each\x3e\t\t\t\x3cins\x3e\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3ejstree-icon \t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and not(contains(@icon,\'/\'))"\x3e\x3cxsl:value-of select\x3d"@icon" /\x3e\x3c/xsl:if\x3e\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and contains(@icon,\'/\')"\x3e\x3cxsl:attribute name\x3d"style"\x3ebackground:url(\x3cxsl:value-of select\x3d"@icon" /\x3e) center center no-repeat;\x3c/xsl:attribute\x3e\x3c/xsl:if\x3e\t\t\t\t\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\t\t\t\x3c/ins\x3e\t\t\t\x3cxsl:copy-of select\x3d"./child::node()" /\x3e\t\t\x3c/a\x3e\t\x3c/xsl:for-each\x3e\t\x3cxsl:if test\x3d"$children"\x3e\t\t\x3cul\x3e\t\t\x3cxsl:for-each select\x3d"//item[@parent_id\x3d$node/attribute::id]"\x3e\t\t\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\t\t\x3cxsl:with-param name\x3d"node" select\x3d"." /\x3e\t\t\t\t\x3cxsl:with-param name\x3d"is_last" select\x3d"number(position() \x3d last())" /\x3e\t\t\t\x3c/xsl:call-template\x3e\t\t\x3c/xsl:for-each\x3e\t\t\x3c/ul\x3e\t\x3c/xsl:if\x3e\t\x3c/li\x3e\x3c/xsl:template\x3e\x3c/xsl:stylesheet\x3e'},
b=function(a){return a.toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,c){var g=this;this.load_node_xml(a,function(){g.__callback({obj:g._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var b=this._get_settings().xml_data;a=this._get_node(a);
return-1==a||!a||!b.ajax&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,b,f){var g=this.get_settings().xml_data,l=function(){},h=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !g.data&&!g.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(g.data):g.data.call(this,a,c.proxy(function(f){this.parse_xml(f,c.proxy(function(f){f&&
(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=c(f),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),b&&b.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},this));break;case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(g.data,c.proxy(function(f){f?(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length&&(f=c(f),this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),b&&b.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&a&&-1!==a:l=function(b,c,e){var h=this.get_settings().xml_data.ajax.error;
h&&h.call(this,b,c,e);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&g.correct_state&&this.correct_state(a)):"success"===c&&g.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},h=function(f,h,p){f=p.responseText;var n=this.get_settings().xml_data.ajax.success;n&&(f=n.call(this,f,h,p)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return l.call(this,p,h,"");this.parse_xml(f,
c.proxy(function(f){f&&(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=c(f),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),b&&b.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},g.ajax.context=this,g.ajax.error=l,g.ajax.success=h,g.ajax.dataType||(g.ajax.dataType="xml"),c.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,a)),c.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),c.ajax(g.ajax)}},parse_xml:function(b,e){var f=this._get_settings().xml_data;c.vakata.xslt(b,a[f.xsl],e)},get_xml:function(a,e,f,g,l){var h="",m=this._get_settings(),k=this,p,n,q,r,t;a||(a="flat");l||(l=0);(e=this._get_node(e))&&-1!==e||(e=this.get_container().find("\x3e ul \x3e li"));
f=c.isArray(f)?f:["id","class"];!l&&this.data.types&&-1===c.inArray(m.types.type_attr,f)&&f.push(m.types.type_attr);g=c.isArray(g)?g:[];l||(m.xml_data.get_include_preamble&&(h+='\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e'),h+="\x3croot\x3e");e.each(function(){h+="\x3citem";q=c(this);c.each(f,function(a,c){var d=q.attr(c);m.xml_data.get_skip_empty&&"undefined"===typeof d||(h+=" "+c+'\x3d"'+b((" "+(d||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+
'"')});q.hasClass("jstree-open")&&(h+=' state\x3d"open"');q.hasClass("jstree-closed")&&(h+=' state\x3d"closed"');"flat"===a&&(h+=' parent_id\x3d"'+b(l)+'"');h+="\x3e";h+="\x3ccontent\x3e";r=q.children("a");r.each(function(){p=c(this);t=!1;h+="\x3cname";-1!==c.inArray("languages",m.plugins)&&c.each(m.languages,function(a,c){if(p.hasClass(c))return h+=' lang\x3d"'+b(c)+'"',t=c,!1});g.length&&c.each(g,function(a,c){var d=p.attr(c);m.xml_data.get_skip_empty&&"undefined"===typeof d||(h+=" "+c+'\x3d"'+
b((" "+d||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(h+=' icon\x3d"'+b(p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');p.children("ins").get(0).style.backgroundImage.length&&(h+=' icon\x3d"'+b(p.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,
"").replace(/"/ig,""))+'"');h+="\x3e";h+="\x3c![CDATA["+k.get_text(p,t)+"]]\x3e";h+="\x3c/name\x3e"});h+="\x3c/content\x3e";n=q[0].id||!0;q=q.find("\x3e ul \x3e li");n=q.length?k.get_xml(a,q,f,g,n):"";"nest"==a&&(h+=n);h+="\x3c/item\x3e";"flat"==a&&(h+=n)});l||(h+="\x3c/root\x3e");return h}}})})(jQuery);(function(c){c.expr[":"].jstree_contains=function(a,b,c){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())};c.expr[":"].jstree_title_contains=function(a,b,c){return 0<=
(a.getAttribute("title")||"").toLowerCase().indexOf(c[3].toLowerCase())};c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,b){c(this).children("ul").find("li").hide().removeClass("jstree-last");b.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",
function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,b){if(""===c.trim(a))this.clear_search();else{var d=this.get_settings().search,e=this,f=function(){};this.data.search.str=a;if(!b&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,b,c){var d=this.get_settings().search.ajax.success;
d&&(a=d.call(this,a,b,c)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=f;c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a));c.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a));d.ajax.data||(d.ajax.data={search_string:a});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";c.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+
(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){e.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var b=this;a=!0;var d=[],e=[];this.data.search.to_open.length&&
(c.each(this.data.search.to_open,function(a,b){if("#"==b)return!0;c(b).length&&c(b).is(".jstree-closed")?d.push(b):e.push(b)}),d.length&&(this.data.search.to_open=e,c.each(d,function(a,c){b.open_node(c,function(){b._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("\x3cdiv id\x3d'vakata-contextmenu' /\x3e"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,b,d,e,f,g,l){c.vakata.context.rtl=!!l;if(a=
c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=b;c.vakata.context.par=g||b||null;c.vakata.context.data=f||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",function(a){c.vakata.context.hide()});f=c.vakata.context.cnt.height();g=c.vakata.context.cnt.width();d+g>c(document).width()&&(d=c(document).width()-(g+5),c.vakata.context.cnt.find("li \x3e ul").addClass("right"));
e+f>c(document).height()&&(e-=f+b[0].offsetHeight,c.vakata.context.cnt.find("li \x3e ul").addClass("bottom"));c.vakata.context.cnt.css({left:d,top:e}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();var b=c(document).height(),d=c(this).children("ul").show();a!==c(document).width()&&d.toggleClass("right");b!==c(document).height()&&d.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},
hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,b){if(!a)return!1;var d="",e=!1,f=!0;b||(c.vakata.context.func={});d+="\x3cul\x3e";c.each(a,function(a,b){if(!b)return!0;c.vakata.context.func[a]=b.action;!f&&b.separator_before&&(d+="\x3cli class\x3d'vakata-separator vakata-separator-before'\x3e\x3c/li\x3e");f=!1;d+="\x3cli class\x3d'"+(b._class||"")+(b._disabled?" jstree-contextmenu-disabled ":
"")+"'\x3e\x3cins ";b.icon&&-1===b.icon.indexOf("/")&&(d+=" class\x3d'"+b.icon+"' ");b.icon&&-1!==b.icon.indexOf("/")&&(d+=" style\x3d'background:url("+b.icon+") center center no-repeat;' ");d+="\x3e\x26#160;\x3c/ins\x3e\x3ca href\x3d'#' rel\x3d'"+a+"'\x3e";b.submenu&&(d+="\x3cspan style\x3d'float:"+(c.vakata.context.rtl?"left":"right")+";'\x3e\x26raquo;\x3c/span\x3e");d+=b.label+"\x3c/a\x3e";b.submenu&&(e=c.vakata.context.parse(b.submenu,!0))&&(d+=e);d+="\x3c/li\x3e";b.separator_after&&(d+="\x3cli class\x3d'vakata-separator vakata-separator-after'\x3e\x3c/li\x3e",
f=!0)});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");d+="\x3c/ul\x3e";c(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover \x3e a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var b=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var b=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,b,d){a=this._get_node(a);var e=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)"),g=!1,g=!1;e.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),this.select_node(a,!0));
if(e.show_at_node||"undefined"===typeof b||"undefined"===typeof d)g=f.offset(),b=g.left,d=g.top+this.data.core.li_height;g=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:e.items;c.isFunction(g)&&(g=g.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(g,f,b,d,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var b=a.type_attr,d="",e=this;c.each(a.types,function(a,g){c.each(g,function(a,b){/^(max_depth|max_children|icon|valid_children)$/.test(a)||e.data.types.attach_to.push(a)});if(!g.icon)return!0;if(g.icon.image||g.icon.position)d="default"==a?d+(".jstree-"+e.get_index()+" a \x3e .jstree-icon { "):d+(".jstree-"+e.get_index()+" li["+b+'\x3d"'+a+'"] \x3e a \x3e .jstree-icon { '),g.icon.image&&
(d+=" background-image:url("+g.icon.image+"); "),d=g.icon.position?d+(" background-position:"+g.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&c.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,d){var e,f;if((e=(e=this._get_settings().types.use_data?this._get_node(d.args[0]):!1)&&-1!==e&&e.length?e.data("jstree"):!1)&&e.types&&!1===e.types[d.func]||-1!==c.inArray(d.func,this.data.types.attach_to)&&d.args[0]&&(d.args[0].tagName||
d.args[0].jquery)&&(e=this._get_settings().types.types,f=this._get_type(d.args[0]),(e[f]&&"undefined"!==typeof e[f][d.func]||e["default"]&&"undefined"!==typeof e["default"][d.func])&&!1===this._check(d.func,d.args[0])))return a.stopImmediatePropagation(),!1},this));r&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,d){var e=d&&d.rslt&&d.rslt.obj&&-1!==d.rslt.obj?this._get_node(d.rslt.obj).parent():this.get_container_ul(),f=!1,g=this._get_settings().types;c.each(g.types,
function(a,b){b.icon&&(b.icon.image||b.icon.position)&&(f="default"===a?e.find("li \x3e a \x3e .jstree-icon"):e.find("li["+g.type_attr+"\x3d'"+a+"'] \x3e a \x3e .jstree-icon"),b.icon.image&&f.css("backgroundImage","url("+b.icon.image+")"),f.css("backgroundPosition",b.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,b){b.type&&
this._get_settings().types.use_data&&this.set_type(b.type,a)},_get_type:function(a){return(a=this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,b){b=this._get_node(b);var c=b.length&&a?b.attr(this._get_settings().types.type_attr,a):!1;c&&this.__callback({obj:b,type:a});return c},_check:function(a,b,d){b=this._get_node(b);var e=!1,f=this._get_type(b),g=0,l=this,h=this._get_settings().types,m=!1;if(-1===b)if(h[a])e=h[a];else return;else{if(!1===
f)return;(m=h.use_data?b.data("jstree"):!1)&&m.types&&"undefined"!==typeof m.types[a]?e=m.types[a]:h.types[f]&&"undefined"!==typeof h.types[f][a]?e=h.types[f][a]:h.types["default"]&&"undefined"!==typeof h.types["default"][a]&&(e=h.types["default"][a])}c.isFunction(e)&&(e=e.call(this,b));"max_depth"===a&&-1!==b&&!1!==d&&-2!==h.max_depth&&0!==e&&b.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==h.max_depth&&0>=h.max_depth-(b+1))return e=0,!1;g=0===b?e:l._check(a,this,!1);if(-1!==
g&&0>=g-(b+1))return e=0,!1;0<=g&&(g-(b+1)<e||0>e)&&(e=g-(b+1));0<=h.max_depth&&(h.max_depth-(b+1)<e||0>e)&&(e=h.max_depth-(b+1))});return e},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),b=a.rt._get_settings().types,d=a.rt._check("max_children",a.cr),e=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),g=0,l=1;if("none"===f||c.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),f))return l=!1}),!1===l)||-2!==
b.max_children&&-1!==d&&(g=-1===a.cr?this.get_container().find("\x3e ul \x3e li").not(a.o).length:a.cr.find("\x3e ul \x3e li").not(a.o).length,g+a.o.length>d))return!1;if(-2!==b.max_depth&&-1!==e){l=0;if(0===e)return!1;if("undefined"===typeof a.o.d){for(b=a.o;0<b.length;)b=b.find("\x3e ul \x3e li"),l++;a.o.d=l}if(0>e-a.o.d)return!1}return!0},create_node:function(a,b,d,e,f,g){if(!g&&(f||this._is_loaded(a))){var l="string"==typeof b&&b.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),
h=this._get_settings().types,m=this._check("max_children",l),k=this._check("max_depth",l),p=this._check("valid_children",l);"string"===typeof d&&(d={data:d});d||(d={});if("none"===p)return!1;if(c.isArray(p))if(!d.attr||!d.attr[h.type_attr])d.attr||(d.attr={}),d.attr[h.type_attr]=p[0];else if(-1===c.inArray(d.attr[h.type_attr],p))return!1;if(-2!==h.max_children&&-1!==m&&(l=-1===l?this.get_container().find("\x3e ul \x3e li").length:l.find("\x3e ul \x3e li").length,l+1>m)||-2!==h.max_depth&&-1!==k&&
0>k-1)return!1}return this.__call_old(!0,a,b,d,e,f,g)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" \x3e ul \x3e li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,c){var e=this;this.load_node_html(a,function(){e.__callback({obj:e._get_node(a)});
b.call(this)},c)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!c.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,b,d){var e,f=this.get_settings().html_data,g=function(){};e=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(f.data):f.data.call(this,
a,c.proxy(function(d){d&&""!==d&&d.toString&&""!==d.toString().replace(/^[\s\n]+$/,"")?(d=c(d),d.is("ul")||(d=c("\x3cul /\x3e").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
f.correct_state&&(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !f.data&&!f.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());b&&b.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):a&&-1!=a||(e=c(f.data),e.is("ul")||(e=c("\x3cul /\x3e").append(e)),this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());b&&b.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:a=this._get_node(a),g=function(b,c,e){var g=this.get_settings().html_data.ajax.error;g&&g.call(this,b,c,e);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&f.correct_state&&this.correct_state(a)):"success"===c&&f.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},e=function(d,e,m){var k=this.get_settings().html_data.ajax.success;
k&&(d=k.call(this,d,e,m)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,""))return g.call(this,m,e,"");d?(d=c(d),d.is("ul")||(d=c("\x3cul /\x3e").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
f.correct_state&&(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},f.ajax.context=this,f.ajax.error=g,f.ajax.success=e,f.ajax.dataType||(f.ajax.dataType="html"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=
this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(b){c(b.currentTarget).hasClass("jstree-loading")||c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("\x3e ul \x3e li \x3e .jstree-loading \x3e ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("\x3e ul \x3e li"))},
this)).bind("open_node.jstree create_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(b,c){c.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("\x3e a \x3e ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(b,c){c.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(b,c){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",
c.proxy(function(b,c){c.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(b,c){this.get_container().find("a."+a.item_h).not(c.rslt.obj).removeClass(a.item_h);c.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,b=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(b=b.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+b.join(", .")).removeClass(b.join(" "))},_fn:{_themeroller:function(a){var b=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,
"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+
" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
c.proxy(function(a,b){var d=[],e=!0,f;"move_node"==b.func&&!0===b.args[4]&&b.args[0].o&&b.args[0].o.length&&(b.args[0].o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,""))}),e=this._check_unique(d,b.args[0].np.find("\x3e ul \x3e li").not(b.args[0].o),"move_node"));"create_node"==b.func&&(b.args[4]||this._is_loaded(b.args[0]))&&(e=this._get_node(b.args[0]),!b.args[1]||"before"!==b.args[1]&&"after"!==b.args[1]||(e=this._get_parent(b.args[0]))&&-1!==e||(e=this.get_container()),
"string"===typeof b.args[2]?d.push(b.args[2]):b.args[2]&&b.args[2].data?d.push(b.args[2].data):d.push(this._get_string("new_node")),e=this._check_unique(d,e.find("\x3e ul \x3e li"),"create_node"));"rename_node"==b.func&&(d.push(b.args[1]),f=this._get_node(b.args[0]),(e=this._get_parent(f))&&-1!==e||(e=this.get_container()),e=this._check_unique(d,e.find("\x3e ul \x3e li").not(f),"rename_node"));if(!e)return a.stopPropagation(),!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,
b,d){var e=[];b.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,""))});if(!e.length||!a.length)return!0;e=e.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return e.length+a.length!=e.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,a,b,d),!1):!0},check_move:function(){if(!this.__call_old())return!1;
var a=this._get_move(),b=[];return a.o&&a.o.length?(a.o.children("a").each(function(){b.push(c(this).text().replace(/^\s+/g,""))}),this._check_unique(b,a.np.find("\x3e ul \x3e li").not(a.o),"check_move")):!0}}})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,b){this._get_settings().core.animation=
0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,b){this._prepare_wholerow_span(b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",c.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,b&&b.rslt&&b.rslt.obj?
b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,b){this.get_container().find(" \x3e .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,b){b.rslt.obj.each(function(){b.inst.get_container().find(" \x3e .jstree-wholerow li:visible:eq("+parseInt((c(this).offset().top-b.inst.get_container().offset().top+b.inst.get_container()[0].scrollTop)/
b.inst.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,b){this.get_container().find(" \x3e .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" \x3e .jstree-wholerow li:visible:eq("+parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+
this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var b=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&b.closest("li").is(".jstree-open, .jstree-closed")||(b.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();
if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(t||r)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},
_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("\x3e ul \x3e li");!1!==a&&a.each(function(){c(this).find("li").andSelf().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("\x3cspan class\x3d'jstree-wholerow-span' style\x3d'width:"+18*a.parentsUntil(".jstree","li").length+"px;'\x3e\x26#160;\x3c/span\x3e")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),b=a.html();a.addClass("jstree-wholerow-real");
this.data.wholerow.last_html!==b&&(this.data.wholerow.last_html=b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("\x3cdiv class\x3d'jstree-wholerow' /\x3e").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
u&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(t||r)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],b=function(a,b){var f=!0;a=a||{};b=[].concat(b);c.each(b,function(b,e){if(!c.isFunction(a[e]))return f=!1});return f};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(d,e){var f=-1==d?this._get_settings().model.object:d.data("jstree_model");if(!b(f,a))return e.call(null,!1);this._get_settings().model.async?f.getChildren(c.proxy(function(a){this.model_done(a,
e)},this)):this.model_done(f.getChildren(),e)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,b){var f=[],g=this._get_settings(),l=this;c.isArray(a)||(a=[a]);c.each(a,function(a,b){var d=b.getProps()||{};d.attr=b.getAttr()||{};b.getChildrenCount()&&(d.state="closed");d.data=b.getName();c.isArray(d.data)||(d.data=[d.data]);l.data.types&&c.isFunction(b.getType)&&(d.attr[g.types.type_attr]=b.getType());d.attr.id&&g.model.id_prefix&&(d.attr.id=g.model.id_prefix+d.attr.id);d.metadata||
(d.metadata={});d.metadata.jstree_model=b;f.push(d)});b.call(null,f)}}})})(jQuery)}})();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:path-and-line', location = '/static/bitbucket/internal/model/path-and-line.js' */
define("bitbucket/internal/model/path-and-line",["module","exports","bitbucket/internal/model/path"],function(k,f,l){function g(a,d,b){this.path=new h.default(a&&a.path||a);if(d)this.line={no:d,type:b||"TO"};else if(a&&a.line)this.line=a.line;else if(a=this.path.getComponents(),b=a.length-1,0<=b){var c=a[b],e=Math.max(c.lastIndexOf("?F"),c.lastIndexOf("?T"));0<e&&(d=Number(c.substring(e+2))||void 0)&&(this.line={no:d,type:"F"===c[e+1]?"FROM":"TO"},a[b]=c.substring(0,e),this.path=new h.default(a))}}
Object.defineProperty(f,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(l);g.prototype.toString=function(){return this.path.toString()+(this.line?("FROM"===this.line.type?"?F":"?T")+this.line.no:"")};f.default=g;k.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search-input.js' */
define("bitbucket/internal/feature/commit/difftree/difftree-search-input","module exports aui bacon jquery lodash bitbucket/internal/util/events bitbucket/internal/util/function".split(" "),function(k,b,c,l,m,n,p,q){function e(b){this.$el=(0,r.default)(bitbucket.internal.feature.difftree.searchInput(b));this._destroyables=[];var d=this.$el.find("input"),a=this.$el.find(".delete-button");this._destroyables.push(f.default.chainWith(a).on("click",function(a){a.preventDefault();d.val("").trigger("input")}));
this._destroyables.push(f.default.chainWith(d).on("input",function(b){a.toggle(!!this.value)}))}Object.defineProperty(b,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(c);c=babelHelpers.interopRequireDefault(l);var r=babelHelpers.interopRequireDefault(m),t=babelHelpers.interopRequireDefault(n),f=babelHelpers.interopRequireDefault(p),h=babelHelpers.interopRequireDefault(q);c.default;e.prototype.getInputs=function(){var b=this.$el.find(".delete-button").asEventStream("click"),d=this.$el.find("input").asEventStream("keyup"),
a=h.default.dotEq.bind(null,"keyCode"),c=d.filter(a(g.default.keyCode.ESCAPE)),a=a(g.default.keyCode.ENTER);return d.filter(a).merge(c).doAction(".preventDefault").doAction(".currentTarget.blur").filter(a).flatMap(function(a){return a.target.value}).merge(b.map(h.default.constant(""))).skipDuplicates()};e.prototype.destroy=function(){t.default.invoke(this._destroyables,"destroy")};b.default=e;k.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search.js' */
define("bitbucket/internal/feature/commit/difftree/difftree-search","module exports aui bacon jquery lodash bitbucket/internal/feature/commit/difftree/difftree-search-input bitbucket/internal/model/path bitbucket/internal/model/path-and-line bitbucket/internal/util/bacon bitbucket/internal/util/events bitbucket/internal/util/function bitbucket/internal/util/promise bitbucket/internal/util/shortcuts".split(" "),function(v,l,w,x,y,z,A,B,C,D,E,F,G,H){function q(a,d){return{length:a.length,indexOf:function(b,
c){return d?b.indexOf(a,c):b.toLowerCase().indexOf(a.toLowerCase(),c)}}}function r(a,d){var b=d.indexOf(a);a=30<b?"..."+a.substring(b-30):a;for(var c=0,e="",g=0;c<a.length&&100>g;g++)b=d.indexOf(a,c),b=0>b?a.length:b,e+=m.default.escapeHtml(a.substring(c,b)),b<a.length&&(e+="\x3cstrong\x3e"+m.default.escapeHtml(a.substring(b,b+d.length))+"\x3c/strong\x3e"),c=b+d.length;return e}function I(a){function d(a){a.metadata.isDirectory?a.children.forEach(d):b[a.data.attr.href.substring(1)]=a}var b={};d(a);
return b}function J(a){return k.default.fromBinder(function(d){a.diffs.forEach(function(a){var c=new K.default(a.destination||a.source);(a.hunks||[]).forEach(function(a){a.segments.forEach(function(a){a.lines.forEach(function(b){d({path:c.toString(),type:a.type,lineNumber:"ADDED"===a.type?b.destination:b.source,line:b.line})})})})});d(new k.default.End);return n.default.noop})}function t(a,d,b){function c(a){a.children=a.children.filter(function(a){return a.metadata.isDirectory?c(a):a.children&&0<
a.children.length});return 0<a.children.length}a.searchTruncated=b.truncated;var e=I(a);L.default.split(J(b).filter(function(a){return 0<=d.indexOf(a.line)}),u.default.dot("path")).onValue(function(a){var b=h.default.reduce(a,function(a,b){return Math.max(a,b.lineNumber.toString().length)},0);a.forEach(function(a){var c=e[a.path];if(c){c.children=c.children||[];var g=new M.default(a.path,a.lineNumber,"ADDED"===a.type?"TO":"FROM"),f=bitbucket.internal.feature.difftree.searchTreeNode({changeType:a.type,
lineNumber:a.lineNumber.toString(),padding:b,titleContent:r(a.line.trim(),d)});c.children.push({data:{title:f,attr:{"class":"jstree-search-leaf",title:a.line.trim(),href:"#"+g.toString()}},metadata:h.default.extend({},c.metadata,{path:g})})}})});c(a);b={linesMatched:h.default.reduce(a.children,function(a,b){return a+b.children.length},0),filesMatched:a.children.length,searchTruncated:a.searchTruncated};p.default.trigger("bitbucket.internal.ui.diff-view.search.result.details",null,b);return a}function f(a){this.input=
new N.default({placeholder:"Find text in diff and context lines"});this.caseSensitive=a;this._destroyables=[];this._destroyables.push(this.input);this._destroyables.push(p.default.chainWith(this.input.$el.closest("form")).on("submit",u.default.invoke("preventDefault")));this._destroyables.push({destroy:O.default.bind("requestDiffTreeSearch",this.focusSearch.bind(this))})}Object.defineProperty(l,"__esModule",{value:!0});var m=babelHelpers.interopRequireDefault(w),k=babelHelpers.interopRequireDefault(x),
n=babelHelpers.interopRequireDefault(y),h=babelHelpers.interopRequireDefault(z),N=babelHelpers.interopRequireDefault(A),K=babelHelpers.interopRequireDefault(B),M=babelHelpers.interopRequireDefault(C),L=babelHelpers.interopRequireDefault(D),p=babelHelpers.interopRequireDefault(E),u=babelHelpers.interopRequireDefault(F),P=babelHelpers.interopRequireDefault(G),O=babelHelpers.interopRequireDefault(H);f.prototype.register=function(a,d){var b=this,c=this.input.getInputs();return c.flatMap(function(e){if(!e)return k.default.fromArray([{data:d(),
search:e}]);var g=(0,n.default)('\x3cdiv class\x3d"difftree-search-spinner"\x3e\x3c/div\x3e').prependTo(b.input.$el),f=b.input.$el.parent().find(".search-icon");f.addClass("invisible");g=P.default.spinner(g,a(e)).always(function(){f.removeClass("invisible")});return k.default.fromPromise(g,!0).takeUntil(c).map(h.default.partial(t,n.default.extend(!0,{},d()),new q(e,b.caseSensitive))).map(function(a){return{data:a,search:e}})})};f.prototype.focusSearch=function(){this.trigger("search-focus");this.input.$el.find("input").focus()};
h.default.extend(f.prototype,p.default.createEventMixin("diffTreeSearch",{localOnly:!0}));f.prototype.destroy=function(){h.default.invoke(this._destroyables,"destroy")};l.default={DiffTreeSearch:f,_filterDiffTree:t,_Text:q,_decorateTitle:r};v.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search-input.soy' */
// This file was automatically generated from difftree-search-input.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.difftree.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.difftree == 'undefined') { bitbucket.internal.feature.difftree = {}; }


bitbucket.internal.feature.difftree.searchInput = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<form class="aui search">' + aui.icons.icon({icon: 'search-small', useIconFont: true, size: 'small', extraClasses: 'search-icon'}) + aui.form.input({type: 'text', id: 'diff-search', extraClasses: opt_data.extraClasses, extraAttributes: '' + ((opt_data.placeholder) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholder) + '"' : '')}) + bitbucket.internal.buttons.deleteButton({title: 'Delete'}) + '</form>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.difftree.searchInput.soyTemplateName = 'bitbucket.internal.feature.difftree.searchInput';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree.js' */
define("bitbucket/internal/feature/commit/difftree/difftree","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/feature/commit/difftree/difftree-search bitbucket/internal/feature/file-content/request-change bitbucket/internal/model/content-tree-node-types bitbucket/internal/model/path-and-line bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/property".split(" "),function(F,p,G,H,I,J,K,L,M,N,O,P,Q,R){function q(a,b){function c(a){if(a.metadata.isDirectory){a.state=
"open";a.data.icon="aui-icon aui-icon-small aui-iconfont-devtools-folder-open";var r,f=a.children.length,h;for(r=0;r<f&&d<b;r++)h=a.children[r],c(h)}else a.metadata.isFile&&(a.children&&0<a.children.length&&(a.state="open"),d+=a.children?a.children.length:1)}b=0<=b?b:200;var d=0;c(a);return a}function z(a,b){return a.children?b.children?a.data.title.toLowerCase()<b.data.title.toLowerCase()?-1:1:-1:b.children?1:a.data.title.toLowerCase()<b.data.title.toLowerCase()?-1:1}function v(a){a.childrenByTypeAndComponent=
void 0;var b,c=a.children.length,d,g;for(b=0;b<c;b++)if(d=a.children[b],d.metadata.isDirectory){for(g=[d.data.title];1===d.children.length&&d.children[0].metadata.isDirectory;)d=d.children[0],g.push(d.data.title);d.data.title=g.join("/");a.children[b]=d;v(d)}a.children.sort(z)}function A(a,b,c){var d={data:{icon:"aui-icon aui-icon-small aui-iconfont-devtools-folder-closed"},state:"closed",metadata:{isDirectory:!0},children:[],childrenByTypeAndComponent:{}},g,r=a.length,f,e;for(g=0;g<r;g++){f=a[g];
e=d;var k,w=f.path.components.length,m,t;for(k=0;k<w;k++)if(m=f.path.components[k],t=(k+1===w?"F":"D")+m,Object.prototype.hasOwnProperty.call(e.childrenByTypeAndComponent,t))e=e.childrenByTypeAndComponent[t];else{if(k+1===w){var l=!(!f.properties||!f.properties.activeComments);m={data:{title:h.default.escapeHtml(m),icon:"aui-icon aui-icon-small "+(f.nodeType===S.default.SUBMODULE?"aui-iconfont-devtools-submodule":l?"aui-iconfont-devtools-file-commented":"aui-iconfont-devtools-file"),attr:{id:"change"+
g,"class":"difftree-file change-type-"+f.type+(f.conflict?" conflict":""),href:"#"+encodeURI(f.path.toString),title:f.conflict?"Merge conflict":l?"This file has comments":void 0}},metadata:babelHelpers.extends({isFile:!0,changeType:f.type,nodeType:f.nodeType,path:f.path,srcPath:f.srcPath,conflict:f.conflict,contentId:f.contentId,fromContentId:f.fromContentId,executable:f.executable,srcExecutable:f.srcExecutable},
b)}}else m={data:{title:h.default.escapeHtml(m),icon:"aui-icon aui-icon-small aui-iconfont-devtools-folder-closed"},state:"closed",metadata:{isDirectory:!0},children:[],childrenByTypeAndComponent:{}};e.children.push(m);e=e.childrenByTypeAndComponent[t]=m}}v(d);q(d,c);return d}function T(a,b,c){return U.default.rest().currentRepo().changes(c).withParams({start:a,limit:b})}function e(a,b,c,d){d=d||{};this._fileLimit=d.maxChanges||1E3;V.default.getFromProvider("page.max.diff.lines").done(function(a){this._maxDiffLines=
a}.bind(this));this._$wrapper=(0,n.default)(a);this._$toolbar=(0,n.default)(b);this._commitRange=c;this._hasOtherParents=!!d.hasOtherParents;this._urlBuilder=d.urlBuilder||T;this._searchUrlBuilder=d.searchUrlBuilder;this._diffViewType=d.diffViewType}function u(a,b){var c;if(!(c=W(a,b))){for(c=a;c&&c.children;)c=c.children[0];c=c&&c.metadata&&c.metadata.isFile?c:null}return c}function W(a,b){if(!b)return null;for(b=b.slice(0);a&&a.children;){for(var c=b.shift(),d=!b.length,g=a.children.length;g--;){var e=
a.children[g],f=l.default.unescape(e.data.title);if(c===f&&d===Boolean(e.metadata.isFile)){a=e;break}if(!d&&l.default.startsWith(f,c+"/")){for(;1<b.length&&l.default.startsWith(f,c+"/"+b[0]);)c+="/",c+=b.shift();if(f!==c)return null;a=e;break}}if(0>g)return null}return a&&a.metadata&&a.metadata.isFile?a:null}function x(a,b){if(a===b)return[b];for(var c=a.children?a.children.length:0;c--;){var d=x(a.children[c],b);if(d)return d.unshift(a),d}return null}function y(a,b,c){c&&c.length&&!c.hasClass("jstree-leaf")&&
(a.open_node(c),c=y(a,b,b.call(a,c)));return c}function B(a,b){b&&!b.hasClass("jstree-leaf")&&(b.hasClass("jstree-closed")?(a.open_node(b),b=y(a,C,C.call(a,b))):b.length&&(b=B(a,a._get_prev(b))));return b}function C(a){return this._get_children(a).filter(".jstree-last")}Object.defineProperty(p,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(G),n=babelHelpers.interopRequireDefault(H),l=babelHelpers.interopRequireDefault(I),U=babelHelpers.interopRequireDefault(J);babelHelpers.interopRequireDefault(K);
var X=babelHelpers.interopRequireDefault(L),D=babelHelpers.interopRequireDefault(M),S=babelHelpers.interopRequireDefault(N),E=babelHelpers.interopRequireDefault(O),Y=babelHelpers.interopRequireDefault(P),k=babelHelpers.interopRequireDefault(Q),V=babelHelpers.interopRequireDefault(R);l.default.extend(e.prototype,k.default.createEventMixin("diffTree",{localOnly:!0}));e.prototype.init=function(a){this._destroyables=[];this._selectedPathComponents=a;this._firstCommentAddedHandler=l.default.bind(this._firstCommentAddedHandler,
this);this._lastCommentDeletedHandler=l.default.bind(this._lastCommentDeletedHandler,this);this._destroyables.push(k.default.chain().on("bitbucket.internal.feature.comments.firstCommentAdded",this._firstCommentAddedHandler).on("bitbucket.internal.feature.comments.lastCommentDeleted",this._lastCommentDeletedHandler));this._searchUrlBuilder&&this._destroyables.push(this._addSearch());return this.data?this.dataReceived(this.data):this.requestData()};e.prototype._addSearch=function(){var a=this,b=[],
c=new X.default.DiffTreeSearch,d=this._$wrapper.siblings(".file-tree-header"),g=(0,n.default)(bitbucket.internal.feature.difftree.searchWrapper({includeCollapseButton:!d.length}));g.prepend(c.input.$el);if(d.length)d.after(g),b.push({destroy:function(){return g.remove()}});else{var e=this._$toolbar.find("h4");e.replaceWith(g);b.push({destroy:function(){return g.replaceWith(e)}})}b.push(c);b.push(k.default.chainWith(g.find(".search-button-when-collapsed")).on("click",function(){c.focusSearch()}));
b.push(k.default.chainWith(c).on("search-focus",l.default.bind(this.trigger,this,"search-focus")));b.push({destroy:c.register(function(c){g.addClass("searching");return Y.default.rest({url:a._searchUrlBuilder({path:"",commitRange:a._commitRange.toJSON()}).withParams({withComments:!1}).withParams(!c||!a._commitRange.getPullRequest()&&50>a._getFileCount(a.data,50)?{}:{filter:c}).build()}).done(function(){return g.removeClass("searching")})},function(){return a.data}).onValue(function(c){g.toggleClass("searching",
Boolean(c.search));a.data_copy=a.data;a._searchEmpty=0===c.data.children.length;k.default.trigger("bitbucket.internal.feature.diffView.highlightSearch",null,c.search);a.dataReceived(q(c.data)).done(function(){a.data=a.data_copy;a._searchEmpty=null})})});return{destroy:function(){l.default.invoke(b,"destroy")}}};e.prototype._getFileCount=function(a,b){function c(a){return l.default.reduce(a.children,function(a,d){return a<b?a+(d.metadata.isFile?1:c(d)):a},0)}return c(a)};e.prototype.invalidateCacheForLastUrl=
function(){this._lastUrl&&D.default.invalidateCacheForUrl(this._lastUrl)};e.prototype._firstCommentAddedHandler=function(){this.invalidateCacheForLastUrl();this.getSelectedFile().find("a \x3e ins").hide().removeClass("aui-iconfont-devtools-file").addClass("aui-iconfont-devtools-file-commented").fadeIn("slow")};e.prototype._lastCommentDeletedHandler=function(){this.invalidateCacheForLastUrl();this.getSelectedFile().find("a \x3e ins").hide().removeClass("aui-iconfont-devtools-file-commented").addClass("aui-iconfont-devtools-file").fadeIn("slow")};
e.prototype.reset=function(){this._request&&(this._request.abort(),this._interrupted=!0);this._rendering&&(this._rendering=!1,this._interrupted=!0);l.default.invoke(this._destroyables,"destroy")};e.prototype.requestData=function(){var a=this;this._request&&(this._lastUrl=null,this._request.abort());var b=this._urlBuilder(0,this._fileLimit,this._commitRange).build();this._lastUrl=b;this._request=D.default.getChangesRequestFromUrl(b);return this._request.always(function(){return a._request=null}).then(function(c){if(!c)return c=
h.default.escapeHtml("This pull request returned no data to display"),a.prependMessage(c,"error"),n.default.Deferred().reject();a._rendering=!0;a._interrupted=!1;a.isTruncated=!c.isLastPage;c=A(c.values,{diffViewType:a._diffViewType});return a.dataReceived(c).done(function(){return a._rendering=!1})})};e.prototype.prependMessage=function(a,b){this._$wrapper.find(".aui-message").remove();b=b||"warning";this._$wrapper.find(".file-tree").before(aui.message[b]({extraClasses:"diff-tree-scm-message",
content:a}))};e.prototype.dataReceived=function(a){function b(){c._interrupted?d.reject(c):d.resolve(c)}var c=this;this.data=a;var d=n.default.Deferred();a=u(this.data,this._selectedPathComponents);var e;if(a)for(e=[a.data.attr.id],a=x(this.data,a)||[],a.pop();a.length;)a.pop().state="open";else e=[];var l=!0,f;this._$wrapper.find(".aui-message").remove();if(this.isTruncated){a="";if(this._commitRange.getPullRequest())a=h.default.escapeHtml(h.default.format("This pull request is too large to render. Showing the first {0} files.",
this._fileLimit));else{a=this._commitRange.getUntilRevision();var p=this._commitRange.getSinceRevision();a=p?"git diff-tree -C -r "+p.getId()+" "+a.getId():"git diff-tree -r --root "+a.getId();a=h.default.escapeHtml(h.default.format("This commit is too large to render. Showing the first {0} files. You can retrieve the full details manually with the following Git command.",this._fileLimit))+'\x3cp class\x3d"scm-command"\x3e'+h.default.escapeHtml(a)+"\x3c/p\x3e"}this.prependMessage(a,"warning")}if(this.data.children.length)this.data.searchTruncated&&c.prependMessage(h.default.escapeHtml(h.default.format("Your diff is too large to search. Searching the first {0} lines.\n",
this._maxDiffLines)),"info"),this.$tree=this._$wrapper.children(".file-tree"),this.$tree.fadeOut("fast",function(){c.$tree.empty().off(".jstree").jstree("destroy").on("loaded.jstree",function(){setTimeout(function(){l=!1;b()},0)}).jstree({json_data:{data:c.data.children,progressive_render:!0},core:{html_titles:!0,animation:200},ui:{select_limit:1,selected_parent_close:!1,initially_select:e},plugins:["json_data","ui"]}).on("before.jstree",function(a,b){if("select_node"===b.func){var d=(0,n.default)(b.args[0]).parent();
if(d.hasClass("jstree-leaf")&&(!f||f[0]!==d[0]))f=d,k.default.trigger("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",c,d,l),c._selectedPathComponents=(new E.default(d.data("path"))).path.getComponents();else if(0<d.length)return c.$tree.jstree("toggle_node",d),!1}}).on("open_node.jstree",function(a,b){var d=b.args[0];if(d.data().isDirectory){var e=d.children("a").children("ins");e.removeClass("aui-iconfont-devtools-folder-closed");e.addClass("aui-iconfont-devtools-folder-open")}k.default.trigger("bitbucket.internal.feature.commit.difftree.nodeOpening",
c,d)}).on("after_open.jstree",function(a,b){k.default.trigger("bitbucket.internal.feature.commit.difftree.nodeOpened",c,b.args[0])}).on("close_node.jstree",function(a,b){var d=b.args[0];if(d.data().isDirectory){var e=d.children("a").children("ins");e.removeClass("aui-iconfont-devtools-folder-open");e.addClass("aui-iconfont-devtools-folder-closed")}k.default.trigger("bitbucket.internal.feature.commit.difftree.nodeClosing",c,d)}).on("after_close.jstree",function(a,b){k.default.trigger("bitbucket.internal.feature.commit.difftree.nodeClosed",
c,b.args[0])}).on("loaded.jstree",function(a,b){k.default.trigger("bitbucket.internal.feature.commit.difftree.treeInitialised",c,c)}).fadeIn("fast")});else{this.$tree=void 0;var q=this._$wrapper.children(".file-tree");q.fadeOut("fast",function(){q.empty().off(".jstree").jstree("destroy");var a=h.default.escapeHtml(c._searchEmpty&&c.data.searchTruncated?h.default.format("Your diff is too large to search. Searching the first {0} lines.\n",c._maxDiffLines)+" "+"No matching lines found":
c._searchEmpty?"No matching lines found":c._hasOtherParents?"There are no changes to this parent. Use the selector above to switch the parent.":"There are no changes");c.prependMessage(a,"info");setTimeout(b,0)})}return d.promise().always(function(){c._$wrapper.attr("data-last-updated",(new Date).getTime())})};e.prototype.getSelectedFile=function(){return this.$tree?this.$tree.jstree("get_selected"):null};e.prototype._getSelectedFileOrTree=function(){var a=
this.getSelectedFile();return a&&0<a.length?a:this.$tree};e.prototype.selectFile=function(a){if(this.$tree){a=u(this.data,a);var b=this.getSelectedFile(),b=(b=b&&b.data("path"))&&u(this.data,(new E.default(b)).path.getComponents());a&&a!==b&&this.$tree.jstree("deselect_all").jstree("select_node","#"+a.data.attr.id)}};e.prototype.openNextFile=function(){if(this.$tree){var a=n.default.jstree._reference(this.$tree),b=this._getSelectedFileOrTree();(a=y(a,a._get_next,a._get_next(b)))&&a.length&&a.find("a").focus().click()}};
e.prototype.openPrevFile=function(){if(this.$tree){var a=n.default.jstree._reference(this.$tree),b=this._getSelectedFileOrTree();(a=B(a,a._get_prev(b)))&&a.length&&a.find("a").focus().click()}};p.default={_openTree:q,DiffTree:e,computeTree:A,flattenTree:v,compareTreeNodes:z,getNodeToSelect:u,getPathFromRoot:x};F.exports=p["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:difftree', location = '/static/bitbucket/internal/feature/commit/difftree/difftree-search.soy' */
// This file was automatically generated from difftree-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.difftree.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.difftree == 'undefined') { bitbucket.internal.feature.difftree = {}; }


bitbucket.internal.feature.difftree.searchTreeNode = function(opt_data, opt_ignored) {
  var output = '<span class="change-type change-type-' + soy.$$escapeHtml(opt_data.changeType) + '">';
  switch (opt_data.changeType) {
    case 'ADDED':
      output += '+';
      break;
    case 'REMOVED':
      output += '-';
      break;
    default:
      output += ' ';
  }
  output += ' ' + soy.$$escapeHtml(require('bitbucket/internal/util/text')['padLeft'](opt_data.lineNumber, opt_data.padding, ' ')) + '</span> ' + soy.$$filterNoAutoescape(opt_data.titleContent);
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.difftree.searchTreeNode.soyTemplateName = 'bitbucket.internal.feature.difftree.searchTreeNode';
}


bitbucket.internal.feature.difftree.searchWrapper = function(opt_data, opt_ignored) {
  return '<div class="diff-tree-search-wrapper">' + ((opt_data.includeCollapseButton) ? aui.buttons.button({type: 'subtle', extraClasses: 'search-button-when-collapsed', text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-search', iconText: 'Find text in diff and context lines', extraAttributes: {title: 'Find text in diff and context lines'}}) : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.difftree.searchWrapper.soyTemplateName = 'bitbucket.internal.feature.difftree.searchWrapper';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tree-and-diff-view', location = '/static/bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view.soy' */
// This file was automatically generated from tree-and-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }


bitbucket.internal.feature.treeAndDiffView = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<div class="commit-files' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="file-tree-container">';
  var param10 = '' + aui.toolbar2.item({item: 'primary', content: '<h4>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('Show diff of\x3cspan class\x3d\x22assistive\x22\x3e the change or changes selected below\x3c/span\x3e')) + '</h4>'});
  var param18 = '<button class="aui-button aui-button-subtle collapse-file-tree" title=' + soy.$$escapeHtml('Hide/show file tree') + 'autocomplete="off"><span class="aui-icon collapse-file-tree-icon">' + soy.$$escapeHtml('Hide/show file tree') + '</span></button>';
  var webItemList24 = WebFragments.getWebItems('bitbucket.internal.repository.difftree.header.deprecated');
  var webItemListLen24 = webItemList24.length;
  for (var webItemIndex24 = 0; webItemIndex24 < webItemListLen24; webItemIndex24++) {
    var webItemData24 = webItemList24[webItemIndex24];
    param18 += bitbucket.internal.widget.webItemButton(webItemData24);
  }
  param10 += aui.toolbar2.item({item: 'secondary', content: param18});
  output += aui.toolbar2.toolbar2({extraClasses: 'diff-tree-toolbar', content: param10});
  output += ((opt_data.showCommitSelector) ? bitbucket.internal.buttons.button({extraClasses: 'aui-dd-trigger commit-selector-button', iconType: 'aui', iconClass: 'aui-icon aui-icon-small aui-iconfont-devtools-commit commit-icon', hasLabel: true, buttonText: opt_data.commit ? opt_data.commit.message : 'All changes in this pull request', title: 'View all changes, unreviewed changes, and individual commits in this pull request'}) + bitbucket.internal.feature.fileTreeHeader(opt_data) : '') + '<div class="file-tree-wrapper"><div class="file-tree"></div></div></div><div id="commit-file-content" class="file-content"></div></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.treeAndDiffView.soyTemplateName = 'bitbucket.internal.feature.treeAndDiffView';
}


bitbucket.internal.feature.fileTreeHeader = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<div class="file-tree-header"><h5>';
  if (opt_data.commit) {
    var commitLink__soy46 = '' + bitbucket.internal.feature.commit.link(opt_data);
    output += soy.$$filterNoAutoescape(AJS.format('Files in {0}',commitLink__soy46));
  } else {
    output += soy.$$escapeHtml('Files');
  }
  output += '</h5></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileTreeHeader.soyTemplateName = 'bitbucket.internal.feature.fileTreeHeader';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:tree-and-diff-view', location = '/static/bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view.js' */
define("bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view","module exports aui jquery lodash bitbucket/util/state bitbucket/internal/feature/commit/difftree/difftree bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/feature/file-content/file-content bitbucket/internal/model/conflict bitbucket/internal/model/file-change bitbucket/internal/model/file-content-modes bitbucket/internal/model/page-state bitbucket/internal/model/path-and-line bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/feature-detect bitbucket/internal/util/shortcuts".split(" "),
function(aa,z,A,ba,ca,da,ea,B,C,fa,ga,ha,ia,ja,ka,la,ma,na){function J(a){var c=D(a),b;b=a.data("srcPath")&&new u.default(a.data("srcPath"));var d=a.data("changeType"),h=a.data("nodeType"),e;e=a.data("conflict")&&new oa.default(a.data("conflict"));var m=a.data("executable");a=a.data("srcExecutable");return new pa.default({repository:K.default.getRepository(),commitRange:f,srcPath:b&&b.path,path:c.path,type:d,nodeType:h,line:c.line,search:E,conflict:e,srcExecutable:a,executable:m})}function F(a,b){g||
(g=new L.default(v,"commit-file-content"));b||(b=a.getLine());w=a;e=new u.default(a.getPath(),a.getLine());K.default.setFilePath(a.getPath());v.height(v.height());var d=k.scrollTop();return g.init(a,c.default.extend(r,{anchor:b})).done(function(){l=(0,c.default)("#commit-file-content");if(0!==l.length){l.find(".file-toolbar");l.find(".content-view");var a=d,b=l.offset();d=b?Math.min(a,b.top):a;k.scrollTop(d)}})}function M(){var a=c.default.Deferred();w=e=null;g&&(g.destroy(),g=null);(0,c.default)("#commit-file-content").empty();
return a.resolve()}function D(a){return new u.default(a.data("path"))}function N(){var a=O=k.height();(0,c.default)(".file-tree-container").children(":not(.file-tree-wrapper):visible").each(function(){a-=(0,c.default)(this).outerHeight(!0)});return a}function P(){x=N();y.css({"max-height":x+"px","border-bottom-width":0})}function Q(){G=!0;var a=H();if((Boolean(a)^Boolean(e)||a&&a.path.toString()!==e.path.toString())&&b){if(b.selectFile(a.path.getComponents()),R(),a.line)d.default.once("bitbucket.internal.feature.fileContent.diffViewContentChanged",
function(){d.default.trigger("bitbucket.internal.feature.diffView.lineChange",null,a.line)})}else a.toString()!==e.toString()&&(d.default.trigger("bitbucket.internal.feature.diffView.lineChange",null,a.line),e=a);G=!1}function R(){var a=b.getSelectedFile();a&&0<a.length?F(J(a)):w&&F(w)}function qa(a){n||(n=(0,c.default)('\x3cdiv class\x3d"spinner"/\x3e'));n.appendTo("#content .file-tree-wrapper").spin("large",{zIndex:10});y.siblings(".file-tree-header").replaceWith(bitbucket.internal.feature.fileTreeHeader({commit:r.linkToCommit?
f.getUntilRevision().toJSON():null,repository:ra.default.getRepository()}));return b.init(a).always(function(){n&&(n.spinStop().remove(),n=null)}).done(function(){(0,c.default)(".file-tree");x=N();y.css("max-height",x)})}function H(){return new u.default(decodeURI(window.location.hash.substring(1)))}function S(){function a(){d.default.trigger("bitbucket.internal.feature.commit.difftree.collapseAnimationFinished",null,g)}var b=(0,c.default)(".collapse-file-tree"),e=(0,c.default)(".commit-files"),f=
(0,c.default)(".file-tree-container"),g,k,m=!1,l=function(b){var c=e.hasClass("collapsed");"undefined"===typeof b&&(b=!c);e.toggleClass("collapsed",b).toggleClass("quick-reveal-mode",m);g=e.hasClass("collapsed");g!==c&&(d.default.trigger("bitbucket.internal.feature.commit.difftree.toggleCollapse",null,g),sa.default.cssTransition()||a())};p=function(a){a=m?!1:a;"object"===("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&(a=void 0);m=!1;clearTimeout(k);l(a)};h.push(d.default.chainWith(b).on("click",
T.default.preventDefault(p)));h.push(d.default.chainWith(f).on("mouseleave",function(){clearTimeout(k);m&&(m=!1,p(!0))}).on("transitionend",T.default.filterByTarget(f,a)));h.push(d.default.chainWith(f.children().not(".diff-tree-toolbar")).on("mouseenter",function(){clearTimeout(k);e.hasClass("collapsed")&&(k=setTimeout(function(){m=!0;l(!1)},200))}));h.push(d.default.chainWith(f.find(".diff-tree-toolbar")).on("focus","input",function(){p(!1)}))}function U(){(0,c.default)(".no-changes-placeholder").remove();
var a=e?e:H();return qa(a.path.getComponents()).then(function(b){return(b=b.getSelectedFile())&&b.length?F(J(b),a.line):M().done(function(){(0,c.default)(".commit-files").append((0,c.default)('\x3cdiv class\x3d"message no-changes-placeholder"\x3e\x3c/div\x3e').text("No changes to show"))})})}function V(a){return new ua(".file-tree-wrapper",".diff-tree-toolbar .aui-toolbar2-primary",f,{maxChanges:a.maxChanges,hasOtherParents:1<a.numberOfParents,urlBuilder:a.changesUrlBuilder,
searchUrlBuilder:a.diffUrlBuilder,diffViewType:a.diffViewType})}function W(a,b){G||b||(window.location.hash=a?encodeURI(D(a).toString()):"")}Object.defineProperty(z,"__esModule",{value:!0});var ta=babelHelpers.interopRequireDefault(A),c=babelHelpers.interopRequireDefault(ba),q=babelHelpers.interopRequireDefault(ca),ra=babelHelpers.interopRequireDefault(da);A=babelHelpers.interopRequireDefault(ea);B=babelHelpers.interopRequireDefault(B);var L=babelHelpers.interopRequireDefault(C),oa=babelHelpers.interopRequireDefault(fa),
pa=babelHelpers.interopRequireDefault(ga);C=babelHelpers.interopRequireDefault(ha);var K=babelHelpers.interopRequireDefault(ia),u=babelHelpers.interopRequireDefault(ja),T=babelHelpers.interopRequireDefault(ka),d=babelHelpers.interopRequireDefault(la),sa=babelHelpers.interopRequireDefault(ma),I=babelHelpers.interopRequireDefault(na),ua=A.default.DiffTree,r,f,w,e,E,G=!1,h=[],b,t={},g,k=(0,c.default)(window),X,v,n,O,x,l,Y,y;d.default.on("bitbucket.internal.feature.fileContent.optionsChanged",function(a){q.default.contains(["hideComments",
"hideEdiff","showWhitespaceCharacters"],a.key)||R()});d.default.on("bitbucket.internal.feature.diffView.highlightSearch",function(a){E=a});var p,Z={breadcrumbs:!0,changeTypeLozenge:!0,changeModeLozenge:!0,contentMode:C.default.DIFF,linkToCommit:!1,sourceLink:!0,toolbarWebFragmentLocationPrimary:null,toolbarWebFragmentLocationSecondary:null,diffViewType:B.default.EFFECTIVE};z.default={getSelectedPath:function(){if(!b)return null;var a=b.getSelectedFile();return D(a).toString()},updateCommitRange:function(a){a.getId()!==
f.getId()&&(f=a,b.reset(),Object.prototype.hasOwnProperty.call(t,f.getId())?b=t[f.getId()]:(b=V(r),t[f.getId()]=b),U())},init:function(a,g){r=c.default.extend({},Z,g);(0,c.default)("#footer");X=(0,c.default)("#content");v=X.find(".commit-files");Y=(0,c.default)(".file-tree-container");y=Y.children(".file-tree-wrapper");O=k.height();l=(0,c.default)("#commit-file-content");f=a;b=V(r);t[f.getId()]=b;e=H();k.on("hashchange",Q);U();S();h.push(d.default.chain().on("window.resize",P).on("bitbucket.internal.feature.fileContent.diffViewExpanded",
P).on("bitbucket.internal.feature.commit.difftree.selectedNodeChanged",W));h.push({destroy:I.default.bind("requestToggleDiffTreeHandler",q.default.ary(p,0))});h.push({destroy:I.default.bind("requestMoveToNextHandler",q.default.ary(b.openNextFile.bind(b),0))});h.push({destroy:I.default.bind("requestMoveToPreviousHandler",q.default.ary(b.openPrevFile.bind(b),0))});h.push(d.default.chainWith(b).on("search-focus",q.default.partial(p,!1)))},_initDiffTreeToggle:S,reset:function(){b&&b.reset();b=f=void 0;
t={};E=e=void 0;k.off("hashchange",Q);q.default.invoke(h,"destroy");h=[];return M()},_onSelectedNodeChanged:W,defaults:Z,commentMode:L.default.commentMode};aa.exports=z["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-diff', location = '/static/bitbucket/internal/feature/pull-request/diff/pull-request-diff.js' */
define("bitbucket/internal/feature/pull-request/diff/pull-request-diff","module exports aui chaperone jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/commit/tree-and-diff-view/tree-and-diff-view bitbucket/internal/feature/file-content/commit-selector/commit-selector bitbucket/internal/feature/file-content/diff-view-type bitbucket/internal/feature/file-content/request-change bitbucket/internal/feature/pull-request/pull-request-history/pull-request-history bitbucket/internal/layout/page-scrolling-manager bitbucket/internal/model/commit-range bitbucket/internal/model/diff-type bitbucket/internal/model/file-content-modes bitbucket/internal/model/path-and-line bitbucket/internal/model/revision bitbucket/internal/util/events bitbucket/internal/util/history".split(" "),
function(R,x,q,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ga,ha,ia){Object.defineProperty(x,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(q),B=babelHelpers.interopRequireDefault(S),b=babelHelpers.interopRequireDefault(T),m=babelHelpers.interopRequireDefault(U),y=babelHelpers.interopRequireDefault(V),z=babelHelpers.interopRequireDefault(W),ja=babelHelpers.interopRequireDefault(X),A=babelHelpers.interopRequireDefault(Y),ka=babelHelpers.interopRequireDefault(Z),I=babelHelpers.interopRequireDefault(aa),
la=babelHelpers.interopRequireDefault(ba),C=babelHelpers.interopRequireDefault(ca);q=babelHelpers.interopRequireDefault(da);var ma=babelHelpers.interopRequireDefault(ea),na=babelHelpers.interopRequireDefault(fa),J=babelHelpers.interopRequireDefault(ga),v=babelHelpers.interopRequireDefault(ha),D=babelHelpers.interopRequireDefault(ia),F=q.default.EFFECTIVE,K=q.default.COMMIT,oa=q.default.RANGE,n=[],E=null,G=void 0,H=function(){null!==E&&(E.destroy(),E=null)},k=function(a){return y.default.project(a.getToRef().getRepository().getProject()).repo(a.getToRef().getRepository()).pullRequest(a)},
w=function(a){return y.default.rest().project(a.getToRef().getRepository().getProject()).repo(a.getToRef().getRepository()).pullRequest(a)},pa=function(a){return function(d){var f=d.commitRange;return w(a).diff(d).withParams({diffType:f.diffType,sinceId:f.sinceRevision.id,untilId:f.untilRevision.id})}},L=function(a){var d=a.commit,f=a.since;return k(a.pullRequest).commit(d).since(f)},qa=function(a){return function(d){return w(a).diff(d)}},sa=function(a){var d=a.commit,f=a.commitRange,p=a.pullRequest,
b=a.lastReviewedCommit,c=a.unreviewedCommits;a=a.includesMerge;var l=[{href:k(p).diff().build(),icon:bitbucket.internal.feature.fileContent.allCommitsIcon(),messageHtml:h.default.escapeHtml("All changes in this pull request"),selected:!d&&!f}];b&&(c?(!a&&ra(),l.push({commitRange:{sinceRevision:{id:b},untilRevision:{id:p.getFromRef().getLatestCommit()}},href:L({pullRequest:p,commit:p.getFromRef().getLatestCommit(),since:b}).build(),icon:bitbucket.internal.feature.fileContent.singleCommitIcon(),
messageHtml:bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits({unreviewedCommits:c,includesMerge:a}),size:a?"large":"small",selected:!d&&f&&f.getSinceRevision().getId()===b&&f.getUntilRevision().getId()===p.getFromRef().getLatestCommit()})):b===p.getFromRef().getLatestCommit()&&l.push({disabled:!0,href:"",messageHtml:h.default.escapeHtml("No unreviewed changes"),selected:!1}));return l},ta=function(a){return m.default.find(a,function(a){return a.selected})},
ua=function(a,d,b,h,n){var c=d&&d.getDiffType()||a&&K||F,l=w(b).comments(),k=void 0,m=void 0,r=void 0,t=void 0;c===F?(k=qa(b),m="bitbucket.pull-request.diff.toolbar.primary",r="bitbucket.pull-request.diff.toolbar.secondary",t=A.default.EFFECTIVE):(k=pa(b),m="bitbucket.pull-request.commit.diff.toolbar.primary",r="bitbucket.pull-request.commit.diff.toolbar.secondary",t=A.default.COMMON_ANCESTOR,l=c===oa?l.range(d.getSinceRevision().getId(),d.getUntilRevision().getId()):l.commit(a));return{changesUrlBuilder:function(a,
c,b){return y.default.rest().currentRepo().changes(b).withParams({start:a,limit:c})},commentMode:z.default.commentMode.CREATE_NEW,commentUrlBuilder:function(){return l},diffUrlBuilder:k,linkToCommit:Boolean(a),maxChanges:h,relevantContextLines:n,toolbarWebFragmentLocationPrimary:m,toolbarWebFragmentLocationSecondary:r,diffViewType:t}},ra=m.default.once(function(){B.default.registerFeature("iterative-review",[{id:"iterative-review",alignment:"right top",selector:".file-tree-container .commit-selector-button",
title:"Review faster than ever",content:"Now you can easily review the changes added to the pull request since you last marked it as Needs work or Approved. You can always view the full diff by selecting \u0022All changes in this pull request\u0022.",width:370,close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},once:!0}])}),va=m.default.once(function(){B.default.registerFeature("commit-level-review",
[{id:"commit-level-review",alignment:"right top",selector:".file-tree-container .commit-selector-button",content:bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent(),width:300,close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},once:!0}])});(0,b.default)(document).on("click",".file-tree a",function(a){a=
{index:this.id.match(/\d+/),keyboard:!(a.originalEvent instanceof MouseEvent)};v.default.trigger("bitbucket.internal.feature.pullRequest.diff.fileChange",null,a)});x.default={init:function(a){var d=this,f=a.commit,p=a.commitRange,q=a.currentUser,c=a.pullRequest,l=a.maxChanges,x=a.relevantContextLines,y=a.seenCommitReview,r=void 0,t=!1,u=c.getReviewers().findByUser(q)&&c.getReviewers().findByUser(q).getLastReviewedCommit(),w=function(a){return a&&(a.getSinceRevision().getId()!==u||a.getUntilRevision().getId()!==
c.getFromRef().getLatestCommit())},B=function(a,e,g){var M=sa({commit:a,commitRange:e,pullRequest:c,lastReviewedCommit:u,unreviewedCommits:r,includesMerge:g});u&&r&&(E=v.default.chainWith(c.getReviewers().findByUser(q)).on("change:lastReviewedCommit",function(a,wa){r=!1;u=wa;d.commitSelector.resetDialog();w(e)&&!(0,b.default)(".arbitrary-diff-button").length&&N(e);H()}));var f=u!==c.getFromRef().getLatestCommit();d.commitSelector.resetDialog();d.commitSelector.init({commitRange:e,updateButton:!0,
selectedCommit:a,selectedItem:ta(M),itemTemplate:function(a){return bitbucket.internal.feature.fileContent.commitSelectorItemMessage(babelHelpers.extends({},a,{beforeContent:f&&a.commit.id===u?bitbucket.internal.feature.pullRequest.lastReviewedMarker():null}))},itemExtraClasses:function(a){return f&&a.hasOwnProperty("id")&&a.id===u?["last-reviewed-commit"]:a.commitRange?["unreviewed-commits-item"]:[]},itemUrl:function(a){return k(c).commit(a.id).build()},lastPageMessage:"No more commits",
mode:ma.default.DIFF,path:new na.default(decodeURI(window.location.hash.substring(1))),preloadItems:M,pullRequest:c,includesMerge:g})},A=function(a,e){var g;g=a?new C.default({pullRequest:c,sinceRevision:a.parents?new J.default(a.parents[0]):void 0,untilRevision:new J.default(a),diffType:K}):e?new C.default({pullRequest:c,sinceRevision:e.getSinceRevision(),untilRevision:e.getUntilRevision()}):new C.default({pullRequest:c,diffType:F});(0,b.default)('.menu-item[data-module-key\x3d"bitbucket.pull-request.nav.diff"] \x3e a').attr("href",
location.href);H();a?v.default.trigger("bitbucket.internal.feature.pullRequest.commitDiff.view",null,{commitJSON:a}):e?v.default.trigger("bitbucket.internal.feature.pullRequest.iterativeDiff.view",null,{commitRangeJSON:e.toJSON()}):v.default.trigger("bitbucket.internal.feature.pullRequest.effectiveDiff.view",null,{});z.default.reset();z.default.init(g,ua(a,e,c,l,x));w(e)?N(e):B(a,e,t);y||va()},N=function(a){var e=(0,b.default)(bitbucket.internal.feature.pullRequest.arbitraryDiffButton({sinceCommit:a.getSinceRevision().getId(),
untilCommit:a.getUntilRevision().getId()})),g=(0,b.default)(".file-tree-container .commit-selector-button");g.after(e);g.hide();e.children(".close-dialog").on("click",function(){e.remove();g.show();D.default.pushState({},null,k(c).unreviewed().build())})},P=function(){var a=(0,b.default)(".file-tree-container .commit-selector-button"),e=(0,b.default)(".file-tree-header");a.hide();e.hide();var g=(0,b.default)(".file-tree-wrapper");g.spin("large",{zIndex:10,top:0});var d=function(){g&&g.spinStop();
g=null};n.push({destroy:d});G=ka.default.getUnreviewedChangesRequest({pullRequest:c.toJSON(),start:0,limit:l}).done(function(b){d();a.show();e.show();var g=void 0;b.properties&&(b.properties.unreviewedCommits&&(r=b.properties.unreviewedCommits,g={sinceRevision:{id:b.fromHash},untilRevision:{id:b.toHash}}),t=b.properties.includesMerge);0===location.pathname.indexOf(k(c).unreviewed().build())?O({action:D.default.replaceState,commitRangeJSON:t?null:g,pullRequest:c}):A(f,p)})},O=function(a){var e=a.action,
b=a.commitJSON,c=a.commitRangeJSON,d=a.pullRequest,e=e||D.default.pushState;a=encodeURI(z.default.getSelectedPath()||"");b?(c=k(d).commit(b.id),e({commit:b},null,c.withFragment(a).build())):c?e({commitRange:c},null,L({pullRequest:d,commit:c.untilRevision.id,since:c.sinceRevision.id}).withFragment(a).build()):e({},null,k(d).diff().withFragment(a).build())},Q=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=d.commitSelector.getSelectedCommit();if(c){var f=m.default.get(c,
"properties",{}),b=m.default.get(f,"commentCount",b),f={properties:babelHelpers.extends({},f,{commentCount:b+a})};d.commitSelector.refreshCommit(c.id,f)}};n.push(v.default.chain().on("bitbucket.internal.feature.commitselector.itemSelected",O).on("bitbucket.internal.history.changestate",function(a){0===location.pathname.indexOf(k(c).unreviewed().build())?P():a.state&&A(a.state.commit,a.state.commitRange&&new C.default(a.state.commitRange))}).on("bitbucket.internal.keyboard.shortcuts.pullrequest.addCommentHandler",
function(a){(this.execute?this:h.default.whenIType(a)).execute(function(){(0,b.default)(".add-file-comment-trigger:first").click()})}).on("bitbucket.internal.feature.comments.commentAdded",function(){return Q(1)}).on("bitbucket.internal.feature.comments.commentDeleted",function(){return Q(-1,1)}));this.commitSelector=new ja.default({buttonEl:".file-tree-container .commit-selector-button",id:"commit-selector"});I.default.init();n.push(this.commitSelector);n.push({destroy:function(){return I.default.reset()}});
n.push({destroy:function(){return z.default.reset()}});n.push({destroy:la.default.acceptScrollForwardingRequests()});D.default.initialState({commit:f,commitRange:p&&p.toJSON()});P()},reset:function(){G&&G.abort();H();var a=b.default.when.apply(b.default,babelHelpers.toConsumableArray(m.default.invoke(n,"destroy")));n=[];return a}};R.exports=x["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-diff', location = '/static/bitbucket/internal/feature/pull-request/diff/pull-request-diff.soy' */
// This file was automatically generated from pull-request-diff.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.diff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.feature.treeAndDiffView({commit: opt_data.commit, repository: opt_data.repository, extraClasses: 'tabbed', showCommitSelector: true});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.diff.soyTemplateName = 'bitbucket.internal.feature.pullRequest.diff';
}


bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent = function(opt_data, opt_ignored) {
  return '<div class="feature-discovery-commit-level-review"><h2>' + soy.$$escapeHtml('Break down big reviews') + '</h2><p>' + soy.$$escapeHtml('We have made it easier to review pull requests with new diff views.') + '</p><h4>' + bitbucket.internal.images.icons.allCommits(null) + soy.$$escapeHtml('All changes') + '</h4><p>' + soy.$$escapeHtml('Same as before. View the diff for all the changes in this pull request.') + '</p><h4>' + bitbucket.internal.images.icons.commit(null) + soy.$$escapeHtml('Single commit') + '</h4><p>' + soy.$$escapeHtml('Now you can also view the changes of a single commit.') + '</p></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commitLevelReviewFeatureDiscoveryContent';
}


bitbucket.internal.feature.pullRequest.arbitraryDiffButton = function(opt_data, opt_ignored) {
  return '<div class="aui-button commit-selector-button arbitrary-diff-button">' + bitbucket.internal.feature.fileContent.singleCommitIcon(null) + '<div class="arbitrary-diff-button-content"><div class="arbitrary-diff-button-commit-range">' + soy.$$escapeHtml((opt_data.sinceCommit).substring(0, 11)) + '..' + soy.$$escapeHtml((opt_data.untilCommit).substring(0, 11)) + '</div><div class="arbitrary-diff-button-message">' + soy.$$escapeHtml('You are viewing a custom diff') + '</div></div><button class="aui-button aui-button-link close-dialog">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'close-dialog'}) + '</button></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.arbitraryDiffButton.soyTemplateName = 'bitbucket.internal.feature.pullRequest.arbitraryDiffButton';
}


bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits = function(opt_data, opt_ignored) {
  return '<div class="commit-selector-item-content"><div class="commit-selector-item-content-message">' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#commit|1\x3ccommits} since you last reviewed',opt_data.unreviewedCommits)) + '</div>' + ((opt_data.includesMerge) ? '<div class="commit-selector-item-content-warning"><span class="aui-icon aui-icon-small aui-iconfont-info"></span>' + soy.$$escapeHtml('May contain unrelated changes from a merge') + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits.soyTemplateName = 'bitbucket.internal.feature.pullRequest.commitSelectorUnreviewedCommits';
}


bitbucket.internal.feature.pullRequest.lastReviewedMarker = function(opt_data, opt_ignored) {
  return '<div class="last-reviewed-commit-marker"><span class="aui-icon aui-icon-small aui-iconfont-arrow-up"/><span class="text">' + soy.$$escapeHtml('UNREVIEWED') + '</span><span class="aui-icon aui-icon-small aui-iconfont-arrow-up"/></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.lastReviewedMarker.soyTemplateName = 'bitbucket.internal.feature.pullRequest.lastReviewedMarker';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-layout', location = '/static/bitbucket/internal/layout/pull-request/pull-request.js' */
define("bitbucket/internal/layout/pull-request/pull-request","module exports aui chaperone jquery lodash react react-dom react-redux bitbucket/util/events bitbucket/util/navbuilder bitbucket/internal/bbui/actions/pull-request bitbucket/internal/enums bitbucket/internal/feature/file-content/request-change bitbucket/internal/feature/pull-request/header/pull-request-header-view bitbucket/internal/feature/pull-request/pull-request-analytics/pull-request-analytics bitbucket/internal/feature/pull-request/store/pull-request-store bitbucket/internal/model/commit-range bitbucket/internal/model/page-state bitbucket/internal/model/participant bitbucket/internal/model/pull-request bitbucket/internal/model/revision bitbucket/internal/util/dom-event bitbucket/internal/util/events bitbucket/internal/util/feature-loader bitbucket/internal/util/history bitbucket/internal/util/horizontal-keyboard-scrolling".split(" "),
function(z,p,q,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X){function Y(){b.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){a.enableContext("pull-request");u.resolve(a)});b.default.on("bitbucket.internal.keyboard.shortcuts.requestGotoPullRequestsListHandler",function(a){(this.execute?this:f.default.whenIType(a)).execute(function(){window.location.href=Z.default.currentRepo().allPullRequests().build()})});b.default.on("bitbucket.internal.keyboard.shortcuts.requestChangePullRequestSectionHandler",
function(a){(this.execute?this:f.default.whenIType(a)).execute(function(a){a=parseInt(String.fromCharCode(a.which),10);m.children().eq(a-1).children("a").click()})})}function aa(){var a=function(a,e){a.addClass("active-tab").siblings().removeClass("active-tab");if(e){var k=a.data("module-key").split(".").pop();b.default.trigger("bitbucket.internal.feature.pullRequest.tab."+k,null,{keyboard:!(e.originalEvent instanceof MouseEvent)})}},l=function(a){var e=a.commitJSON;a=a.commitRangeJSON;c.default.setCommit(e?
new ba.default(e):null);c.default.setCommitRange(!e&&a?new ca.default(a):null)};m.on("click","a",function(c){if(da.default.openInSameTab(c)){var e=(0,g.default)(this),k=e.parent();k.is(".active-tab")||(a(k),b.default.trigger("bitbucket.internal.layout.pull-request.urlRequested",null,e.prop("href")));c.preventDefault()}});b.default.on("bitbucket.internal.page.pull-request.view.contextLoaded",function(b){a(m.find('[data-module-key\x3d"'+b.name+'"]'));b.name===h.diff?v.default.resume():v.default.pause()});
b.default.on("bitbucket.internal.feature.pullRequest.commit.open",l);b.default.on("bitbucket.internal.feature.pullRequest.*.view",l);u.done(function(a){r.default.each(m.children(),function(b,k){var c=(0,g.default)(b),l=String(k+1),d=f.default.format("Switch to the {0} tab",c.text());a.addCustomShortcut("pull-request",[[l]],d);c.attr("title",(c.attr("title")||d)+f.default.format(" (type \u0027\u0027{0}\u0027\u0027)",l))})})}function ea(a,c,f){function e(a,
b){var c=r.default.findKey(h,r.default.matches(b));c&&fa.default.trigger("bitbucket.internal.browser-metrics.pull-request."+c+"."+a)}d.registerHandler(h.diff,/^[^\?\#]*pull-requests\/\d+\/(diff|commits\/\b[0-9a-fA-F]{5,40}\b|unreviewed)/,"bitbucket/internal/page/pull-request/view/pull-request-view-diff");d.registerHandler(h.overview,/^[^\?\#]*pull-requests\/\d+\/overview/,"bitbucket/internal/page/pull-request/view/pull-request-view-overview");d.registerHandler(h.commits,/^[^\?\#]*pull-requests\/\d+\/commits(\/?)($|[#?])/,
"bitbucket/internal/page/pull-request/view/pull-request-view-commits");d.setContext({store:f});b.default.on("bitbucket.internal.page.pull-request.view.contextRequested",e.bind(null,"start"));b.default.on("bitbucket.internal.page.pull-request.view.contextLoaded",function(a){e("end",a.name)});b.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",function(a){d.setKeyboardShortcuts(a);a.enableContext("pull-request")});b.default.on("bitbucket.internal.layout.pull-request.urlRequested",
function(a){a!==window.location.href&&w.default.pushState(null,"",a)});b.default.on("bitbucket.internal.util.feature-loader.errorOccurred",function(a){a.code===x.default.NO_HANDLER?console.log("You did not register a handler for this page. Please call\nrequire('bitbucket/internal/layout/pull-request').registerHandler(\n   'tab-web-item-module-key',\n   /^[^\\?\\#]*url-regex/,\n   {\n       load : function (contentElement) {},\n       unload : function (contentElement) {}\n   }\n)"):console.log(a.message)});
c.done(function(c){d.init((0,g.default)(a).get(0))})}Object.defineProperty(p,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(q),t=babelHelpers.interopRequireDefault(A),g=babelHelpers.interopRequireDefault(B),r=babelHelpers.interopRequireDefault(C),y=babelHelpers.interopRequireDefault(D),ga=babelHelpers.interopRequireDefault(E),fa=babelHelpers.interopRequireDefault(G),Z=babelHelpers.interopRequireDefault(H),n=babelHelpers.interopRequireDefault(J),ha=babelHelpers.interopRequireDefault(K),
ia=babelHelpers.interopRequireDefault(L),ja=babelHelpers.interopRequireDefault(M),ka=babelHelpers.interopRequireDefault(N),ca=babelHelpers.interopRequireDefault(O),c=babelHelpers.interopRequireDefault(P),la=babelHelpers.interopRequireDefault(Q),ma=babelHelpers.interopRequireDefault(R),ba=babelHelpers.interopRequireDefault(S),da=babelHelpers.interopRequireDefault(T),b=babelHelpers.interopRequireDefault(U),x=babelHelpers.interopRequireDefault(V),w=babelHelpers.interopRequireDefault(W),v=babelHelpers.interopRequireDefault(X),
h={diff:"bitbucket.pull-request.nav.diff",overview:"bitbucket.pull-request.nav.overview",commits:"bitbucket.pull-request.nav.commits"},m,u=g.default.Deferred(),d=new x.default({loadedEvent:"bitbucket.internal.page.pull-request.view.contextLoaded",unloadedEvent:"bitbucket.internal.page.pull-request.page.pull-request.view.contextUnloaded",requestedEvent:"bitbucket.internal.page.pull-request.view.contextRequested"});q=g.default.proxy(d.registerHandler,d);p.default={registerHandler:q,onReady:function(a){c.default.setPullRequest(new ma.default(a.pullRequestJSON));
c.default.extend("pullRequestViewInternal",function(){return{commitsTableWebSections:a.commitsTableWebSections,maxChanges:a.maxChanges,relevantContextLines:a.relevantContextLines,seenCommitReview:a.seenCommitReview}});c.default.extend("isWatching");a.commitJSON&&w.default.replaceState({commitRange:a.sinceCommitId&&{sinceRevision:{id:a.sinceCommitId},untilRevision:a.commitJSON},commit:!a.sinceCommitId&&a.commitJSON},null);var d=(0,ka.default)();d.dispatch({type:"PR_SET_PULL_REQUEST",payload:a.pullRequestJSON});
d.dispatch({type:"SET_CURRENT_USER",payload:c.default.getCurrentUser().toJSON()});ga.default.render(y.default.createElement(F.Provider,{store:d},y.default.createElement(ia.default,{canDelete:a.canDelete,hasRepoWrite:a.hasRepoWrite,hasSourceRepoRead:a.hasSourceRepoRead,mergeTimeout:a.mergeTimeout})),document.getElementById("pull-request-header"));m=(0,g.default)(".content-body .aui-page-panel-content \x3e .aui-tabs \x3e .tabs-menu");var h=g.default.Deferred();_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-web:iswatching-provider",
"bitbucket.internal.pull-request.view",function(a){d.dispatch({type:I.PR_SET_IS_WATCHING,payload:a.isWatching});c.default.setIsWatching(a.isWatching);h.resolve()});!0!==a.seenNeedsWork&&(t.default.registerFeature("reviewer-status",[{id:"reviewer-status",alignment:"top right",selector:".reviewing.reviewer-status-selector",content:bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatus(),close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',
text:"Learn more",extraAttributes:{target:"_blank"}},once:!0}]),b.default.on("bitbucket.internal.feature.pullRequest.self.added",t.default.checkFeatureVisibility));(0,g.default)(document).on("click","button.needs-work",function(){t.default.registerFeature("needs-work-click",[{id:"needs-work-click",selector:"button.needs-work",alignment:"bottom center",title:"Marked as needs work",
content:bitbucket.internal.feature.pullRequest.feature.discovery.reviewerStatusClick(),close:{text:"Ok, got it"},moreInfo:{href:'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Using+pull+requests+in+Bitbucket+Server?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash',text:"Learn more",extraAttributes:{target:"_blank"}},width:340,once:!0}])});b.default.on("bitbucket.internal.feature.pullRequest.self.added",function(){c.default.getPullRequest().getReviewers().add(new la.default({user:c.default.getCurrentUser(),
role:n.default.ParticipantRole.REVIEWER,status:n.default.ApprovalStatus.UNAPPROVED}))});b.default.on("bitbucket.internal.feature.pullRequest.self.removed",function(){var a=c.default.getPullRequest().getReviewers();a.remove(a.findByUser(c.default.getCurrentUser()))});var e=function(a){if(a.newStatus===n.default.ApprovalStatus.NEEDS_WORK||a.newStatus===n.default.ApprovalStatus.APPROVED){ha.default.reset();a=c.default.getPullRequest();var b=c.default.getCurrentUser();a.getReviewers().findByUser(b).setLastReviewedCommit(a.getFromRef().getLatestCommit())}};
b.default.chain().on("bitbucket.internal.widget.approve-button.added",e).on("bitbucket.internal.widget.approve-button.removed",e).on("bitbucket.internal.widget.needs-work.added",e);ja.default.init();Y();aa();ea(a.contentSelector,h,d)}};z.exports=p["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-merge-conflict-soy', location = '/static/bitbucket/internal/feature/pull-request/merge-conflict/merge-conflict.soy' */
// This file was automatically generated from merge-conflict.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.pullRequest.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.pullRequest == 'undefined') { bitbucket.internal.feature.pullRequest = {}; }


bitbucket.internal.feature.pullRequest.mergeWarningBanner = function(opt_data, opt_ignored) {
  return '' + ((opt_data.outcome == 'CONFLICTED') ? aui.message.warning({extraClasses: 'merge-conflicted-message' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : ''), extraAttributes: {'data-outcome': opt_data.outcome}, titleContent: '' + soy.$$escapeHtml('This pull request can\x27t be merged.'), content: '' + soy.$$filterNoAutoescape(AJS.format('You will need to resolve conflicts to be able to merge. {0}More information{1}.','<a href="#" class="manual-merge">','</a>'))}) : (opt_data.outcome == 'UNKNOWN') ? aui.message.info({extraClasses: 'merge-conflicted-message' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : ''), extraAttributes: {'data-outcome': opt_data.outcome}, titleContent: '' + soy.$$escapeHtml('Bitbucket Server could not create the merge diff for this pull request'), content: '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('To resolve this warning you could try to push a new commit to update the pull request, attempt to merge the pull request anyway, or ask a system administrator to review the logs. \x3ca href\x3d\x22{0}\x22\x3eRead more about this warning.\x3c/a\x3e',typeof ('https:\/\/confluence.atlassian.com\/display\/BITBUCKETSERVERKB\/Bitbucket+Server+is+unable+to+create+the+merge+diff+for+pull+requests?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') === 'number' ? 'https:\/\/confluence.atlassian.com\/display\/BITBUCKETSERVERKB\/Bitbucket+Server+is+unable+to+create+the+merge+diff+for+pull+requests?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' : soy.$$escapeHtml('https:\/\/confluence.atlassian.com\/display\/BITBUCKETSERVERKB\/Bitbucket+Server+is+unable+to+create+the+merge+diff+for+pull+requests?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash'))))}) : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.pullRequest.mergeWarningBanner.soyTemplateName = 'bitbucket.internal.feature.pullRequest.mergeWarningBanner';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-can-merge', location = '/static/bitbucket/internal/feature/pull-request/can-merge/can-merge.js' */
define("bitbucket/internal/feature/pull-request/can-merge/can-merge",["module","exports","bitbucket/internal/util/events"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(c);a.default=function(){d.default.trigger("bitbucket.internal.feature.pull-request.merge-check")};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-commit', location = '/static/bitbucket/internal/feature/commit/request-commit.js' */
define("bitbucket/internal/feature/commit/request-commit",["module","exports","bitbucket/util/navbuilder","bitbucket/util/state","bitbucket/internal/util/ajax"],function(e,b,m,n,p){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var c=a.commitId,b=a.project,h=a.repo;a=a.statusCode;var e=void 0===a?{}:a;if(d.hasOwnProperty(c))return d[c];var f=void 0;if(b&&h)f=k.default.rest().project(b).repo(h).commit(c).build();else if(q.default.getRepository())f=k.default.rest().currentRepo().commit(c).build();
else return Promise.reject(Error("Repository required"));d[c]=new Promise(function(a,b){l.default.rest({url:f,statusCode:babelHelpers.extends({},l.default.ignore404WithinRepository(),e)}).done(a).fail(function(a,e,f,g){delete d[c];b(g&&g.errors&&g.errors.length?Error(g.errors[0].message):Error("Commit request failed"))})});return d[c]};var k=babelHelpers.interopRequireDefault(m),q=babelHelpers.interopRequireDefault(n),l=babelHelpers.interopRequireDefault(p),d={};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view-commits.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view-commits",["module","exports","jquery","bitbucket/internal/feature/pull-request/commits/pull-request-commits","bitbucket/internal/model/page-state"],function(d,a,e,f,g){Object.defineProperty(a,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(e),c=babelHelpers.interopRequireDefault(f),b=babelHelpers.interopRequireDefault(g);a.default={load:function(a){return c.default.init({el:a,commitsTableWebSections:b.default.getPullRequestViewInternal().commitsTableWebSections,
pullRequest:b.default.getPullRequest(),repository:b.default.getRepository()})},unload:function(a){c.default.reset();(0,h.default)(a).empty()},keyboardShortcutContexts:["commits"]};d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view-diff.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view-diff","module exports jquery bitbucket/util/navbuilder bitbucket/util/state bitbucket/internal/feature/commit/request-commit bitbucket/internal/feature/pull-request/diff/pull-request-diff bitbucket/internal/model/commit-range bitbucket/internal/model/page-state bitbucket/internal/model/revision bitbucket/internal/util/history".split(" "),function(q,h,r,t,u,v,w,x,y,z,A){Object.defineProperty(h,"__esModule",{value:!0});var B=babelHelpers.interopRequireDefault(r),
b=babelHelpers.interopRequireDefault(t),k=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),n=babelHelpers.interopRequireDefault(w),D=babelHelpers.interopRequireDefault(x),a=babelHelpers.interopRequireDefault(y),E=babelHelpers.interopRequireDefault(z),F=babelHelpers.interopRequireDefault(A),f=void 0,g=void 0,G=function(d){return b.default.currentRepo().pullRequest(a.default.getPullRequest()).commit(d.id).buildAbsolute()},H=function(d){return b.default.currentRepo().pullRequest(a.default.getPullRequest()).commit(d.untilRevision.id).since(d.sinceRevision.id).buildAbsolute()},
l=function(d,c,b){a.default.setCommit(c&&new E.default(c));a.default.setCommitRange(b&&new D.default(b));d.innerHTML=bitbucket.internal.feature.pullRequest.diff({commit:k.default.getCommit(),repository:k.default.getRepository()});n.default.init({commit:k.default.getCommit(),commitRange:a.default.getCommitRange(),currentUser:a.default.getCurrentUser(),pullRequest:a.default.getPullRequest(),maxChanges:a.default.getPullRequestViewInternal().maxChanges,relevantContextLines:a.default.getPullRequestViewInternal().relevantContextLines,
seenCommitReview:a.default.getPullRequestViewInternal().seenCommitReview})},p=function(){return 0===location.href.indexOf(b.default.currentPullRequest().commit("").buildAbsolute()+"/")&&!b.default.parse(location.href).getQueryParamValue("since")},m=function(){return 0===location.href.indexOf(b.default.currentPullRequest().commit("").buildAbsolute()+"/")&&b.default.parse(location.href).getQueryParamValue("since")},I=function(){var a=b.default.parse(location.href).getQueryParamValue("since"),c=b.default.parse(location.href).path().split("/").pop();
return c&&a&&{untilRevision:{id:c},sinceRevision:{id:a}}};h.default={load:function(a){var c=F.default.state()||{},e=c.commit,c=c.commitRange;if(p())return e=p()&&f&&0===location.href.indexOf(G(f))&&f||e,(e?Promise.resolve(e):(0,C.default)({commitId:b.default.parse(location.href).path().split("/").pop()})).then(function(b){l(a,b,null)});if(m())return e=m()&&g&&0===location.href.indexOf(H(g))&&g||c&&c||m()&&I(),l(a,null,e);l(a,null,null)},unload:function(b){f=a.default.getCommit()&&a.default.getCommit().toJSON()||
f;a.default.setCommit(null);g=a.default.getCommitRange()&&a.default.getCommitRange().toJSON()||g;a.default.setCommitRange(null);return n.default.reset().done(function(){(0,B.default)(b).empty()})},keyboardShortcutContexts:["diff-tree","diff-view"]};q.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view-overview.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view-overview","module exports jquery lib/jsuri lodash bitbucket/internal/feature/comments/comment-tips bitbucket/internal/feature/pull-request/activity/pull-request-activity bitbucket/internal/model/page-state bitbucket/internal/util/events bitbucket/internal/util/scroll bitbucket/internal/util/syntax-highlight".split(" "),function(w,l,x,y,z,A,B,C,D,E,F){function n(b,a){if(c){if(c.data("outcome")===a)return;c.remove()}c=(0,e.default)(bitbucket.internal.feature.pullRequest.mergeWarningBanner({outcome:a,
extraClasses:"transparent"})).prependTo(b);a===m.CONFLICTED&&c.find(".manual-merge").click(function(a){a.preventDefault();k.default.trigger("bitbucket.internal.pull-request.show.cant.merge.help")});setTimeout(function(){return c.removeClass("transparent")},0)}function p(b,a,d){if(f instanceof q.default){f.reset();f=null;var c=(0,e.default)(bitbucket.internal.feature.pullRequest.activity({id:"pull-request-activity",currentUser:g.default.getCurrentUser()&&g.default.getCurrentUser().toJSON(),commentTips:r.default.tips})).find(".pull-request-activity");
t().replaceWith(c)}f=new q.default(t(),b,a,d,{scrollableElement:window});f.init()}function t(){return(0,e.default)(h).find(".pull-request-activity")}function u(){var b=v();if(b.id&&b.type){var a;var d=b.type,c=b.id;a=(0,e.default)(h);d=a.find(d===G.COMMENT?'.comment[data-id\x3d"'+c+'"]':'.activity-item[data-activityid\x3d"'+c+'"]');d.length?(a.find(".comment.focused, .activity-item.focused").removeClass("focused"),d.addClass("focused"),H.default.scrollTo(d),a=!0):a=!1;a||p(g.default.getPullRequest(),
b.type,b.id)}}function v(){var b=new I.default(window.location);return{type:b.getQueryParamValue("commentId")?"comment":"activity",id:b.getQueryParamValue("commentId")||b.getQueryParamValue("activityId")}}Object.defineProperty(l,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(x),I=babelHelpers.interopRequireDefault(y),J=babelHelpers.interopRequireDefault(z),r=babelHelpers.interopRequireDefault(A),q=babelHelpers.interopRequireDefault(B),g=babelHelpers.interopRequireDefault(C),k=babelHelpers.interopRequireDefault(D),
H=babelHelpers.interopRequireDefault(E),K=babelHelpers.interopRequireDefault(F),h,f,c,G={COMMENT:"comment",ACTIVITY:"activity"},m={CLEAN:"CLEAN",CONFLICTED:"CONFLICTED",UNKNOWN:"UNKNOWN"};k.default.on("bitbucket.internal.pull-request.*.merge",function(b,a,d,f,e){e===m.CLEAN?c&&(c.remove(),c=null):n(h,e)});l.default={load:function(b){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};h=b;var d=g.default.getPullRequest();b.innerHTML=bitbucket.internal.feature.pullRequest.viewOverview({pullRequest:d.toJSON(),
author:d.getAuthor().getUser().toJSON(),createdDate:d.getCreatedDate(),description:d.getDescription(),descriptionAsHtml:d.getDescriptionAsHtml(),currentUser:g.default.getCurrentUser()&&g.default.getCurrentUser().toJSON(),commentTips:r.default.tips});K.default.container((0,e.default)(b));a.store&&(a=a.store.getState(),a=J.default.get(a,"pullRequest.mergeable.outcome",null),a===m.CONFLICTED&&n(b,a));c&&(c.addClass("transparent").prependTo(b),setTimeout(function(){return c.removeClass("transparent")},
0));a=v();p(d,a.type,a.id);k.default.on("bitbucket.internal.history.changestate",u)},_internalActivity:function(){return f},unload:function(b){f.reset();f=null;(0,e.default)(b).empty();h=null;k.default.off("bitbucket.internal.history.changestate",u)},keyboardShortcutContexts:["pull-request-overview"]};w.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:pull-request-view-page', location = '/static/bitbucket/internal/page/pull-request/view/pull-request-view.js' */
define("bitbucket/internal/page/pull-request/view/pull-request-view","module exports aui aui/flag bitbucket/internal/layout/pull-request/pull-request bitbucket/internal/model/page-state".split(" "),function(d,a,b,e,f,g){Object.defineProperty(a,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(b),h=babelHelpers.interopRequireDefault(e);b=babelHelpers.interopRequireDefault(f);var k=babelHelpers.interopRequireDefault(g);a.default={registerHandler:b.default.registerHandler,onReady:function(a){a&&
(0,h.default)({type:"success",title:c.default.format("Stopped watching pull request #{0}",k.default.getPullRequest().getId()),close:"auto",body:"Notifications for this pull request will no longer be sent to you."})}};d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:atlassian-regexp', location = '/static/bower/atlassian-regexp/lib/internal/util/regexp.js' */
define("internal/util/regexp",["exports"],function(a){a.escape=function(a){return a.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$\x26")}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:atlassian-highlight-text', location = '/static/bower/atlassian-highlight-text/lib/internal/util/highlight-text.js' */
define("internal/util/highlight-text",["internal/util/regexp"],function(g){var d=/[&"'<>`]/g,e=function(b){var a={"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;","'":"\x26#39;","`":"\x26#96;"};return a.hasOwnProperty(b)?a[b]:"\x26quot;"},f=function(b){return g.escape(b.replace(d,e))};return{highlight:function(b,a,c){if(!a||0===a.length)return b.replace(d,e);a="string"===typeof a?f(a):a.map(f).join("|");c=new RegExp(a,null==c?"gi":c);return b.replace(d,e).replace(c,"\x3cmark\x3e$\x26\x3c/mark\x3e")}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:highlight-text-util', location = '/static/bitbucket/internal/util/highlight-text.js' */
define("bitbucket/internal/util/highlight-text",["module","exports","internal/util/highlight-text"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);a.default=b.default;c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-emoticons:caret-js', location = '/static/bower_components/Caret.js/dist/jquery.caret.js' */
(function(){(function(a){if(typeof define==="function"&&define.amd){return define(["jquery"],a)}else{return a(window.jQuery)}})(function(f){var j,l,a,i,e,d,g,k,b,h,c;h="caret";j=(function(){function m(n){this.$inputor=n;this.domInputor=this.$inputor[0]}m.prototype.setPos=function(n){return this.domInputor};m.prototype.getIEPosition=function(){return this.getPosition()};m.prototype.getPosition=function(){var n,o;o=this.getOffset();n=this.$inputor.offset();o.left-=n.left;o.top-=n.top;return o};m.prototype.getOldIEPos=function(){var o,n;n=g.selection.createRange();o=g.body.createTextRange();o.moveToElementText(this.domInputor);o.setEndPoint("EndToEnd",n);return o.text.length};m.prototype.getPos=function(){var n,p,o;if(o=this.range()){n=o.cloneRange();n.selectNodeContents(this.domInputor);n.setEnd(o.endContainer,o.endOffset);p=n.toString().length;n.detach();return p}else{if(g.selection){return this.getOldIEPos()}}};m.prototype.getOldIEOffset=function(){var n,o;n=g.selection.createRange().duplicate();n.moveStart("character",-1);o=n.getBoundingClientRect();return{height:o.bottom-o.top,left:o.left,top:o.top}};m.prototype.getOffset=function(r){var n,q,o,p;if(b.getSelection&&(o=this.range())){if(o.endOffset-1<0){return null}n=o.cloneRange();n.setStart(o.endContainer,o.endOffset-1);n.setEnd(o.endContainer,o.endOffset);p=n.getBoundingClientRect();q={height:p.height,left:p.left+p.width,top:p.top};n.detach()}else{if(g.selection){q=this.getOldIEOffset()}}if(q){q.top+=f(b).scrollTop();q.left+=f(b).scrollLeft()}return q};m.prototype.range=function(){var n;if(!b.getSelection){return}n=b.getSelection();if(n.rangeCount>0){return n.getRangeAt(0)}else{return null}};return m})();l=(function(){function m(n){this.$inputor=n;this.domInputor=this.$inputor[0]}m.prototype.getIEPos=function(){var q,s,o,r,t,p,n;s=this.domInputor;p=g.selection.createRange();t=0;if(p&&p.parentElement()===s){r=s.value.replace(/\r\n/g,"\n");o=r.length;n=s.createTextRange();n.moveToBookmark(p.getBookmark());q=s.createTextRange();q.collapse(false);if(n.compareEndPoints("StartToEnd",q)>-1){t=o}else{t=-n.moveStart("character",-o)}}return t};m.prototype.getPos=function(){if(g.selection){return this.getIEPos()}else{return this.domInputor.selectionStart}};m.prototype.setPos=function(p){var o,n;o=this.domInputor;if(g.selection){n=o.createTextRange();n.move("character",p);n.select()}else{if(o.setSelectionRange){o.setSelectionRange(p,p)}}return o};m.prototype.getIEOffset=function(r){var o,p,n,q;p=this.domInputor.createTextRange();r||(r=this.getPos());p.move("character",r);n=p.boundingLeft;q=p.boundingTop;o=p.boundingHeight;return{left:n,top:q,height:o}};m.prototype.getOffset=function(q){var o,p,n;o=this.$inputor;if(g.selection){p=this.getIEOffset(q);p.top+=f(b).scrollTop()+o.scrollTop();p.left+=f(b).scrollLeft()+o.scrollLeft();return p}else{p=o.offset();n=this.getPosition(q);return p={left:p.left+n.left-o.scrollLeft(),top:p.top+n.top-o.scrollTop(),height:n.height}}};m.prototype.getPosition=function(u){var s,t,o,r,p,q,n;s=this.$inputor;r=function(v){return f("<div></div>").text(v).html()};if(u===void 0){u=this.getPos()}n=s.val().slice(0,u);o=s.val().slice(u);p="<span style='position: relative; display: inline;'>"+r(n)+"</span>";p+="<span id='caret' style='position: relative; display: inline;'>|</span>";p+="<span style='position: relative; display: inline;'>"+r(o)+"</span>";q=new a(s);return t=q.create(p).rect()};m.prototype.getIEPosition=function(s){var o,r,p,n,q;p=this.getIEOffset(s);r=this.$inputor.offset();n=p.left-r.left;q=p.top-r.top;o=p.height;return{left:n,top:q,height:o}};return m})();a=(function(){m.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"];function m(n){this.$inputor=n}m.prototype.mirrorCss=function(){var n,o=this;n={position:"absolute",left:-9999,top:0,zIndex:-20000};if(this.$inputor.prop("tagName")==="TEXTAREA"){this.css_attr.push("width")}f.each(this.css_attr,function(q,r){return n[r]=o.$inputor.css(r)});return n};m.prototype.create=function(n){this.$mirror=f("<div></div>");this.$mirror.css(this.mirrorCss());this.$mirror.html(n);this.$inputor.after(this.$mirror);return this};m.prototype.rect=function(){var o,p,n;o=this.$mirror.find("#caret");p=o.position();n={left:p.left,top:p.top,height:o.height()};this.$mirror.remove();return n};return m})();i={contentEditable:function(m){return !!(m[0].contentEditable&&m[0].contentEditable==="true")}};d={pos:function(m){if(m||m===0){return this.setPos(m)}else{return this.getPos()}},position:function(m){if(g.selection){return this.getIEPosition(m)}else{return this.getPosition(m)}},offset:function(n){var m;m=this.getOffset(n);return m}};g=null;b=null;k=null;c=function(n){var m;if(m=n!=null?n.iframe:void 0){k=m;b=m.contentWindow;return g=m.contentDocument||b.document}else{k=void 0;b=window;return g=document}};e=function(m){var n;g=m[0].ownerDocument;b=g.defaultView||g.parentWindow;try{return k=b.frameElement}catch(o){n=o}};f.fn.caret=function(p,n,m){var o;if(d[p]){if(f.isPlainObject(n)){c(n);n=void 0}else{c(m)}o=i.contentEditable(this)?new j(this):new l(this);return d[p].apply(o,[n])}else{return f.error("Method "+p+" does not exist on jQuery.caret")}};f.fn.caret.EditableCaret=j;f.fn.caret.InputCaret=l;f.fn.caret.Utils=i;return f.fn.caret.apis=d})}).call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-emoticons:at-js', location = '/static/bower_components/At.js/dist/js/jquery.atwho.js' */
/*! jquery.atwho - v0.5.1 - 2014-09-14
* Copyright (c) 2014 chord.luo <chord.luo@gmail.com>; 
* homepage: http://ichord.github.com/At.js 
* Licensed MIT
*/
(function(){(function(a){if(typeof define==="function"&&define.amd){return define(["jquery"],a)}else{return a(window.jQuery)}})(function(e){var g,c,d,h,i,b,a,f=[].slice;c=(function(){function j(k){this.current_flag=null;this.controllers={};this.alias_maps={};this.$inputor=e(k);this.setIframe();this.listen()}j.prototype.createContainer=function(k){if((this.$el=e("#atwho-container",k)).length===0){return e(k.body).append(this.$el=e("<div id='atwho-container'></div>"))}};j.prototype.setIframe=function(l,k){var m;if(k==null){k=false}if(l){this.window=l.contentWindow;this.document=l.contentDocument||this.window.document;this.iframe=l}else{this.document=document;this.window=window;this.iframe=null}if(this.iframeStandalone=k){if((m=this.$el)!=null){m.remove()}return this.createContainer(this.document)}else{return this.createContainer(document)}};j.prototype.controller=function(k){var o,n,l,m;if(this.alias_maps[k]){n=this.controllers[this.alias_maps[k]]}else{m=this.controllers;for(l in m){o=m[l];if(l===k){n=o;break}}}if(n){return n}else{return this.controllers[this.current_flag]}};j.prototype.set_context_for=function(k){this.current_flag=k;return this};j.prototype.reg=function(l,n){var k,m;k=(m=this.controllers)[l]||(m[l]=new d(this,l));if(n.alias){this.alias_maps[n.alias]=l}k.init(n);return this};j.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",(function(k){return function(l){return k.on_keyup(l)}})(this)).on("keydown.atwhoInner",(function(k){return function(l){return k.on_keydown(l)}})(this)).on("scroll.atwhoInner",(function(k){return function(m){var l;return(l=k.controller())!=null?l.view.hide(m):void 0}})(this)).on("blur.atwhoInner",(function(k){return function(l){var m;if(m=k.controller()){return m.view.hide(l,m.get_opt("display_timeout"))}}})(this)).on("click.atwhoInner",(function(k){return function(m){var l;return(l=k.controller())!=null?l.view.hide(m):void 0}})(this))};j.prototype.shutdown=function(){var m,k,l;l=this.controllers;for(k in l){m=l[k];m.destroy();delete this.controllers[k]}this.$inputor.off(".atwhoInner");return this.$el.remove()};j.prototype.dispatch=function(){return e.map(this.controllers,(function(k){return function(m){var l;if(l=m.get_opt("delay")){clearTimeout(k.delayedCallback);return k.delayedCallback=setTimeout(function(){if(m.look_up()){return k.set_context_for(m.at)}},l)}else{if(m.look_up()){return k.set_context_for(m.at)}}}})(this))};j.prototype.on_keyup=function(l){var k;switch(l.keyCode){case i.ESC:l.preventDefault();if((k=this.controller())!=null){k.view.hide()}break;case i.DOWN:case i.UP:case i.CTRL:e.noop();break;case i.P:case i.N:if(!l.ctrlKey){this.dispatch()}break;default:this.dispatch()}};j.prototype.on_keydown=function(m){var k,l;k=(l=this.controller())!=null?l.view:void 0;if(!(k&&k.visible())){return}switch(m.keyCode){case i.ESC:m.preventDefault();k.hide(m);break;case i.UP:m.preventDefault();k.prev();break;case i.DOWN:m.preventDefault();k.next();break;case i.P:if(!m.ctrlKey){return}m.preventDefault();k.prev();break;case i.N:if(!m.ctrlKey){return}m.preventDefault();k.next();break;case i.TAB:case i.ENTER:if(!k.visible()){return}m.preventDefault();k.choose(m);break;default:e.noop()}};return j})();d=(function(){j.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date().getTime())};function j(l,k){this.app=l;this.at=k;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||this.uid();this.setting=null;this.query=null;this.pos=0;this.cur_rect=null;this.range=null;if((this.$el=e("#atwho-ground-"+this.id,this.app.$el)).length===0){this.app.$el.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>"))}this.model=new b(this);this.view=new a(this)}j.prototype.init=function(k){this.setting=e.extend({},this.setting||e.fn.atwho["default"],k);this.view.init();return this.model.reload(this.setting.data)};j.prototype.destroy=function(){this.trigger("beforeDestroy");this.model.destroy();this.view.destroy();return this.$el.remove()};j.prototype.call_default=function(){var m,l,k;k=arguments[0],m=2<=arguments.length?f.call(arguments,1):[];try{return h[k].apply(this,m)}catch(n){l=n;return e.error(""+l+" Or maybe At.js doesn't have function "+k)}};j.prototype.trigger=function(k,m){var l,n;if(m==null){m=[]}m.push(this);l=this.get_opt("alias");n=l?""+k+"-"+l+".atwho":""+k+".atwho";return this.$inputor.trigger(n,m)};j.prototype.callbacks=function(k){return this.get_opt("callbacks")[k]||h[k]};j.prototype.get_opt=function(l,k){var m;try{return this.setting[l]}catch(n){m=n;return null}};j.prototype.content=function(){if(this.$inputor.is("textarea, input")){return this.$inputor.val()}else{return this.$inputor.text()}};j.prototype.catch_query=function(){var k,n,l,o,p,m;n=this.content();k=this.$inputor.caret("pos",{iframe:this.app.iframe});m=n.slice(0,k);o=this.callbacks("matcher").call(this,this.at,m,this.get_opt("start_with_space"));if(typeof o==="string"&&o.length<=this.get_opt("max_len",20)){p=k-o.length;l=p+o.length;this.pos=p;o={text:o,head_pos:p,end_pos:l};this.trigger("matched",[this.at,o.text])}else{o=null;this.view.hide()}return this.query=o};j.prototype.rect=function(){var m,k,l;if(!(m=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))){return}if(this.app.iframe&&!this.app.iframeStandalone){k=e(this.app.iframe).offset();m.left+=k.left;m.top+=k.top}if(this.$inputor.attr("contentEditable")==="true"){m=this.cur_rect||(this.cur_rect=m)}l=this.app.document.selection?0:2;return{left:m.left,top:m.top,bottom:m.top+m.height+l}};j.prototype.reset_rect=function(){if(this.$inputor.attr("contentEditable")==="true"){return this.cur_rect=null}};j.prototype.mark_range=function(){if(this.$inputor.attr("contentEditable")==="true"){if(this.app.window.getSelection){this.range=this.app.window.getSelection().getRangeAt(0)}if(this.app.document.selection){return this.ie8_range=this.app.document.selection.createRange()}}};j.prototype.insert_content_for=function(n){var m,l,k;l=n.data("value");k=this.get_opt("insert_tpl");if(this.$inputor.is("textarea, input")||!k){return l}m=e.extend({},n.data("item-data"),{"atwho-data-value":l,"atwho-at":this.at});return this.callbacks("tpl_eval").call(this,k,m)};j.prototype.insert=function(p,q){var t,l,s,o,m,k,n,u,r;t=this.$inputor;r=this.callbacks("inserting_wrapper").call(this,t,p,this.get_opt("suffix"));if(t.is("textarea, input")){k=t.val();n=k.slice(0,Math.max(this.query.head_pos-this.at.length,0));u=""+n+r+(k.slice(this.query.end_pos||0));t.val(u);t.caret("pos",n.length+r.length,{iframe:this.app.iframe})}else{if(o=this.range){s=o.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length;o.setStart(o.endContainer,Math.max(s,0));o.setEnd(o.endContainer,o.endOffset);o.deleteContents();l=e(r,this.app.document)[0];o.insertNode(l);o.setEndAfter(l);o.collapse(false);m=this.app.window.getSelection();m.removeAllRanges();m.addRange(o)}else{if(o=this.ie8_range){o.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length);o.pasteHTML(r);o.collapse(false);o.select()}}}if(!t.is(":focus")){t.focus()}return t.change()};j.prototype.render_view=function(l){var k;k=this.get_opt("search_key");l=this.callbacks("sorter").call(this,this.query.text,l.slice(0,1001),k);return this.view.render(l.slice(0,this.get_opt("limit")))};j.prototype.look_up=function(){var l,k;if(!(l=this.catch_query())){return}k=function(m){if(m&&m.length>0){return this.render_view(m)}else{return this.view.hide()}};this.model.query(l.text,e.proxy(k,this));return l};return j})();b=(function(){function j(k){this.context=k;this.at=this.context.at;this.storage=this.context.$inputor}j.prototype.destroy=function(){return this.storage.data(this.at,null)};j.prototype.saved=function(){return this.fetch()>0};j.prototype.query=function(m,o){var l,k,n;l=this.fetch();k=this.context.get_opt("search_key");l=this.context.callbacks("filter").call(this.context,m,l,k)||[];n=this.context.callbacks("remote_filter");if(l.length>0||(!n&&l.length===0)){return o(l)}else{return n.call(this.context,m,o)}};j.prototype.fetch=function(){return this.storage.data(this.at)||[]};j.prototype.save=function(k){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,k||[]))};j.prototype.load=function(k){if(!(this.saved()||!k)){return this._load(k)}};j.prototype.reload=function(k){return this._load(k)};j.prototype._load=function(k){if(typeof k==="string"){return e.ajax(k,{dataType:"json"}).done((function(l){return function(m){return l.save(m)}})(this))}else{return this.save(k)}};return j})();a=(function(){function j(k){this.context=k;this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>");this.timeout_id=null;this.context.$el.append(this.$el);this.bind_event()}j.prototype.init=function(){var k;k=this.context.get_opt("alias")||this.context.at.charCodeAt(0);return this.$el.attr({id:"at-view-"+k})};j.prototype.destroy=function(){return this.$el.remove()};j.prototype.bind_event=function(){var k;k=this.$el.find("ul");return k.on("mouseenter.atwho-view","li",function(l){k.find(".cur").removeClass("cur");return e(l.currentTarget).addClass("cur")}).on("click",(function(l){return function(m){l.choose(m);return m.preventDefault()}})(this))};j.prototype.visible=function(){return this.$el.is(":visible")};j.prototype.choose=function(l){var m,k;if((m=this.$el.find(".cur")).length){k=this.context.insert_content_for(m);this.context.insert(this.context.callbacks("before_insert").call(this.context,k,m),m);this.context.trigger("inserted",[m,l]);this.hide(l)}if(this.context.get_opt("hide_without_suffix")){return this.stop_showing=true}};j.prototype.reposition=function(l){var n,k,m,o;o=this.context.app.iframeStandalone?this.context.app.window:window;if(l.bottom+this.$el.height()-e(o).scrollTop()>e(o).height()){l.bottom=l.top-this.$el.height()}if(l.left>(k=e(o).width()-this.$el.width()-5)){l.left=k}n={left:l.left,top:l.bottom};if((m=this.context.callbacks("before_reposition"))!=null){m.call(this.context,n)}this.$el.offset(n);return this.context.trigger("reposition",[n])};j.prototype.next=function(){var l,k;l=this.$el.find(".cur").removeClass("cur");k=l.next();if(!k.length){k=this.$el.find("li:first")}return k.addClass("cur")};j.prototype.prev=function(){var l,k;l=this.$el.find(".cur").removeClass("cur");k=l.prev();if(!k.length){k=this.$el.find("li:last")}return k.addClass("cur")};j.prototype.show=function(){var k;if(this.stop_showing){this.stop_showing=false;return}this.context.mark_range();if(!this.visible()){this.$el.show();this.context.trigger("shown")}if(k=this.context.rect()){return this.reposition(k)}};j.prototype.hide=function(l,k){var m;if(!this.visible()){return}if(isNaN(k)){this.context.reset_rect();this.$el.hide();return this.context.trigger("hidden",[l])}else{m=(function(n){return function(){return n.hide()}})(this);clearTimeout(this.timeout_id);return this.timeout_id=setTimeout(m,k)}};j.prototype.render=function(q){var r,n,o,k,m,p,l;if(!(e.isArray(q)&&q.length>0)){this.hide();return}this.$el.find("ul").empty();n=this.$el.find("ul");m=this.context.get_opt("tpl");for(p=0,l=q.length;p<l;p++){o=q[p];o=e.extend({},o,{"atwho-at":this.context.at});k=this.context.callbacks("tpl_eval").call(this.context,m,o);r=e(this.context.callbacks("highlighter").call(this.context,k,this.context.query.text));r.data("item-data",o);n.append(r)}this.show();if(this.context.get_opt("highlight_first")){return n.find("li:first").addClass("cur")}};return j})();i={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78};h={before_save:function(n){var l,m,k,j;if(!e.isArray(n)){return n}j=[];for(m=0,k=n.length;m<k;m++){l=n[m];if(e.isPlainObject(l)){j.push(l)}else{j.push({name:l})}}return j},matcher:function(k,m,j){var l,n;k=k.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");if(j){k="(?:^|\\s)"+k}n=new RegExp(k+"([A-Za-z0-9_+-]*)$|"+k+"([^\\x00-\\xff]*)$","gi");l=n.exec(m);if(l){return l[2]||l[1]}else{return null}},filter:function(p,o,m){var l,n,k,j;j=[];for(n=0,k=o.length;n<k;n++){l=o[n];if(~new String(l[m]).toLowerCase().indexOf(p.toLowerCase())){j.push(l)}}return j},remote_filter:null,sorter:function(p,l,n){var m,o,k,j;if(!p){return l}j=[];for(o=0,k=l.length;o<k;o++){m=l[o];m.atwho_order=new String(m[n]).toLowerCase().indexOf(p.toLowerCase());if(m.atwho_order>-1){j.push(m)}}return j.sort(function(r,q){return r.atwho_order-q.atwho_order})},tpl_eval:function(k,l){var j;try{return k.replace(/\$\{([^\}]*)\}/g,function(n,o,p){return l[o]})}catch(m){j=m;return""}},highlighter:function(j,l){var k;if(!l){return j}k=new RegExp(">\\s*(\\w*?)("+l.replace("+","\\+")+")(\\w*)\\s*<","ig");return j.replace(k,function(o,m,p,n){return"> "+m+"<strong>"+p+"</strong>"+n+" <"})},before_insert:function(j,k){return j},inserting_wrapper:function(m,k,l){var j,n;j=l===""?l:l||" ";if(m.is("textarea, input")){return""+k+j}else{if(m.attr("contentEditable")==="true"){j=l===""?l:l||"&nbsp;";if(/firefox/i.test(navigator.userAgent)){n="<span>"+k+j+"</span>"}else{l="<span contenteditable='false'>"+j+"<span>";n="<span contenteditable='false'>"+k+l+"</span>"}if(this.app.document.selection){n="<span contenteditable='true'>"+k+"</span>"}return n}}}};g={load:function(j,k){var l;if(l=this.controller(j)){return l.model.load(k)}},setIframe:function(k,j){this.setIframe(k,j);return null},run:function(){return this.dispatch()},destroy:function(){this.shutdown();return this.$inputor.data("atwho",null)}};e.fn.atwho=function(l){var j,k;k=arguments;j=null;this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var m,n;if(!(n=(m=e(this)).data("atwho"))){m.data("atwho",(n=new c(this)))}if(typeof l==="object"||!l){return n.reg(l.at,l)}else{if(g[l]&&n){return j=g[l].apply(n,Array.prototype.slice.call(k,1))}else{return e.error("Method "+l+" does not exist on jQuery.caret")}}});return j||this};e.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:h,search_key:"name",suffix:void 0,hide_without_suffix:false,start_with_space:true,highlight_first:true,limit:5,max_len:20,display_timeout:300,delay:null}})}).call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-emoticons:bitbucket-emoticons-plugin-resources', location = '/static/bitbucket/internal/feature/emoticons/emoticons.soy' */
// This file was automatically generated from emoticons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.widget.emoticons.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.widget == 'undefined') { bitbucket.widget = {}; }
if (typeof bitbucket.widget.emoticons == 'undefined') { bitbucket.widget.emoticons = {}; }


bitbucket.widget.emoticons.autocompleteRow = function(opt_data, opt_ignored) {
  return '<li class="emoticonRow" data-value=":' + soy.$$escapeHtml(opt_data.shortcut) + ':">' + bitbucket.widget.emoticons.emoticon(opt_data) + '<span class="shortcut">:' + soy.$$escapeHtml(opt_data.shortcut) + ':</span></li>';
};
if (goog.DEBUG) {
  bitbucket.widget.emoticons.autocompleteRow.soyTemplateName = 'bitbucket.widget.emoticons.autocompleteRow';
}


bitbucket.widget.emoticons.emoticon = function(opt_data, opt_ignored) {
  return '<div class="emoticon-container">' + ((opt_data.url) ? '<img class="emoticon" src="' + soy.$$escapeHtml(opt_data.url) + '" alt="(' + soy.$$escapeHtml(opt_data.shortcut) + ')" title="(' + soy.$$escapeHtml(opt_data.shortcut) + ')"/>' : '') + ((opt_data.value) ? '<span class="emoji">' + soy.$$escapeHtml(opt_data.value) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  bitbucket.widget.emoticons.emoticon.soyTemplateName = 'bitbucket.widget.emoticons.emoticon';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-emoticons:bitbucket-emoticons-plugin-resources', location = '/static/bitbucket/internal/feature/emoticons/emoticons.js' */
define("bitbucket/internal/feature/emoticons/emoticons",["aui","jquery","lodash","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/internal/util/client-storage","bitbucket/internal/util/function","bitbucket/internal/util/highlight-text","bitbucket/internal/util/markup","bitbucket/internal/widget/markup-editor/markup-editor",],function(h,b,t,g,n,j,i,o,a,l){const p={url:g.rest("emoticons").addPathComponents("emoticons").build(),key:j.buildKey("emoticons","bitbucket-emoticons"),transform:function(u){return t.chain(u).values().sortBy("shortcut").value()},};function c(u,v){return{at:u,limit:100,search_key:"shortcut",data:v,startWithSpace:false,callbacks:{matcher:e,tpl_eval:i.argMap(bitbucket.widget.emoticons.autocompleteRow,1),highlighter:f,},}}function f(v,w){const x=b(v);const u=x.find("span.shortcut");u.html(o.highlight(u.text(),w));return x}function s(u){u.find("textarea").atwho("destroy")}function m(u){return n.rest({url:u.url,}).then(u.transform).done(j.setSessionItem.bind(j,u.key))}function e(v,x,w){const u=b("#mention-autocomplete-dialog").length>0;if(!u&&!a.isPositionInsideCodeBlock(x.length-1,x)){return b().atwho["default"].callbacks.matcher(v,x,w)}return null}function r(){return j.getSessionItem(p.key)||[]}function d(){var u;b(document).on("keydown","textarea",function(v){if(v.which===h.keyCode.UP||v.which===h.keyCode.DOWN){b(".atwho-view").each(function(){const x=b(this);const w=x.find(".emoticonRow.cur");if(u===undefined){u=w.outerHeight()}x.scrollTop(w.index()*u)})}})}const k=t.once(function(){var u=r();if(!u||u.length===0){u=m(p)}else{u=b.Deferred().resolve(u)}return u});function q(u){t.defer(function(){k().done(function(v){u.find("textarea").atwho(c(":",v))})})}l.registerExtension({init:q,destroy:s,});d()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-emoticons:bitbucket-emoticons-plugin-resources', location = '/static/bitbucket/internal/feature/emoticons/emoticons-init.js' */
require("bitbucket/internal/feature/emoticons/emoticons");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bundled-hooks:incomplete-tasks-merge-check-pull-request-resources', location = '/views/task/pullRequest/incomplete-tasks-merge-check.js' */
define("bitbucket/internal/feature/incomplete-tasks/pull-request",["bitbucket/internal/feature/pull-request/can-merge/can-merge","bitbucket/internal/model/page-state","bitbucket/internal/util/events","exports"],function(b,c,d,e){function f(){var a=c.getPullRequest();a.get("closed")||b(a)}e.onReady=function(){d.on("bitbucket.internal.feature.pull-request-tasks.saved",f)}});jQuery(document).ready(function(){require("bitbucket/internal/feature/incomplete-tasks/pull-request").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:jira-key-linker', location = '/bitbucket/internal/feature/jira/key-linker/key-linker.js' */
define("bitbucket/internal/feature/jira/key-linker/key-linker",["module","exports","lodash","bitbucket/util/navbuilder"],function(e,a,f,g){function h(a){for(var c=/([a-z]-|[\s!"#$%&'()\*\+,./:;<=>\?@\[\]^_`\{|\}~\u2000-\u206F\u2E00-\u2E7F]|^)(([A-Z][A-Z0-9_]+)-([0-9]+))(\b|_)/g,d=[],b=void 0;b=c.exec(a);)d.push(b[2]),c.lastIndex--;return d}Object.defineProperty(a,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(f),l=babelHelpers.interopRequireDefault(g);a.default={jiraKeyLinker:function(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=k.default.has(c,"properties.jira-key"),b=[];return d||(b=h(a),b.length)?Promise.resolve((d?c.properties["jira-key"]:b).map(function(a){var b=jiraIntegration.templates.trigger.issuesTrigger({className:c.className,issues:[{key:a,url:l.default.pluginServlets().path("jira-integration","issues",a).build()}]});return{find:a,replace:b}})):Promise.resolve([])},DEFAULT_JIRA_LINKER_WEIGHT:10};e.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-title-jira-issues', location = '/bitbucket/internal/feature/jira/pull-request-title/pull-request-title-jira-issues.js' */
define("bitbucket/internal/feature/jira/pull-request-title/pull-request-title-jira-issues",["exports","bitbucket/internal/bbui/pull-request-header/pull-request-title-enricher","bitbucket/internal/feature/jira/dialog/dialog","bitbucket/internal/feature/jira/key-linker/key-linker"],function(a,c,h,e){Object.defineProperty(a,"__esModule",{value:!0});a.onReady=function(){k.default.registerReplacer(function(a,c){for(var d=arguments.length,f=Array(2<d?d-2:0),b=2;b<d;b++)f[b-2]=arguments[b];return e.jiraKeyLinker.apply(void 0,
[a,babelHelpers.extends({className:g},c)].concat(f))},e.DEFAULT_JIRA_LINKER_WEIGHT);new l.default({id:"pr-title-jira-issues-dialog",triggerSelector:"."+g})};var k=babelHelpers.interopRequireDefault(c),l=babelHelpers.interopRequireDefault(h),g="pr-title-jira-issues-trigger"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:pull-request-title-jira-issues', location = '/bitbucket/internal/feature/jira/pull-request-title/pull-request-title-jira-issues-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/jira/pull-request-title/pull-request-title-jira-issues").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:commit-list-jira-issues', location = '/bitbucket/internal/feature/jira/commits/commits-jira-issues.js' */
define("bitbucket/internal/feature/jira/commits/commits-jira-issues","exports jquery bitbucket/internal/feature/commits/commit-message-enricher bitbucket/internal/feature/jira/dialog/dialog bitbucket/internal/feature/jira/key-linker/key-linker bitbucket/internal/util/events".split(" "),function(b,h,k,l,f,m){function c(){var d=(0,n.default)(p);d.find(a+" \x3e a").length?d.find(a).show():d.find(a).hide()}Object.defineProperty(b,"__esModule",{value:!0});b.onReady=function(){c();new q.default({id:"commits-jira-issues-dialog",
triggerSelector:"."+g});r.default.on("bitbucket.internal.widget.pagedscrollable.dataLoaded",c)};var n=babelHelpers.interopRequireDefault(h);b=babelHelpers.interopRequireDefault(k);var q=babelHelpers.interopRequireDefault(l),r=babelHelpers.interopRequireDefault(m),g="commits-issues-trigger",p="#commits-table",a=".commit-list-jira-issues-col";b.default.registerReplacer(function(d,b){for(var a=arguments.length,c=Array(2<a?a-2:0),e=2;e<a;e++)c[e-2]=arguments[e];return f.jiraKeyLinker.apply(void 0,[d,
babelHelpers.extends({className:g},b)].concat(c))},f.DEFAULT_JIRA_LINKER_WEIGHT)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-jira:commit-list-jira-issues', location = '/bitbucket/internal/feature/jira/commits/commits-jira-issues-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/jira/commits/commits-jira-issues").onReady()});;
;
/* module-key = 'com.nerdwin15.stash-stash-webhook-jenkins:jenkins-pr-triggerbutton', location = '/static/jenkins-pr-triggerbutton.js' */
define("plugin/jenkins/pr-triggerbutton",["jquery","aui","bitbucket/internal/model/page-state"],function(d,a,b){var c=function(){return a.contextPath()+"/rest/jenkins/latest/projects/"+b.getProject().getKey()+"/repos/"+b.getRepository().getSlug()+"/triggerJenkins?branches="+b.getPullRequest().getFromRef().getDisplayId()+"&sha1="+b.getPullRequest().getFromRef().getLatestCommit()};var e='<span class="aui-icon aui-icon-wait">Wait</span>';d(".triggerJenkinsBuild").click(function(){var f=d(this);var g=f.text();f.attr("disabled","disabled").html(e+" "+g);d.ajax({url:c(),type:"POST",contentType:"application/json; charset=utf-8",success:function(){setTimeout(function(){f.removeAttr("disabled").text(g)},500)}});return false})});AJS.$(document).ready(function(){require("plugin/jenkins/pr-triggerbutton")});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-commit-list', location = '/bitbucket/internal/feature/build/commit-list/build-status-commit-list.js' */
define("bitbucket/internal/feature/build/commit-list/build-status-commit-list",["jquery","bitbucket/internal/feature/build/common/build-status-common","bitbucket/internal/model/page-state","bitbucket/internal/util/events"],function(d,h,k,l){function m(a,b){var g=!1;b.each(function(){var c=(0,f.default)(this),b=c.find(".build-status-commit-list-col"),c=c.data("commitid"),e=a[c];e&&(b.html(bitbucket.internal.build.status.summaryIcon({commitId:c,stats:e})).find(".build-icon").tooltip({gravity:"ne",html:!1}),
g=!0)});g&&(0,f.default)(".commits-table thead .build-status-commit-list-col").show()}function n(a){return a.map(function(){return(0,f.default)(this).data("commitid")}).toArray()}var f=babelHelpers.interopRequireDefault(d),p=babelHelpers.interopRequireDefault(k);d=babelHelpers.interopRequireDefault(l);var q=new h.BuildStatusColumnRenderer(".commits-table thead .build-status-commit-list-col",".build-status-commit-list-col");d.default.on("bitbucket.internal.widget.commitsTable.contentAdded",function(a){if(p.default.getCurrentUser()){var b=
a.values;n(b).map(function(a){q.populateBuildStatusLater(a,function(a,d,e){m(e,b)})})}})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-build:build-status-commit-list', location = '/bitbucket/internal/feature/build/commit-list/build-status-commit-list-init.js' */
require("bitbucket/internal/feature/build/commit-list/build-status-commit-list");;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:automerge-decorator-resources-with-help-url', location = '/bitbucket/internal/feature/branch/automerge/decorator/automerge-decorator.soy' */
// This file was automatically generated from automerge-decorator.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.automerge.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.automerge == 'undefined') { bitbucket.internal.feature.automerge = {}; }


bitbucket.internal.feature.automerge.diagram = function(opt_data, opt_ignored) {
  var param7 = '<div class="automerge-path">';
  var refList9 = opt_data.mergePath;
  var refListLen9 = refList9.length;
  for (var refIndex9 = 0; refIndex9 < refListLen9; refIndex9++) {
    var refData9 = refList9[refIndex9];
    param7 += bitbucket.internal.feature.repository.refLozenge({ref: refData9});
  }
  param7 += '</div><a href="' + soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Automatic+branch+merging?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') + '" title="' + soy.$$escapeHtml('Learn more about automatic merging') + '" class="automerge-help-link" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>';
  var output = '' + bitbucket.internal.feature.repository.branchDiagram({type: 'automerge', sourceRef: opt_data.sourceRef, targetRef: opt_data.targetRef, extraClasses: 'pending', content: param7});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.automerge.diagram.soyTemplateName = 'bitbucket.internal.feature.automerge.diagram';
}


bitbucket.internal.feature.automerge.expandCascadeButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'expand-automerge-path-button', type: 'link', text: '' + soy.$$escapeHtml(AJS.format('and {0} more branches',opt_data.mergePathRefCount))});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.automerge.expandCascadeButton.soyTemplateName = 'bitbucket.internal.feature.automerge.expandCascadeButton';
}


bitbucket.internal.feature.automerge.autoMergeConflictInstructions = function(opt_data, opt_ignored) {
  return '<h3>' + aui.icons.icon({icon: 'warning', useIconFont: true}) + soy.$$escapeHtml('Auto-merge conflict') + '</h3><p>' + soy.$$escapeHtml('Automatic merge failed because there were conflicts. You must resolve the conflicts by merging downstream only i.e. merging the source branch into the target branch.') + '</p>' + bitbucket.internal.feature.pullRequest.mergeStepsForStableSourceBranch(opt_data);
};
if (goog.DEBUG) {
  bitbucket.internal.feature.automerge.autoMergeConflictInstructions.soyTemplateName = 'bitbucket.internal.feature.automerge.autoMergeConflictInstructions';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:automerge-decorator-resources', location = '/bitbucket/internal/feature/branch/automerge/decorator/automerge-decorator.js' */
define("branch/automerge-decorator","aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax exports".split(" "),function(h,f,k,l,m,n){function p(a,c){var b;return(b=l.rest("branch-utils").project(a.getProject()).repo(a)).addPathComponents.apply(b,["automerge","path"].concat(babelHelpers.toConsumableArray(c.split("/")))).build()}function q(a){return m.rest({url:p(a.getRepository(),a.getId())})}function r(a,c,b){var g=a.getFromRef(),e=a.getToRef(),d=c.addClass("pending");q(e).done(function(a){if(a.status.available){a=
a.path.slice(1);d=f(bitbucket.internal.feature.automerge.diagram({sourceRef:g.toJSON(),targetRef:e.toJSON(),mergePath:a}));b.replaceWith(d);var c=d.find(".automerge-path");2<a.length&&(c.addClass("collapsed").after(bitbucket.internal.feature.automerge.expandCascadeButton({mergePathRefCount:a.length-1})),f("#expand-automerge-path-button").on("click",function(){f(this).remove();c.removeClass("collapsed")}))}else b.replaceWith(d.addClass("pending")),"PATH_TOO_LONG"===a.status.id&&d.after(aui.message.warning({content:"Merging this pull request will not trigger an automatic merge because there are more than 30 newer release branches."}));
b=null}).fail(function(a,c,d,e){b.spinStop()}).always(function(){k.defer(function(){d.removeClass("pending")})})}n.decorateDiagram=function(a,c){if(a.length){var b=f('\x3cdiv class\x3d"branch-diagram-spinner"\x3e\x3c/div\x3e'),g=a.closest(".aui-layer");a.replaceWith(b);var e=k.once(function(){b&&b.spin("large");r(c,a,b)});if(g.is(":visible"))e();else h.layer(g).on("show",e)}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:automerge-decorator-resources-onready', location = '/bitbucket/internal/feature/branch/automerge/decorator/automerge-decorator-onready.js' */
require(["branch/automerge-decorator","jquery","bitbucket/internal/model/page-state","bitbucket/internal/util/promise"],function(b,c,d,a){a.waitFor({interval:10,name:"automerge-wait",predicate:function(){return document.querySelector("#pull-request-merge-dialog .branch-diagram-merge")}}).then(function(a){b.decorateDiagram(c(a),d.getPullRequest())})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:merge-conflict-resolution-instructions', location = '/bitbucket/internal/feature/branch/merge-help/merge-help.js' */
define("branch/merge-help",["bitbucket/internal/util/events"],function(b){return{init:function(){b.on("bitbucket.internal.pull-request.cant.merge",function(d,c,e,a){c&&a&&b.trigger("bitbucket.internal.branch.plugin.conflict.merge.help",null,{stability:a["branch.from-ref-stability"],isAutoMergeConflict:a["branch.auto-merge-conflict"]})})}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-branch:merge-conflict-resolution-instructions', location = '/bitbucket/internal/feature/branch/merge-help/merge-help-onready.js' */
require("branch/merge-help").init();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-readme:stash-readme-common-resources', location = '/static/bitbucket/internal/feature/readme/common/common.js' */
define("bitbucket/internal/feature/readme/common",["jquery","lib/jsuri","lodash","bitbucket/util/navbuilder","bitbucket/internal/model/page-state","bitbucket/internal/util/text","exports",],function(e,c,h,a,g,i,d){function b(k,l,n){var j="";var m=k.indexOf("#");if(m!==-1){j=k.substr(m);k=k.substr(0,m)}return k+(k.indexOf("?")!==-1?"&":"?")+encodeURIComponent(l)+"="+encodeURIComponent(n)+j}d.createUrl=function f(k,j,m){var l=e.extend({},{blob:m,at:j,});return a.newBuilder(["rest","readme","latest","projects",g.getProject().getKey(),"repos",g.getRepository().getSlug(),"markup",].concat(k)).withParams(l).build()};d.updateLinks=function(k,j){function l(n,m,o){k.find(n).each(function(){e(this).attr(m,d._appendAtIfRelative(e(this).attr(m),g.getRevisionRef().getId(),j,o))})}l("a","href");l("img","src",function(m){return(new c(m).getQueryParamValues("raw").length===0)?b(m,"raw",""):m});return k};d._appendAtIfRelative=function(l,j,k,m){if(l&&!i.isUriAbsolute(l)&&!h.startsWith(l,"#")){if(k&&!h.endsWith(k,"/")&&!h.startsWith(l,"/")){l=k+"/"+l}if(!g.getRevisionRef().isDefault()){l=b(l,"at",j)}l=m?m(l):l}return l};d.DATA=e.Deferred();_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-readme:readme-provider","bitbucket.layout.repository",function(j){d.DATA.resolve(j)})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-readme:stash-readme-filecontent-resources', location = '/static/bitbucket/internal/feature/readme/filecontent/file-content.soy' */
// This file was automatically generated from file-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.readme.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.readme == 'undefined') { bitbucket.internal.feature.readme = {}; }


bitbucket.internal.feature.readme.renderMarkup = function(opt_data, opt_ignored) {
  return '<div class="markup-content markup">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.readme.renderMarkup.soyTemplateName = 'bitbucket.internal.feature.readme.renderMarkup';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-readme:stash-readme-filecontent-resources', location = '/static/bitbucket/internal/feature/readme/filecontent/file-content.js' */
define("bitbucket/internal/feature/readme/filecontent",["aui","jquery","lodash","bitbucket/internal/feature/readme/common","bitbucket/internal/util/ajax","bitbucket/internal/util/syntax-highlight",],function(a,f,b,d,e,c){return function(h){if(h.contentMode!=="source"){return null}var g=h.fileChange;return d.DATA.then(function(j){var i=g.path.extension.toLowerCase();if(i&&b.contains(j.extensions,i)&&!b.contains(j.extensionsRaw,i)){var k=g.commitRange.untilRevision.id;return e.rest({url:d.createUrl(g.path.components,k,k),dataType:"html",statusCode:{413:function(){return f.Deferred().reject("The markup for this file is too large to render.")},},}).then(function(l){h.$container.empty().append(d.updateLinks(f(bitbucket.internal.feature.readme.renderMarkup({content:l}))));c.container(h.$container);return{editing:{editable:false,reason:"Show source for this file to enable editing",},}})}return f.Deferred().reject()})}});require("bitbucket/feature/files/file-handlers").register({weight:3000,handle:function(a){return require("bitbucket/internal/feature/readme/filecontent").apply(this,arguments)},});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-lfs:lfs-templates-with-help-urls', location = '/file-handlers/lfs-file-views.soy' */
// This file was automatically generated from lfs-file-views.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.fileContent.lfs.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.fileContent == 'undefined') { bitbucket.internal.feature.fileContent = {}; }
if (typeof bitbucket.internal.feature.fileContent.lfs == 'undefined') { bitbucket.internal.feature.fileContent.lfs = {}; }


bitbucket.internal.feature.fileContent.lfs.file = function(opt_data, opt_ignored) {
  return '' + ((opt_data.file.error) ? bitbucket.internal.feature.fileContent.lfs.error(null) : (opt_data.file.inlineImage) ? bitbucket.internal.feature.fileContent.binaryView.image({src: opt_data.file.href, extraAttributes: {'data-ext': opt_data.file.extension}}) : bitbucket.internal.feature.fileContent.binaryView.unrenderable({descriptionContent: soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('This file is stored using \x3ca target\x3d\x22_blank\x22 href\x3d\x22{0}\x22\x3eGit LFS\x3c/a\x3e.',typeof ('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') === 'number' ? 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' : soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash'))), downloadUrl: opt_data.file.href}));
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.file.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.file';
}


bitbucket.internal.feature.fileContent.lfs.error = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.unrenderable({title: 'File not found', extraClasses: 'lfs-error', descriptionContent: soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('There may be problems with your \x3ca target\x3d\x22_blank\x22 href\x3d\x22{0}\x22\x3elarge file storage\x3c/a\x3e.',typeof ('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash') === 'number' ? 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash' : soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Git+Large+File+Storage?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash')))});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.error.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.error';
}


bitbucket.internal.feature.fileContent.lfs.source = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.container({content: '' + bitbucket.internal.feature.fileContent.binaryView.cell({content: '' + bitbucket.internal.feature.fileContent.lfs.file(opt_data)})});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.source.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.source';
}


bitbucket.internal.feature.fileContent.lfs.diff = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.container({content: '' + ((opt_data.files.old) ? bitbucket.internal.feature.fileContent.lfs.old({file: opt_data.files.old}) : '') + ((opt_data.files['new']) ? bitbucket.internal.feature.fileContent.lfs.new({file: opt_data.files['new']}) : '')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.diff.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.diff';
}


bitbucket.internal.feature.fileContent.lfs.old = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.old({content: '' + bitbucket.internal.feature.fileContent.lfs.file(opt_data)});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.old.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.old';
}


bitbucket.internal.feature.fileContent.lfs.new = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.feature.fileContent.binaryView.new({content: '' + bitbucket.internal.feature.fileContent.lfs.file(opt_data)});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.fileContent.lfs.new.soyTemplateName = 'bitbucket.internal.feature.fileContent.lfs.new';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:request-source', location = '/static/bitbucket/internal/feature/file-content/request-source.js' */
define("bitbucket/internal/feature/file-content/request-source","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax bitbucket/internal/util/property".split(" "),function(l,e,m,n,p,q,r){function t(d,a){var b=g.default.extend({},{start:a.start||0,limit:a.limit||h,blame:a.includeBlame?!0:void 0});return u.default.rest().currentRepo().browse().path(d.path).at(d.commitRange.untilRevision.displayId).withParams(b).build()}Object.defineProperty(e,"__esModule",{value:!0});
var g=babelHelpers.interopRequireDefault(m),v=babelHelpers.interopRequireDefault(n),u=babelHelpers.interopRequireDefault(p),k=babelHelpers.interopRequireDefault(q),h=5E3;babelHelpers.interopRequireDefault(r).default.getFromProvider("page.max.source.lines").done(function(b){h=b});var b={};e.default=function(d,a){a=a||{};var f=d.toJSON?d.toJSON():d,c=t(f,a);if(b.hasOwnProperty(c)&&"rejected"!==b[c].state())return b[c];var f=k.default.rest({url:c,statusCode:a.statusCode||k.default.ignore404WithinRepository()}),
e=f.then(function(a){if(a.errors&&a.errors.length)return g.default.Deferred().rejectWith(this,[this,null,null,a]);v.default.defer(function(){delete b[c]});return a});b[c]=e.promise(f);return b[c]};l.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-git-lfs:file-handlers', location = '/file-handlers/lfs-file-handler.js' */
define("bitbucket/internal/feature/file-content/lfs-file-handler",["jquery","lodash","bitbucket/util/navbuilder","bitbucket/util/server","bitbucket/internal/bbui/image-differ/image-differ","bitbucket/internal/feature/comments/comments","bitbucket/internal/feature/file-content/diff-view-options","bitbucket/internal/feature/file-content/diff-view-segment-types","bitbucket/internal/feature/file-content/handlers/diff-handler/diff-handler-internal","bitbucket/internal/feature/file-content/request-diff","bitbucket/internal/feature/file-content/request-source","bitbucket/internal/model/file-change","bitbucket/internal/model/file-change-types","bitbucket/internal/model/file-content-modes",],function(k,C,o,v,B,n,x,y,f,p,w,r,u,e){var c={version:/version https:\/\/git-lfs\.github\.com\/spec\/v(\d)/,oid:/oid sha256:([a-fA-F0-9]{64})/,size:/size ([0-9]*)/,};var t=10*1024*1024;var i={bmp:"image/bmp",gif:"image/gif",ico:"image/x-icon",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",};function b(E,G,F){var H=o.parse(E);C.forEach(s(G,F),function(I,J){H.addQueryParam(J,I)});return H.toString()}function A(F,E){return E.objects.map(function(I,J){var G=C.get(I,"actions.download.href");var L=F[J];var M=L.extension.toLowerCase();var H=i[M];var K={fileName:L.name,extension:M,href:G&&b(G,I.size,L),inlineImage:!!(I.size<=t&&H),};return C.extend({},I,K)})}function g(F){var H={};var G=Object.keys(c);function E(I,J){var K=G[J];var L=I.match(c[K]);if(L){return(H[K]=L[1])}return false}return F.length===3&&F.every(E)&&H}function D(E){var G=[];var F=[];E.forEach(function(H){var I=C.pluck(H.lines,"line");switch(H.type){case y.ADDED:F.push.apply(G,I);break;case y.REMOVED:G.push.apply(F,I);break;default:F.push.apply(F,I);G.push.apply(G,I)}});return[G,F].map(g)}function m(F,G){if(!F.length){return j()}var E={url:o.currentRepo().clone("git").addPathComponents("info","lfs","objects","batch").build(),type:"POST",dataType:"json",accepts:{json:"application/vnd.git-lfs+json; charset=UTF-8",},contentType:"application/vnd.git-lfs+json; charset=UTF-8",data:{operation:"download",objects:F,},statusCode:{"*":false,},};return v.rest(E).then(A.bind(null,G),C.ary(j,0))}function s(G,F){var H={};var E=i[F.extension.toLowerCase()];if(G<=t&&E){H["response-content-disposition"]=encodeURIComponent('inline; filename="'+F.name+"\"; filename*=utf-8''"+encodeURIComponent(F.name));H["response-content-type"]=encodeURIComponent(E)}else{H["response-content-disposition"]=encodeURIComponent('attachment; filename="'+F.name+"\"; filename*=utf-8''"+encodeURIComponent(F.name))}return H}function d(G){if(G.isExcerpt){return j()}var E=new r(G.fileChange);var F=C.extend({},G,{withComments:G.commentMode!==n.commentMode.NONE,});if(x.get("diffType")==="side-by-side"&&E.getType()!==u.ADD&&E.getType()!==u.DELETE){F=C.extend(F,{contextLines:f.infiniteContext,withComments:false,})}return p(E,F).then(function(I){var J=I.diff;if(!J||J.binary||!h(J)){return j()}var H=C.compact(D(J.hunks[0].segments));var K=C.compact([J.destination,J.source]);if(H.length!==K.length){return j()}return m(H,K).then(l.bind(null,G.$container,!J.destination))},function(){return j()})}function z(E){return w(E.fileChange).then(function(F){if(F.binary||F.start!==0||F.size!==3){return j()}var H=g(C.pluck(F.lines,"text"));if(!H){return j()}var G=E.fileChange.path;return m([H],[G]).then(a.bind(null,E.$container,E.$toolbar))},function(){return j()})}function h(E){var F={destinationLine:E.destination?1:0,destinationSpan:E.destination?3:0,sourceLine:E.source?1:0,sourceSpan:E.source?3:0,truncated:false,};return !!(E.hunks&&E.hunks.length===1&&C.isMatch(E.hunks[0],F))}function j(E){return k.Deferred().reject(E)}function a(H,F,G){var E=G[0];H.append(bitbucket.internal.feature.fileContent.lfs.source({file:E,}));H.parent().addClass("lfs-file-content");F.find(".raw-view-link").attr("href",E.href).toggle(!E.error)}function l(G,F,E){G.append(bitbucket.internal.feature.fileContent.lfs.diff({files:{"new":!F?E[0]:null,old:!F?E[1]:E[0],},}));G.parent().addClass("lfs-file-content");if(C.where(E,{inlineImage:true}).length===2){return B.init(G.find(".binary-container"))}}return function q(E){switch(E.contentMode){case e.SOURCE:return z(E);case e.DIFF:return d(E);default:return j()}}});(function(){require("bitbucket/feature/files/file-handlers").register({weight:100,handle:function(){return require("bitbucket/internal/feature/file-content/lfs-file-handler").apply(null,arguments)},})})();;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:base-layout', location = '/static/bitbucket/internal/layout/base/base.js' */
define("bitbucket/internal/layout/base/base","module exports aui jquery lodash bitbucket/util/navbuilder bitbucket/internal/model/page-state bitbucket/internal/model/stash-user bitbucket/internal/util/analytics bitbucket/internal/util/client-storage bitbucket/internal/util/events bitbucket/internal/util/history bitbucket/internal/widget/aui/dropdown/dropdown bitbucket/internal/widget/aui/form/form".split(" "),function(l,e,c,m,n,p,q,r,t,u,v,w,x,y){function z(a){a&&(a.isAdmin=!!(0,f.default)("#header").find("a.admin-link").length,
A.default.setCurrentUser(new B.default(a)))}function C(a){g.default.getSessionItem(a)||(g.default.setSessionItem(a,!0),D.default.add("demographics",{d_lang:document.documentElement.lang},!0))}Object.defineProperty(e,"__esModule",{value:!0});var E=babelHelpers.interopRequireDefault(c),f=babelHelpers.interopRequireDefault(m),h=babelHelpers.interopRequireDefault(n),k=babelHelpers.interopRequireDefault(p),A=babelHelpers.interopRequireDefault(q),B=babelHelpers.interopRequireDefault(r),D=babelHelpers.interopRequireDefault(t),
g=babelHelpers.interopRequireDefault(u),b=babelHelpers.interopRequireDefault(v),F=babelHelpers.interopRequireDefault(w),G=babelHelpers.interopRequireDefault(x),H=babelHelpers.interopRequireDefault(y);location.search&&(c=k.default.parse(location.href).getQueryParamValue("eve"))&&b.default.on(c,function(){console.log([b.default.name()],this,arguments)});b.default.on("bitbucket.internal.history.changestate",function(a){var b=(0,f.default)("#login-link");b.length&&a.state&&b.attr("href",k.default.login().next().build());
(0,f.default)("body").children(".tipsy").remove()});e.default={onReady:function(a,e){z(a);G.default.onReady();H.default.onReady();E.default.params["build-number"]=encodeURIComponent((0,f.default)("#product-version").attr("data-system-build-number"));var d=(0,f.default)(window),c=h.default.debounce(function(){b.default.trigger("window.resize.debounced",d,d.width(),d.height())},200);d.on("resize",c);c=h.default.throttle(function(){b.default.trigger("window.scroll.throttled",d,d.scrollTop())},25);d.on("scroll",
c);F.default.setTitleSuffix(" - "+e);C(g.default.buildKey("demographic-analytics","user"))}};l.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:quick-copy-text', location = '/static/bitbucket/internal/widget/quick-copy-text.js' */
define("bitbucket/internal/widget/quick-copy-text",["module","exports","jquery"],function(c,a,d){Object.defineProperty(a,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(d),b=!0;a.default={onReady:function(){b&&(b=!1,(0,e.default)(document).on("click",".quick-copy-text",function(a){this.focus();this.select()}))}};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:browser-location', location = '/static/bitbucket/internal/util/browser-location.js' */
define("bitbucket/internal/util/browser-location",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={location:window.location};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:sticky-branches', location = '/static/bitbucket/internal/feature/repository/sticky-branches.js' */
define("bitbucket/internal/feature/repository/sticky-branches","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/browser-location bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(t,f,u,v,w,x,y,z){function p(a){a?(a=encodeURIComponent(a),k.attr("href",b.default.parse(k.attr("href")).replaceQueryParam("at",a)),l.attr("href",b.default.parse(l.attr("href")).replaceQueryParam("until",a)),m.attr("href",b.default.parse(m.attr("href")).replaceQueryParam("base",
a))):q()}function q(){k.attr("href",b.default.parse(k.attr("href")).deleteQueryParam("at"));l.attr("href",b.default.parse(l.attr("href")).deleteQueryParam("until"));m.attr("href",b.default.parse(m.attr("href")).deleteQueryParam("base"))}Object.defineProperty(f,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(u),A=babelHelpers.interopRequireDefault(v),b=babelHelpers.interopRequireDefault(w),B=babelHelpers.interopRequireDefault(x),d=babelHelpers.interopRequireDefault(y),r=babelHelpers.interopRequireDefault(z),
k,l,m;f.default={onReady:function(){var a=b.default.parse(B.default.location.href),c=b.default.currentRepo().browse().build(),h=b.default.currentRepo().commits().build(),c=0===a.path().indexOf(c),h=a.path()===h,a=c?a.getQueryParamValue("at"):h?a.getQueryParamValue("until"):void 0,h=c||h,g=d.default.buildKey("current-branch","repo"),f=d.default.getSessionItem(g);k=(0,n.default)("#repository-nav-files");l=(0,n.default)("#repository-nav-commits");m=(0,n.default)("#repository-nav-branches");var e;a&&
c&&(e=(e=(0,n.default)("[data-revision-ref]","#repository-layout-revision-selector").data("revision-ref"))&&(e.id===a&&"commit"===e.type.id||e.id!==a&&("branch"===e.type.id||"tag"===e.type.id)&&/^[0-9a-f]{7,40}$/.test(a)));c=!(c&&e);a&&c?(a=decodeURIComponent(a),a!==f&&d.default.setSessionItem(g,a),p(a)):h&&c?d.default.removeSessionItem(g):f&&p(f);r.default.on("bitbucket.internal.layout.branch.revisionRefChanged",function(a){a&&(a.getIsDefault()?(q(),d.default.removeSessionItem(g)):(a=a.getId(),p(a),
d.default.setSessionItem(g,a)))});r.default.on("bitbucket.internal.*.*.revisionRefRemoved",function(a){var b=d.default.getSessionItem(g);b&&A.default.endsWith(a.id,b)&&(q(),d.default.removeSessionItem(g))})}};t.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-public-lozenge', location = '/static/bitbucket/internal/feature/repository/public-lozenge/public-lozenge.soy' */
// This file was automatically generated from public-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.publicLozenge = function(opt_data, opt_ignored) {
  return '' + ((true && (opt_data.repository['public'] || opt_data.repository.project['public'])) ? '<div class="public-lozenge aui-lozenge aui-lozenge-subtle">' + soy.$$escapeHtml('Public') + '</div>' : '');
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.publicLozenge.soyTemplateName = 'bitbucket.internal.feature.repository.publicLozenge';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:sidebar', location = '/static/bitbucket/internal/widget/sidebar/sidebar.js' */
define("bitbucket/internal/widget/sidebar/sidebar","module exports aui jquery bitbucket/internal/util/client-storage bitbucket/internal/util/events".split(" "),function(l,h,m,n,p,q){function r(){(0,c.default)(".aui-sidebar-submenu-dialog").attr("alignment","right middle").on("aui-show",function(a){a=(0,c.default)(a.target);var b=(0,c.default)(window).height();a.data("height")||a.data("height",a.height());if(a.data("height")>=b){var d=(0,c.default)(".aui-sidebar-group[aria-controls\x3d'"+a.attr("id")+
"']")[0].getBoundingClientRect().top;a.css("max-height",2*(Math.min(b-d,d)-50)+"px")}else a.data("height")>=a.height()&&a.css("max-height","100vh")}).on("mousewheel",function(a){var b=a.originalEvent.deltaY,d=(0,c.default)(a.target).closest(".aui-inline-dialog-contents"),e=d[0].scrollHeight-d.outerHeight();(d.scrollTop()===e&&0<=b||0===d.scrollTop()&&0>=b)&&a.preventDefault()})}function t(){b.$el.find(".aui-sidebar-group-actions ul").on("click","\x3e li \x3e a[data-web-item-key]",function(){f.default.trigger("bitbucket.internal.ui.sidebar.actions-menu.item.clicked",
null,{isCollapsed:!e.default.getItem("sidebar_expanded"),webItemId:(0,c.default)(this).attr("data-web-item-key")})});b.$el.find(".sidebar-navigation ul").on("click","\x3e li \x3e a[data-web-item-key]",function(){var a=(0,c.default)(this),b=!e.default.getItem("sidebar_expanded"),d=a.parentsUntil(".aui-sidebar-group").filter("ul").length;f.default.trigger("bitbucket.internal.ui.sidebar.item.clicked",null,{webItemId:a.attr("data-web-item-key"),isCollapsed:b,level:d})});b.$el.find(".sidebar-settings-group").on("click",
"a",function(){f.default.trigger("bitbucket.internal.ui.sidebar.settings.clicked",null,{webItemId:(0,c.default)(this).attr("data-web-item-key")})});b.$el.on("click",".aui-sidebar-toggle",function(a){g("button")});b.$el.on("click",".aui-sidebar-body",function(a){(0,c.default)(a.target).is(".aui-sidebar-body")&&g("sidebar")});k.default.whenIType("[").execute(function(){g("keyboard-shortcut")});b.on("expand-end collapse-end",function(a){(0,c.default)("aui-inline-dialog").removeAttr("open");(0,c.default)(".actions-trigger.active").trigger("aui-button-invoke");
(0,c.default)(".sidebar-actions-dialog").hide();a.isResponsive&&g("resize")})}function g(a){f.default.trigger("bitbucket.internal.ui.sidebar.collapse.change",null,{source:a,isCollapsed:!e.default.getItem("sidebar_expanded"),windowWidth:window.innerWidth})}Object.defineProperty(h,"__esModule",{value:!0});var k=babelHelpers.interopRequireDefault(m),c=babelHelpers.interopRequireDefault(n),e=babelHelpers.interopRequireDefault(p),f=babelHelpers.interopRequireDefault(q),b;h.default={preload:function(){var a=
!e.default.getItem("sidebar_expanded");(0,c.default)(document.body).toggleClass("aui-sidebar-collapsed",a);(0,c.default)(".aui-sidebar").attr("aria-expanded",!a)},onReady:function(){b=k.default.sidebar(".aui-sidebar");b.on("collapse-end",function(a){a.isResponsive||e.default.setItem("sidebar_expanded",!1);f.default.trigger("bitbucket.internal.feature.sidebar.collapseEnd")});b.on("expand-start",function(a){a.isResponsive&&!1===e.default.getItem("sidebar_expanded")&&a.preventDefault()});b.on("expand-end",
function(a){a.isResponsive||e.default.setItem("sidebar_expanded",!0);f.default.trigger("bitbucket.internal.feature.sidebar.expandEnd")});t();r()}};l.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:mirror-clone-selector-templates', location = '/static/bitbucket/internal/bbui/mirror-clone-selector/mirror-clone-selector.soy' */
// This file was automatically generated from mirror-clone-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.mirroringCloneSelector.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.mirroringCloneSelector == 'undefined') { bitbucket.internal.component.mirroringCloneSelector = {}; }


bitbucket.internal.component.mirroringCloneSelector.main = function(opt_data, opt_ignored) {
  return '<form class="aui mirroring-clone-selector"><label id="clone-from-label" for="available-mirrors-trigger">' + soy.$$escapeHtml('Clone from') + '</label><button id="available-mirrors-trigger" href="#available-mirrors" aria-owns="available-mirrors" aria-haspopup="true" class="aui-style-default aui-dropdown2-trigger aui-button aui-button-link" disabled>' + soy.$$escapeHtml(opt_data.primary.mirrorName) + '</button><div id="available-mirrors" class="aui-style-default aui-dropdown2"><ul id="available-mirror-list" class="aui-list-truncate">' + bitbucket.internal.component.mirroringCloneSelector.mirrorItem({item: opt_data.primary, extraClasses: 'primary'}) + '</ul></div><div id="update-push-url-container" class="hidden"><div class="aui-message aui-message-info message-subtle"><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Use this command to \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eupdate your push URL\x3c/a\x3e.',typeof ('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Clone+a+repository?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash#Clonearepository-mirrorclone') === 'number' ? 'http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Clone+a+repository?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash#Clonearepository-mirrorclone' : soy.$$escapeHtml('http:\/\/docs.atlassian.com\/bitbucketserver\/docs-052\/Clone+a+repository?utm_campaign=in-app-help&utm_medium=in-app-help&utm_source=stash#Clonearepository-mirrorclone')))) + '</p></div><input id="update-push-url-input" type="text" class="text quick-copy-text" readonly="readonly" spellcheck="false" /></div></form>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.mirroringCloneSelector.main.soyTemplateName = 'bitbucket.internal.component.mirroringCloneSelector.main';
}


bitbucket.internal.component.mirroringCloneSelector.mirrorItem = function(opt_data, opt_ignored) {
  return '<li class="mirror-item ' + soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses : '') + '" data-id="' + soy.$$escapeHtml(opt_data.item.id ? opt_data.item.id : '') + '"><a href="#">' + soy.$$escapeHtml(opt_data.item.mirrorName) + '</a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.mirroringCloneSelector.mirrorItem.soyTemplateName = 'bitbucket.internal.component.mirroringCloneSelector.mirrorItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:mirror-clone-selector', location = '/static/bitbucket/internal/bbui/mirror-clone-selector/mirror-clone-selector.js' */
define("bitbucket/internal/bbui/mirror-clone-selector/mirror-clone-selector",["module","exports","jquery","lodash","../widget/widget"],function(l,h,f,m,n){Object.defineProperty(h,"__esModule",{value:!0});var d=babelHelpers.interopRequireDefault(f),e=babelHelpers.interopRequireDefault(m);f=function(f){function g(a,c){babelHelpers.classCallCheck(this,g);var b=babelHelpers.possibleConstructorReturn(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,c));b.$el=(0,d.default)(a);b.availableMirrors=[];
b.clicked=!1;b.loaded=!1;b.preferredMirrorId=b.options.preferredMirrorId;b.cloneProtocol=b.options.cloneProtocol;b.init();return b}babelHelpers.inherits(g,f);babelHelpers.createClass(g,[{key:"addMirror",value:function(a){if(a.available){this.availableMirrors.push(a);var c=(0,d.default)("#available-mirror-list"),b=c.find("li.mirror"),k=(0,d.default)(bitbucket.internal.component.mirroringCloneSelector.mirrorItem({item:a,extraClasses:"mirror"}));(b=e.default.find(b,function(b){return(0,d.default)(b).text()>
a.mirrorName}))?k.insertBefore(b):k.appendTo(c);this.$trigger.removeAttr("disabled");this.preferredMirrorId!==a.id||this.clicked||this.selectMirror(a.id)}}},{key:"getCloneUrl",value:function(a){return e.default.get(e.default.find(a.links.clone,"name",this.getProtocol()),"href","")}},{key:"getProtocol",value:function(){return this.cloneProtocol}},{key:"hideDropdown",value:function(){this.$dropdown.is(":visible")&&this.$trigger.trigger("aui-button-invoke")}},{key:"init",value:function(){this.$el.html(bitbucket.internal.component.mirroringCloneSelector.main({primary:this.options.primary}));
this.$trigger=this.$el.find("#available-mirrors-trigger");this.$trigger.on("click",function(a){return a.preventDefault()});this.initDropdown()}},{key:"initDropdown",value:function(){var a=this;this.$dropdown=(0,d.default)("#available-mirrors");this.$dropdown.on("click",".mirror-item",function(c){c.preventDefault();a.selectMirror((0,d.default)(c.currentTarget).data("id"));a._updatePreferredMirror();a.clicked=!0})}},{key:"load",value:function(){var a=this;this.loaded||(this.loaded=!0,this.options.getMirrors().done(function(c){var b=
[];a.preferredMirrorId&&(b=e.default.remove(c,function(b){return b.id===a.preferredMirrorId}));b.forEach(function(b){a.loadMirror(b)});c.forEach(function(b){a.loadMirror(b)})}))}},{key:"loadMirror",value:function(a){var c=this;d.default.ajax({type:"GET",contentType:"application/json",url:a.url,dataType:"json"}).done(function(b){b.id=a.id;c.addMirror(b)})}},{key:"selectMirror",value:function(a){this.currentMirrorId=a;this.updateCloneUrl()}},{key:"showSetPushUpstream",value:function(a){var c=(0,d.default)("#update-push-url-container");
a?((0,d.default)("#update-push-url-input").val("git remote set-url --push origin "+this.getCloneUrl(this.options.primary)),c.removeClass("hidden")):c.addClass("hidden")}},{key:"updateCloneProtocol",value:function(a){this.cloneProtocol=a;this.updateCloneUrl();return a}},{key:"canWriteTo",value:function(a,c){return c.links.push&&c.links.push.some(function(b){return b.name===a})}},{key:"updateCloneUrl",value:function(){var a=void 0;this.currentMirrorId?(a=e.default.find(this.availableMirrors,"id",this.currentMirrorId),
this.showSetPushUpstream(!this.canWriteTo(this.cloneProtocol,a))):(a=this.options.primary,this.showSetPushUpstream(!1));this.currentMirrorId=a.id;this.$trigger.text(a.mirrorName);this.$trigger.css("maxWidth",this.$el.width()-this.$el.find("#clone-from-label").width()-15);this.options.updateCloneUrl(this.getProtocol(),this.getCloneUrl(a))}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.hideDropdown();this.$el.hide()}},{key:"_updatePreferredMirror",value:function(){this.preferredMirrorId=
this.currentMirrorId;this.options.updatePreferredMirror(this.preferredMirrorId)}}]);return g}(babelHelpers.interopRequireDefault(n).default);h.default=f;f.defaults={cloneProtocol:"http",preferredMirrorId:null,updateCloneUrl:e.default.noop,updatePreferredMirror:e.default.noop,getMirrors:function(){return d.default.when([])}};l.exports=h["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirror-clone-url', location = '/static/fragment/clone-url/clone-url-init.js' */
require(["jquery"],function(a){a(function(){require("feature/mirroring/clone-url").onReady()})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirror-clone-url', location = '/static/fragment/clone-url/clone-url.soy' */
// This file was automatically generated from clone-url.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.mirroring.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.mirroring == 'undefined') { bitbucket.mirroring = {}; }


bitbucket.mirroring.clone = function(opt_data, opt_ignored) {
  return '<div id="mirroring-clone-url-container"></div>';
};
if (goog.DEBUG) {
  bitbucket.mirroring.clone.soyTemplateName = 'bitbucket.mirroring.clone';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirror-clone-url', location = '/static/fragment/clone-url/clone-url.js' */
define("feature/mirroring/clone-url",["aui","jquery","lodash","bitbucket/util/navbuilder","bitbucket/util/state","bitbucket/internal/bbui/mirror-clone-selector/mirror-clone-selector","bitbucket/internal/util/ajax","bitbucket/internal/util/browser-window","bitbucket/internal/util/events",],function(h,d,x,g,e,s,m,i,a){var t;var b={"http-clone-url":"http","ssh-clone-url-default":"ssh","ssh-clone-url-alternate":"ssh",};function p(){return e.getRepository()}function c(){return p().id}function n(){return e.getProject().id}function l(y){return x.compact(x.map(y,function(B){var z=x.get(B,"links.self[0].href");if(z){var A=B.mirrorServer;return{id:A.id,name:A.name,baseUrl:A.baseUrl,url:z,}}return false}))}function j(){return{mirrorName:"Primary server",links:p().links,}}function f(y){if(!t){return}var z=b[y];if(z){t.updateCloneProtocol(z);t.show()}else{t.hide()}}function k(){return d(".clone-url .repository-protocol").text().toLowerCase()}function r(){return m.rest({url:g.rest("mirroring").addPathComponents("repos",c(),"mirrors").build(),statusCode:{"*":false,},}).then(function(y){return l(y.values||[])}).done(function(){a.on("bitbucket.internal.clone.dialog.hidden",t.hideDropdown)})}function w(y){a.trigger("bitbucket.internal.ui.mirroring.mirror.updated",null,{repositoryId:c(),projectId:n(),});m.rest({url:g.rest("mirroring").addPathComponents("account","settings","preferred-mirror").build(),contentType:"application/json",type:y?"POST":"DELETE",statusCode:{"*":false,},data:y,})}function q(z,y){var A=d(".clone-url .clone-url-input");A.val(y).select();a.trigger("bitbucket.internal.feature.repository.clone.mirror.changed",null,z,y)}function v(){if(!t){t=new s(document.getElementById("mirroring-clone-url-container"),{cloneProtocol:k(),getMirrors:r,preferredMirrorId:i.WRM.data.claim("com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:preferred-mirror.preferred-mirror-id"),primary:j(),updateCloneUrl:q,updatePreferredMirror:w,});t.load()}}function o(){a.off("bitbucket.internal.feature.repository.clone.protocol.initial",f);a.off("bitbucket.internal.feature.repository.clone.protocol.changed",f);d(i.document).off("mouseenter focus click","#clone-repo-button",v)}function u(){a.on("bitbucket.internal.feature.repository.clone.protocol.initial",f);a.on("bitbucket.internal.feature.repository.clone.protocol.changed",f);d(i.document).on("mouseenter focus click","#clone-repo-button",v)}return{onReady:u,cleanup:function(){o();t=undefined},}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirroring-clone-urls', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream','key':'mirroring-clone-urls','moduleKey':'mirroring-clone-urls','completeModuleKey':'com.atlassian.bitbucket.server.bitbucket-mirroring-upstream:mirroring-clone-urls','weight':10.0,'params':{},'location':'bitbucket.web.repository.clone.dialog.options','view':function(ctx) { return WebFragments._getValue((bitbucket.mirroring.clone), ctx); }});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-layout', location = '/static/bitbucket/internal/layout/repository/repository.js' */
define("bitbucket/internal/layout/repository/repository","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/feature/repository/sticky-branches bitbucket/internal/model/page-state bitbucket/internal/model/repository bitbucket/internal/util/events bitbucket/internal/widget/quick-copy-text bitbucket/internal/widget/sidebar/sidebar".split(" "),function(q,g,r,t,u,v,w,x,y,z,A){function B(c){c=new C.default(c);n.default.setRepository(c);n.default.setProject(c.getProject());(0,a.default)(".aui-page-header-image \x3e a").on("click",
function(){h.default.trigger("bitbucket.internal.sidebar.clickAvatar.expanded."+(0,a.default)(".aui-sidebar").attr("aria-expanded"),null)})}function l(){return(0,a.default)(".clone-url")}function p(){return(0,a.default)(".repository-protocol")}function D(){var c=l(),b=p(),k=(0,a.default)("#"+b.attr("aria-controls")),d=k.find("li"),e,f,g="";b.is("button")?(m(b,b.text()),e=b.attr("data-clone-url"),f=b.attr("data-module-key")):(m(b,d.first().children("a").text()),e=d.first().attr("data-clone-url"),f=
d.first().attr("data-module-key"));l().find(".clone-url-input").attr("value",e);c.addClass(f);g=f;(0,a.default)(document).on("click","#repository-protocol-selector li",function(d){var e=(0,a.default)(this);m(p(),e.text());l().find(".clone-url-input").attr("value",e.attr("data-clone-url")).select();f=e.attr("data-module-key");c.removeClass(g).addClass(f);g=f;h.default.trigger("bitbucket.internal.feature.repository.clone.protocol.changed",null,f,e.attr("data-clone-url"));d.stopPropagation();k.is(":visible")&&
b.trigger("aui-button-invoke");d.preventDefault()});h.default.trigger("bitbucket.internal.feature.repository.clone.protocol.initial",null,f,e)}function m(c,b){var a=c.children("span").remove();c.text(b).append(a)}function E(c){function b(){d&&d.open&&(d.open=!1)}var k,d;(0,a.default)(c).attr("aria-controls","repo-clone-dialog");(0,a.default)(document).on("click",c,function(b){b.preventDefault();e();d.open=!0;k.select()});var e=F.default.once(function(){d=document.getElementById("repo-clone-dialog");
k=(0,a.default)(d).find(".clone-url-input");h.default.on("bitbucket.internal.feature.sidebar.collapseEnd",b);h.default.on("bitbucket.internal.feature.sidebar.expandEnd",b)});(0,a.default)("#clone-dialog-options").html(bitbucket.internal.layout.cloneDialogOptions())}function G(){var c=(0,a.default)(".aui-page-header-actions .create-pull-request");h.default.on("bitbucket.internal.layout.branch.revisionRefChanged",function(b){var a=H.default.currentRepo().createPullRequest();!b.isDefault()&&b.isBranch()&&
(a=a.sourceBranch(b.getId()));c.attr("href",a.build())})}function I(){(0,a.default)(".aui-sidebar[aria-expanded\x3dfalse] .aui-page-header-image").tooltip({gravity:"w",delayIn:0,live:!0,html:!0,aria:!0,className:"aui-sidebar-section-tooltip",title:function(){return(0,a.default)(this).find(".aui-avatar").attr("data-tooltip")}})}Object.defineProperty(g,"__esModule",{value:!0});var a=babelHelpers.interopRequireDefault(r),F=babelHelpers.interopRequireDefault(t),H=babelHelpers.interopRequireDefault(u),
J=babelHelpers.interopRequireDefault(v),n=babelHelpers.interopRequireDefault(w),C=babelHelpers.interopRequireDefault(x),h=babelHelpers.interopRequireDefault(y),K=babelHelpers.interopRequireDefault(z),L=babelHelpers.interopRequireDefault(A);g.default={onReady:function(c,b){B(c);D();K.default.onReady();(0,a.default)(document).ready(L.default.onReady);J.default.onReady();E(b);G();(0,a.default)(".repository-badge .badge").tooltip({gravity:"n"});I();h.default.on("bitbucket.internal.widget.keyboard-shortcuts.register-contexts",
function(a){a.enableContext("repository")})}};q.exports=g["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-layout', location = '/static/bitbucket/internal/layout/repository/repository.soy' */
// This file was automatically generated from repository.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.layout.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.layout == 'undefined') { bitbucket.internal.layout = {}; }


bitbucket.internal.layout.cloneDialogOptions = function(opt_data, opt_ignored) {
  var output = '';
  var webPanelList3 = WebFragments.getWebPanels('bitbucket.web.repository.clone.dialog.options').map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var webPanelListLen3 = webPanelList3.length;
  for (var webPanelIndex3 = 0; webPanelIndex3 < webPanelListLen3; webPanelIndex3++) {
    var webPanelData3 = webPanelList3[webPanelIndex3];
    output += soy.$$escapeHtml(webPanelData3);
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.layout.cloneDialogOptions.soyTemplateName = 'bitbucket.internal.layout.cloneDialogOptions';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-sourcetree-plugin:sourcetree-button-panel', location = '/static/button-panel/sourcetree-button-panel.soy' */
// This file was automatically generated from sourcetree-button-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.sourceTree.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.sourceTree == 'undefined') { bitbucket.sourceTree = {}; }


bitbucket.sourceTree.buttonPanel = function(opt_data, opt_ignored) {
  return '<div class="sourcetree-panel">' + bitbucket.internal.buttons.button({buttonText: opt_data.buttonText, id: opt_data.buttonId, extraClasses: 'sourcetree-button', href: opt_data.sourceTreeActionUrl, isPrimary: true}) + '<p>' + soy.$$filterNoAutoescape(AJS.format('{0} is the free Git and Mercurial client for Windows or Mac.','<a href="http://www.sourcetreeapp.com" target="_blank">Atlassian SourceTree</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  bitbucket.sourceTree.buttonPanel.soyTemplateName = 'bitbucket.sourceTree.buttonPanel';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-sourcetree-plugin:sourcetree-clone', location = '/static/sourcetree-clone/sourcetree-clone.js' */
define("plugin/sourcetree/sourcetree-clone",["jquery","aui","bitbucket/util/events","bitbucket/util/navbuilder","bitbucket/util/state","exports"],function(f,c,e,g,d,b){var a=function(j,k){var i=d.getCurrentUser();var h="sourcetree://cloneRepo?type=stash&baseWebUrl="+encodeURIComponent(window.location.origin+c.contextPath())+"&cloneUrl="+encodeURIComponent(k);if(i){h=h+"&user="+encodeURIComponent(i.name)}f("#sourcetree-clone-button").attr("href",h)};b.onReady=function(){e.on("bitbucket.internal.feature.repository.clone.mirror.changed",a);e.on("bitbucket.internal.feature.repository.clone.protocol.changed",a);e.on("bitbucket.internal.feature.repository.clone.protocol.initial",a)}});require("plugin/sourcetree/sourcetree-clone").onReady();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-validator-register', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/validator-register.js' */
("undefined"===typeof window?global:window).__94a6aae68277f018287e916fc78c8f6f=function(){var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,h=a&&a.__esModule?a:{"default":a},e;if((a=__cf890abdf040e0993fb71f2f839bc972)&&a.__esModule)e=a;else{var f={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(f[b]=a[b]);f.default=a;e=f}b=(b=__574ac67f906effeb9d8ec2753b23cf28)&&b.__esModule?b:{"default":b};var i=["displayfield",
"watchfield","when","novalidate","state"],g=[],a={register:function(a,b){var c;if("string"===typeof a)c=a;else{var d=!1;a.some(function(a){var b=-1!==h.default.inArray(a,i);b&&(d=a);return b});if(c=d)return e.warn('Validators cannot be registered with the argument "'+c+'", as it is a reserved argument.'),!1;c="[data-aui-validation-"+a.join("],[data-aui-validation-")+"]"}c={validatorFunction:b,validatorTrigger:c};g.push(c);return c},validators:function(){return g}};(0,b.default)("aui/form-validation/validator-register",
a);d.default=a;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-basic-validators', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/basic-validators.js' */
("undefined"===typeof window?global:window).__77ff03c875a3139933c9425d867b4b55=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function i(a){var b=a.el.value.length,d=0===b,c=parseInt(a.args("minlength"),10),e=parseInt(a.args("maxlength"),10);c&&e&&c===e&&!d&&b!==c?(b=f("exactlength",a.args,[c]),a.invalidate(b)):c&&b<c&&!d?(b=f("minlength",a.args),a.invalidate(b)):e&&b>e?(b=f("maxlength",a.args),a.invalidate(b)):a.validate()}function j(a,b){var d=a.match(b);return!d?!1:a===d[0]}function k(a){var b=
f("pattern",a.args);j(a.el.value,RegExp(a.args("pattern")))?a.validate():a.invalidate(b)}function l(a){var b=f("required",a.args);a.el.value?a.validate():a.invalidate(b)}function m(a){var b=f("validnumber",a.args),d=parseInt(a.el.value,10);if(isNaN(d))a.invalidate(b);else{var b=a.args("min"),c=a.args("max");b&&d<parseInt(b,10)?a.invalidate(f("min",a.args)):c&&d>parseInt(c,10)?a.invalidate(f("max",a.args)):a.validate()}}function f(a,b,d){var c;c=void 0!==AJS.I18n.keys?AJS.I18n.keys["aui.validation.message."+
a]:n[a];var e=d;d||(e=[b(a)]);c=(a=b(a+"-msg"))?[a].concat(e):[c].concat(e);return AJS.format.apply(null,c)}"use strict";var o=h(__307d3e18fd611f85395c67cddeb1fe24),p=h(__574ac67f906effeb9d8ec2753b23cf28);h(__57111a90131a66c211cf7209c7270167);h(__d74c881c8f23921c15438d0f30c99f80);var g=h(__94a6aae68277f018287e916fc78c8f6f);g.default.register(["maxlength","minlength"],i);g.default.register("[maxlength],[minlength]",i);g.default.register(["matchingfield"],function(a){var b=a.el.value,d=document.getElementById(a.args("matchingfield")),
c=d.value,e=f("matchingfield",a.args,[b,c]);if("password"===a.el.getAttribute("type")||"password"===d.getAttribute("type"))e=f("matchingfield-novalue",a.args);!b||!c?a.validate():c!==b?a.invalidate(e):a.validate()});g.default.register(["doesnotcontain"],function(a){var b=f("doesnotcontain",a.args);-1===a.el.value.indexOf(a.args("doesnotcontain"))?a.validate():a.invalidate(b)});g.default.register(["pattern"],k);g.default.register("[pattern]",k);g.default.register(["required"],l);g.default.register("[required]",
l);g.default.register(["min","max"],m);g.default.register("[min],[max]",m);g.default.register(["dateformat"],function(a){var b=a.args("dateformat"),d=f("dateformat",a.args),c={Y:"[0-9]{4}",y:"[0-9]{2}",m:"(0?[1-9]|10|11|12)",M:"[Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec]",D:"[Mon|Tue|Wed|Thu|Fri|Sat|Sun]",d:"([0-2]?[1-9]|10|20|30|31)"},e="";b.split("").forEach(function(a){e=c.hasOwnProperty(a)?e+c[a]:e+a});j(a.el.value,RegExp(e+"$","i"))?a.validate():a.invalidate(d)});g.default.register(["minchecked",
"maxchecked"],function(a){var b=(0,o.default)(a.el).find(":checked").length,d=!a.args("minchecked")||b>=a.args("minchecked"),b=!a.args("maxchecked")||b<=a.args("maxchecked"),c=f("minchecked",a.args),e=f("maxchecked",a.args);d&&b?a.validate():d?b||a.invalidate(e):a.invalidate(c)});var n={minlength:"Must be greater than or equal to {0} characters",maxlength:"Must be fewer than or equal to {0} characters",exactlength:"Must be exactly {0} characters",matchingfield:"{0} and {1} do not match.",
"matchingfield-novalue":"These fields do not match.",doesnotcontain:"Do not include the phrase {0} in this field",pattern:"This field does not match the required format",required:"This is a required field",validnumber:"Please enter a valid number",min:"Enter a value greater than {0}",max:"Enter a value less than {0}",dateformat:"Enter a valid date",
minchecked:"Tick at least {0}.",maxchecked:"Tick at most {0}."};(0,p.default)("aui/form-validation/basic-validators");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation.js' */
("undefined"===typeof window?global:window).__78dc5665b5e74967a85beca962aed6d5=function(){function k(a){return a&&a.__esModule?a:{"default":a}}function v(a){if(o(a,"novalidate"))l(a,m);else{r(s(a),"none");var b=[];t.default.validators().forEach(function(c,d){a.is(c.validatorTrigger)&&b.push(d)});l(a,f);var c=[];b.forEach(function(b){var b=t.default.validators()[b].validatorFunction,d=new e.default.Deferred,f={validate:function(){d.resolve()},invalidate:function(b){l(a,g,b);d.reject()},args:function(b){return a.attr("data-"+
w+b)||a.attr(b)},el:a[0],$el:a};AJS.deprecate.prop(f,"$el",{sinceVersion:"5.9.0",removeInVersion:"5.10.0",alternativeName:"el",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-3263."});b(f);c.push(d)});var d=e.default.when.apply(e.default,c);d.done(function(){l(a,m)});return d}}function o(a,b){var c={when:"change"},d=a.attr("data-"+w+b);d||(d=c[b]);return d}function l(a,b,c){a.attr("data-"+n,b);if(b!==i){a.trigger(e.default.Event(x));var d=s(a),h={};h[f]="wait";h[g]="error";h[m]="success";
h=h[b];b===f?setTimeout(function(){a.attr("data-"+n)===f&&r(a,"wait")},500):r(d,h,c)}}function r(a,b,c){var d=a.is("["+j+"wait]");a.removeAttr(j+"wait");a.removeAttr(j+"success");if("success"!==b||d)"none"===b?a.removeAttr(j+"error"):(d=a.attr(j+b)||"[]",c?(c=JSON.parse(d).concat([c]),c=JSON.stringify(c)):c="",a.attr(j+b,c))}function s(a){var b=o(a,"displayfield");return void 0===b?a:(0,e.default)("#"+b)}function y(a,b){b.preventDefault();a.one(x,function(){a.trigger("submit")})}var p={};"use strict";
Object.defineProperty(p,"__esModule",{value:!0});var e=k(__307d3e18fd611f85395c67cddeb1fe24);__9803410207c491fb00e8f693e987aa8e;__77ff03c875a3139933c9425d867b4b55;var z=k(__574ac67f906effeb9d8ec2753b23cf28),A=k(__4d02fe17b8e885a34493e34af3d145dd),u=k(__c1ce1f1e3e613f564fc234ff043570f1),t=k(__94a6aae68277f018287e916fc78c8f6f),w="aui-validation-",j="data-aui-notification-",n="aui-validation-state",g="invalid",m="valid",f="validating",i="unvalidated",x="_aui-internal-field-state-changed";(0,e.default)(document).on("submit",
function(a){var b=a.target,b=(0,e.default)(b),c;c=b.find("._aui-form-validation-initialised");var d=e.default.map(c,function(a){return(0,e.default)(a).attr("data-"+n)});c=-1!==d.indexOf(g);var h=-1!==d.indexOf(i),d=-1!==d.indexOf(f);c=c?g:h?i:d?f:m;c===i?(y(b,a),b.find("[data-"+n+"="+i+"]").each(function(a,b){q.validate((0,e.default)(b))})):c===f?y(b,a):c===g?(a.preventDefault(),b.find("[data-"+n+"="+g+"]").first().focus()):c===m&&(c=e.default.Event("aui-valid-submit"),b.trigger(c),c.isDefaultPrevented()&&
a.preventDefault())});var q={register:t.default.register,validate:function(a){a=(0,e.default)(a);v(a)}};(0,u.default)("data-aui-validation-field",{attached:function(a){a.form&&a.form.setAttribute("novalidate","novalidate");var b=(0,e.default)(a);if(!b.hasClass("_aui-form-validation-initialised")){s(b).attr("data-aui-notification-field","");b.addClass("_aui-form-validation-initialised");var c,d=function(){b.trigger("aui-stop-typing")};b.on("keyup",function(){clearTimeout(c);c=setTimeout(d,1500)});
var f=o(b,"when"),g=o(b,"watchfield");(g?b.add("#"+g):b).on(f,function(){v(b)});l(b,i)}u.default.init(a)},type:u.default.type.ATTRIBUTE});(0,z.default)("aui/form-validation",q);(0,A.default)("formValidation",q);p.default=q;return p=p["default"]}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:delete-dialog', location = '/static/bitbucket/internal/widget/delete-dialog/delete-dialog.soy' */
// This file was automatically generated from delete-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.deleteDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Are you sure that you want to delete {0}{1}{2}?','<b class="display-name">','','</b>')) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.deleteDialog.soyTemplateName = 'bitbucket.internal.widget.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:delete-dialog', location = '/static/bitbucket/internal/widget/delete-dialog/delete-dialog.js' */
define("bitbucket/internal/widget/delete-dialog/delete-dialog",["module","exports","aui","jquery","bitbucket/internal/widget/confirm-dialog"],function(e,b,f,n,p){Object.defineProperty(b,"__esModule",{value:!0});var g=babelHelpers.interopRequireDefault(f),k=babelHelpers.interopRequireDefault(n),q=babelHelpers.interopRequireDefault(p);b.default={bind:function(b,c,e,f,l,m){c=new q.default({id:"delete-dialog",titleClass:"warning-header",titleText:c,panelContent:bitbucket.internal.widget.deleteDialog(),
submitText:"Delete",focusSelector:".button-panel-cancel-link"},{type:"DELETE",statusCode:{"*":!1}});var h=function(b){(0,k.default)("#content .aui-page-panel .notifications").empty().html(b)};c.addConfirmListener(function(b,c){b.done(function(a){a=a?a.displayName?a.displayName:a.name?a.name:"":"";var b=e.replace("{0}",g.default.escapeHtml(a));(a=!l||l(a,c))&&!a.promise?h(aui.message.success({content:b})):a&&a.promise&&a.done(function(){h(aui.message.success({content:b}))})}).fail(function(a,
b,c,d){a=g.default.escapeHtml(d&&d.errors&&d.errors[0]&&d.errors[0].message?d.errors[0].message:f);h(aui.message.error({content:a}))})});c.attachTo(b,function(b,c){var a=m?m():(0,k.default)(b).data("for");c.getPanel(0).body.find(".display-name").text(a)})}};e.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:paragraph', location = '/static/bitbucket/internal/widget/paragraph.soy' */
// This file was automatically generated from paragraph.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.widget.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.widget == 'undefined') { bitbucket.internal.widget = {}; }


bitbucket.internal.widget.paragraph = function(opt_data, opt_ignored) {
  return '<p' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.widget.paragraph.soyTemplateName = 'bitbucket.internal.widget.paragraph';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket/internal/feature/repository-shortcuts/repository-shortcuts.js' */
define("bitbucket/internal/feature/repository-shortcuts/repository-shortcuts","exports aui jquery lodash bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/util/analytics bitbucket/internal/util/dom-event bitbucket/internal/util/promise ./generate-label-from-url".split(" "),function(h,E,F,G,H,I,J,K,L,M,N){function O(a){var c=b.children().length;3<=c?(4<=c&&g.append(b.children().last()),g.children().length?g.append(a):b.append(a)):b.append(a);l()}function l(){m.toggleClass("hidden-when-collapsed",
!b.children().length);n.toggleClass("hidden",!g.children().length)}function u(a,c,P){return function(f){f=(0,e.default)(f);var b=f.find(a),q=(0,e.default)("#"+f.attr("data-web-item-id"));b.on("click",function(a){a.preventDefault();var f=v(q);a=c(f);var b=(0,e.default)(bitbucket.internal.feature.repository.shortcuts.actionDialog(babelHelpers.extends({id:q.attr("id")+a.idSuffix,submitLabel:"Save"},a))),g=b.find("form"),p=function(){return d.default.dialog2(b).remove()},
h=function(){return w(b.find(".submit-dialog"),P(f,q,b)).then(p)};b.on("aui-hide",k.default.debounce(function(){d.default.dialog2(b).isVisible()&&p()})).on("click",".close-dialog",function(){p()}).on("click",".submit-dialog",function(){g.length?g.submit():h()}).keypress(function(a){a.which!==d.default.keyCode.ENTER||(0,e.default)(document.activeElement).is("a, button")||(g.length?g.submit():h())}).on("aui-valid-submit","form",function(a){a.preventDefault();h()});if(a.isDestructive)b.on("aui-show",
k.default.debounce(function(){return b.find(".close-dialog").focus()}));d.default.dialog2(b).show()})}}Object.defineProperty(h,"__esModule",{value:!0});h.onReady=function(){m=(0,e.default)('.section-featured-items[data-web-section-key\x3d"bitbucket.web.sidebar.repository.nav.shortcuts"]');b=m.children(".aui-nav");n=(0,e.default)('.section-overflow-items[data-web-section-key\x3d"bitbucket.web.sidebar.repository.nav.shortcuts"]');g=n.children(".aui-nav");Q();(0,e.default)(".sidebar-actions-dialog").each(function(a,
c){return x(c)});l();(0,e.default)('.aui-sidebar-group[data-web-section-key\x3d"bitbucket.web.sidebar.repository.nav.shortcuts"] \x3e ul \x3e li \x3e a').on("mousedown",y);R()};var d=babelHelpers.interopRequireDefault(E),e=babelHelpers.interopRequireDefault(F),k=babelHelpers.interopRequireDefault(G);h=babelHelpers.interopRequireDefault(H);var r=babelHelpers.interopRequireDefault(I),S=babelHelpers.interopRequireDefault(J),T=babelHelpers.interopRequireDefault(K),U=babelHelpers.interopRequireDefault(L),
V=babelHelpers.interopRequireDefault(M),W=babelHelpers.interopRequireDefault(N),m=void 0,b=void 0,n=void 0,g=void 0,t=h.default.rest("repository-shortcuts").currentRepo().addPathComponents("shortcuts"),v=function(a){return{id:a.attr("id").split("-").pop(),url:a.attr("href"),label:a.find(".aui-nav-item-label").text()}},z=function(a){return{url:a.find("#shortcut-form-url").val(),label:a.find("#shortcut-form-label").val()}},y=function(a){T.default.add("stash.client.repository.shortcut.clicked",{openInSameTab:U.default.openInSameTab(a),
repositoryId:S.default.getRepository().id,shortcutId:v((0,e.default)(a.currentTarget)).id})},w=function(a,c){a.prop("disabled",!0);c.then(function(){return a.prop("disabled",!1)},function(){return a.prop("disabled",!1)});return V.default.spinner(a.siblings(".button-spinner"),c,null,null,Boolean("keep"))},A=[0,401],B=function(a){switch(a){case "BAMBOO":return"icon-bamboo";case "BITBUCKET_CLOUD":return"icon-bitbucket";case "BITBUCKET_SERVER":return"icon-bitbucket";case "CONFLUENCE":return"icon-confluence";
case "HIPCHAT":return"icon-hipchat";case "JIRA":return"icon-jira";case "TRELLO":return"icon-trello";default:return"icon-link"}},Y=function(a){C(a);return r.default.rest({url:t.build(),type:"POST",data:z(a),statusCode:{0:!0,401:!0,"*":!1}}).done(X).fail(D(a.find("form"),A))},Q=function(){(0,e.default)("#add-repo-shortcut-trigger").attr({"aria-controls":"add-shortcut-dialog"}).click(function(a){a.preventDefault();var c=(0,e.default)(bitbucket.internal.feature.repository.shortcuts.addDialog({alignment:"right bottom",
dialogId:"add-shortcut-dialog"})).attr("open","true").appendTo(document.body).on("aui-hide",function(){return c.remove()}).on("click","#add-shortcut-cancel",function(a){a.preventDefault();c.remove()}).on("aui-valid-submit","form",function(a){a.preventDefault();w((0,e.default)("#create-link"),Y(c)).then(function(){return c.remove()})}),b=c.find("#shortcut-form-label"),f=c.find("#shortcut-form-url"),d=k.default.debounce(function(){return b.val((0,W.default)(f.val()).substring(0,255))},10);f.on("input",
d);b.one("input",function(){return f.off("input",d)});f.focus()})},Z=[u(".edit-shortcut",function(a){return{idSuffix:"-edit-dialog",title:"Edit shortcut",content:soydata.VERY_UNSAFE.ordainSanitizedHtml(bitbucket.internal.feature.repository.shortcuts.dialogForm(a))}},function(a,c,b){C(b);return r.default.rest({url:t.addPathComponents(a.id).build(),type:"PUT",data:z(b),statusCode:{0:!0,401:!0,"*":!1}}).done(function(a){var b=a.label,d=a.productType;
c.attr("href",a.url);c.find(".aui-nav-item-label").text(b);c.find(".aui-icon").prop("className","aui-icon aui-icon-small "+B(d))}).fail(D(b.find("form"),A))}),u(".delete-shortcut",function(a){return{idSuffix:"-delete-dialog",isDestructive:!0,title:"Delete shortcut",content:soydata.VERY_UNSAFE.ordainSanitizedHtml(bitbucket.internal.feature.repository.shortcuts.deleteDialogContent(a)),submitLabel:"Delete"}},
function(a,c,d){return r.default.rest({url:t.addPathComponents(a.id).build(),type:"DELETE",statusCode:{404:!1}}).then(null,function(a){return 404===a.status?e.default.Deferred().resolve():e.default.Deferred().reject()}).done(function(){var a=c.closest("li");a.closest(g).length?a.remove():(a.remove(),2===b.children().length&&b.append(g.children().first()));1===g.children().length&&b.append(g.children());l()})})],x=function(a){return Z.forEach(function(c){return c(a)})},X=function(a){var c=a.id,b=a.url,
f=a.label;a=a.productType;a=(0,e.default)(bitbucket.internal.feature.repository.shortcuts.clientShortcut({id:c,url:b,label:f,iconClass:B(a)})).on("mousedown","a",y);c=(0,e.default)(bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog({id:c,url:b,label:f,moduleKey:"bitbucket.web.sidebar.repository.nav.shortcut."+c,actions:[{styleClass:"edit-shortcut",linkText:"Edit"},{styleClass:"delete-shortcut",linkText:"Delete"}]}));
O(a);c.insertAfter(".add-shortcut-panel").each(function(a,c){return x(c)})},C=function(a){a.find(".aui-message-error").remove()},D=function(a,c){return function(b){-1===c.indexOf(b.status)&&a.prepend(d.default.messages.error({body:k.default.get(b,"responseJSON.errors[0].message")||"An unexpected error has occurred. Try refreshing the page.",closeable:!1}))}},R=function(){_PageDataPlugin.ready("com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-url-scheme-whitelist-provider",
"bitbucket.layout.repository",function(a){a?d.default.formValidation.register(["repo-shortcut-url-scheme"],function(c){var b=c.el.value||"";-1===b.indexOf(":")?c.invalidate("A URL scheme is required - did you forget https://?"):a.urlSchemeWhitelist.some(function(a){return 0===b.indexOf(a)})?c.validate():c.invalidate(d.default.format("The scheme \u0027\u0027{0}\u0027\u0027 isn\u0027\u0027t on your whitelist. Your administrator can add it.",/^.*?:(\/\/)?/.exec(b)[0]))}):console.warn("Could not find Repo Shortcut schemes. Is this code being loaded on the wrong page?")})}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket/internal/feature/repository-shortcuts/generate-label-from-url.js' */
define("bitbucket/internal/feature/repository-shortcuts/generate-label-from-url",["module","exports"],function(d,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(c){if(0==="https".indexOf(c))return"";var b=/:(\/\/)?/.exec(c);if(!b)return c;var b=b.index+b[0].length,a=c.indexOf("/",b);return c.substring(b,-1===a?void 0:a)};d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket/internal/feature/repository-shortcuts/repository-shortcuts.soy' */
// This file was automatically generated from repository-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.shortcuts.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }
if (typeof bitbucket.internal.feature.repository.shortcuts == 'undefined') { bitbucket.internal.feature.repository.shortcuts = {}; }


bitbucket.internal.feature.repository.shortcuts.addDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="' + soy.$$escapeHtml(opt_data.dialogId) + '" alignment="' + soy.$$escapeHtml(opt_data.alignment) + '" class="repo-shortcut-dialog"><h3>' + soy.$$escapeHtml('Add shortcut') + '</h3>' + bitbucket.internal.feature.repository.shortcuts.dialogForm(soy.$$augmentMap(opt_data, {extraContent: '<div class="field-group">' + widget.aui.form.buttons({content: '' + widget.aui.form.submit({id: 'create-link', isPrimary: false, label: 'Add'}) + widget.aui.form.cancelButton({id: 'add-shortcut-cancel'}) + '<div class="button-spinner"></div>'}) + '</div>'})) + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.addDialog.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.addDialog';
}


bitbucket.internal.feature.repository.shortcuts.actionDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.id) + '" class="repo-shortcut-dialog aui-layer aui-dialog2 aui-dialog2-small' + ((opt_data.isDestructive) ? ' destructive-header' : '') + '" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml(opt_data.title) + '</h2></header><div class="aui-dialog2-content">' + soy.$$escapeHtml(opt_data.content) + '</div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><div class="button-spinner"></div><button class="aui-button' + ((! opt_data.isDestructive) ? '  aui-button-primary' : '') + ' submit-dialog">' + soy.$$escapeHtml(opt_data.submitLabel) + '</button><button class="aui-button aui-button-link close-dialog">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.actionDialog.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.actionDialog';
}


bitbucket.internal.feature.repository.shortcuts.deleteDialogContent = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Are you sure you want to delete \x3cstrong\x3e{0}\x3c/strong\x3e (\x3ca href\x3d\x22{1}\x22\x3e{1}\x3c/a\x3e)?',typeof (opt_data.label) === 'number' ? opt_data.label : soy.$$escapeHtml(opt_data.label),typeof (opt_data.url) === 'number' ? opt_data.url : soy.$$escapeHtml(opt_data.url)))) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.deleteDialogContent.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.deleteDialogContent';
}


bitbucket.internal.feature.repository.shortcuts.dialogForm = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + bitbucket.internal.widget.form({action: '', autocomplete: 'off', extraClasses: 'top-label repo-shortcut-form', content: '' + widget.aui.form.text({id: 'shortcut-form-url', labelContent: 'URL', initialValue: opt_data.url ? opt_data.url : '', extraAttributes: {'data-aui-validation-field': '', minlength: 0, maxlength: 450, required: true, 'required-msg': 'Required', 'data-aui-validation-repo-shortcut-url-scheme': ''}, placeholderText: 'https://www.atlassian.com'}) + widget.aui.form.text({id: 'shortcut-form-label', labelContent: 'Label', initialValue: opt_data.label ? opt_data.label : '', extraAttributes: {'data-aui-validation-field': '', minlength: 0, maxlength: 255, required: true, 'required-msg': 'Required'}, placeholderText: 'Atlassian'}) + ((opt_data.extraContent) ? soy.$$filterNoAutoescape(opt_data.extraContent) : '')});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.dialogForm.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.dialogForm';
}


bitbucket.internal.feature.repository.shortcuts.clientShortcut = function(opt_data, opt_ignored) {
  return '' + widget.aui.sidebarNavItem({id: 'repo-shortcut-url-' + opt_data.id, iconClass: 'aui-icon-small ' + opt_data.iconClass, actionContent: '' + bitbucket.internal.buttons.button({buttonText: '', extraClasses: 'actions-trigger aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'aria-owns="repo-shortcut-url-' + opt_data.id + '-actions-dialog' + '" aria-haspopup="true"', iconType: 'aui', iconText: 'More', iconClass: 'aui-icon-small aui-iconfont-more'}), text: opt_data.label, url: opt_data.url});
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.clientShortcut.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.clientShortcut';
}


bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog = function(opt_data, opt_ignored) {
  var output = '<div id="repo-shortcut-url-' + soy.$$escapeHtml(opt_data.id) + '-actions-dialog" class="aui-style-default aui-dropdown2 sidebar-actions-dialog" data-web-item-id="repo-shortcut-url-' + soy.$$escapeHtml(opt_data.id) + '"><ul class="aui-list-truncate">';
  var actionList90 = opt_data.actions;
  var actionListLen90 = actionList90.length;
  for (var actionIndex90 = 0; actionIndex90 < actionListLen90; actionIndex90++) {
    var actionData90 = actionList90[actionIndex90];
    output += '<li>' + bitbucket.internal.widget.webItem(soy.$$augmentMap(actionData90, {url: actionData90.url ? actionData90.url : '#'})) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog.soyTemplateName = 'bitbucket.internal.feature.repository.shortcuts.clientShortcutDialog';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-repository-shortcuts:repository-shortcuts-frontend', location = '/bitbucket/internal/feature/repository-shortcuts/repository-shortcuts-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/repository-shortcuts/repository-shortcuts").onReady()});;
;
/* module-key = 'com.atlassian.stash.ssh-plugin:ssh-clone-soy', location = '/views/clone/ssh-clone.soy' */
// This file was automatically generated from ssh-clone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.ssh.clone.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.ssh == 'undefined') { bitbucket.internal.feature.ssh = {}; }
if (typeof bitbucket.internal.feature.ssh.clone == 'undefined') { bitbucket.internal.feature.ssh.clone = {}; }


bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptSidebar = function(opt_data, opt_ignored) {
  return '<div id="user-add-key-clone-prompt">' + bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt(opt_data) + '</div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptSidebar.soyTemplateName = 'bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptSidebar';
}


bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptEmptyRepo = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('I just want to clone this repository') + '</h4>' + bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt(opt_data);
};
if (goog.DEBUG) {
  bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptEmptyRepo.soyTemplateName = 'bitbucket.internal.feature.ssh.clone.userAddKeyClonePromptEmptyRepo';
}


bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('You must add an SSH key to your profile to clone this repository.') + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x3ca href\x3d\x22{0}\x22\x3eAdd key\x3c/a\x3e',typeof (opt_data.addKeyUrl) === 'number' ? opt_data.addKeyUrl : soy.$$escapeHtml(opt_data.addKeyUrl)))) + '</p>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt.soyTemplateName = 'bitbucket.internal.feature.ssh.clone.userAddKeyClonePrompt';
}
;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var e="x-atlassian-mau-ignore";var d=XMLHttpRequest.prototype.send;var a=window.fetch;var b=false;return{install:function(){if(!b&&c.supported){XMLHttpRequest.prototype.send=function(){if(c.isHidden()){this.setRequestHeader(e,c.isHidden())}d.apply(this,arguments)};if(a){window.fetch=function(f,i){var g=i||{};var h=g.headers;if(c.isHidden()){g.headers=(h)?new Headers(h):new Headers();g.headers.append(e,c.isHidden())}return a.call(this,f,g)}}b=true}},uninstall:function(){if(b){XMLHttpRequest.prototype.send=d;if(a){window.fetch=a}}b=false}}});require("atlassian/analytics/user-activity-xhr-header").install();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(d){var p=AJS.$.ajax;var k="atlassian-analytics";var i=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var o=null;var l=null;var f=null;var q="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){var x=Math.random()*16|0,w=y=="x"?x:(x&3|8);return w.toString(16)});var s=function(){var w="unknown";if(document.body.id=="jira"){w="jira"}else{if(document.body.id=="com-atlassian-confluence"){w="confluence"}}l=k+"."+w;f=l+".lock"};var e=function(){if(store.get(f)){return false}store.set(f,q);return(store.get(f)===q)};var t=function(){store.set(f,null)};var h=function(){var x=[],z,A,w,y;if(AJS.EventQueue.length==0){return}x=store.get(l)||x;for(w=0,y=AJS.EventQueue.length;w<y;++w){A=AJS.EventQueue[w];if(A.name){z={name:A.name,properties:A.properties,time:A.time||0};x.push(z)}}AJS.EventQueue.length=0;store.set(l,x)};var u=0;var a=function(w){return Math.min(5000*Math.pow(2,w),5*60*1000)};var g=function(){var z;function x(){setTimeout(g,a(u=0))}function w(){setTimeout(g,a(++u))}if(!e()){return x()}h();z=store.get(l);if(!z||!z.length){t();return x()}store.remove(l);t();if(!n(z)){return x()}var A=new Date().getTime();for(var y=0;y<z.length;y++){if(z[y].time>0){z[y].timeDelta=z[y].time-A}else{z[y].timeDelta=y-z.length}delete z[y].time}o=p({type:"POST",url:i+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(z),contentType:"application/json",dataType:"json"});o.fail(function(){AJS.EventQueue.concat(z);h();w()});o.done(function(){x()})};var n=function(y){for(var x=y.length-1;x>=0;x--){var A="";var z=y[x];var w=z.properties;if(typeof z.name==="undefined"){A="you must provide a name for the event."}else{if(typeof w!=="undefined"&&w!==null){if(w.constructor!==Object){A="properties must be an object with key value pairs."}else{b(w)}}}if(A!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+A+"\nEvent: "+JSON.stringify(z));y.splice(x,1)}}return y.length};var b=function(y){for(var x in y){if(y.hasOwnProperty(x)){var w=y[x];if(c(w)&&j(w)){}else{if(c(w)&&w.toString){y[x]=w.toString()}else{y[x]=""}}}}};function c(w){return typeof w!=="undefined"&&w!==null}function j(w){return typeof w==="number"||typeof w==="string"||typeof w==="boolean"}var m=function(){if(o&&!(o.state()==="resolved"||o.state()==="rejected")){o.abort()}};AJS.EventQueue=AJS.EventQueue||[];var r=Array.prototype.push;AJS.EventQueue.push=function(w){w.time=new Date().getTime();r.call(AJS.EventQueue,w)};AJS.toInit(function(){s();setTimeout(g,500);v()});d(window).unload(function(){m();h()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(w,x){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:w,properties:x})}};AJS.bind("analytics",function(w,x){AJS.EventQueue.push({name:x.name,properties:x.data})});AJS.bind("analyticsEvent",function(w,x){AJS.EventQueue.push({name:x.name,properties:x.data})});var v=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var x=AJS.$(":contains(Enable Atlassian analytics)");if(x.size()>0){var w=x[x.size()-2];if(w){w.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")}});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){var a=WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider");if(a){WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")}}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}});
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true" data-is-user-admin="' + soy.$$escapeHtml(false) + '" data-is-sidebar="true" >' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(e,a){var d="is-user-admin";var c="#app-switcher";a.SideBar=function(f){var g=this;this.$sidebar=null;f=e.extend({sidebarContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(i,h){g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:h,name:i}))};this.getProjectData=function(){var h=e(".project-shortcut-dialog-trigger"),i=h.data("key"),j=h.data("entity-type");if(h.size()==0||!i||!j){e(".app-switcher-shortcuts").remove();return}var l,k;k=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+i,cache:false,data:{entityType:j},dataType:"json"});l=e.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+i,cache:false,data:{entityType:j},dataType:"json"});e.when(k,l).then(function(n,m){g.updateProjectShortcuts(n,m,{key:i,entityType:j,name:h.data("name"),avatarUrl:h.find("img").prop("src")})},g.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=e(f.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){e(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(h,j){var i=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+h,label:"Customize shortcuts",title:""}];if(g.entityMappings[j]){i.push({href:g.generateEntityLinksUrl(h,g.entityMappings[j]),label:"Manage product links",title:""})}g.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:i}))};this.updateAppLinks=function(h){e(function(){g.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:h}));if(g.getSidebar().data(d)){g.addApplicationsCog()}g.bindAnalyticsHandlers(g.getSidebar(),h)})};this.updateProjectShortcuts=function(k,i,j){var l=k[0].shortcuts,h=i[0].shortcuts;g.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:l.concat(h)}));if(g.getSidebar().data(d)){g.addProjectShortcutsCog(j.key,j.entityType)}g.populateProjectHeader(j.name,j.avatarUrl);g.bindAnalyticsHandlers(g.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(h,i){if(i===g.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+i+"&key="+h}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+i+"/"+h}};this.showAppSwitcherError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.showProjectShortcutsError=function(){e(function(){var h=g.getSidebar();h.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());h.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(g.retryLoading,g))})};this.retryLoading=function(h){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();h&&h.stopPropagation()};this.bindAnalyticsHandlers=function(h,i){};this.getLinks();e(this.getProjectData);this.toggleSidebar=function(j){var k=g.getSidebar(),i=e("body"),h=e(window.document);if(!i.hasClass("app-switcher-open")){var m=e("#header");k.css("left",-k.width());k.parent("body").length||k.appendTo("body");b({data:k});k.animate({left:0},300);function l(n){var p=n.target&&e(n.target),o=n.keyCode;if(n.originalEvent===j.originalEvent){return}if(p&&!o&&!(p.closest(k).length||p.closest(m).length)&&j.which==1&&!(n.shiftKey||n.ctrlKey||n.metaKey)){g.toggleSidebar()}else{if(o===27){g.toggleSidebar()}}}h.on("click.appSwitcher",l);h.on("keydown.appSwitcher",l);h.on("scroll.appSwitcher",k,b)}else{h.off(".appSwitcher")}i.toggleClass("app-switcher-open")};e("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(h){var f=e(document).scrollTop(),i=e("#header"),g=(i.height()+i.offset().top)-f;if(g>=0){h.data.css({top:g,position:"fixed"})}else{h.data.css({top:0,left:0,position:"fixed"})}}e(function(){if(e(c).data("is-sidebar")===true){new a.SideBar({sidebarContents:c})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click";var APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show";var APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error";var APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click";var APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";(function(c,f){var b="isAppSuggestionAvailable";var d="isSiteAdminUser";var e="isUserAdmin";var a="#app-switcher";f.AppSwitcher=function(j){var l=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var k="unified.usermanagement";var m=this;this.$dropdown=null;j=c.extend({dropdownContents:null},j);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=c(j.dropdownContents);this.envData=this.$dropdown.data("environment")}return this.$dropdown};this.updateDropdown=function(n){c(function(){m.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:n,showAdminLink:m.envData[e],adminLink:l}));m.bindAnalyticsHandlers();if(m.envData[b]===true){m.handleSuggestionApps(n)}})};this.bindAnalyticsHandlers=function(){c(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});c("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});c("#app-switcher .nav-link").on("click",function(){var p="custom";var q=c(this).find("a");var o=q.attr("href");var n=window.location.hostname;if(o&&o.indexOf("bitbucket.org")>-1){p="bitbucket-cloud"}else{if(o.indexOf(n+"/wiki")>-1){p="confluence"}else{if(o.indexOf(n+"/build")>-1){p="bamboo"}else{if(o.indexOf(n)>-1){p="jira"}}}}AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:p}})});c(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.isBillingSystemEnabled=function(){return(this.envData[d]===true)&&AJS.DarkFeatures.isEnabled(k)};this.handleSuggestionApps=function(q){var r=_.map(q,function(s){return s.applicationType.toLowerCase()});var o=c("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");o.html(navlinks.templates.appswitcher_old.suggestionApps);var p=o.find(".suggestion-apps");var n=false;_.each(g,function(s){if(!_.contains(r,s.appName)){n=true;p.append(navlinks.templates.appswitcher_old.suggestionApp({suggestionApp:s,isBillingSystemEnabled:m.isBillingSystemEnabled()}))}});if(!n){return}c("#app-switcher").append(o);c(".app-discovery-suggestion-app").click(function(){var t=c(this).find("a");var s;if(m.envData[d]===true){s="appswitcher.discovery.siteadmin.select.inproduct."}else{s="appswitcher.discovery.user.select."}s=s+t.attr("id").toLowerCase();AJS.trigger("analytics",{name:s})});c(".app-discovery-suggestion-app").hover(function(){c(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});c(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});i(h,"true");o.remove()})};this.showError=function(){c(function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});m.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(m.retryLoading,m))})};this.retryLoading=function(n){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();n&&n.stopPropagation()};this.getLinks()};var h="key-no-thanks";var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software",discoveryUrl:"https://www.atlassian.com/software/jira",billingSystemDiscoveryUrl:"/admin/billing/addapplication"},{appName:"confluence",appDesc:"Collaboration and content sharing",discoveryUrl:"https://www.atlassian.com/software/confluence",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=confluence.ondemand"},{appName:"bamboo",appDesc:"Continuous integration",discoveryUrl:"https://www.atlassian.com/software/bamboo",billingSystemDiscoveryUrl:"/admin/billing/addapplication?product=bamboo.ondemand"}];var i=function(j,k){c.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:j,value:k})})};c(function(){if(c(a).data("is-switcher")===true){new f.AppSwitcher({dropdownContents:a})}})}(jQuery,window.NL=(window.NL||{})));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy89 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy89) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy89) + '" target="_blank"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time-zone-onboarding', location = '/static/bitbucket/internal/feature/timezone/onboarding/timezone-onboarding.js' */
define("bitbucket/internal/feature/timezone/onboarding/timezone-onboarding","module exports aui jquery bitbucket/util/navbuilder bitbucket/internal/feature/alerts/alerts bitbucket/internal/model/page-state bitbucket/internal/util/ajax bitbucket/internal/util/client-storage bitbucket/internal/util/events bitbucket/internal/util/feature-enabled".split(" "),function(p,b,q,r,t,u,v,w,x,y,z){function c(a){A.default.trigger("bitbucket.internal.ui.time.zone.onboarding."+a)}function B(){c("changed");g()}function C(){var a=
d.default.getItem("bitbucket_known_time_zone_offset");return a?String(a):null}function D(){var a=h.default.getCurrentUser();return a?k.default.rest({url:e.default.rest().users(a.getSlug()).addPathComponents("settings").build(),type:"GET",statusCode:{"*":!1}}).then(function(a){a=String(a.USER_BROWSER_TIME_ZONE_OFFSET);d.default.setItem("bitbucket_known_time_zone_offset",a);return void 0!==a&&null!==a?a:null}):l.default.Deferred().reject().promise()}function m(a){return a!==String((new Date).getTimezoneOffset())}
function g(){var a={};a.USER_BROWSER_TIME_ZONE_OFFSET=String((new Date).getTimezoneOffset());return k.default.rest({url:e.default.rest().users(h.default.getCurrentUser().getSlug()).addPathComponents("settings").build(),type:"POST",data:a,statusCode:{"*":!1}}).done(function(){d.default.setItem("bitbucket_known_time_zone_offset",a.USER_BROWSER_TIME_ZONE_OFFSET)})}Object.defineProperty(b,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(q),l=babelHelpers.interopRequireDefault(r),e=babelHelpers.interopRequireDefault(t),
h=babelHelpers.interopRequireDefault(v),k=babelHelpers.interopRequireDefault(w),d=babelHelpers.interopRequireDefault(x),A=babelHelpers.interopRequireDefault(y),n;babelHelpers.interopRequireDefault(z).default.getFromProvider("user.time.zone.onboarding").done(function(a){n=a});b.default={onReady:function(){if(n&&Number((new Date).getTimezoneOffset())!==Number((0,l.default)("#content").attr("data-timezone"))&&m(C()))return D().done(function(a){m(a)&&(c("shown"),(0,u.add)({title:"Let\u0027s synchronize watches",
description:"It looks like your Bitbucket and browser time zones don\u0027t match.",closeable:!0,closeCallback:function(){c("dismissed");g()},anchorText:"Change time zone",anchorLink:e.default.newBuilder("account").build(),anchorCallback:B,type:"info"}))})}};p.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:time-zone-onboarding', location = '/static/bitbucket/internal/feature/timezone/onboarding/timezone-onboarding-init.js' */
jQuery(function(){require("bitbucket/internal/feature/timezone/onboarding/timezone-onboarding").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:integrity-check-alert', location = '/static/bitbucket/internal/feature/integrity/alert.js' */
define("bitbucket/internal/feature/integrity/alert",["exports","aui","bitbucket/util/navbuilder","bitbucket/internal/feature/alerts/alerts","bitbucket/internal/util/ajax"],function(a,f,g,h,k){Object.defineProperty(a,"__esModule",{value:!0});a.init=function(a){if(a&&0!==a.length){var b=void 0,c=void 0;switch(a[0]){case "acknowledged":return;case "started":c=d.INFO;b=e.STARTED;break;case "inconsistency":if("started"===a[1])c=d.WARN,b=e.INCONSISTENT;else return;break;case "completed":"inconsistency"===
a[1]?(c=d.WARN,b=e.INCONSISTENT_COMPLETED):(c=d.INFO,b=e.COMPLETED);break;default:console.warn("Could not identify integrity checks state.",a);return}a=babelHelpers.extends({type:c,closeCallback:function(){l.default.rest({url:m.default.newBuilder("admin").addPathComponents("integrity-check","acknowledge").build(),type:"POST"})}},b);(0,h.add)(a);return a}};a=babelHelpers.interopRequireDefault(f);var m=babelHelpers.interopRequireDefault(g),l=babelHelpers.interopRequireDefault(k),d={INFO:"info",WARN:"warning"},
e={STARTED:{closeable:!1,title:"Integrity checks are running",description:"Check the application logs for further information."},INCONSISTENT:{closeable:!1,title:"Integrity checks are running and some inconsistencies were found",description:"Check the application logs for further information."},COMPLETED:{closeable:!0,title:"Integrity checks are complete",
description:"Check the application logs for further information."},INCONSISTENT_COMPLETED:{closeable:!0,title:"Integrity checks are complete and some inconsistencies were found",description:"Check the application logs for information on any restore actions carried out."}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:integrity-check-alert', location = '/static/bitbucket/internal/feature/integrity/alert.soy' */
// This file was automatically generated from alert.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.notification.alert.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.notification == 'undefined') { bitbucket.notification = {}; }
if (typeof bitbucket.notification.alert == 'undefined') { bitbucket.notification.alert = {}; }


bitbucket.notification.alert.bitbucketIntegrityCheckRunning = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.integrityCheckState) ? '<script type="text/javascript">require(\'bitbucket/internal/feature/integrity/alert\').init(' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.integrityCheckState).replace(/\//g, '\\/')) + ');<\/script>' : '');
};
if (goog.DEBUG) {
  bitbucket.notification.alert.bitbucketIntegrityCheckRunning.soyTemplateName = 'bitbucket.notification.alert.bitbucketIntegrityCheckRunning';
}
;
;
/* module-key = 'com.atlassian.support.stp:stp-license-status-resources', location = 'js/stp-licenseStatus.js' */
(function(b){var a={destroyBanner:function(){AJS.$("#stp-licenseStatus-banner").slideUp(function(){AJS.$("#stp-licenseStatus-banner").remove();AJS.trigger("stp-licenseStatus-banner:destroyed")})},remindMeNever:function(c){c.preventDefault();AJS.$.ajax({type:"POST",async:true,headers:{"X-Atlassian-Token":"no-check"},url:AJS.contextPath()+"/rest/stp/1.0/license/remindMeNever"});a.destroyBanner()},remindMeLater:function(){AJS.$.ajax({type:"POST",async:true,headers:{"X-Atlassian-Token":"no-check"},url:AJS.contextPath()+"/rest/stp/1.0/license/remindMeLater"});a.destroyBanner()},createBanner:function(d,f){var c="\n<div id='stp-licenseStatus-banner' class='aui-message warning'>\n";var g="https://www.atlassian.com/purchase/renew?utm_source=STP&utm_medium=renewals_reminder&utm_campaign=renewals_reminder";if(d===0){c+=AJS.format("Your {0} maintenance expires today. For continued access to support and updates, {1}renew your maintenance{2}. {3}Remind me later{4} or {5}never remind me again{6}.",f,"<a id='stp-licenseStatus-renewNow' target='_blank' href=\""+g+'">',"</a>","<a id='stp-licenseStatus-remindMeLater' href='#'>","</a>","<a id='stp-licenseStatus-remindMeNever' href='#'>","</a>");c+="<span class ='aui-icon icon-warning'></span>\n</div>"}else{c+=AJS.format("Your {0} maintenance expires in {1} days. For continued access to support and updates, {2}renew your maintenance{3}. {4}Remind me later{5} or {6}never remind me again{7}.",f,d,"<a id='stp-licenseStatus-renewNow' target='_blank' href=\""+g+'">',"</a>","<a id='stp-licenseStatus-remindMeLater' href='#'>","</a>","<a id='stp-licenseStatus-remindMeNever' href='#'>","</a>");c+="<span class ='aui-icon icon-warning'></span>\n</div>"}var e=b("#stp-licenseStatus-banner-container");if(e.length===0){e=b(document.body)}e.prepend(c);AJS.$("#stp-licenseStatus-remindMeNever").click(a.remindMeNever);AJS.$("#stp-licenseStatus-remindMeLater").click(function(h){h.preventDefault();a.remindMeLater()});AJS.$("#stp-licenseStatus-renewNow").click(function(h){a.remindMeLater()});AJS.trigger("stp-licenseStatus-banner:created")}};AJS.$(document).ready(function(){var i=AJS.$("meta[name='stp-license-days-to-expiry']");var c=AJS.$("meta[name='stp-license-is-admin']");var f=AJS.$("meta[name='stp-license-should-keep-banner-hidden']");var h=AJS.$("meta[name='stp-license-product-name']");var g={};var k=b.Deferred();var d=i.length&&c.length&&f.length&&h.length;if(d){var l=i.attr("content")||-1;g.daysToExpiry=parseInt(l);g.shouldKeepBannerHidden=f.attr("content")==="true";g.isAdmin=c.attr("content")==="true";g.productName=h.attr("content");k.resolve(g)}else{b.ajax({type:"GET",dataType:"json",async:true,url:AJS.contextPath()+"/rest/stp/1.0/license/status",headers:{"X-Atlassian-Token":"no-check"},statusCode:{200:function(m){k.resolve(b.extend(m,{viaRest:true}))},204:function(){k.reject("204. No reason to display banner.")}},error:function(){k.reject("Error returned from call to license/status")}})}k.done(function j(n){var m=l<30&&l>=0;if(n.viaRest||(n.isAdmin&&m&&!n.shouldKeepBannerHidden)){b("#stp-licenseStatus-banner").length||a.createBanner(n.daysToExpiry,n.productName)}}).fail(function e(m){console.log("Not displaying license banner: "+m)})})})(AJS.$);;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:search-urls', location = '/bitbucket/internal/component/search-urls.js' */
define("bitbucket/internal/impl/search-urls",["bitbucket/util/navbuilder"],function(b){return{fileUrl:function(a,c,d){a=b.project(a.project).repo(a).browse().path(c.split("/"));d&&(a=a.withFragment(d));return a.build()},projectAvatarUrl:function(a,c){return b.project(a).avatar(c).build()},searchRestUrl:function(){return b.rest("search").addPathComponents("search").build()}}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:search-analytics-utils', location = '/bitbucket/internal/component/search-analytics-utils.js' */
define("bitbucket/internal/impl/search-analytics-utils",["jquery"],function(b){var c={"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.files":function(){return 1===b("#file-content").length?"source":"browse"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.commits":function(){return 1===b(".commit-files").length?"commit":"commit-list"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.branches":function(){return 1===
b(".branch-table").length?"branch-list":"compare"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.pull-requests":function(){return 1===b(".pull-requests-table").length?"pull-request-list":"pull-request-view"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:bitbucket.repository.nav.settings":function(){return"admin"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:projects-repositories-tab":function(){return"project-list"},"com.atlassian.bitbucket.server.bitbucket-server-web-fragments:projects-settings-tab":function(){return"admin"}};
return{getPageContext:function(){var a=b("#aui-sidebar-content .aui-nav-selected");return 1===a.length?(a=a.find("a").attr("data-web-item-key"),(a=c[a])?a():"other"):"global"}}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/search-entities.js' */
define("bitbucket/internal/feature/search-common/search-entities",["module","exports"],function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={CODE:"code",REPOSITORIES:"repositories"};b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/transformer.js' */
define("bitbucket/internal/feature/search-common/transformer",["exports","lodash","bitbucket/internal/impl/search-urls"],function(b,e,d){Object.defineProperty(b,"__esModule",{value:!0});b.transformCodeResult=void 0;var f=d&&d.__esModule?d:{default:d},l=function(){return function(a,d){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var g=[],h=!0,c=!1,k=void 0;try{for(var b=a[Symbol.iterator](),e;!(h=(e=b.next()).done)&&(g.push(e.value),!d||g.length!==d);h=!0);}catch(f){c=!0,k=f}finally{try{if(!h&&
b["return"])b["return"]()}finally{if(c)throw k;}}return g}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),m=/<\/?em>/;b.transformCodeResult=function(a){a.fileParts=a.file.split("/");a.filename=a.fileParts.slice(-1);a.firstLineNumber=(0,e.get)(a,"hitContexts.0.0",-1);var b=(0,e.flatten)(a.hitContexts.map(function(a){return a.filter(function(a){return 0!==a.line&&m.test(a.text)}).map(function(a){return a.line})})).reduce(function(a,b){var c=l(a,2),d=c[0],c=c[1];b===
d+1?Array.isArray(c[c.length-1])?c[c.length-1].push(b):(c.pop(),c.push([d,b])):c.push(b);return[b,c]},[-1,[]])[1].map(function(a){return Array.isArray(a)?a[0]+"-"+a[a.length-1]:a}).join(",");a.fileUrl=f.default.fileUrl(a.repository,a.file,b);return a}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/search-request.js' */
define("bitbucket/internal/feature/search-common/search-request",["exports","lodash"],function(f,a){Object.defineProperty(f,"__esModule",{value:!0});f.searchFor=function(a,b,c){var d={};g.default.each(b,function(a){d[a]={}});return{query:a,entities:d,limits:c}};f.nextSearchFor=function(a,b,c,d){var e={};c={start:d[b].nextStart,limit:c.primary};b in e?Object.defineProperty(e,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[b]=c;return{query:a,entities:e}};var g=a&&a.__esModule?a:{default:a}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/analytics.js' */
define("bitbucket/internal/feature/search-common/analytics",["exports","lodash","../search-common/search-entities"],function(g,c,e){function f(a,d){var b=a.match(new RegExp(d+":\\S+","g"));return b&&b.length||0}Object.defineProperty(g,"__esModule",{value:!0});g.queryAttributes=function(a){return{"query.length":a.length,"term.count":a.split(" ").length,"mod.project":f(a,"project"),"mod.repo":f(a,"repo"),"mod.lang":f(a,"lang"),"mod.ext":f(a,"ext")}};g.entityAttributes=function(a){var d={};h.default.each(k.default,
function(b,c){a.hasOwnProperty(b)&&(d[b+".start"]=a[b].start,d[b+".count"]=a[b].count)});return d};var h=c&&c.__esModule?c:{default:c},k=e&&e.__esModule?e:{default:e}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-common-resources', location = '/bitbucket/internal/feature/search-common/search-common.soy' */
// This file was automatically generated from search-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.search.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.search == 'undefined') { bitbucket.internal.component.search = {}; }


bitbucket.internal.component.search.quickCodeResult = function(opt_data, opt_ignored) {
  return '<li class="code result navigable"><a id="code-result" class="code-link" role="option" title=""><div class="code-search-hint" aria-hidden="true"><span class="aui-icon aui-icon-small aui-iconfont-search"></span>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d\x22start\x22\x3eSearch for \x26lsquo;\x3c/span\x3e\x3cspan class\x3d\x22terms\x22\x3eterms\x3c/span\x3e\x3cspan class\x3d\x22end\x22\x3e\x26rsquo; in code\x3c/span\x3e')) + '</div></a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.quickCodeResult.soyTemplateName = 'bitbucket.internal.component.search.quickCodeResult';
}


bitbucket.internal.component.search.repositoryResults = function(opt_data, opt_ignored) {
  var output = '<section class="repository-results"><h3 class="result-summary">' + soy.$$escapeHtml('Repositories') + '</h3><ul class="search-result-list">';
  var repoList10 = opt_data.repositories;
  var repoListLen10 = repoList10.length;
  for (var repoIndex10 = 0; repoIndex10 < repoListLen10; repoIndex10++) {
    var repoData10 = repoList10[repoIndex10];
    output += bitbucket.internal.component.search.repositoryResult({repo: repoData10, id: 'repository-result-' + soy.$$escapeHtml(repoIndex10)});
  }
  output += '</ul></section>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.repositoryResults.soyTemplateName = 'bitbucket.internal.component.search.repositoryResults';
}


bitbucket.internal.component.search.repositoryResult = function(opt_data, opt_ignored) {
  return '<li class="repository result navigable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><a id="' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(opt_data.repo.project).repo(opt_data.repo).browse().build()) + '" class="repository-link" data-proj-key="' + soy.$$escapeHtml(opt_data.repo.project.key) + '" data-project-id="' + soy.$$escapeHtml(opt_data.repo.project.id) + '" data-repo-slug="' + soy.$$escapeHtml(opt_data.repo.slug) + '" data-repo-id="' + soy.$$escapeHtml(opt_data.repo.id) + '" role="option" title="' + soy.$$escapeHtml(AJS.format('{0} / {1}',opt_data.repo.project.name,opt_data.repo.name)) + '">' + bitbucket.internal.component.search.repositoryItemContent({repository: opt_data.repo}) + '</a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.repositoryResult.soyTemplateName = 'bitbucket.internal.component.search.repositoryResult';
}


bitbucket.internal.component.search.repositoryItemContent = function(opt_data, opt_ignored) {
  return bitbucket.internal.component.avatars.projectAvatar({size: 'small', project: opt_data.repository.project, extraAttributes: 'aria-hidden="true"'}) + '<span class="project-and-repository" aria-hidden="true"><span class="project-name">' + soy.$$escapeHtml(opt_data.repository.project.name) + '</span><span class="separator">/</span><span class="name">' + soy.$$escapeHtml(opt_data.repository.name) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.repositoryItemContent.soyTemplateName = 'bitbucket.internal.component.search.repositoryItemContent';
}


bitbucket.internal.component.search.codeResult = function(opt_data, opt_ignored) {
  var output = '<li class="search-result code-search-result new-result' + ((opt_data.isTruncated) ? ' truncated' : '') + '"><section><header ' + ((opt_data.result.firstLineNumber > 1) ? 'class="code-search-result-header not-first-line"' : '') + '>';
  var url__soy63 = require('bitbucket/util/navbuilder').project(opt_data.result.repository.project).repo(opt_data.result.repository).browse().build();
  output += '<a href="' + soy.$$escapeHtml(url__soy63) + '" class="code-search-repo-link code-search-header-link">' + ((opt_data.result.repository.owner) ? bitbucket.internal.component.avatars.avatar({size: 'small', person: opt_data.result.repository.owner, extraClasses: 'code-search-result-avatar', title: '' + ((opt_data.result.repository.owner) ? soy.$$escapeHtml(opt_data.result.repository.owner.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + ((opt_data.result.repository.project) ? soy.$$escapeHtml(opt_data.result.repository.project.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + soy.$$escapeHtml(opt_data.result.repository.name)}) : (opt_data.result.repository.project) ? bitbucket.internal.component.avatars.projectAvatar({size: 'small', project: opt_data.result.repository.project, extraClasses: 'code-search-result-avatar', title: '' + ((opt_data.result.repository.owner) ? soy.$$escapeHtml(opt_data.result.repository.owner.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + ((opt_data.result.repository.project) ? soy.$$escapeHtml(opt_data.result.repository.project.name) + bitbucket.internal.component.search.fileSeparator(null) : '') + soy.$$escapeHtml(opt_data.result.repository.name)}) : '') + ((opt_data.result.repository.owner) ? '<div class="code-search-owner">' + soy.$$escapeHtml(opt_data.result.repository.owner.name) + '</div>' : '') + ((opt_data.result.repository.project) ? '<div class="code-search-project' + ((opt_data.result.repository.owner) ? ' with-owner' : '') + '">' + soy.$$escapeHtml(opt_data.result.repository.project.name) + '</div>' : '') + '<div class="code-search-repository">' + soy.$$escapeHtml(opt_data.result.repository.name) + '</div></a><div class="code-search-header-separator non-collapsible">&mdash;</div>';
  var filePartList115 = opt_data.result.fileParts;
  var filePartListLen115 = filePartList115.length;
  for (var filePartIndex115 = 0; filePartIndex115 < filePartListLen115; filePartIndex115++) {
    var filePartData115 = filePartList115[filePartIndex115];
    output += (! (filePartIndex115 == filePartListLen115 - 1)) ? ((filePartIndex115 == 0) ? '<div class="code-search-initial-filepath collapsible">' : (filePartIndex115 == 2) ? '</div><div class="collapsible">' : '') + ((! (filePartIndex115 == 0)) ? bitbucket.internal.component.search.fileSeparator(null) : '') + '<span class="code-search-filepart">' + soy.$$escapeHtml(filePartData115) + '</span>' : ((filePartIndex115 > 0) ? '</div>' : '') + bitbucket.internal.component.search.fileSeparator(null) + '<a href="' + soy.$$escapeHtml(opt_data.result.fileUrl) + '" class="' + ((filePartIndex115 == filePartListLen115 - 1) ? 'non-collapsible code-search-filename' : '') + '">' + soy.$$escapeHtml(filePartData115) + '</a>';
  }
  output += '</header><ul class="hit-contexts">';
  if (opt_data.result.hitContexts.length > 0) {
    var hitContextList147 = opt_data.result.hitContexts;
    var hitContextListLen147 = hitContextList147.length;
    for (var hitContextIndex147 = 0; hitContextIndex147 < hitContextListLen147; hitContextIndex147++) {
      var hitContextData147 = hitContextList147[hitContextIndex147];
      output += '<li class="hit-context"><ol class="hit-context-lines">';
      var lineList149 = hitContextData147;
      var lineListLen149 = lineList149.length;
      for (var lineIndex149 = 0; lineIndex149 < lineListLen149; lineIndex149++) {
        var lineData149 = lineList149[lineIndex149];
        output += (lineData149.line > 0) ? '<li class="numbered-line">' + soy.$$escapeHtml(lineData149.line) + '</li>' : '<li>&nbsp;</li>';
      }
      output += '</ol><code>';
      var lineList159 = hitContextData147;
      var lineListLen159 = lineList159.length;
      for (var lineIndex159 = 0; lineIndex159 < lineListLen159; lineIndex159++) {
        var lineData159 = lineList159[lineIndex159];
        output += ((lineData159.text.length > 0) ? soy.$$filterNoAutoescape(lineData159.text) : '&nbsp;') + '\n';
      }
      output += '</code></li>';
    }
  } else {
    output += '<div class="aui-message aui-message-warning warning">' + soy.$$escapeHtml('There was an error showing content for this file: no matches found.') + '</div>';
  }
  output += '</ul>' + ((opt_data.isTruncated) ? '<a href="#" class="context-toggler"><span class="inner expander"><span class="aui-icon aui-icon-small aui-iconfont-arrow-down"></span><span class="text">' + soy.$$escapeHtml(AJS.format('{0,choice,1#View|1\x3cView all} {0} {0,choice,1#match|1\x3cmatches}',opt_data.result.hitCount)) + '</span></span><span class="inner contracter"><span class="aui-icon aui-icon-small aui-iconfont-arrow-up"></span><span class="text">' + soy.$$escapeHtml('Hide matches') + '</span></span></a>' : '') + '</section></li>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.codeResult.soyTemplateName = 'bitbucket.internal.component.search.codeResult';
}


bitbucket.internal.component.search.fileSeparator = function(opt_data, opt_ignored) {
  return '<span class="code-search-file-separator">/</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.search.fileSeparator.soyTemplateName = 'bitbucket.internal.component.search.fileSeparator';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:avatars', location = '/static/bitbucket/internal/bbui/avatars/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.avatars.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.avatars == 'undefined') { bitbucket.internal.component.avatars = {}; }


bitbucket.internal.component.avatars.avatar = function(opt_data, opt_ignored) {
  var output = '';
  var user__soy3 = opt_data.person.user || opt_data.person;
  output += aui.avatar.avatar({size: opt_data.size, avatarImageUrl: require('bitbucket/util/navbuilder')._avatarUrl(user__soy3, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build(), id: opt_data.id, tagName: opt_data.tagName, accessibilityText: user__soy3.displayName || user__soy3.name, title: opt_data.title, isProject: opt_data.isProject, badgeContent: opt_data.badgeContent, imageClasses: opt_data.imageClasses, extraClasses: 'user-avatar' + (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + (opt_data.showTitleWithTipsy && opt_data.title ? ' avatar-tooltip' : ''), extraAttributes: {'data-username': user__soy3.name}});
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatar.soyTemplateName = 'bitbucket.internal.component.avatars.avatar';
}


bitbucket.internal.component.avatars.avatarWithName = function(opt_data, opt_ignored) {
  var output = '';
  var user__soy17 = opt_data.person.user || opt_data.person;
  var personName__soy18 = user__soy17.displayName || user__soy17.name;
  output += '<div class="avatar-with-name' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" title="' + soy.$$escapeHtml(personName__soy18) + '">' + bitbucket.internal.component.avatars.avatar({size: opt_data.size, person: user__soy17, imageClasses: opt_data.imageClasses, extraClasses: opt_data.avatarClasses, badgeContent: opt_data.badgeContent, hideBadge: opt_data.hideBadge, id: opt_data.id}) + ((opt_data.link) ? bitbucket.internal.widget.userLink({user: user__soy17, href: opt_data.href, extraClasses: opt_data.linkExtraClasses, skipTitle: true}) : soy.$$escapeHtml(personName__soy18)) + '</div>';
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatarWithName.soyTemplateName = 'bitbucket.internal.component.avatars.avatarWithName';
}


bitbucket.internal.component.avatars.avatarWithBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.component.avatars.avatar({size: opt_data.size, person: opt_data.person, title: opt_data.title, imageClasses: opt_data.imageClasses, extraClasses: opt_data.extraClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatarWithBadge.soyTemplateName = 'bitbucket.internal.component.avatars.avatarWithBadge';
}


bitbucket.internal.component.avatars.avatarWithNameAndBadge = function(opt_data, opt_ignored) {
  return '' + bitbucket.internal.component.avatars.avatarWithName({size: opt_data.size, person: opt_data.person, extraClasses: opt_data.extraClasses, avatarClasses: opt_data.avatarClasses, imageClasses: opt_data.imageClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.avatarWithNameAndBadge.soyTemplateName = 'bitbucket.internal.component.avatars.avatarWithNameAndBadge';
}


bitbucket.internal.component.avatars.projectAvatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: opt_data.imageUrl ? opt_data.imageUrl : opt_data.project ? require('bitbucket/util/navbuilder')._avatarUrl(opt_data.project, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build() : '', id: opt_data.id, tagName: opt_data.tagName, accessibilityText: opt_data.project ? opt_data.project.name : '', title: opt_data.title, isProject: ! opt_data.project.owner, badgeContent: opt_data.badgeContent, imageClasses: opt_data.imageClasses, extraClasses: (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  bitbucket.internal.component.avatars.projectAvatar.soyTemplateName = 'bitbucket.internal.component.avatars.projectAvatar';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:avatars', location = '/static/bitbucket/internal/bbui/avatars/avatars.js' */
define("bitbucket/internal/bbui/avatars/avatars",["module","exports","jquery","lodash"],function(d,a,b,e){Object.defineProperty(a,"__esModule",{value:!0});var c=babelHelpers.interopRequireDefault(b);b=babelHelpers.interopRequireDefault(e);a.default={init:b.default.once(function(){(0,c.default)(".avatar-tooltip \x3e .aui-avatar-inner \x3e img").tooltip({hoverable:!1,offset:5,gravity:function(){return c.default.fn.tipsy.autoNS.call(this)+c.default.fn.tipsy.autoWE.call(this)},delayIn:0,live:!0})})};
d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bower-components:skatejs', location = '/static/bower/skatejs/dist/index.js' */
("undefined"==typeof window?global:window).__bbda433df4ec72c4488e3a2f0e6a59a1=function(){function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var t={exports:{}},r=(t.exports,Object.prototype.hasOwnProperty),n=Object.prototype.propertyIsEnumerable;return t.exports=Object.assign||function(t,o){for(var a,d,u=e(t),f=1;f<arguments.length;f++){a=Object(arguments[f]);for(var i in a)r.call(a,i)&&(u[i]=a[i]);if(Object.getOwnPropertySymbols){d=Object.getOwnPropertySymbols(a);for(var c=0;c<d.length;c++)n.call(a,d[c])&&(u[d[c]]=a[d[c]])}}return u},t.exports}.call(this),("undefined"==typeof window?global:window).__dd77578495c1d19b0e115627616ea63a=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r="__skate_0_14_0";return window[r]||(window[r]={registerIfNotExists:function(e,t){return this[e]||(this[e]=t)}}),t["default"]=window[r],e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__6d7878404f872c72787f01cd3e06dd21=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__43714db526496b3dd90353996f6dce09=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={create:function(e){var t=document.createElement(e["extends"]||e.id);return e["extends"]&&t.setAttribute("is",e.id),t},filter:function(e,t){var r=e.attributes,n=r.is,o=n&&(n.value||n.nodeValue),a=(e.tagName||e.localName).toLowerCase(),d=t[o||a];if(d){var u=d["extends"];if(o){if(a===u)return[d]}else if(!u)return[d]}}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__9cff21a9f41cc9ecfe56139e1040c954=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__dd77578495c1d19b0e115627616ea63a,o=e(n),a=__6d7878404f872c72787f01cd3e06dd21,d=e(a),u=__43714db526496b3dd90353996f6dce09,f=e(u),i={},c=[],l=[];return r["default"]=o["default"].registerIfNotExists("registry",{get:function(e){return(0,d["default"])(i,e)&&i[e]},set:function(e,t){if(this.get(e))throw new Error('A Skate component with the name of "'+e+'" already exists.');var r=t.type||f["default"],n=l.indexOf(r);return-1===n&&(n=l.length,l.push(r),c[n]={}),i[e]=t,c[n][e]=t,this},find:function(e){for(var t=[],r=l.length,n=0;r>n;n++)t=t.concat(l[n].filter(e,c[n])||[]);return t}}),t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__1675a7174b713323cc232370699a2714=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__bbda433df4ec72c4488e3a2f0e6a59a1,o=e(n),a=__9cff21a9f41cc9ecfe56139e1040c954,d=e(a);return r["default"]=function(e,t){var r=e.trim(),n=d["default"].get(r);return n?n(t):(0,o["default"])(document.createElement(r),t)},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__6f793202bae98770dbb2b598df7929ad=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r=window.HTMLElement.prototype,n=r.contains;return t["default"]=function(e,t){return e!==document||e.contains?e.contains?e.contains(t):n.call(e,t):document.head.contains(t)||document.body.contains(t)},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__639a0d2e0f8a90cd72e6197bdb481558=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(i)return new i(e,t);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function r(e){return function(){this.isPropagationStopped=!0,e.call(this)}}function n(e,t){var n=void 0,o=e;for(t.stopPropagation=r(t.stopPropagation),Object.defineProperty(t,"target",{value:e});o&&!t.isPropagationStopped;)t.currentTarget=o,o.dispatchEvent(t)===!1&&(n=!1),o=o.parentNode;return n}function o(e,r,o){var a,d;return void 0===o.bubbles&&(o.bubbles=!0),void 0===o.cancelable&&(o.cancelable=!0),a=t(r,o),d=o.bubbles&&!c&&!(0,f["default"])(document,e),d?n(e,a):e.dispatchEvent(a)}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0});var u=__6f793202bae98770dbb2b598df7929ad,f=e(u),i=function(e){if(e)try{new e}catch(t){return void 0}return e}(window.CustomEvent),c=function(){var e=document.createElement("div"),r=document.createElement("div"),n=!1;return e.appendChild(r),e.addEventListener("test",function(){return n=!0}),r.dispatchEvent(t("test",{bubbles:!0})),n}();return d["default"]=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n="string"==typeof t?t.split(" "):t;return n.reduce(function(t,n){return o(e,n,r)===!1&&t.push(n),t},[])},a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__092f8936e5006bddcb3baf24320a5a06=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=e.attributes;return t&&!!t["data-skate-ignore"]},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__164e5750c20526cb74a9e443b730eeff=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,r){if(e.nodeType===d.ELEMENT_NODE&&!(0,a["default"])(e)){var n=e.childNodes,o=n&&n[0];for(r(e);o;)t(o,r),o=o.nextSibling}}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__092f8936e5006bddcb3baf24320a5a06,a=e(o),d=window.Node;return n["default"]=function(e,r){if(e){e instanceof d&&(e=[e]);for(var n=0;n<e.length;n++)t(e[n],r)}},r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__3add36046399fead5a83243849207ed7=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__6f793202bae98770dbb2b598df7929ad,o=e(n),a=__9cff21a9f41cc9ecfe56139e1040c954,d=e(a),u=__164e5750c20526cb74a9e443b730eeff,f=e(u);return r["default"]=function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];t.forEach(function(e){var t=(0,o["default"])(document,e);(0,f["default"])(e,function(e){for(var r=d["default"].find(e),n=r.length,o=0;n>o;o++)r[o].prototype.createdCallback.call(e);for(var o=0;n>o;o++)t&&r[o].prototype.attachedCallback.call(e)})})},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__ef86f48ff9050407fed1e142d9fe2629=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){for(var r=document.createElement("div"),n=0,o=s[e];o;)t="<"+o+">"+t+"</"+o+">",++n,o=s[o];r.innerHTML=t;for(var a=r,d=0;n>d;d++)a=a.firstElementChild;return a}function r(e){var t=e.match(/^<([^\s>]+)/);return t&&t[1]}function n(e){return t(r(e),e)}function o(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return t.reduce(function(e,t){return"string"==typeof t?t=o.apply(null,l.call(n(t).childNodes)):t instanceof c||Array.isArray(t)?t=o.apply(null,l.call(t)):t instanceof i&&(0,f["default"])(t),t&&e.appendChild(t),e},document.createDocumentFragment())}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0}),d["default"]=o;var u=__3add36046399fead5a83243849207ed7,f=e(u),i=window.Node,c=window.NodeList,l=Array.prototype.slice,s={caption:"table",dd:"dl",dt:"dl",li:"ul",tbody:"table",td:"tr",thead:"table",tr:"tbody"};return a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__3c628d88db5d9b47debcf1c6200b02c4=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={coerce:function(e){return!!e},"default":!1,deserialize:function(e){return!(null===e)},serialize:function(e){return e?"":void 0}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__01110a33f4fc3195613143c4e23f759c=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={coerce:function(e){return"undefined"==typeof e?e:Number(e)},deserialize:function(e){return null===e?void 0:e},serialize:function(e){return"undefined"==typeof e?e:Number(e)}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__d729413b2e2accb8d590160fefbda485=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={coerce:function(e){return"undefined"==typeof e?e:String(e)},deserialize:function(e){return null===e?void 0:e},serialize:function(e){return"undefined"==typeof e?e:String(e)}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__db9d338f5bdfd7eb6a3bcf299ff15f91=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){return function(){for(var t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];return r.unshift({},e),a["default"].apply(null,r)}}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__bbda433df4ec72c4488e3a2f0e6a59a1,a=e(o),d=__3c628d88db5d9b47debcf1c6200b02c4,u=e(d),f=__01110a33f4fc3195613143c4e23f759c,i=e(f),c=__d729413b2e2accb8d590160fefbda485,l=e(c);return n["default"]={"boolean":t(u["default"]),number:t(i["default"]),string:t(l["default"])},r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__18291b0452e01f65cf28d6695040736a=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=e.__SKATE_DATA||(e.__SKATE_DATA={});return t&&(r[t]||(r[t]={}))||r},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__83ca289f5309abef55c338a9f7a22385=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){for(var t=u["default"].find(e),r=t.length,n=0;r>n;n++)if(!(0,a["default"])(e,"lifecycle/"+t[n].id).created)return!1;return!0}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__18291b0452e01f65cf28d6695040736a,a=e(o),d=__9cff21a9f41cc9ecfe56139e1040c954,u=e(d);return n["default"]=function(e,r){function n(){d===a&&r(e)}for(var o=void 0===e.length?[e]:e,a=o.length,d=0,u=0;a>u;u++){var f=o[u];t(f)?++d:f.addEventListener("skate.ready",function(){++d,n()})}n()},r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__094bf660ba7ebd6f4b14ca8053e00764=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__ef86f48ff9050407fed1e142d9fe2629,o=e(n);return r["default"]=function(e){return function(t){for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);t.appendChild((0,o["default"])(e(t)))}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__d31d2ff71da7095bf8886568461d8537=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){u["default"].find(e).forEach(function(t){return t.render&&t.render(e)})}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__094bf660ba7ebd6f4b14ca8053e00764,a=e(o),d=__9cff21a9f41cc9ecfe56139e1040c954,u=e(d);return t.html=a["default"],n["default"]=t,r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__662bde51c096e9d79bf327311ea178e0=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]="0.14.1",e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__d9d26492984e649e5130081ad32bafd6=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return r.forEach(function(t){Object.getOwnPropertyNames(t||{}).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);(!n||n.configurable)&&Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}),e},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__2b55a083f45c9ef157662a1dc1674218=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__18291b0452e01f65cf28d6695040736a,o=e(n);return r["default"]=function(e){return function(){var t=(0,o["default"])(this,"lifecycle/"+e.id);t.attached||(t.attached=!0,t.detached=!1,e.attached(this))}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__9f17962f9aa326a94ed3e5d6f6b172e6=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};return t["default"]=function(e){var t=e.attribute;return"function"!=typeof t?r:function(e,r,n){t(this,{name:e,newValue:null===n?void 0:n,oldValue:null===r?void 0:r})}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__365bd8b7bbfb2b50d6dbfd830f0aa927=function(){var e={exports:{}},t=e.exports;Object.defineProperty(t,"__esModule",{value:!0});var r=window.HTMLElement.prototype,n=r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector,o=!n.call(document.createElement("div"),"div");return t["default"]=function(e,t){if(o){var r=e.cloneNode();return document.createElement("div").appendChild(r),n.call(r,t)}return n.call(e,t)},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__d48fcc3ecf3585518bbce659c1ba4116=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t,r){Object.defineProperty(e,t,{configurable:!0,get:function(){return r}})}function r(e){var t=e.split(" "),r=t.shift(),n=t.join(" ").trim();return{name:r,selector:n}}function n(e,r,n){return function(o){for(var a=o.target,d=n.selector;a&&a!==e.parentNode;){if((0,c["default"])(a,d))return t(o,"currentTarget",a),t(o,"delegateTarget",e),r(o);a=a.parentNode}}}function o(e,r){return function(n){t(n,"delegateTarget",e),r(n)}}function a(e,t,a){var d=r(t),u=d.name,f=d.selector,i=f&&("blur"===u||"focus"===u);a=f?n(e,a,d):o(e,a),e.addEventListener(u,a,i)}function d(e){var t=e.events;return function(e){Object.keys(t).forEach(function(r){a(e,r,t[r].bind(e))})}}var u={exports:{}},f=u.exports;Object.defineProperty(f,"__esModule",{value:!0}),f["default"]=d;var i=__365bd8b7bbfb2b50d6dbfd830f0aa927,c=e(i);return u.exports=f["default"],u.exports}.call(this),("undefined"==typeof window?global:window).__cbc0eefc77aa7d958ec51e53ef2568fc=function(){function e(e){var t=e.removeAttribute,r=e.setAttribute;e.removeAttribute=function(r){var n=this.getAttribute(r);t.call(e,r),e.attributeChangedCallback(r,n,null)},e.setAttribute=function(t,n){var o=this.getAttribute(t);r.call(e,t,n),e.attributeChangedCallback(t,o,String(n))}}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__0cd264077c1ca567539d11e826d3c00e=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return e.split(/([A-Z])/).reduce(function(e,t,r){var n=e&&r%2!==0?"-":"";return""+e+n+t.toLowerCase()})},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__cc21ec7ac4c07d035d1a19269f5d2bb6=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e,t){return t===!0?(0,f["default"])(e):t}function r(e,r){var n={configurable:!0,enumerable:!0};return n.created=function(n,o){var a=(0,c["default"])(n,"api/property/"+e);if(a.linkedAttribute=t(e,r.attribute),a.removeAttribute=n.removeAttribute,a.setAttribute=n.setAttribute,a.updatingProperty=!1,"function"==typeof r["default"]?a.defaultValue=r["default"](n):void 0!==r["default"]&&(a.defaultValue=r["default"]),a.linkedAttribute&&(a.attributeMap||(a.attributeMap={},n.removeAttribute=function(e){if(a.updatingAttribute=!0,a.removeAttribute.call(this,e),e in a.attributeMap){var t=a.attributeMap[e];n[t]=void 0}a.updatingAttribute=!1},n.setAttribute=function(e,t){if(a.updatingAttribute=!0,a.setAttribute.call(this,e,t),e in a.attributeMap){var o=a.attributeMap[e];t=String(t),n[o]=r.deserialize(t)}a.updatingAttribute=!1}),a.attributeMap[a.linkedAttribute]=e),void 0===o)if(a.linkedAttribute&&n.hasAttribute(a.linkedAttribute)){var d=n.getAttribute(a.linkedAttribute);o=r.deserialize(d)}else o=a.defaultValue;a.internalValue=o},n.get=function(){var t=(0,c["default"])(this,"api/property/"+e);return r.get?r.get(this):t.internalValue},n.set=function(t){var n=(0,c["default"])(this,"api/property/"+e),o=void 0;if(!n.updatingProperty){if(n.updatingProperty=!0,n.hasBeenSetOnce?o=this[e]:(o=void 0,n.hasBeenSetOnce=!0),"function"==typeof r.coerce&&(t=r.coerce(t)),r.get||(n.internalValue="undefined"==typeof t?n.defaultValue:t),n.linkedAttribute&&!n.updatingAttribute){var a=r.serialize(t);void 0===a?n.removeAttribute.call(this,n.linkedAttribute):n.setAttribute.call(this,n.linkedAttribute,a)}var d={name:e,newValue:t,oldValue:o};"function"==typeof r.set&&r.set(this,d),n.updatingProperty=!1}},n}var n={exports:{}},o=n.exports;Object.defineProperty(o,"__esModule",{value:!0});var a=__bbda433df4ec72c4488e3a2f0e6a59a1,d=e(a),u=__0cd264077c1ca567539d11e826d3c00e,f=e(u),i=__18291b0452e01f65cf28d6695040736a,c=e(i);return o["default"]=function(e){return e=e||{},"function"==typeof e&&(e={coerce:e}),function(t){return r(t,(0,d["default"])({deserialize:function(e){return e},serialize:function(e){return e}},e))}},n.exports=o["default"],n.exports}.call(this),("undefined"==typeof window?global:window).__a66903f10d803226e4691dfa301c4f3e=function(){function e(e,t){Object.keys(t).forEach(function(r){var n=t[r],o=e[r];Object.defineProperty(e,r,n),n.created&&n.created(e,o)})}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__06885fcc635bf6a67cb67ec77a6e8b17=function(){function e(e,t){Object.keys(t).forEach(function(r){var n=t[r];n.set&&n.set.call(e,e[r])})}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__1d11a28624d684874cb270f137cc0122=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){for(var t=[e];e=Object.getPrototypeOf(e);)t.push(e);return t.reverse(),t},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__7ba2ecf93401318a8fb40e4b0fe295ea=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=(0,u["default"])(e.prototype);return function(e){t.forEach(function(t){t.isPrototypeOf(e)||(0,a["default"])(e,t)})}}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=t;var o=__d9d26492984e649e5130081ad32bafd6,a=e(o),d=__1d11a28624d684874cb270f137cc0122,u=e(d);return r.exports=n["default"],r.exports}.call(this),("undefined"==typeof window?global:window).__4b4eecf91d77990b080189047604b709=function(){function e(e,t){e.removeAttribute(t.unresolvedAttribute),e.setAttribute(t.resolvedAttribute,"")}var t={exports:{}},r=t.exports;return Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e,t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__fe1aef0db5b664068b470b21f7c754a5=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=e.properties,r=Object.keys(t||{});return r.reduce(function(t,r){return t[r]=e.properties[r],"function"!=typeof t[r]&&(t[r]=(0,b["default"])(t[r])),t},{})}function r(e,t){return Object.keys(t||{}).reduce(function(e,r){return e[r]=t[r](r),e},{})}var n={exports:{}},o=n.exports;Object.defineProperty(o,"__esModule",{value:!0});var a=__18291b0452e01f65cf28d6695040736a,d=e(a),u=__639a0d2e0f8a90cd72e6197bdb481558,f=e(u),i=__d48fcc3ecf3585518bbce659c1ba4116,c=e(i),l=__cbc0eefc77aa7d958ec51e53ef2568fc,s=e(l),p=__cc21ec7ac4c07d035d1a19269f5d2bb6,b=e(p),_=__a66903f10d803226e4691dfa301c4f3e,v=e(_),w=__06885fcc635bf6a67cb67ec77a6e8b17,y=e(w),x=__7ba2ecf93401318a8fb40e4b0fe295ea,h=e(x),g=__4b4eecf91d77990b080189047604b709,m=e(g),O="skate.ready",M={bubbles:!1,cancelable:!1};return o["default"]=function(e){var n=(0,c["default"])(e),o=(0,h["default"])(e),a=t(e);return function(){var t=(0,d["default"])(this,"lifecycle/"+e.id),u=e.isNative,i=this.hasAttribute("resolved");if(!t.created){t.created=!0;var c=r(this,a);u||e.attribute&&(0,s["default"])(this),u||e.prototype&&o(this),e.properties&&(0,v["default"])(this,c),e.events&&n(this),e.created&&e.created(this),i||e.render&&e.render(this),e.properties&&(0,y["default"])(this,c),e.ready&&e.ready(this),(0,f["default"])(this,O,M),i||(0,m["default"])(this,e)}}},n.exports=o["default"],n.exports}.call(this),("undefined"==typeof window?global:window).__afcda96357b2c6b7e23ccb9ac8b92f43=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=!1;return function(){for(var r=this,n=arguments.length,o=Array(n),a=0;n>a;a++)o[a]=arguments[a];t||(t=!0,setTimeout(function(){t=!1,e.apply(r,o)},1))}},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__46b087e8c15b2e0ebc2c4d4cbc36d975=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__43714db526496b3dd90353996f6dce09,o=e(n);return r["default"]={attached:function(){},attribute:function(){},created:function(){},detached:function(){},events:{},"extends":"",id:"",properties:{},prototype:{},resolvedAttribute:"resolved",ready:function(){},type:o["default"],unresolvedAttribute:"unresolved"},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__8e93439e8a566d1586c9903a75a6a785=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__18291b0452e01f65cf28d6695040736a,o=e(n);return r["default"]=function(e){return function(){var t=(0,o["default"])(this,"lifecycle/"+e.id);t.detached||(t.detached=!0,t.attached=!1,e.detached(this))}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__a56dab24700df352eb84caec3fe615e5=function(){function e(e){return e&&e.__esModule?e:{"default":e}}var t={exports:{}},r=t.exports;Object.defineProperty(r,"__esModule",{value:!0});var n=__092f8936e5006bddcb3baf24320a5a06,o=e(n),a=window.Element;return r["default"]=function(e){for(var t=e;t instanceof a;){if((0,o["default"])(t))return t;t=t.parentNode}},t.exports=r["default"],t.exports}.call(this),("undefined"==typeof window?global:window).__c88e1e3ebc3bc643629f4b153969a85f=function(){function e(t,r){var n=t.childNodes;if(n)for(var o=n.length,a=0;o>a;a++){var d=n[a];r(d,t),e(d,r)}}function t(){var t=Object.getOwnPropertyDescriptor(d,"innerHTML"),r=function(){return t.get.call(this)};r._hasBeenEnhanced=!0,Object.defineProperty(d,"innerHTML",{get:r,set:function(r){e(this,function(e,t){var r=document.createEvent("MutationEvent");r.initMutationEvent("DOMNodeRemoved",!0,!1,t,null,null,null,null),e.dispatchEvent(r)}),t.set.call(this,r)}})}var r={exports:{}},n=(r.exports,/MSIE/.test(navigator.userAgent)),o=/Trident/.test(navigator.userAgent),a=n||o,d=window.HTMLElement.prototype;if(a){var u=Object.getOwnPropertyDescriptor(d,"innerHTML"),f=!!u&&u.get._hasBeenEnhanced;f||(o&&(window.MutationObserver=window.JsMutationObserver||window.MutationObserver),t())}return r.exports}.call(this),("undefined"==typeof window?global:window).__d8200645c4d96aee6940034d9c030d1f=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){(0,b["default"])(e,function(e){for(var t=s["default"].find(e),r=t.length,n=0;r>n;n++)t[n].prototype.createdCallback.call(e);for(var n=0;r>n;n++)t[n].prototype.attachedCallback.call(e)})}function r(e){(0,b["default"])(e,function(e){for(var t=s["default"].find(e),r=t.length,n=0;r>n;n++)t[n].prototype.detachedCallback.call(e)})}function n(e){for(var n=e.length,o=0;n>o;o++){var a=e[o].addedNodes,d=e[o].removedNodes;a&&a.length&&!(0,c["default"])(a[0].parentNode)&&t(a),d&&d.length&&r(d)}}function o(){var e=new window.MutationObserver(n);return e.observe(document,{childList:!0,subtree:!0}),e}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0});var u=__dd77578495c1d19b0e115627616ea63a,f=e(u),i=__a56dab24700df352eb84caec3fe615e5,c=e(i),l=__9cff21a9f41cc9ecfe56139e1040c954,s=e(l),p=__164e5750c20526cb74a9e443b730eeff,b=e(p);return __c88e1e3ebc3bc643629f4b153969a85f,d["default"]=f["default"].registerIfNotExists("observer",{observer:void 0,register:function(){return this.observer||(this.observer=o()),this},unregister:function(){return this.observer&&(this.observer.disconnect(),this.observer=void 0),this}}),a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__c6f5e18624750ce93a74df6369c85ef0=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return"function"==typeof document.registerElement},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__6e1dfed2b03894ef63a4b65d5038d223=function(){var e={exports:{}},t=e.exports;return Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];return e.indexOf("-")>0&&e.toLowerCase()===e&&t.indexOf(e)<0},e.exports=t["default"],e.exports}.call(this),("undefined"==typeof window?global:window).__abb93179bdc0236a6e77d3eae07c991c=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(e){var t=(0,P["default"])({},V["default"]);for(var r in V["default"])void 0!==e[r]&&(t[r]=e[r]);for(var n in e)t[n]=e[n];return t}function r(e,t){function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return(0,M["default"])(new e,t)}r.prototype=e.prototype,Object.defineProperty(r.prototype,"constructor",{configurable:!0,enumerable:!1,value:r,writable:!1});var n=Object.getOwnPropertyDescriptor(r,"name");return n&&n.configurable&&Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.id,writable:!1}),r}function n(e){function t(){var t=r.create(e);return e.prototype.createdCallback.call(t),t}var r=e.type;return t.prototype=e.prototype,t}function o(e,o){var a=void 0,d=void 0,u=t(o);return u.id=e,u.isNative=u.type===q["default"]&&(0,R["default"])()&&(0,W["default"])(e),d=(u["extends"]?document.createElement(u["extends"]).constructor:X).prototype,d.isPrototypeOf(u.prototype)||(u.prototype=(0,P["default"])(Object.create(d),u.prototype)),u.prototype.createdCallback=(0,T["default"])(u),u.prototype.attachedCallback=(0,E["default"])(u),u.prototype.detachedCallback=(0,H["default"])(u),u.prototype.attributeChangedCallback=(0,N["default"])(u),u.isNative?a=document.registerElement(e,{"extends":u["extends"]||void 0,prototype:u.prototype}):(a=n(u),Y(),B["default"].register()),a=r(a,u),(0,P["default"])(a,u),F["default"].set(e,a),a}var a={exports:{}},d=a.exports;Object.defineProperty(d,"__esModule",{value:!0});var u=__1675a7174b713323cc232370699a2714,f=e(u),i=__639a0d2e0f8a90cd72e6197bdb481558,c=e(i),l=__ef86f48ff9050407fed1e142d9fe2629,s=e(l),p=__3add36046399fead5a83243849207ed7,b=e(p),_=__db9d338f5bdfd7eb6a3bcf299ff15f91,v=e(_),w=__83ca289f5309abef55c338a9f7a22385,y=e(w),x=__d31d2ff71da7095bf8886568461d8537,h=e(x),g=__662bde51c096e9d79bf327311ea178e0,m=e(g),O=__bbda433df4ec72c4488e3a2f0e6a59a1,M=e(O),j=__d9d26492984e649e5130081ad32bafd6,P=e(j),A=__2b55a083f45c9ef157662a1dc1674218,E=e(A),k=__9f17962f9aa326a94ed3e5d6f6b172e6,N=e(k),C=__fe1aef0db5b664068b470b21f7c754a5,T=e(C),S=__afcda96357b2c6b7e23ccb9ac8b92f43,L=e(S),z=__46b087e8c15b2e0ebc2c4d4cbc36d975,V=e(z),D=__8e93439e8a566d1586c9903a75a6a785,H=e(D),I=__d8200645c4d96aee6940034d9c030d1f,B=e(I),K=__9cff21a9f41cc9ecfe56139e1040c954,F=e(K),J=__c6f5e18624750ce93a74df6369c85ef0,R=e(J),Z=__43714db526496b3dd90353996f6dce09,q=e(Z),G=__164e5750c20526cb74a9e443b730eeff,Q=e(G),U=__6e1dfed2b03894ef63a4b65d5038d223,W=e(U),X=window.HTMLElement,Y=(0,L["default"])(function(){(0,Q["default"])(document.documentElement.childNodes,function(e){for(var t=F["default"].find(e),r=t.length,n=0;r>n;n++)t[n].prototype.createdCallback.call(e);for(var n=0;r>n;n++)t[n].prototype.attachedCallback.call(e)})});return o.create=f["default"],o.emit=c["default"],o.fragment=s["default"],o.init=b["default"],o.properties=v["default"],o.ready=y["default"],o.render=h["default"],o.version=m["default"],d["default"]=o,a.exports=d["default"],a.exports}.call(this),("undefined"==typeof window?global:window).__9a43120147a4f5a325d55b702c284d36=function(){function e(e){return e&&e.__esModule?e:{"default":e}}function t(){return window.skate=d,this}var r={exports:{}},n=r.exports;Object.defineProperty(n,"__esModule",{value:!0});var o=__abb93179bdc0236a6e77d3eae07c991c,a=e(o),d=window.skate;return a["default"].noConflict=t,window.skate=a["default"],n["default"]=a["default"],r.exports=n["default"],r.exports}.call(this);;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:skate-AMD', location = '/static/lib/skate-AMD.js' */
define("skate",function(){return window.skate.noConflict()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:bb-panel', location = '/static/bitbucket/internal/bbui/bb-panel/bb-panel.js' */
define("bitbucket/internal/bbui/bb-panel/bb-panel",["module","exports","aui","jquery","skate"],function(k,e,b,l,m){function n(a,c){var d=document.getElementById(a.getAttribute("anchor-to"));d&&c(d)}function g(a){n(a,function(c){var d=(0,h.default)(c),b=d.offset();c=Math.floor(b.left);d=Math.floor(b.top+d.outerHeight());a.style.transform="translate3d("+c+"px, "+d+"px, 0)"});f.default.layer(a).show()}Object.defineProperty(e,"__esModule",{value:!0});var f=babelHelpers.interopRequireDefault(b),h=babelHelpers.interopRequireDefault(l);
b=babelHelpers.interopRequireDefault(m);b=(0,b.default)("bb-panel",{properties:{"aria-hidden":b.default.properties.string({attribute:!0,"default":"true",set:function(a,c){a.open="false"===c.newValue}}),open:b.default.properties.boolean({attribute:!0,"default":!1,set:function(a,c){c.oldValue!==c.newValue&&document.body.contains(a)&&(c.newValue?g(a):f.default.layer(a).hide())}})},attached:function(a){var c=!a.hasAttribute("aria-hidden"),b=a.hasAttribute("open");if(c||a.open!==b)b?g(a):f.default.layer(a).hide()},
render:function(a){(0,h.default)(a).addClass("aui-layer")}});e.default=b;k.exports=e["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-bbui-components:analytics', location = '/static/bitbucket/internal/bbui/analytics/analytics.js' */
define("bitbucket/internal/bbui/analytics/analytics",["module","exports","../javascript-errors/javascript-errors"],function(b,a,c){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function a(){babelHelpers.classCallCheck(this,a)}babelHelpers.createClass(a,[{key:"trigger",value:function(a,b){throw new c.NotImplementedError;}}]);return a}();a.default=d;b.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-analytics', location = '/static/bitbucket/internal/impl/analytics.js' */
define("bitbucket/internal/impl/analytics",["module","exports","aui","bitbucket/internal/bbui/analytics/analytics","bitbucket/internal/util/object"],function(d,a,e,f,g){function b(){c.default.call(this)}Object.defineProperty(a,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(e),c=babelHelpers.interopRequireDefault(f);babelHelpers.interopRequireDefault(g).default.inherits(b,c.default);b.prototype.trigger=function(a,b){h.default.trigger("analytics",{name:a,data:b})};a.default=new b;
d.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:bitbucket-request', location = '/static/bitbucket/internal/impl/request.js' */
define("bitbucket/internal/impl/request",["module","exports","bitbucket/util/server"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});b=babelHelpers.interopRequireDefault(b);a.default={rest:b.default.rest};c.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/component/quick-search/quick-search-loader.js' */
define("bitbucket/internal/component/quick-search-loader",["jquery","bitbucket/util/state","bitbucket/internal/feature/quick-search/quick-search","bitbucket/internal/util/shortcuts","exports"],function(c,b,d,e,f){f.onReady=function(a){a=new d(c(a),{project:b.getProject(),repository:b.getRepository()});e.bind("focusQuickSearch",a.focus.bind(a))}});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/quick-search.js' */
define("bitbucket/internal/feature/quick-search/quick-search","module exports aui jquery lodash bitbucket/internal/impl/request bitbucket/internal/impl/search-urls bitbucket/internal/impl/urls ../search-common/search-entities ../search-common/search-request ./internal/analytics bitbucket/internal/bbui/avatars/avatars bitbucket/internal/bbui/bb-panel/bb-panel".split(" "),function(p,l,k,q,r,t,u,v,w,x,y){function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(l,"__esModule",{value:!0});
var d=g(k),h=g(q),z=g(r),A=g(t),B=g(u),n=g(v),C=g(w),m=g(y),D=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var b=arguments[a],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(e[c]=b[c])}return e},E=function(){function e(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(a,b,c){b&&e(a.prototype,b);c&&e(a,c);return a}}();k=function(){function e(a,b){var c=
this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.options=D({},e.defaultOptions,b);this.useContext=!(!this.options.project&&!this.options.repository);this.focusClass=this.options.focusClass||"focus";this.navigableClass=this.options.navigableClass||"navigable";this._doRepoSearch=z.default.debounce(function(a){3<=a.length&&c.doRepoSearch(a)},200);var f=(0,h.default)(bitbucket.internal.component.quickSearch.searchBox({searchUrl:n.default.search()}));(0,h.default)(a).replaceWith(f);
this.$input=f.find("#quick-search");var d=(0,h.default)(bitbucket.internal.component.quickSearch.searchPanel());d.appendTo((0,h.default)("body"));this.panel=d[0];this.$quickSearchBox=f.closest(".aui-quicksearch");this.$spinner=f.find(".spinner");this.$searchMainPanel=d.find(".quick-search-main");this.$searchErrorPanel=d.find(".quick-search-error");this.$searchResults=d.find(".quick-search-results");this.$searchResults.on("mouseover","."+this.navigableClass,function(a){a=(0,h.default)(a.target).closest(".result");
c._focusResult(a)});this.$searchResults.on("mouseleave","."+this.navigableClass,function(){c._blurResults()});this.$searchResults.on("click","a",function(a){a=(0,h.default)(a.currentTarget);a.hasClass("repository-link")?m.default.resultClicked({project:c.options.project,repository:c.options.repository,clickedProjectId:a.attr("data-project-id"),clickedRepoId:a.attr("data-repo-id")}):a.hasClass("code-link")});this.$input.on("focus",function(a){return c._onFocus(a)});this.$input.on("keyup",function(a){return c._onKeyUp(a)});
this.$input.on("keydown",function(a){return c._onKeyDown(a)});f.on("submit",function(a){return a.preventDefault()})}E(e,[{key:"doCodeSearch",value:function(a){this._updateSearchTerms(a);window.location=this.$searchResults.find(".code-link").attr("href")}},{key:"doRepoSearch",value:function(a){var b=this,c=Date.now();this._spinnerStart();this.$searchResults.removeClass("search-complete").addClass("search-inprogress");this.currentSearchRequest&&this.currentSearchRequest.abort();this.currentSearchRequest=
A.default.rest({type:"POST",url:B.default.searchRestUrl(),data:(0,x.searchFor)(a,[C.default.REPOSITORIES],{primary:9}),statusCode:{"*":!1}});this.currentSearchRequest.done(function(d){b.currentSearchTerms=a;b.$searchErrorPanel.hide();b.$searchMainPanel.show();m.default.resultsLoaded({project:b.options.project,repository:b.options.repository,time:Date.now()-c,query:a});d=bitbucket.internal.component.quickSearch.repositoryResults({repos:d.repositories.values,totalRepoCount:d.repositories.count});b.$searchResults.find(".repository-heading").remove();
b.$searchResults.find(".repository").remove();b.$searchResults.append(d);b.$searchResults.addClass("search-complete")}).fail(function(a,c){"abort"!==c&&(b.$searchMainPanel.hide(),b.$searchErrorPanel.show())}).always(function(){b.currentSearchRequest=null;b.$searchResults.removeClass("search-inprogress");b._spinnerStop()})}},{key:"focus",value:function(){this.$input.focus()}},{key:"_setInputAttribute",value:function(a,b){this.$input.get(0).setAttribute(a,b)}},{key:"_getQuery",value:function(){return this.$input.val().trim()}},
{key:"_getContext",value:function(){var a="";this.options.repository?a="project:"+this.options.project.key+" repo:"+this.options.repository.slug:this.options.project&&(a="project:"+this.options.project.key);return a}},{key:"_blurResults",value:function(){var a=this;this.$searchResults.find("."+this.navigableClass+"."+this.focusClass).removeClass(this.focusClass);setTimeout(function(){return a._setInputAttribute("aria-activedescendant",null)},50)}},{key:"_focusResult",value:function(a){var b=this;
this._blurResults();a.addClass(this.focusClass);setTimeout(function(){return b._setInputAttribute("aria-activedescendant",a.find('[role\x3d"option"]').attr("id"))},50)}},{key:"_handleUpAndDownKeys",value:function(a){a.preventDefault();var b=this.$searchResults.find("."+this.navigableClass+"."+this.focusClass),c=void 0;0===b.length?a.keyCode===d.default.keyCode.DOWN?c=this.$searchResults.find("."+this.navigableClass+":first"):a.keyCode===d.default.keyCode.UP&&(c=this.$searchResults.find("."+this.navigableClass+
":last")):a.keyCode===d.default.keyCode.DOWN?c=b.nextAll("."+this.navigableClass).first():a.keyCode===d.default.keyCode.UP&&(c=b.prevAll("."+this.navigableClass).first());0!==c.length&&this._focusResult(c)}},{key:"_onFocus",value:function(){var a=this._getQuery();this._updatePanel(3<=a.length);m.default.focused({project:this.options.project,repository:this.options.repository})}},{key:"_onKeyDown",value:function(a){if(a.keyCode===d.default.keyCode.DOWN||a.keyCode===d.default.keyCode.UP)a.preventDefault(),
this._handleUpAndDownKeys(a)}},{key:"_onKeyUp",value:function(a){var b=this._getQuery();this._updatePanel(a.keyCode!==d.default.keyCode.ESCAPE&&3<=b.length);if(a.keyCode===d.default.keyCode.ENTER){var c=this.$searchResults.find(".repository."+this.focusClass);0<c.length?c.find("a")[0].click():1<=b.length&&this.doCodeSearch(b);a.preventDefault()}else a.keyCode!==d.default.keyCode.LEFT&&a.keyCode!==d.default.keyCode.UP&&a.keyCode!==d.default.keyCode.RIGHT&&a.keyCode!==d.default.keyCode.DOWN&&a.keyCode!==
d.default.keyCode.ESCAPE&&(this._updateSearchTerms(b),this.currentSearchRequest&&(this.currentSearchRequest.abort(),this.currentSearchRequest=null),this._doRepoSearch(b))}},{key:"_spinnerStart",value:function(){this.$quickSearchBox.addClass("loading");this.$spinner.spin();this._setInputAttribute("aria-busy",!0)}},{key:"_spinnerStop",value:function(){this.$spinner.spinStop();this.$quickSearchBox.removeClass("loading");this._setInputAttribute("aria-busy",!1)}},{key:"_updateSearchTerms",value:function(a){var b=
this.useContext?this._getContext()+" "+a:a;(0,h.default)("#code-result").toggleClass("hidden",3>a.length).attr("title",d.default.format("Search for \u0022{0}\u0022 in code",a)).attr("href",n.default.search(b)).find(".terms").text(a)}},{key:"_updatePanel",value:function(a){if(a){var b=this._getQuery();this.currentSearchTerms!==b&&(this.$searchResults.empty().html(bitbucket.internal.component.quickSearch.codeResult()),this._updateSearchTerms(b));0===this.$searchResults.find("."+this.focusClass).length&&
this._focusResult(this.$searchResults.find("."+this.navigableClass).first())}else this._blurResults();this.panel.open=a;this._setInputAttribute("aria-expanded",a)}}]);return e}();l.default=k;k.defaultOptions={project:null,repository:null};p.exports=l["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/quick-search.soy' */
// This file was automatically generated from quick-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.component.quickSearch.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.component == 'undefined') { bitbucket.internal.component = {}; }
if (typeof bitbucket.internal.component.quickSearch == 'undefined') { bitbucket.internal.component.quickSearch = {}; }


bitbucket.internal.component.quickSearch.searchBox = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<form class="aui-quicksearch" method="GET" action="' + soy.$$escapeHtml(opt_data.searchUrl) + '"><div class="quick-search-trigger"><label class="assistive" for="quick-search">' + soy.$$escapeHtml('Search for code or repositories') + '</label><input id="quick-search" name="q" type="text" autocomplete="off" placeholder="' + soy.$$escapeHtml('Search for code or repositories...') + '" aria-autocomplete="both" aria-controls="quick-search-dialog" aria-expanded="false" aria-haspopup="true" aria-activedescendant="" role="combobox" /><div class="spinner"></div></div></form>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.searchBox.soyTemplateName = 'bitbucket.internal.component.quickSearch.searchBox';
}


bitbucket.internal.component.quickSearch.searchPanel = function(opt_data, opt_ignored) {
  return '<bb-panel id="quick-search-dialog" anchor-to="quick-search" role="listbox"><div class="quick-search-error"><div class="content"><div class="warning-icon"></div><div class="error-text"><div class="error-text-primary">' + soy.$$escapeHtml('Search is currently unavailable') + '</div><div class="error-text-secondary">' + soy.$$escapeHtml('Refresh the page and try again') + '</div></div></div><div class="footer">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('Need help? Troubleshoot search')) + '</div></div><div class="quick-search-main"><ul id="quick-search-results" class="quick-search-results search-result-list" role="presentation">' + bitbucket.internal.component.quickSearch.codeResult(null) + '</ul></div></bb-panel>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.searchPanel.soyTemplateName = 'bitbucket.internal.component.quickSearch.searchPanel';
}


bitbucket.internal.component.quickSearch.codeResult = function(opt_data, opt_ignored) {
  return '<li class="code result navigable"><a id="code-result" class="code-link" role="option" title=""><div class="code-search-hint" aria-hidden="true"><span class="aui-icon aui-icon-small aui-iconfont-search"></span>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d\x22start\x22\x3eSearch for \x26lsquo;\x3c/span\x3e\x3cspan class\x3d\x22terms\x22\x3eterms\x3c/span\x3e\x3cspan class\x3d\x22end\x22\x3e\x26rsquo; in code\x3c/span\x3e')) + '</div></a></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.codeResult.soyTemplateName = 'bitbucket.internal.component.quickSearch.codeResult';
}


bitbucket.internal.component.quickSearch.repositoryResults = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.totalRepoCount > 0) ? '<li class="repository-heading"><h2 class="section-title">' + soy.$$escapeHtml('Repositories') + '</h2><aui-badge>' + soy.$$escapeHtml(require('bitbucket/internal/util/text').capInt(opt_data.totalRepoCount, 99)) + '</aui-badge></li>' : '');
  var repoList32 = opt_data.repos;
  var repoListLen32 = repoList32.length;
  for (var repoIndex32 = 0; repoIndex32 < repoListLen32; repoIndex32++) {
    var repoData32 = repoList32[repoIndex32];
    output += '<li class="repository result navigable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><a id="repository-result-' + soy.$$escapeHtml(repoIndex32) + '" class="repository-link" data-proj-key="' + soy.$$escapeHtml(repoData32.project.key) + '" data-repo-slug="' + soy.$$escapeHtml(repoData32.slug) + '" data-repo-id="' + soy.$$escapeHtml(repoData32.id) + '" data-project-id="' + soy.$$escapeHtml(repoData32.project.id) + '" href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(repoData32.project).repo(repoData32).browse().build()) + '" role="option" title="' + soy.$$escapeHtml(AJS.format('{0} / {1}',repoData32.project.name,repoData32.name)) + '">' + bitbucket.internal.component.quickSearch.repositoryItemContent({repository: repoData32}) + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.repositoryResults.soyTemplateName = 'bitbucket.internal.component.quickSearch.repositoryResults';
}


bitbucket.internal.component.quickSearch.repositoryItemContent = function(opt_data, opt_ignored) {
  return bitbucket.internal.component.avatars.projectAvatar({size: 'small', project: opt_data.repository.project, extraAttributes: 'aria-hidden="true"'}) + '<span class="project-and-repository" aria-hidden="true"><span class="project-name">' + soy.$$escapeHtml(opt_data.repository.project.name) + '</span><span class="separator">/</span><span class="name">' + soy.$$escapeHtml(opt_data.repository.name) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.component.quickSearch.repositoryItemContent.soyTemplateName = 'bitbucket.internal.component.quickSearch.repositoryItemContent';
}
;
;
/* module-key = 'com.atlassian.bitbucket.search.bitbucket-search-query:quick-search-client-resources', location = '/bitbucket/internal/feature/quick-search/internal/analytics.js' */
define("bitbucket/internal/feature/quick-search/internal/analytics",["module","exports","bitbucket/internal/impl/analytics","bitbucket/internal/impl/search-analytics-utils","../../search-common/analytics"],function(l,f,b,e,m){function g(a,d){var c={context:n.default.getPageContext()};d&&(c["repository.id"]=d.id);a&&(c["project.id"]=a.id);return c}Object.defineProperty(f,"__esModule",{value:!0});var h=b&&b.__esModule?b:{default:b},n=e&&e.__esModule?e:{default:e},k=Object.assign||function(a){for(var d=
1;d<arguments.length;d++){var c=arguments[d],b;for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}return a};f.default={focused:function(a){a=g(a.project,a.repository);h.default.trigger("bitbucket.ui.quick-search.focused",a)},resultsLoaded:function(a){a=k({time:a.time},(0,m.queryAttributes)(a.query),g(a.project,a.repository));h.default.trigger("bitbucket.ui.quick-search.results.loaded",a)},resultClicked:function(a){a=k({"clicked.project.id":a.clickedProjectId,"clicked.repository.id":a.clickedRepoId},
g(a.project,a.repository));h.default.trigger("bitbucket.ui.quick-search.result.clicked",a)}};l.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-item', location = '/static/bitbucket/internal/feature/repository/repository-item/repository-item.soy' */
// This file was automatically generated from repository-item.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.repositoryItem = function(opt_data, opt_ignored) {
  return '<span class="repository-item" title="' + soy.$$escapeHtml(opt_data.repository.project.name) + ' / ' + soy.$$escapeHtml(opt_data.repository.name) + '" data-id="' + soy.$$escapeHtml(opt_data.repository.id) + '" data-repository="' + soy.$$escapeHtml(JSON.stringify(opt_data.repository).replace(/\//g, '\\/')) + '">' + bitbucket.internal.feature.repository.repositoryItemContent({avatarTagName: 'span', repository: opt_data.repository}) + '</span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.repositoryItem.soyTemplateName = 'bitbucket.internal.feature.repository.repositoryItem';
}


bitbucket.internal.feature.repository.repositoryItemContent = function(opt_data, opt_ignored) {
  return bitbucket.internal.feature.project.avatar({size: 'xsmall', project: opt_data.repository.project, tagName: opt_data.avatarTagName}) + '<span class="project-and-repository" title="' + soy.$$escapeHtml(opt_data.repository.project.name) + ' / ' + soy.$$escapeHtml(opt_data.repository.name) + '"><span class="project-name">' + ((opt_data.projectNameContent) ? soy.$$filterNoAutoescape(opt_data.projectNameContent) : soy.$$escapeHtml(opt_data.repository.project.name)) + '</span><span class="separator">/</span><span class="name">' + ((opt_data.repositoryNameContent) ? soy.$$filterNoAutoescape(opt_data.repositoryNameContent) : soy.$$escapeHtml(opt_data.repository.name)) + '</span></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.repositoryItemContent.soyTemplateName = 'bitbucket.internal.feature.repository.repositoryItemContent';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:repository-menu-items', location = '/static/bitbucket/internal/feature/repository/menu-items/repository-menu-items.soy' */
// This file was automatically generated from repository-menu-items.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.repository.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.repository == 'undefined') { bitbucket.internal.feature.repository = {}; }


bitbucket.internal.feature.repository.menuItems = function(opt_data, opt_ignored) {
  var output = '';
  var repoList3 = opt_data.repos;
  var repoListLen3 = repoList3.length;
  for (var repoIndex3 = 0; repoIndex3 < repoListLen3; repoIndex3++) {
    var repoData3 = repoList3[repoIndex3];
    output += '<li class="repository-item repository-menu-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><a data-proj-key="' + soy.$$escapeHtml(repoData3.project.key) + '" data-repo-slug="' + soy.$$escapeHtml(repoData3.slug) + '" data-repo-id="' + soy.$$escapeHtml(repoData3.id) + '" href="' + soy.$$escapeHtml(require('bitbucket/util/navbuilder').project(repoData3.project.key).repo(repoData3.slug).browse().build()) + '" title="' + soy.$$escapeHtml(AJS.format('Go to repository \x22{0}\x22 in project \x22{1}\x22',repoData3.name,repoData3.project.name)) + '">' + bitbucket.internal.feature.repository.repositoryItemContent({repository: repoData3, projectNameContent: require('bitbucket/internal/util/highlight-text').highlight(repoData3.project.name, opt_data.projectHighlightText, 'i'), repositoryNameContent: require('bitbucket/internal/util/highlight-text').highlight(repoData3.name, opt_data.repositoryHighlightText, 'i')}) + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  bitbucket.internal.feature.repository.menuItems.soyTemplateName = 'bitbucket.internal.feature.repository.menuItems';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:recent-repositories-menu-resources', location = '/static/bitbucket/internal/layout/base/menu/repositories/recent.js' */
define("bitbucket/internal/layout/base/menu/repositories/recent","module exports jquery lodash bitbucket/util/navbuilder bitbucket/internal/util/ajax bitbucket/internal/util/events bitbucket/internal/util/html bitbucket/internal/util/shortcuts".split(" "),function(g,a,h,k,l,m,n,p,q){Object.defineProperty(a,"__esModule",{value:!0});var b=babelHelpers.interopRequireDefault(h),r=babelHelpers.interopRequireDefault(k),t=babelHelpers.interopRequireDefault(l),u=babelHelpers.interopRequireDefault(m),d=babelHelpers.interopRequireDefault(n),
v=babelHelpers.interopRequireDefault(p),w=babelHelpers.interopRequireDefault(q);a.default={initMenu:function(c){c=(0,b.default)("#"+c);var a=(0,b.default)("#"+v.default.sanitizeId(c.attr("aria-controls"))).addClass("recent-repositories-menu"),e=a.find(".recent-repositories-section ul"),f=(0,b.default)(bitbucket.internal.layout.menu.loadingRecentReposMenuItem());w.default.bind("recentRepositories",r.default.ary(b.default.fn.click.bind(c),0));a.on("aui-dropdown2-show",function(){d.default.trigger("bitbucket.internal.ui.nav.repositories.opened")});
a.on("click","a",function(){var a=(0,b.default)(this).closest(".aui-dropdown2-section");a.is(".recent-repositories-section")&&d.default.trigger("bitbucket.internal.ui.nav.repositories.item.clicked",null,{repositoryId:(0,b.default)(this).attr("data-repo-id")});a.is(".public-repo-list-link-section")&&d.default.trigger("bitbucket.internal.ui.nav.repositories.public.clicked")});e.append(f);(0,b.default)(window).on("load",function(){u.default.rest({url:t.default.rest().profile().recent().repos().withParams({avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"xsmall"})}).build(),
statusCode:{"*":function(){return!1}}}).done(function(a){if(a&&a.size){var c=a.values;c.sort(function(a,b){return a.project.name.localeCompare(b.project.name)||a.name.localeCompare(b.name)});e.append((0,b.default)(bitbucket.internal.feature.repository.menuItems({repos:c})))}else e.append((0,b.default)(bitbucket.internal.layout.menu.noRecentReposMenuItem()));d.default.trigger("bitbucket.internal.feature.repositories.recent.loaded",this,a)}).fail(function(){e.append((0,b.default)(bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem()))}).always(function(){f.remove()})})}};
g.exports=a["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:recent-repositories-menu-resources', location = '/static/bitbucket/internal/layout/base/menu/repositories/recent.soy' */
// This file was automatically generated from recent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.layout.menu.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.layout == 'undefined') { bitbucket.internal.layout = {}; }
if (typeof bitbucket.internal.layout.menu == 'undefined') { bitbucket.internal.layout.menu = {}; }


bitbucket.internal.layout.menu.loadingRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span class="loading-recent-repos">' + soy.$$escapeHtml('Loading...') + '</span></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.layout.menu.loadingRecentReposMenuItem.soyTemplateName = 'bitbucket.internal.layout.menu.loadingRecentReposMenuItem';
}


bitbucket.internal.layout.menu.noRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span class="no-recent-repos">' + soy.$$escapeHtml('No recently viewed repositories') + '</span></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.layout.menu.noRecentReposMenuItem.soyTemplateName = 'bitbucket.internal.layout.menu.noRecentReposMenuItem';
}


bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span>' + soy.$$escapeHtml('An error occurred') + '</span></li>';
};
if (goog.DEBUG) {
  bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem.soyTemplateName = 'bitbucket.internal.layout.menu.errorLoadingRecentReposMenuItem';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:reselect', location = '/static/lib/redux/reselect.js' */
(function(e,f){if("function"===typeof define&&define.amd)define("Reselect",["exports"],f);else if("undefined"!==typeof exports)f(exports);else{var h={};f(h);e.Reselect=h}})(this,function(e){function f(a,c){return a===c}function h(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f,k=null,d=null;return function(){var b;a:{b=k;var m=arguments;if(null===b||null===m||b.length!==m.length)b=!1;else{for(var n=b.length,g=0;g<n;g++)if(!c(b[g],m[g])){b=!1;break a}b=!0}}b||(d=a.apply(null,arguments));
k=arguments;return d}}function p(a){a=Array.isArray(a[0])?a[0]:a;if(!a.every(function(a){return"function"===typeof a}))throw a=a.map(function(a){return typeof a}).join(", "),Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+a+"]"));return a}function l(a){for(var c=arguments.length,k=Array(1<c?c-1:0),d=1;d<c;d++)k[d-1]=arguments[d];return function(){for(var b=arguments.length,d=Array(b),c=0;c<b;c++)d[c]=arguments[c];var g=0,e=d.pop(),
f=p(d),l=a.apply(void 0,[function(){g++;return e.apply(null,arguments)}].concat(k)),b=h(function(){for(var a=[],b=f.length,d=0;d<b;d++)a.push(f[d].apply(null,arguments));return l.apply(null,a)});b.resultFunc=e;b.recomputations=function(){return g};b.resetRecomputations=function(){return g=0};return b}}e.__esModule=!0;e.defaultMemoize=h;e.createSelectorCreator=l;e.createStructuredSelector=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:q;if("object"!==typeof a)throw Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+
typeof a);var e=Object.keys(a);return c(e.map(function(d){return a[d]}),function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b,c){a[e[c]]=b;return a},{})})};var q=e.createSelector=l(h)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:reselect', location = '/static/lib/redux/reselect-AMD.js' */
define("Reselect",function(){return window.Reselect});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/components/alerts-list.js' */
define("bitbucket/internal/feature/alerts/components/alerts-list",["exports","classnames","prop-types","react","../constants"],function(c,a,h,e,k){Object.defineProperty(c,"__esModule",{value:!0});c.AlertsList=c.Alert=void 0;var m=babelHelpers.interopRequireDefault(a);a=babelHelpers.interopRequireDefault(h);var d=babelHelpers.interopRequireDefault(e),g=c.Alert=function(b){var a=b.alertKey,c=b.anchorCallback,f=b.anchorText,e=b.anchorLink,g=b.closeable,l=b.closeCallback,h=b.description,k=b.title,n=b.type,
p=b.onRemove;b=function(a){e||a.preventDefault();c&&c()};f=f?d.default.createElement("p",null,e?d.default.createElement("a",{href:e,onClick:b},f):d.default.createElement("button",{className:"aui-button aui-button-link",onClick:c},f)):null;b=g?d.default.createElement("span",{className:"aui-icon icon-close",role:"button",tabIndex:"0",onClick:function(b){b.preventDefault();l&&l();p(a)}}):null;return d.default.createElement("li",{className:(0,m.default)("aui-message",n,{closeable:g})},d.default.createElement("p",
null,d.default.createElement("strong",null,k)," ",h),f,b)};e={alertKey:a.default.string.isRequired,type:a.default.oneOf(k.TYPE).isRequired,title:a.default.string.isRequired,description:a.default.string,anchorText:a.default.string,anchorCallback:a.default.func,anchorLink:a.default.string,closeable:a.default.bool,closeCallback:a.default.func};g.propTypes=babelHelpers.extends({},e,{onRemove:a.default.func.isRequired});(c.AlertsList=function(a){var c=a.alerts,e=a.onRemove;return d.default.createElement("div",
{className:"alerts-list-container"},d.default.createElement("h3",null,a.title),d.default.createElement("ul",{className:"alerts-list"},c.map(function(a){return d.default.createElement(g,babelHelpers.extends({key:a.alertKey},a,{onRemove:e}))})))}).propTypes={alerts:a.default.arrayOf(a.default.shape(e)).isRequired,title:a.default.string.isRequired,onRemove:a.default.func.isRequired}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/components/alerts-empty.js' */
define("bitbucket/internal/feature/alerts/components/alerts-empty",["exports","react","aui"],function(a,c,d){Object.defineProperty(a,"__esModule",{value:!0});a.AlertsEmpty=void 0;var b=babelHelpers.interopRequireDefault(c),e=babelHelpers.interopRequireDefault(d);a.AlertsEmpty=function(){return b.default.createElement("div",{className:"alerts-empty"},b.default.createElement("div",{className:"empty-img"}),b.default.createElement("p",null,"Everything looks good. Well let you know here if theres anything you should know about."))}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/actions.js' */
define("bitbucket/internal/feature/alerts/actions",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.ADD_ALERT="alerts/ADD_ALERT";a.REMOVE_ALERT="alerts/REMOVE_ALERT";a.DIALOG_OPEN="alerts/DIALOG_OPEN";a.DIALOG_CLOSED="alerts/DIALOG_CLOSED"});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-trigger.js' */
define("bitbucket/internal/feature/alerts/alerts-trigger",["module","exports","aui","classnames","./selectors"],function(f,b,c,g,d){Object.defineProperty(b,"__esModule",{value:!0});var h=babelHelpers.interopRequireDefault(c),e=babelHelpers.interopRequireDefault(g);c=function(){function b(a,c){babelHelpers.classCallCheck(this,b);this.$el=a;this.stateStore=c;this.stateStore.subscribe(this.maybeUpdate.bind(this));this.render(this.getAlerts())}babelHelpers.createClass(b,[{key:"getAlerts",value:function(){return(0,
d.alertsBySeverity)(this.stateStore.getState())}},{key:"maybeUpdate",value:function(){var a=this.getAlerts();this.alertCount===a.length&&this.mostSevere===(a&&a[0]&&a[0].type)||this.render(a)}},{key:"render",value:function(a){this.alertCount=a.length;this.mostSevere=a&&a[0]&&a[0].type;if(!a||0===a.length)return this.$el.attr("class",(0,e.default)("alerts-menu",{hidden:!(0,d.dialogOpen)(this.stateStore.getState())})),this.$el.html(bitbucket.internal.feature.alerts.emptyTrigger());a="Alerts";
this.$el.attr("class",(0,e.default)("alerts-menu",this.mostSevere));this.$el.html(bitbucket.internal.feature.alerts.trigger({count:this.alertCount,mostSevereType:this.mostSevere,title:a}))}}]);return b}();b.default=c;f.exports=b["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/reducers.js' */
define("bitbucket/internal/feature/alerts/reducers",["module","exports","lodash","bitbucket/internal/bbui/utils/create-reducer","./actions"],function(g,d,h,e,c){function f(b,a){return babelHelpers.extends({},b,{dialog:babelHelpers.extends({},b.dialog,{open:a})})}Object.defineProperty(d,"__esModule",{value:!0});e=babelHelpers.interopRequireDefault(e);var a;d.default=(0,e.default)({alerts:{},dialog:{open:!1}},(a={},babelHelpers.defineProperty(a,c.ADD_ALERT,function(b,a){return babelHelpers.extends({},
b,{alerts:babelHelpers.extends({},b.alerts,babelHelpers.defineProperty({},a.payload.alertKey,babelHelpers.extends({},a.payload)))})}),babelHelpers.defineProperty(a,c.REMOVE_ALERT,function(b,a){return babelHelpers.extends({},b,{alerts:(0,h.omit)(b.alerts,a.payload)})}),babelHelpers.defineProperty(a,c.DIALOG_CLOSED,function(a){return f(a,!1)}),babelHelpers.defineProperty(a,c.DIALOG_OPEN,function(a){return f(a,!0)}),a));g.exports=d["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/action-creators.js' */
define("bitbucket/internal/feature/alerts/action-creators",["exports","./actions"],function(a,b){Object.defineProperty(a,"__esModule",{value:!0});a.openDialog=a.closeDialog=a.remove=a.add=void 0;a.add=function(a){return{type:b.ADD_ALERT,payload:babelHelpers.extends({alertKey:a.title.toLowerCase().split(" ").join("")+Date.now()},a)}};a.remove=function(a){return{type:b.REMOVE_ALERT,payload:a}};a.closeDialog=function(){return{type:b.DIALOG_CLOSED}};a.openDialog=function(){return{type:b.DIALOG_OPEN}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-init.js' */
function asyncLoadDialog(){return require("bitbucket/internal/feature/alerts/alerts-dialog").onReady}jQuery(function(){var a=jQuery("#alerts-trigger");if(a.length)require("bitbucket/internal/feature/alerts/alerts").onReady(a,asyncLoadDialog)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/containers/alerts.js' */
define("bitbucket/internal/feature/alerts/containers/alerts","exports react aui react-redux ../action-creators ../components/alerts-empty ../components/alerts-list ../selectors".split(" "),function(a,b,e,f,g,h,k,l){Object.defineProperty(a,"__esModule",{value:!0});a.Alerts=void 0;var d=babelHelpers.interopRequireDefault(b),m=babelHelpers.interopRequireDefault(e);b=a.Alerts=function(c){var a=c.alerts;c=c.remove;if(!a||0===a.length)return d.default.createElement(h.AlertsEmpty,null);var b="Alerts";
return d.default.createElement("div",{id:"bitbucket-alerts",className:"bitbucket-alerts"},d.default.createElement(k.AlertsList,{title:b,alerts:a,onRemove:c}))};a.default=(0,f.connect)(function(a){return{alerts:(0,l.alertsBySeverity)(a)}},{remove:g.remove})(b)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-dialog.js' */
define("bitbucket/internal/feature/alerts/alerts-dialog",["exports","react","react-dom","react-redux","./containers/alerts"],function(a,b,d,e,f){Object.defineProperty(a,"__esModule",{value:!0});a.onReady=function(a,b){g.default.render(c.default.createElement(e.Provider,{store:b},c.default.createElement(h.default,null)),a)};var c=babelHelpers.interopRequireDefault(b),g=babelHelpers.interopRequireDefault(d),h=babelHelpers.interopRequireDefault(f)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/selectors.js' */
define("bitbucket/internal/feature/alerts/selectors",["exports","lodash","Reselect","./constants"],function(b,d,c,e){function f(a,b){var c=e.TYPE.indexOf(a.type),d=e.TYPE.indexOf(b.type);return c-d||a.title.localeCompare(b.title)}Object.defineProperty(b,"__esModule",{value:!0});b.dialogOpen=b.alertsBySeverity=void 0;b.alertsBySeverity=(0,c.createSelector)([function(a){return a.ui.alerts}],function(a){return(0,d.values)(a).sort(f)});b.dialogOpen=(0,c.createSelector)([function(a){return a.ui.dialog}],
function(a){return a.open})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts.js' */
define("bitbucket/internal/feature/alerts/alerts","exports aui jquery lodash bitbucket/util/events bitbucket/internal/feature/alerts/reducers bitbucket/internal/util/redux ./action-creators ./alerts-trigger".split(" "),function(c,e,g,h,k,l,m,f,n){Object.defineProperty(c,"__esModule",{value:!0});c.onReady=function(a,b){new p.default(a,d);q.default.InlineDialog(a,"alerts-content",r(b),{width:400,closeOnTriggerClick:!0,hideCallback:function(){return d.dispatch((0,f.closeDialog)())}})};c.add=function(a){return d.dispatch((0,
f.add)(a)).payload.alertKey};var q=babelHelpers.interopRequireDefault(e),t=babelHelpers.interopRequireDefault(g),u=babelHelpers.interopRequireDefault(k);c=babelHelpers.interopRequireDefault(l);var p=babelHelpers.interopRequireDefault(n),d=(0,m.customCreateStore)({ui:c.default}),v=(0,h.once)(function(a){var b=(0,t.default)('\x3cdiv class\x3d"loading-resource-spinner"\x3e\x3c/div\x3e');a.empty().append(b);b.show().spin("medium");return WRM.require("wrc!bitbucket.alerts").then(function(){a.empty()})}),
r=function(a){return function(b,c,e){v(b).done(function(){b.html()||a()(b[0],d)});d.dispatch((0,f.openDialog)());u.default.trigger("bitbucket.internal.ui.alerts.dialog.opened");e()}}});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/alerts-trigger.soy' */
// This file was automatically generated from alerts-trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.feature.alerts.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.feature == 'undefined') { bitbucket.internal.feature = {}; }
if (typeof bitbucket.internal.feature.alerts == 'undefined') { bitbucket.internal.feature.alerts = {}; }


bitbucket.internal.feature.alerts.emptyTrigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-icon-success"></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.alerts.emptyTrigger.soyTemplateName = 'bitbucket.internal.feature.alerts.emptyTrigger';
}


bitbucket.internal.feature.alerts.trigger = function(opt_data, opt_ignored) {
  return '<div><span class="aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(opt_data.mostSevereType) + '">' + soy.$$escapeHtml(opt_data.title) + '</span><span class="alerts-count">' + soy.$$escapeHtml(opt_data.count) + '</span></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.feature.alerts.trigger.soyTemplateName = 'bitbucket.internal.feature.alerts.trigger';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:alerts-dialog', location = '/static/bitbucket/internal/feature/alerts/constants.js' */
define("bitbucket/internal/feature/alerts/constants",["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});a.TYPE=["error","warning","info","success"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox.js' */
define("bitbucket/internal/feature/inbox/inbox","module exports aui jquery lodash bitbucket/util/events bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state".split(" "),function(p,f,q,r,t,u,v,w,x){function y(a){require("bitbucket/internal/feature/inbox/inbox-dialog",null).onReady(a[0])}Object.defineProperty(f,"__esModule",{value:!0});var e=babelHelpers.interopRequireDefault(q),d=babelHelpers.interopRequireDefault(r),h=babelHelpers.interopRequireDefault(t),b=babelHelpers.interopRequireDefault(u),
z=babelHelpers.interopRequireDefault(v),A=babelHelpers.interopRequireDefault(w),k=babelHelpers.interopRequireDefault(x),g,c,l=function(a){a.keyCode===d.default.ui.keyCode.ESCAPE&&(g.hide(),a.preventDefault())},m=function(){g.hide()},C=function(a,c,b){b();(0,d.default)(document).on("keyup",l);e.default.dialog2.on("show",m);(0,d.default)(".aui-dropdown2-active").trigger("aui-button-invoke");B(a,h.default.partial(y,a))},B=h.default.once(function(a,c){var b=(0,d.default)('\x3cdiv class\x3d"loading-resource-spinner"\x3e\x3c/div\x3e');
a.empty().append(b);b.show().spin("medium");WRM.require("wrc!bitbucket.pullRequest.inbox").done(function(){b.spinStop().remove();c()}).always(function(){b.spinStop().remove()})}),D=function(){(0,d.default)(document).off("keyup",l);e.default.dialog2.off("show",m);(0,d.default)(document.activeElement).closest("#inline-dialog-inbox-pull-requests-content").length&&document.activeElement.blur()},n=function(){A.default.rest({url:z.default.rest().addPathComponents("inbox","pull-requests","count").build(),
type:"GET",statusCode:{"*":!1}}).done(function(a){c.attr("aria-label",e.default.format("View your {0} unapproved pull {0,choice,0#requests|1#request|1\u003crequests}",a.count));if(0<a.count){var b=(0,d.default)(aui.badges.badge({text:a.count}));c.html(bitbucket.internal.inbox.triggerIcon({isEmpty:!1})).append(b);setTimeout(function(){b.addClass("visible")},0)}else c.find(".aui-badge").removeClass("visible"),setTimeout(function(){c.html(bitbucket.internal.inbox.triggerIcon({isEmpty:!0}))},500);c.attr("data-countLoaded",!0)})};
f.default={onReady:function(){c=(0,d.default)("#inbox-trigger");c.attr("aria-label","View your unapproved pull requests");if(c.length&&k.default.getCurrentUser()){c.html(bitbucket.internal.inbox.triggerIcon({isEmpty:!0}));g=e.default.InlineDialog(c,"inbox-pull-requests-content",C,{width:800,closeOnTriggerClick:!0,hideCallback:D});n();var a=function(a){a.user.name===k.default.getCurrentUser().name&&n()};b.default.on("bitbucket.internal.widget.approve-button.added",a);b.default.on("bitbucket.internal.widget.approve-button.removed",
a);b.default.on("bitbucket.internal.widget.needs-work.added",a);b.default.on("bitbucket.internal.widget.needs-work.removed",a);b.default.on("bitbucket.internal.feature.pullRequest.self.added",a);b.default.on("bitbucket.internal.feature.pullRequest.self.removed",a)}}};p.exports=f["default"]});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox-dialog.js' */
define("bitbucket/internal/feature/inbox/inbox-dialog","exports aui jquery lodash react react-dom bitbucket/util/navbuilder bitbucket/util/server bitbucket/util/state bitbucket/internal/bbui/inbox/inbox bitbucket/internal/enums".split(" "),function(f,q,r,t,g,u,v,w,x,y,z){Object.defineProperty(f,"__esModule",{value:!0});f.onReady=function(e){var b=A.default.getCurrentUser();e&&b&&(h=e,k.default.render(l.default.createElement(B,{currentUser:b}),e))};var m=babelHelpers.interopRequireDefault(q),n=babelHelpers.interopRequireDefault(r),
l=babelHelpers.interopRequireDefault(g),k=babelHelpers.interopRequireDefault(u),C=babelHelpers.interopRequireDefault(v),D=babelHelpers.interopRequireDefault(w),A=babelHelpers.interopRequireDefault(x),E=babelHelpers.interopRequireDefault(y),p=babelHelpers.interopRequireDefault(z),h=void 0,B=function(e){function b(F){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,F));a.onMorePrsRequested=function(c){a.state[c].loading||
(a.setState(babelHelpers.defineProperty({},c,babelHelpers.extends({},a.state[c],{loading:!0}))),D.default.rest({url:a.getInboxResourceUrlBuilder(c).build(),type:"GET",statusCode:{0:a.handleError,401:a.handleError,500:a.handleError,502:a.handleError}}).done(function(d){a.setState(babelHelpers.defineProperty({},c,babelHelpers.extends({},a.state[c],{pullRequests:a.state[c].pullRequests.concat(d.values),loading:!1,allFetched:d.isLastPage,nextPageStart:(0,t.get)(d,"nextPageStart",0)})))}))};a.getInboxResourceUrlBuilder=
function(c){var d=a.mapTablePropToRole[c];return C.default.rest().addPathComponents("inbox","pull-requests").withParams({role:d,start:a.state[c].nextPageStart,limit:10,avatarSize:bitbucket.internal.widget.avatarSizeInPx({size:"medium"}),withAttributes:!0,state:"OPEN",order:"oldest"})};a.mapTablePropToRole={created:p.default.ParticipantRole.AUTHOR,reviewing:p.default.ParticipantRole.REVIEWER};a.state={created:{pullRequests:[],allFetched:!1,loading:!1,nextPageStart:0,onMoreItemsRequested:function(){return a.onMorePrsRequested("created")}},
reviewing:{pullRequests:[],allFetched:!1,loading:!1,nextPageStart:0,onMoreItemsRequested:function(){return a.onMorePrsRequested("reviewing")}}};return a}babelHelpers.inherits(b,e);babelHelpers.createClass(b,[{key:"handleError",value:function(b,a,c,d){b={};d&&(b=d.errors?d.errors[0]:d);k.default.unmountComponentAtNode(h);(0,n.default)("#inbox .aui-inline-dialog-contents").html((0,n.default)(bitbucket.internal.inbox.error({title:"Could not retrieve inbox",text:b.message||
"An unknown error occurred"})));return!1}},{key:"render",value:function(){var b=this.state;return l.default.createElement(E.default,{created:b.created,currentUser:this.props.currentUser,reviewing:b.reviewing})}}]);return b}(g.Component)});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox.soy' */
// This file was automatically generated from inbox.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bitbucket.internal.inbox.
 */

if (typeof bitbucket == 'undefined') { var bitbucket = {}; }
if (typeof bitbucket.internal == 'undefined') { bitbucket.internal = {}; }
if (typeof bitbucket.internal.inbox == 'undefined') { bitbucket.internal.inbox = {}; }


bitbucket.internal.inbox.triggerIcon = function(opt_data, opt_ignored) {
  return '<span class=\'aui-icon aui-icon-small ' + ((opt_data.isEmpty) ? 'aui-iconfont-workbox-empty' : 'aui-iconfont-workbox') + '\'></span>';
};
if (goog.DEBUG) {
  bitbucket.internal.inbox.triggerIcon.soyTemplateName = 'bitbucket.internal.inbox.triggerIcon';
}


bitbucket.internal.inbox.error = function(opt_data, opt_ignored) {
  return '<div class="focus-message communication-error"><div class="focus-message-icon aui-icon icon-skull"></div><h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.text) + '</p></div>';
};
if (goog.DEBUG) {
  bitbucket.internal.inbox.error.soyTemplateName = 'bitbucket.internal.inbox.error';
}
;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:inbox-dialog', location = '/static/bitbucket/internal/feature/inbox/inbox-init.js' */
jQuery(document).ready(function(){require("bitbucket/internal/feature/inbox/inbox").onReady()});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:commit-preview', location = '/static/bitbucket/internal/widget/commit-preview/commit-preview.js' */
require(["aui","jquery","bitbucket/util/navbuilder","bitbucket/internal/feature/commit/request-commit"],function(d,b,g,h){var e=function(a){var b=a.substring(0,a.substring(750).search(/\s/)+750);return b.length<a.length?b+"\u2026":b},f=function(a){"in"===a.data("tipsy").hoverState&&(a.tipsy("hide"),a.tipsy("show"))};b(function(){b("a.commitid:not(.no-preview), .commit-preview-trigger").tipsy({live:!0,opacity:.98,gravity:function(){return b(this).attr("data-commit-preview-gravity")||b.fn.tipsy.autoNS.call(this)+
b.fn.tipsy.autoWE.call(this)},className:"commit-preview-tipsy",title:function(){var a=b(this),k=a.attr("data-commitid")||a.text(),c=a.attr("data-commit-message");if(c)return e(c);c=g.parse(a.attr("href")).path().match(/.*?\/(projects|users)\/([^\/]+)\/repos\/([^\/]+)\//);h({commitId:k,project:c&&("users"===c[1]?"~":"")+c[2],repo:c&&c[3],statusCode:{404:!1,"*":!1}}).then(function(b){a.attr("data-commit-message",b.message?e(b.message):"No commit message");f(a)},
function(){a.attr("data-commit-message","Commit request failed");f(a)});return "Loading..."}})})});;
;
/* module-key = 'com.atlassian.bitbucket.server.bitbucket-web:upgrade', location = '/static/bitbucket/internal/util/upgrade.js' */
define("bitbucket/internal/util/upgrade",["exports","aui","bitbucket/util/server"],function(a,b,c){Object.defineProperty(a,"__esModule",{value:!0});a.pluginsDisabledAcknowledge=void 0;var d=babelHelpers.interopRequireDefault(b),e=babelHelpers.interopRequireDefault(c);a.pluginsDisabledAcknowledge=function(){var a=d.default.contextPath()+"/mvc/maintenance/upgrade-notification";e.default.rest({url:a,type:"DELETE"})}});;